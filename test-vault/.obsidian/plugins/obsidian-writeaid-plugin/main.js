"use strict";var AE=Object.defineProperty;var Xm=t=>{throw TypeError(t)};var $E=(t,e,r)=>e in t?AE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Q=(t,e,r)=>$E(t,typeof e!="symbol"?e+"":e,r),rd=(t,e,r)=>e.has(t)||Xm("Cannot "+r);var h=(t,e,r)=>(rd(t,e,"read from private field"),r?r.call(t):e.get(t)),ie=(t,e,r)=>e.has(t)?Xm("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),W=(t,e,r,i)=>(rd(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),re=(t,e,r)=>(rd(t,e,"access private method"),r);var su=(t,e,r,i)=>({set _(n){W(t,e,n,r)},get _(){return h(t,e,i)}});const Z=require("obsidian"),Bf=require("fs"),js=require("events"),Wf=require("path"),RE=require("constants"),wg=require("stream"),Li=require("util"),CE=require("assert"),yn=require("buffer"),Ab=require("node:url"),DE=require("node:path"),PE=require("node:fs"),OE=require("node:fs/promises"),kE=require("node:events"),NE=require("node:stream"),FE=require("node:string_decoder"),$b=require("zlib"),Uf={DRAFTS:"drafts",MANUSCRIPTS:"manuscripts",BACKUPS:".writeaid-backups"},Rb={META:"meta.md"},Xd={COMPACT:"compact",KEBAB:"kebab"},As={SINGLE:"single-file",MULTI:"multi-file"},IE=Object.values(As),ft="WriteAid",be=`${ft} debug:`;function rn(t){return(t==null?void 0:t.draftsFolderName)||Uf.DRAFTS}function Cb(t){return(t==null?void 0:t.manuscriptsFolderName)||Uf.MANUSCRIPTS}function xl(t){return(t==null?void 0:t.backupsFolderName)||Uf.BACKUPS}function Pu(t){return(t==null?void 0:t.metaFileName)||Rb.META}function li(t,e=Xd.COMPACT){if(!t)return"";const r=t.trim();return e===Xd.KEBAB?r.replace(/\s+/g,"-").toLowerCase():r.replace(/\s+/g,"").toLowerCase()}async function go(t,e){const r=await Promise.all(t.map(i=>Promise.resolve(e(i))));return t.filter((i,n)=>r[n])}function pt(t,...e){try{return t()}catch(r){if(e.length>0&&e.some(i=>r instanceof i)||e.length===0)return;throw r}}async function sr(t,...e){try{return await t()}catch(r){if(e.length>0&&e.some(i=>r instanceof i)||e.length===0)return;throw r}}function we(...t){pt(()=>{window.__WRITEAID_DEBUG__&&(console.debug||console.log).apply(console,t)})}const LE=Object.freeze(Object.defineProperty({__proto__:null,APP_NAME:ft,DEBUG_PREFIX:be,FILES:Rb,FOLDERS:Uf,PROJECT_TYPE:As,SLUG_STYLE:Xd,VALID_PROJECT_TYPES:IE,asyncFilter:go,debug:we,getBackupsFolderName:xl,getDraftsFolderName:rn,getManuscriptsFolderName:Cb,getMetaFileName:Pu,slugifyDraftName:li,suppress:pt,suppressAsync:sr},Symbol.toStringTag,{value:"Module"}));async function Ma(t,e){const r=t.vault.getAbstractFileByPath(e);if(!r||!(r instanceof Z.TFile))return null;try{const i=await t.vault.read(r);return jE(i)}catch(i){return console.error("Error reading meta file:",i),null}}async function _g(t,e,r){const i=ME(r),n=t.vault.getAbstractFileByPath(e);n&&n instanceof Z.TFile?await t.vault.modify(n,i):await t.vault.create(e,i)}async function uo(t,e,r,i,n){const s=`${e}/meta.md`;let a=await Ma(t,s);a||(a={total_drafts:0});const o=rn(n),l=t.vault.getAbstractFileByPath(`${e}/${o}`);if(l&&l instanceof Z.TFolder){const c=l.children.filter(u=>u instanceof Z.TFolder);a.total_drafts=c.length}r!==void 0&&(a.current_active_draft=r,a.active_draft_last_modified=new Date().toISOString()),i&&Object.assign(a,i),a.total_drafts>0&&a.total_word_count&&(a.average_draft_word_count=Math.round(a.total_word_count/a.total_drafts)),await _g(t,s,a)}function jE(t){const e=t.match(/^---\s*\n([\s\S]*?)\n---/);if(!e)return null;const r=e[1],i={},n=r.split(`
`);for(const s of n){const a=s.match(/^([a-zA-Z_][a-zA-Z0-9_-]*):\s*(.*)$/);if(a){const o=a[1];let l=a[2].trim();/^-?\d+(\.\d+)?$/.test(l)?l=Number(l):(l.startsWith('"')&&l.endsWith('"')||l.startsWith("'")&&l.endsWith("'"))&&(l=l.slice(1,-1)),i[o]=l}}return i}function ME(t){const e=["---"];if(t.current_active_draft!==void 0&&e.push(`current_active_draft: "${t.current_active_draft}"`),e.push(`total_drafts: ${t.total_drafts}`),t.target_word_count!==void 0&&e.push(`target_word_count: ${t.target_word_count}`),t.active_draft_last_modified!==void 0&&e.push(`active_draft_last_modified: "${t.active_draft_last_modified}"`),t.total_word_count!==void 0&&e.push(`total_word_count: ${t.total_word_count}`),t.average_draft_word_count!==void 0&&e.push(`average_draft_word_count: ${t.average_draft_word_count}`),t.project_type!==void 0&&e.push(`project_type: ${t.project_type}`),e.push("---"),e.push(""),e.push("# Project Statistics"),e.push(""),t.current_active_draft&&e.push(`**Active Draft:** ${t.current_active_draft}`),e.push(`**Total Drafts:** ${t.total_drafts}`),t.target_word_count&&e.push(`**Target Word Count:** ${t.target_word_count.toLocaleString()}`),t.active_draft_last_modified){const r=new Date(t.active_draft_last_modified);e.push(`**Last Modified:** ${r.toLocaleString()}`)}return t.total_word_count&&e.push(`**Total Word Count:** ${t.total_word_count.toLocaleString()}`),t.average_draft_word_count&&e.push(`**Average Draft Word Count:** ${t.average_draft_word_count.toLocaleString()}`),e.push(""),e.join(`
`)}const Jd=Object.freeze(Object.defineProperty({__proto__:null,readMetaFile:Ma,updateMetaStats:uo,writeMetaFile:_g},Symbol.toStringTag,{value:"Module"}));async function BE(t,e,r){const i=`${e}/meta.md`,n=await Ma(t,i);if(!n||n.project_type!==As.SINGLE)return new Z.Notice(`Project is not a ${As.SINGLE} project.`),!1;n.project_type=As.MULTI,await _g(t,i,n);const s=rn(r),a=t.vault.getAbstractFileByPath(`${e}/${s}`);if(!a||!(a instanceof Z.TFolder))return new Z.Notice("Drafts folder not found."),!1;let o=!1;for(const l of a.children)if(l instanceof Z.TFolder){const c=li(l.name),u=l.children.find(f=>f instanceof Z.TFile&&f.name===`${c}.md`);if(u){const f=`${l.path}/Chapter 1.md`;if(u.path!==f){const d=await t.vault.read(u);await t.vault.create(f,d),await t.vault.delete(u),o=!0}}}return o?new Z.Notice('Converted to multi-file project. Draft files renamed to "Chapter 1.md".'):new Z.Notice("Converted to multi-file project. No draft files needed renaming."),!0}async function WE(t,e,r){if(!e){new Z.Notice("No active project selected.");return}await BE(t,e,r)}function UE(t){return()=>t.createNewDraftPrompt()}function zE(t){return()=>t.createNewProjectPrompt()}function GE(t){return async()=>{var s;const e=t.projectFileService.drafts,r=t.activeProject,i=t.activeDraft;if(we(`${be} Generate manuscript command called`),we(`${be} Active project: ${r}, active draft: ${i}`),we(`${be} Manager settings manuscript template: ${(s=t.settings)==null?void 0:s.manuscriptNameTemplate}`),!r||!i){new Z.Notice("No active project or draft found.");return}await e.generateManuscript(r,i,t.settings)?new Z.Notice("Manuscript generated successfully."):new Z.Notice("Failed to generate manuscript.")}}function HE(t){return async()=>{const e=t.app.workspace.getActiveFile();if(!e){new Z.Notice("No file is currently open.");return}const r=e.path,i=rn(t.settings),n=r.match(new RegExp(`^(.+)/${i}/(.+)/(.+)\\.md$`));if(!n){new Z.Notice("The current file is not a chapter.");return}const s=n[1],a=n[2],o=n[3];try{const l=await t.projectFileService.chapters.listChapters(s,a),c=l.findIndex(f=>f.name===o);if(c===-1){new Z.Notice("Unable to find the current chapter in the draft.");return}if(c>=l.length-1)return;const u=l[c+1];await t.openChapter(s,a,u.name)}catch(l){console.error("Failed to navigate to next chapter:",l),new Z.Notice("Failed to navigate to next chapter.")}}}function VE(t){return async()=>{const e=t.app.workspace.getActiveFile();if(!e){new Z.Notice("No file is currently open.");return}const r=e.path,i=rn(t.settings),n=r.match(new RegExp(`^(.+)/${i}/(.+)/(.+)\\.md$`));if(!n){new Z.Notice("The current file is not a chapter.");return}const s=n[1],a=n[2],o=n[3];try{const l=await t.projectFileService.chapters.listChapters(s,a),c=l.findIndex(f=>f.name===o);if(c===-1){new Z.Notice("Unable to find the current chapter in the draft.");return}if(c<=0)return;const u=l[c-1];await t.openChapter(s,a,u.name)}catch(l){console.error("Failed to navigate to previous chapter:",l),new Z.Notice("Failed to navigate to previous chapter.")}}}function qE(t){return()=>t.selectActiveProjectPrompt()}function YE(t){return()=>t.switchDraftPrompt()}class Db{constructor(e){this.app=e,we(`${be} TemplateService created`)}async render(e,r={}){let i=e||"";return we(`${be} TemplateService.render called with template: "${i.substring(0,100)}${i.length>100?"...":""}", vars:`,Object.keys(r)),!i.includes("{{")&&!i.includes("}}")?(we(`${be} Template doesn't contain template syntax, checking if it's a file path`),await sr(async()=>{const n=this.app.vault.getAbstractFileByPath(i);n&&n instanceof Z.TFile?(we(`${be} Reading template from file: ${i}`),i=await this.app.vault.read(n),we(`${be} Template loaded from file, length: ${i.length} chars`)):we(`${be} Template path "${i}" is not a valid file, treating as inline template`)})):we(`${be} Template contains template syntax, treating as inline template`),we(`${be} Performing template variable substitution`),i=i.replace(/{{\s*(\w+(?:[-:]\w+)*)\s*}}/g,(n,s)=>{if(r[s]!==void 0)return we(`${be} Substituting variable {{${s}}} with provided value: "${r[s]}"`),r[s];try{const a=window.moment().format(s);return we(`${be} Substituting {{${s}}} with moment.js format: "${a}"`),a}catch{return we(`${be} Neither variable nor moment.js format found for {{${s}}}, returning as-is`),s}}),we(`${be} Template rendering complete, result length: ${i.length} chars`),i}}class KE extends Z.Modal{constructor(e,r){super(e),this.manuscriptPath=r,this.setTitle("Confirm Overwrite")}onOpen(){const{contentEl:e}=this;e.createEl("p",{text:`The manuscript file "${this.manuscriptPath}" already exists. Do you want to overwrite it?`});const r=e.createDiv({cls:"modal-button-container"});new Z.ButtonComponent(r).setButtonText("Cancel").onClick(()=>{this.resolve(!1),this.close()}),new Z.ButtonComponent(r).setButtonText("Overwrite").setCta().onClick(()=>{this.resolve(!0),this.close()})}onClose(){const{contentEl:e}=this;e.empty()}open(){return new Promise(e=>{this.resolve=e,super.open()})}}var Ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ZE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}),r}const QE=typeof process=="object"&&process&&process.platform==="win32";var XE=QE?{sep:"\\"}:{sep:"/"},JE=Pb;function Pb(t,e,r){t instanceof RegExp&&(t=Jm(t,r)),e instanceof RegExp&&(e=Jm(e,r));var i=Ob(t,e,r);return i&&{start:i[0],end:i[1],pre:r.slice(0,i[0]),body:r.slice(i[0]+t.length,i[1]),post:r.slice(i[1]+e.length)}}function Jm(t,e){var r=e.match(t);return r?r[0]:null}Pb.range=Ob;function Ob(t,e,r){var i,n,s,a,o,l=r.indexOf(t),c=r.indexOf(e,l+1),u=l;if(l>=0&&c>0){if(t===e)return[l,c];for(i=[],s=r.length;u>=0&&!o;)u==l?(i.push(u),l=r.indexOf(t,u+1)):i.length==1?o=[i.pop(),c]:(n=i.pop(),n<s&&(s=n,a=c),c=r.indexOf(e,u+1)),u=l<c&&l>=0?l:c;i.length&&(o=[s,a])}return o}var kb=JE,Nb=rx,Fb="\0SLASH"+Math.random()+"\0",Ib="\0OPEN"+Math.random()+"\0",Sg="\0CLOSE"+Math.random()+"\0",Lb="\0COMMA"+Math.random()+"\0",jb="\0PERIOD"+Math.random()+"\0";function id(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function ex(t){return t.split("\\\\").join(Fb).split("\\{").join(Ib).split("\\}").join(Sg).split("\\,").join(Lb).split("\\.").join(jb)}function tx(t){return t.split(Fb).join("\\").split(Ib).join("{").split(Sg).join("}").split(Lb).join(",").split(jb).join(".")}function Mb(t){if(!t)return[""];var e=[],r=kb("{","}",t);if(!r)return t.split(",");var i=r.pre,n=r.body,s=r.post,a=i.split(",");a[a.length-1]+="{"+n+"}";var o=Mb(s);return s.length&&(a[a.length-1]+=o.shift(),a.push.apply(a,o)),e.push.apply(e,a),e}function rx(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Tl(ex(t),!0).map(tx)):[]}function ix(t){return"{"+t+"}"}function nx(t){return/^-?0\d/.test(t)}function sx(t,e){return t<=e}function ax(t,e){return t>=e}function Tl(t,e){var r=[],i=kb("{","}",t);if(!i)return[t];var n=i.pre,s=i.post.length?Tl(i.post,!1):[""];if(/\$$/.test(i.pre))for(var a=0;a<s.length;a++){var o=n+"{"+i.body+"}"+s[a];r.push(o)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),u=l||c,f=i.body.indexOf(",")>=0;if(!u&&!f)return i.post.match(/,(?!,).*\}/)?(t=i.pre+"{"+i.body+Sg+i.post,Tl(t)):[t];var d;if(u)d=i.body.split(/\.\./);else if(d=Mb(i.body),d.length===1&&(d=Tl(d[0],!1).map(ix),d.length===1))return s.map(function(q){return i.pre+d[0]+q});var p;if(u){var g=id(d[0]),m=id(d[1]),w=Math.max(d[0].length,d[1].length),v=d.length==3?Math.abs(id(d[2])):1,y=sx,b=m<g;b&&(v*=-1,y=ax);var T=d.some(nx);p=[];for(var L=g;y(L,m);L+=v){var H;if(c)H=String.fromCharCode(L),H==="\\"&&(H="");else if(H=String(L),T){var B=w-H.length;if(B>0){var S=new Array(B+1).join("0");L<0?H="-"+S+H.slice(1):H=S+H}}p.push(H)}}else{p=[];for(var G=0;G<d.length;G++)p.push.apply(p,Tl(d[G],!1))}for(var G=0;G<p.length;G++)for(var a=0;a<s.length;a++){var o=n+p[G]+s[a];(!e||u||o)&&r.push(o)}}return r}const qr=Bb=(t,e,r={})=>(Zu(e),!r.nocomment&&e.charAt(0)==="#"?!1:new zf(e,r).match(t));var Bb=qr;const ep=XE;qr.sep=ep.sep;const yi=Symbol("globstar **");qr.GLOBSTAR=yi;const ox=Nb,ev={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},tp="[^/]",nd=tp+"*?",lx="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",cx="(?:(?!(?:\\/|^)\\.).)*?",Wb=t=>t.split("").reduce((e,r)=>(e[r]=!0,e),{}),tv=Wb("().*{}+?[]^$\\!"),ux=Wb("[.("),rv=/\/+/;qr.filter=(t,e={})=>(r,i,n)=>qr(r,t,e);const es=(t,e={})=>{const r={};return Object.keys(t).forEach(i=>r[i]=t[i]),Object.keys(e).forEach(i=>r[i]=e[i]),r};qr.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return qr;const e=qr,r=(i,n,s)=>e(i,n,es(t,s));return r.Minimatch=class extends e.Minimatch{constructor(n,s){super(n,es(t,s))}},r.Minimatch.defaults=i=>e.defaults(es(t,i)).Minimatch,r.filter=(i,n)=>e.filter(i,es(t,n)),r.defaults=i=>e.defaults(es(t,i)),r.makeRe=(i,n)=>e.makeRe(i,es(t,n)),r.braceExpand=(i,n)=>e.braceExpand(i,es(t,n)),r.match=(i,n,s)=>e.match(i,n,es(t,s)),r};qr.braceExpand=(t,e)=>Ub(t,e);const Ub=(t,e={})=>(Zu(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:ox(t)),fx=1024*64,Zu=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>fx)throw new TypeError("pattern is too long")},sd=Symbol("subparse");qr.makeRe=(t,e)=>new zf(t,e||{}).makeRe();qr.match=(t,e,r={})=>{const i=new zf(e,r);return t=t.filter(n=>i.match(n)),i.options.nonull&&!t.length&&t.push(e),t};const hx=t=>t.replace(/\\(.)/g,"$1"),dx=t=>t.replace(/\\([^-\]])/g,"$1"),px=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),gx=t=>t.replace(/[[\]\\]/g,"\\$&");let zf=class{constructor(e,r){Zu(e),r||(r={}),this.options=r,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.make()}debug(){}make(){const e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let i=this.globSet=this.braceExpand();r.debug&&(this.debug=(...n)=>console.error(...n)),this.debug(this.pattern,i),i=this.globParts=i.map(n=>n.split(rv)),this.debug(this.pattern,i),i=i.map((n,s,a)=>n.map(this.parse,this)),this.debug(this.pattern,i),i=i.filter(n=>n.indexOf(!1)===-1),this.debug(this.pattern,i),this.set=i}parseNegate(){if(this.options.nonegate)return;const e=this.pattern;let r=!1,i=0;for(let n=0;n<e.length&&e.charAt(n)==="!";n++)r=!r,i++;i&&(this.pattern=e.slice(i)),this.negate=r}matchOne(e,r,i){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,a=0,o=e.length,l=r.length;s<o&&a<l;s++,a++){this.debug("matchOne loop");var c=r[a],u=e[s];if(this.debug(r,c,u),c===!1)return!1;if(c===yi){this.debug("GLOBSTAR",[r,c,u]);var f=s,d=a+1;if(d===l){for(this.debug("** at the end");s<o;s++)if(e[s]==="."||e[s]===".."||!n.dot&&e[s].charAt(0)===".")return!1;return!0}for(;f<o;){var p=e[f];if(this.debug(`
globstar while`,e,f,r,d,p),this.matchOne(e.slice(f),r.slice(d),i))return this.debug("globstar found match!",f,o,p),!0;if(p==="."||p===".."||!n.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,f,r,d);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(i&&(this.debug(`
>>> no match, partial?`,e,f,r,d),f===o))}var g;if(typeof c=="string"?(g=u===c,this.debug("string match",c,u,g)):(g=u.match(c),this.debug("pattern match",c,u,g)),!g)return!1}if(s===o&&a===l)return!0;if(s===o)return i;if(a===l)return s===o-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return Ub(this.pattern,this.options)}parse(e,r){Zu(e);const i=this.options;if(e==="**")if(i.noglobstar)e="*";else return yi;if(e==="")return"";let n="",s=!1,a=!1;const o=[],l=[];let c,u=!1,f=-1,d=-1,p,g,m,w=e.charAt(0)===".",v=i.dot||w;const y=()=>w?"":v?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=B=>B.charAt(0)==="."?"":i.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",T=()=>{if(c){switch(c){case"*":n+=nd,s=!0;break;case"?":n+=tp,s=!0;break;default:n+="\\"+c;break}this.debug("clearStateChar %j %j",c,n),c=!1}};for(let B=0,S;B<e.length&&(S=e.charAt(B));B++){if(this.debug("%s	%s %s %j",e,B,n,S),a){if(S==="/")return!1;tv[S]&&(n+="\\"),n+=S,a=!1;continue}switch(S){case"/":return!1;case"\\":if(u&&e.charAt(B+1)==="-"){n+=S;continue}T(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,B,n,S),u){this.debug("  in class"),S==="!"&&B===d+1&&(S="^"),n+=S;continue}this.debug("call clearStateChar %j",c),T(),c=S,i.noext&&T();continue;case"(":{if(u){n+="(";continue}if(!c){n+="\\(";continue}const G={type:c,start:B-1,reStart:n.length,open:ev[c].open,close:ev[c].close};this.debug(this.pattern,"	",G),o.push(G),n+=G.open,G.start===0&&G.type!=="!"&&(w=!0,n+=b(e.slice(B+1))),this.debug("plType %j %j",c,n),c=!1;continue}case")":{const G=o[o.length-1];if(u||!G){n+="\\)";continue}o.pop(),T(),s=!0,g=G,n+=g.close,g.type==="!"&&l.push(Object.assign(g,{reEnd:n.length}));continue}case"|":{const G=o[o.length-1];if(u||!G){n+="\\|";continue}T(),n+="|",G.start===0&&G.type!=="!"&&(w=!0,n+=b(e.slice(B+1)));continue}case"[":if(T(),u){n+="\\"+S;continue}u=!0,d=B,f=n.length,n+=S;continue;case"]":if(B===d+1||!u){n+="\\"+S;continue}p=e.substring(d+1,B);try{RegExp("["+gx(dx(p))+"]"),n+=S}catch{n=n.substring(0,f)+"(?:$.)"}s=!0,u=!1;continue;default:T(),tv[S]&&!(S==="^"&&u)&&(n+="\\"),n+=S;break}}for(u&&(p=e.slice(d+1),m=this.parse(p,sd),n=n.substring(0,f)+"\\["+m[0],s=s||m[1]),g=o.pop();g;g=o.pop()){let B;B=n.slice(g.reStart+g.open.length),this.debug("setting tail",n,g),B=B.replace(/((?:\\{2}){0,64})(\\?)\|/g,(G,q,te)=>(te||(te="\\"),q+q+te+"|")),this.debug(`tail=%j
   %s`,B,B,g,n);const S=g.type==="*"?nd:g.type==="?"?tp:"\\"+g.type;s=!0,n=n.slice(0,g.reStart)+S+"\\("+B}T(),a&&(n+="\\\\");const L=ux[n.charAt(0)];for(let B=l.length-1;B>-1;B--){const S=l[B],G=n.slice(0,S.reStart),q=n.slice(S.reStart,S.reEnd-8);let te=n.slice(S.reEnd);const X=n.slice(S.reEnd-8,S.reEnd)+te,M=G.split(")").length,ve=G.split("(").length-M;let ue=te;for(let j=0;j<ve;j++)ue=ue.replace(/\)[+*?]?/,"");te=ue;const ye=te===""&&r!==sd?"(?:$|\\/)":"";n=G+q+te+ye+X}if(n!==""&&s&&(n="(?=.)"+n),L&&(n=y()+n),r===sd)return[n,s];if(i.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return hx(e);const H=i.nocase?"i":"";try{return Object.assign(new RegExp("^"+n+"$",H),{_glob:e,_src:n})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const r=this.options,i=r.noglobstar?nd:r.dot?lx:cx,n=r.nocase?"i":"";let s=e.map(a=>(a=a.map(o=>typeof o=="string"?px(o):o===yi?yi:o._src).reduce((o,l)=>(o[o.length-1]===yi&&l===yi||o.push(l),o),[]),a.forEach((o,l)=>{o!==yi||a[l-1]===yi||(l===0?a.length>1?a[l+1]="(?:\\/|"+i+"\\/)?"+a[l+1]:a[l]=i:l===a.length-1?a[l-1]+="(?:\\/|"+i+")?":(a[l-1]+="(?:\\/|\\/"+i+"\\/)"+a[l+1],a[l+1]=yi))}),a.filter(o=>o!==yi).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,n)}catch{this.regexp=!1}return this.regexp}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;const i=this.options;ep.sep!=="/"&&(e=e.split(ep.sep).join("/")),e=e.split(rv),this.debug(this.pattern,"split",e);const n=this.set;this.debug(this.pattern,"set",n);let s;for(let a=e.length-1;a>=0&&(s=e[a],!s);a--);for(let a=0;a<n.length;a++){const o=n[a];let l=e;if(i.matchBase&&o.length===1&&(l=[s]),this.matchOne(l,o,r))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(e){return qr.defaults(e).Minimatch}};qr.Minimatch=zf;var mx=Vb;const rp=Bf,{EventEmitter:vx}=js,{Minimatch:ad}=Bb,{resolve:yx}=Wf;function bx(t,e){return new Promise((r,i)=>{rp.readdir(t,{withFileTypes:!0},(n,s)=>{if(n)switch(n.code){case"ENOTDIR":e?i(n):r([]);break;case"ENOTSUP":case"ENOENT":case"ENAMETOOLONG":case"UNKNOWN":r([]);break;case"ELOOP":default:i(n);break}else r(s)})})}function zb(t,e){return new Promise((r,i)=>{(e?rp.stat:rp.lstat)(t,(s,a)=>{if(s)switch(s.code){case"ENOENT":r(e?zb(t,!1):null);break;default:r(null);break}else r(a)})})}async function*Gb(t,e,r,i,n,s){let a=await bx(e+t,s);for(const o of a){let l=o.name;l===void 0&&(l=o,i=!0);const c=t+"/"+l,u=c.slice(1),f=e+"/"+u;let d=null;(i||r)&&(d=await zb(f,r)),!d&&o.name!==void 0&&(d=o),d===null&&(d={isDirectory:()=>!1}),d.isDirectory()?n(u)||(yield{relative:u,absolute:f,stats:d},yield*Gb(c,e,r,i,n,!1)):yield{relative:u,absolute:f,stats:d}}}async function*wx(t,e,r,i){yield*Gb("",t,e,r,i,!0)}function _x(t){return{pattern:t.pattern,dot:!!t.dot,noglobstar:!!t.noglobstar,matchBase:!!t.matchBase,nocase:!!t.nocase,ignore:t.ignore,skip:t.skip,follow:!!t.follow,stat:!!t.stat,nodir:!!t.nodir,mark:!!t.mark,silent:!!t.silent,absolute:!!t.absolute}}class Hb extends vx{constructor(e,r,i){if(super(),typeof r=="function"&&(i=r,r=null),this.options=_x(r||{}),this.matchers=[],this.options.pattern){const n=Array.isArray(this.options.pattern)?this.options.pattern:[this.options.pattern];this.matchers=n.map(s=>new ad(s,{dot:this.options.dot,noglobstar:this.options.noglobstar,matchBase:this.options.matchBase,nocase:this.options.nocase}))}if(this.ignoreMatchers=[],this.options.ignore){const n=Array.isArray(this.options.ignore)?this.options.ignore:[this.options.ignore];this.ignoreMatchers=n.map(s=>new ad(s,{dot:!0}))}if(this.skipMatchers=[],this.options.skip){const n=Array.isArray(this.options.skip)?this.options.skip:[this.options.skip];this.skipMatchers=n.map(s=>new ad(s,{dot:!0}))}this.iterator=wx(yx(e||"."),this.options.follow,this.options.stat,this._shouldSkipDirectory.bind(this)),this.paused=!1,this.inactive=!1,this.aborted=!1,i&&(this._matches=[],this.on("match",n=>this._matches.push(this.options.absolute?n.absolute:n.relative)),this.on("error",n=>i(n)),this.on("end",()=>i(null,this._matches))),setTimeout(()=>this._next(),0)}_shouldSkipDirectory(e){return this.skipMatchers.some(r=>r.match(e))}_fileMatches(e,r){const i=e+(r?"/":"");return(this.matchers.length===0||this.matchers.some(n=>n.match(i)))&&!this.ignoreMatchers.some(n=>n.match(i))&&(!this.options.nodir||!r)}_next(){!this.paused&&!this.aborted?this.iterator.next().then(e=>{if(e.done)this.emit("end");else{const r=e.value.stats.isDirectory();if(this._fileMatches(e.value.relative,r)){let i=e.value.relative,n=e.value.absolute;this.options.mark&&r&&(i+="/",n+="/"),this.options.stat?this.emit("match",{relative:i,absolute:n,stat:e.value.stats}):this.emit("match",{relative:i,absolute:n})}this._next(this.iterator)}}).catch(e=>{this.abort(),this.emit("error",e),!e.code&&!this.options.silent&&console.error(e)}):this.inactive=!0}abort(){this.aborted=!0}pause(){this.paused=!0}resume(){this.paused=!1,this.inactive&&(this.inactive=!1,this._next())}}function Vb(t,e,r){return new Hb(t,e,r)}Vb.ReaddirGlob=Hb;function qb(t,...e){return(...r)=>t(...e,...r)}function Nc(t){return function(...e){var r=e.pop();return t.call(this,e,r)}}var Sx=typeof queueMicrotask=="function"&&queueMicrotask,Yb=typeof setImmediate=="function"&&setImmediate,Kb=typeof process=="object"&&typeof process.nextTick=="function";function Zb(t){setTimeout(t,0)}function Qb(t){return(e,...r)=>t(()=>e(...r))}var Al;Sx?Al=queueMicrotask:Yb?Al=setImmediate:Kb?Al=process.nextTick:Al=Zb;var $s=Qb(Al);function Wl(t){return Fc(t)?function(...e){const r=e.pop(),i=t.apply(this,e);return iv(i,r)}:Nc(function(e,r){var i;try{i=t.apply(this,e)}catch(n){return r(n)}if(i&&typeof i.then=="function")return iv(i,r);r(null,i)})}function iv(t,e){return t.then(r=>{nv(e,null,r)},r=>{nv(e,r&&(r instanceof Error||r.message)?r:new Error(r))})}function nv(t,e,r){try{t(e,r)}catch(i){$s(n=>{throw n},i)}}function Fc(t){return t[Symbol.toStringTag]==="AsyncFunction"}function Ex(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function xx(t){return typeof t[Symbol.asyncIterator]=="function"}function Je(t){if(typeof t!="function")throw new Error("expected a function");return Fc(t)?Wl(t):t}function Qe(t,e){if(e||(e=t.length),!e)throw new Error("arity is undefined");function r(...i){return typeof i[e-1]=="function"?t.apply(this,i):new Promise((n,s)=>{i[e-1]=(a,...o)=>{if(a)return s(a);n(o.length>1?o:o[0])},t.apply(this,i)})}return r}function Xb(t){return function(r,...i){return Qe(function(s){var a=this;return t(r,(o,l)=>{Je(o).apply(a,i.concat(l))},s)})}}function Eg(t,e,r,i){e=e||[];var n=[],s=0,a=Je(r);return t(e,(o,l,c)=>{var u=s++;a(o,(f,d)=>{n[u]=d,c(f)})},o=>{i(o,n)})}function Gf(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}const Hf={};function Ms(t){function e(...r){if(t!==null){var i=t;t=null,i.apply(this,r)}}return Object.assign(e,t),e}function Tx(t){return t[Symbol.iterator]&&t[Symbol.iterator]()}function Ax(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}function $x(t){var e=-1;return function(){var i=t.next();return i.done?null:(e++,{value:i.value,key:e})}}function Rx(t){var e=t?Object.keys(t):[],r=-1,i=e.length;return function n(){var s=e[++r];return s==="__proto__"?n():r<i?{value:t[s],key:s}:null}}function Cx(t){if(Gf(t))return Ax(t);var e=Tx(t);return e?$x(e):Rx(t)}function Bs(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}function sv(t,e,r,i){let n=!1,s=!1,a=!1,o=0,l=0;function c(){o>=e||a||n||(a=!0,t.next().then(({value:d,done:p})=>{if(!(s||n)){if(a=!1,p){n=!0,o<=0&&i(null);return}o++,r(d,l,u),l++,c()}}).catch(f))}function u(d,p){if(o-=1,!s){if(d)return f(d);if(d===!1){n=!0,s=!0;return}if(p===Hf||n&&o<=0)return n=!0,i(null);c()}}function f(d){s||(a=!1,n=!0,i(d))}c()}var ji=t=>(e,r,i)=>{if(i=Ms(i),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return i(null);if(Ex(e))return sv(e,t,r,i);if(xx(e))return sv(e[Symbol.asyncIterator](),t,r,i);var n=Cx(e),s=!1,a=!1,o=0,l=!1;function c(f,d){if(!a)if(o-=1,f)s=!0,i(f);else if(f===!1)s=!0,a=!0;else{if(d===Hf||s&&o<=0)return s=!0,i(null);l||u()}}function u(){for(l=!0;o<t&&!s;){var f=n();if(f===null){s=!0,o<=0&&i(null);return}o+=1,r(f.value,f.key,Bs(c))}l=!1}u()};function Dx(t,e,r,i){return ji(e)(t,Je(r),i)}var jo=Qe(Dx,4);function Px(t,e,r){r=Ms(r);var i=0,n=0,{length:s}=t,a=!1;s===0&&r(null);function o(l,c){l===!1&&(a=!0),a!==!0&&(l?r(l):(++n===s||c===Hf)&&r(null))}for(;i<s;i++)e(t[i],i,Bs(o))}function Ox(t,e,r){return jo(t,1/0,e,r)}function kx(t,e,r){var i=Gf(t)?Px:Ox;return i(t,Je(e),r)}var Kr=Qe(kx,3);function Nx(t,e,r){return Eg(Kr,t,e,r)}var Vf=Qe(Nx,3),Jb=Xb(Vf);function Fx(t,e,r){return jo(t,1,e,r)}var ki=Qe(Fx,3);function Ix(t,e,r){return Eg(ki,t,e,r)}var xg=Qe(Ix,3),ew=Xb(xg);const el=Symbol("promiseCallback");function Mo(){let t,e;function r(i,...n){if(i)return e(i);t(n.length>1?n:n[0])}return r[el]=new Promise((i,n)=>{t=i,e=n}),r}function Tg(t,e,r){typeof e!="number"&&(r=e,e=null),r=Ms(r||Mo());var i=Object.keys(t).length;if(!i)return r(null);e||(e=i);var n={},s=0,a=!1,o=!1,l=Object.create(null),c=[],u=[],f={};Object.keys(t).forEach(b=>{var T=t[b];if(!Array.isArray(T)){d(b,[T]),u.push(b);return}var L=T.slice(0,T.length-1),H=L.length;if(H===0){d(b,T),u.push(b);return}f[b]=H,L.forEach(B=>{if(!t[B])throw new Error("async.auto task `"+b+"` has a non-existent dependency `"+B+"` in "+L.join(", "));g(B,()=>{H--,H===0&&d(b,T)})})}),v(),p();function d(b,T){c.push(()=>w(b,T))}function p(){if(!a){if(c.length===0&&s===0)return r(null,n);for(;c.length&&s<e;){var b=c.shift();b()}}}function g(b,T){var L=l[b];L||(L=l[b]=[]),L.push(T)}function m(b){var T=l[b]||[];T.forEach(L=>L()),p()}function w(b,T){if(!o){var L=Bs((B,...S)=>{if(s--,B===!1){a=!0;return}if(S.length<2&&([S]=S),B){var G={};if(Object.keys(n).forEach(q=>{G[q]=n[q]}),G[b]=S,o=!0,l=Object.create(null),a)return;r(B,G)}else n[b]=S,m(b)});s++;var H=Je(T[T.length-1]);T.length>1?H(n,L):H(L)}}function v(){for(var b,T=0;u.length;)b=u.pop(),T++,y(b).forEach(L=>{--f[L]===0&&u.push(L)});if(T!==i)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function y(b){var T=[];return Object.keys(t).forEach(L=>{const H=t[L];Array.isArray(H)&&H.indexOf(b)>=0&&T.push(L)}),T}return r[el]}var Lx=/^(?:async\s)?(?:function)?\s*(?:\w+\s*)?\(([^)]+)\)(?:\s*{)/,jx=/^(?:async\s)?\s*(?:\(\s*)?((?:[^)=\s]\s*)*)(?:\)\s*)?=>/,Mx=/,/,Bx=/(=.+)?(\s*)$/;function Wx(t){let e="",r=0,i=t.indexOf("*/");for(;r<t.length;)if(t[r]==="/"&&t[r+1]==="/"){let n=t.indexOf(`
`,r);r=n===-1?t.length:n}else if(i!==-1&&t[r]==="/"&&t[r+1]==="*"){let n=t.indexOf("*/",r);n!==-1?(r=n+2,i=t.indexOf("*/",r)):(e+=t[r],r++)}else e+=t[r],r++;return e}function Ux(t){const e=Wx(t.toString());let r=e.match(Lx);if(r||(r=e.match(jx)),!r)throw new Error(`could not parse args in autoInject
Source:
`+e);let[,i]=r;return i.replace(/\s/g,"").split(Mx).map(n=>n.replace(Bx,"").trim())}function tw(t,e){var r={};return Object.keys(t).forEach(i=>{var n=t[i],s,a=Fc(n),o=!a&&n.length===1||a&&n.length===0;if(Array.isArray(n))s=[...n],n=s.pop(),r[i]=s.concat(s.length>0?l:n);else if(o)r[i]=n;else{if(s=Ux(n),n.length===0&&!a&&s.length===0)throw new Error("autoInject task functions require explicit parameters.");a||s.pop(),r[i]=s.concat(l)}function l(c,u){var f=s.map(d=>c[d]);f.push(u),Je(n)(...f)}}),Tg(r,e)}class zx{constructor(){this.head=this.tail=null,this.length=0}removeLink(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e}empty(){for(;this.head;)this.shift();return this}insertAfter(e,r){r.prev=e,r.next=e.next,e.next?e.next.prev=r:this.tail=r,e.next=r,this.length+=1}insertBefore(e,r){r.prev=e.prev,r.next=e,e.prev?e.prev.next=r:this.head=r,e.prev=r,this.length+=1}unshift(e){this.head?this.insertBefore(this.head,e):av(this,e)}push(e){this.tail?this.insertAfter(this.tail,e):av(this,e)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var e=this.head;e;)yield e.data,e=e.next}remove(e){for(var r=this.head;r;){var{next:i}=r;e(r)&&this.removeLink(r),r=i}return this}}function av(t,e){t.length=1,t.head=t.tail=e}function Ag(t,e,r){if(e==null)e=1;else if(e===0)throw new RangeError("Concurrency must not be zero");var i=Je(t),n=0,s=[];const a={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function o(y,b){a[y].push(b)}function l(y,b){const T=(...L)=>{c(y,T),b(...L)};a[y].push(T)}function c(y,b){if(!y)return Object.keys(a).forEach(T=>a[T]=[]);if(!b)return a[y]=[];a[y]=a[y].filter(T=>T!==b)}function u(y,...b){a[y].forEach(T=>T(...b))}var f=!1;function d(y,b,T,L){if(L!=null&&typeof L!="function")throw new Error("task callback must be a function");v.started=!0;var H,B;function S(q,...te){if(q)return T?B(q):H();if(te.length<=1)return H(te[0]);H(te)}var G=v._createTaskItem(y,T?S:L||S);if(b?v._tasks.unshift(G):v._tasks.push(G),f||(f=!0,$s(()=>{f=!1,v.process()})),T||!L)return new Promise((q,te)=>{H=q,B=te})}function p(y){return function(b,...T){n-=1;for(var L=0,H=y.length;L<H;L++){var B=y[L],S=s.indexOf(B);S===0?s.shift():S>0&&s.splice(S,1),B.callback(b,...T),b!=null&&u("error",b,B.data)}n<=v.concurrency-v.buffer&&u("unsaturated"),v.idle()&&u("drain"),v.process()}}function g(y){return y.length===0&&v.idle()?($s(()=>u("drain")),!0):!1}const m=y=>b=>{if(!b)return new Promise((T,L)=>{l(y,(H,B)=>{if(H)return L(H);T(B)})});c(y),o(y,b)};var w=!1,v={_tasks:new zx,_createTaskItem(y,b){return{data:y,callback:b}},*[Symbol.iterator](){yield*v._tasks[Symbol.iterator]()},concurrency:e,payload:r,buffer:e/4,started:!1,paused:!1,push(y,b){return Array.isArray(y)?g(y)?void 0:y.map(T=>d(T,!1,!1,b)):d(y,!1,!1,b)},pushAsync(y,b){return Array.isArray(y)?g(y)?void 0:y.map(T=>d(T,!1,!0,b)):d(y,!1,!0,b)},kill(){c(),v._tasks.empty()},unshift(y,b){return Array.isArray(y)?g(y)?void 0:y.map(T=>d(T,!0,!1,b)):d(y,!0,!1,b)},unshiftAsync(y,b){return Array.isArray(y)?g(y)?void 0:y.map(T=>d(T,!0,!0,b)):d(y,!0,!0,b)},remove(y){v._tasks.remove(y)},process(){if(!w){for(w=!0;!v.paused&&n<v.concurrency&&v._tasks.length;){var y=[],b=[],T=v._tasks.length;v.payload&&(T=Math.min(T,v.payload));for(var L=0;L<T;L++){var H=v._tasks.shift();y.push(H),s.push(H),b.push(H.data)}n+=1,v._tasks.length===0&&u("empty"),n===v.concurrency&&u("saturated");var B=Bs(p(y));i(b,B)}w=!1}},length(){return v._tasks.length},running(){return n},workersList(){return s},idle(){return v._tasks.length+n===0},pause(){v.paused=!0},resume(){v.paused!==!1&&(v.paused=!1,$s(v.process))}};return Object.defineProperties(v,{saturated:{writable:!1,value:m("saturated")},unsaturated:{writable:!1,value:m("unsaturated")},empty:{writable:!1,value:m("empty")},drain:{writable:!1,value:m("drain")},error:{writable:!1,value:m("error")}}),v}function rw(t,e){return Ag(t,1,e)}function iw(t,e,r){return Ag(t,e,r)}function Gx(t,e,r,i){i=Ms(i);var n=Je(r);return ki(t,(s,a,o)=>{n(e,s,(l,c)=>{e=c,o(l)})},s=>i(s,e))}var Rs=Qe(Gx,4);function $g(...t){var e=t.map(Je);return function(...r){var i=this,n=r[r.length-1];return typeof n=="function"?r.pop():n=Mo(),Rs(e,r,(s,a,o)=>{a.apply(i,s.concat((l,...c)=>{o(l,c)}))},(s,a)=>n(s,...a)),n[el]}}function nw(...t){return $g(...t.reverse())}function Hx(t,e,r,i){return Eg(ji(e),t,r,i)}var Ic=Qe(Hx,4);function Vx(t,e,r,i){var n=Je(r);return Ic(t,e,(s,a)=>{n(s,(o,...l)=>o?a(o):a(o,l))},(s,a)=>{for(var o=[],l=0;l<a.length;l++)a[l]&&(o=o.concat(...a[l]));return i(s,o)})}var Bo=Qe(Vx,4);function qx(t,e,r){return Bo(t,1/0,e,r)}var Qu=Qe(qx,3);function Yx(t,e,r){return Bo(t,1,e,r)}var Xu=Qe(Yx,3);function sw(...t){return function(...e){var r=e.pop();return r(null,...t)}}function Un(t,e){return(r,i,n,s)=>{var a=!1,o;const l=Je(n);r(i,(c,u,f)=>{l(c,(d,p)=>{if(d||d===!1)return f(d);if(t(p)&&!o)return a=!0,o=e(!0,c),f(null,Hf);f()})},c=>{if(c)return s(c);s(null,a?o:e(!1))})}}function Kx(t,e,r){return Un(i=>i,(i,n)=>n)(Kr,t,e,r)}var Ju=Qe(Kx,3);function Zx(t,e,r,i){return Un(n=>n,(n,s)=>s)(ji(e),t,r,i)}var ef=Qe(Zx,4);function Qx(t,e,r){return Un(i=>i,(i,n)=>n)(ji(1),t,e,r)}var tf=Qe(Qx,3);function aw(t){return(e,...r)=>Je(e)(...r,(i,...n)=>{typeof console=="object"&&(i?console.error&&console.error(i):console[t]&&n.forEach(s=>console[t](s)))})}var ow=aw("dir");function Xx(t,e,r){r=Bs(r);var i=Je(t),n=Je(e),s;function a(l,...c){if(l)return r(l);l!==!1&&(s=c,n(...c,o))}function o(l,c){if(l)return r(l);if(l!==!1){if(!c)return r(null,...s);i(a)}}return o(null,!0)}var Ul=Qe(Xx,3);function lw(t,e,r){const i=Je(e);return Ul(t,(...n)=>{const s=n.pop();i(...n,(a,o)=>s(a,!o))},r)}function cw(t){return(e,r,i)=>t(e,i)}function Jx(t,e,r){return Kr(t,cw(Je(e)),r)}var rf=Qe(Jx,3);function eT(t,e,r,i){return ji(e)(t,cw(Je(r)),i)}var zl=Qe(eT,4);function tT(t,e,r){return zl(t,1,e,r)}var Gl=Qe(tT,3);function Rg(t){return Fc(t)?t:function(...e){var r=e.pop(),i=!0;e.push((...n)=>{i?$s(()=>r(...n)):r(...n)}),t.apply(this,e),i=!1}}function rT(t,e,r){return Un(i=>!i,i=>!i)(Kr,t,e,r)}var nf=Qe(rT,3);function iT(t,e,r,i){return Un(n=>!n,n=>!n)(ji(e),t,r,i)}var sf=Qe(iT,4);function nT(t,e,r){return Un(i=>!i,i=>!i)(ki,t,e,r)}var af=Qe(nT,3);function sT(t,e,r,i){var n=new Array(e.length);t(e,(s,a,o)=>{r(s,(l,c)=>{n[a]=!!c,o(l)})},s=>{if(s)return i(s);for(var a=[],o=0;o<e.length;o++)n[o]&&a.push(e[o]);i(null,a)})}function aT(t,e,r,i){var n=[];t(e,(s,a,o)=>{r(s,(l,c)=>{if(l)return o(l);c&&n.push({index:a,value:s}),o(l)})},s=>{if(s)return i(s);i(null,n.sort((a,o)=>a.index-o.index).map(a=>a.value))})}function qf(t,e,r,i){var n=Gf(e)?sT:aT;return n(t,e,Je(r),i)}function oT(t,e,r){return qf(Kr,t,e,r)}var of=Qe(oT,3);function lT(t,e,r,i){return qf(ji(e),t,r,i)}var lf=Qe(lT,4);function cT(t,e,r){return qf(ki,t,e,r)}var cf=Qe(cT,3);function uT(t,e){var r=Bs(e),i=Je(Rg(t));function n(s){if(s)return r(s);s!==!1&&i(n)}return n()}var uw=Qe(uT,2);function fT(t,e,r,i){var n=Je(r);return Ic(t,e,(s,a)=>{n(s,(o,l)=>o?a(o):a(o,{key:l,val:s}))},(s,a)=>{for(var o={},{hasOwnProperty:l}=Object.prototype,c=0;c<a.length;c++)if(a[c]){var{key:u}=a[c],{val:f}=a[c];l.call(o,u)?o[u].push(f):o[u]=[f]}return i(s,o)})}var Yf=Qe(fT,4);function fw(t,e,r){return Yf(t,1/0,e,r)}function hw(t,e,r){return Yf(t,1,e,r)}var dw=aw("log");function hT(t,e,r,i){i=Ms(i);var n={},s=Je(r);return ji(e)(t,(a,o,l)=>{s(a,o,(c,u)=>{if(c)return l(c);n[o]=u,l(c)})},a=>i(a,n))}var Kf=Qe(hT,4);function pw(t,e,r){return Kf(t,1/0,e,r)}function gw(t,e,r){return Kf(t,1,e,r)}function mw(t,e=r=>r){var r=Object.create(null),i=Object.create(null),n=Je(t),s=Nc((a,o)=>{var l=e(...a);l in r?$s(()=>o(null,...r[l])):l in i?i[l].push(o):(i[l]=[o],n(...a,(c,...u)=>{c||(r[l]=u);var f=i[l];delete i[l];for(var d=0,p=f.length;d<p;d++)f[d](c,...u)}))});return s.memo=r,s.unmemoized=t,s}var Ou;Kb?Ou=process.nextTick:Yb?Ou=setImmediate:Ou=Zb;var vw=Qb(Ou),Cg=Qe((t,e,r)=>{var i=Gf(e)?[]:{};t(e,(n,s,a)=>{Je(n)((o,...l)=>{l.length<2&&([l]=l),i[s]=l,a(o)})},n=>r(n,i))},3);function yw(t,e){return Cg(Kr,t,e)}function bw(t,e,r){return Cg(ji(e),t,r)}function Dg(t,e){var r=Je(t);return Ag((i,n)=>{r(i[0],n)},e,1)}class dT{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(e){let r;for(;e>0&&od(this.heap[e],this.heap[r=ov(e)]);){let i=this.heap[e];this.heap[e]=this.heap[r],this.heap[r]=i,e=r}}percDown(e){let r;for(;(r=pT(e))<this.heap.length&&(r+1<this.heap.length&&od(this.heap[r+1],this.heap[r])&&(r=r+1),!od(this.heap[e],this.heap[r]));){let i=this.heap[e];this.heap[e]=this.heap[r],this.heap[r]=i,e=r}}push(e){e.pushCount=++this.pushCount,this.heap.push(e),this.percUp(this.heap.length-1)}unshift(e){return this.heap.push(e)}shift(){let[e]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),e}toArray(){return[...this]}*[Symbol.iterator](){for(let e=0;e<this.heap.length;e++)yield this.heap[e].data}remove(e){let r=0;for(let i=0;i<this.heap.length;i++)e(this.heap[i])||(this.heap[r]=this.heap[i],r++);this.heap.splice(r);for(let i=ov(this.heap.length-1);i>=0;i--)this.percDown(i);return this}}function pT(t){return(t<<1)+1}function ov(t){return(t+1>>1)-1}function od(t,e){return t.priority!==e.priority?t.priority<e.priority:t.pushCount<e.pushCount}function ww(t,e){var r=Dg(t,e),{push:i,pushAsync:n}=r;r._tasks=new dT,r._createTaskItem=({data:a,priority:o},l)=>({data:a,priority:o,callback:l});function s(a,o){return Array.isArray(a)?a.map(l=>({data:l,priority:o})):{data:a,priority:o}}return r.push=function(a,o=0,l){return i(s(a,o),l)},r.pushAsync=function(a,o=0,l){return n(s(a,o),l)},delete r.unshift,delete r.unshiftAsync,r}function gT(t,e){if(e=Ms(e),!Array.isArray(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var r=0,i=t.length;r<i;r++)Je(t[r])(e)}var _w=Qe(gT,2);function uf(t,e,r,i){var n=[...t].reverse();return Rs(n,e,r,i)}function ff(t){var e=Je(t);return Nc(function(i,n){return i.push((s,...a)=>{let o={};if(s&&(o.error=s),a.length>0){var l=a;a.length<=1&&([l]=a),o.value=l}n(null,o)}),e.apply(this,i)})}function Sw(t){var e;return Array.isArray(t)?e=t.map(ff):(e={},Object.keys(t).forEach(r=>{e[r]=ff.call(this,t[r])})),e}function Pg(t,e,r,i){const n=Je(r);return qf(t,e,(s,a)=>{n(s,(o,l)=>{a(o,!l)})},i)}function mT(t,e,r){return Pg(Kr,t,e,r)}var Ew=Qe(mT,3);function vT(t,e,r,i){return Pg(ji(e),t,r,i)}var xw=Qe(vT,4);function yT(t,e,r){return Pg(ki,t,e,r)}var Tw=Qe(yT,3);function Aw(t){return function(){return t}}const ip=5,$w=0;function hf(t,e,r){var i={times:ip,intervalFunc:Aw($w)};if(arguments.length<3&&typeof t=="function"?(r=e||Mo(),e=t):(bT(i,t),r=r||Mo()),typeof e!="function")throw new Error("Invalid arguments for async.retry");var n=Je(e),s=1;function a(){n((o,...l)=>{o!==!1&&(o&&s++<i.times&&(typeof i.errorFilter!="function"||i.errorFilter(o))?setTimeout(a,i.intervalFunc(s-1)):r(o,...l))})}return a(),r[el]}function bT(t,e){if(typeof e=="object")t.times=+e.times||ip,t.intervalFunc=typeof e.interval=="function"?e.interval:Aw(+e.interval||$w),t.errorFilter=e.errorFilter;else if(typeof e=="number"||typeof e=="string")t.times=+e||ip;else throw new Error("Invalid arguments for async.retry")}function Rw(t,e){e||(e=t,t=null);let r=t&&t.arity||e.length;Fc(e)&&(r+=1);var i=Je(e);return Nc((n,s)=>{(n.length<r-1||s==null)&&(n.push(s),s=Mo());function a(o){i(...n,o)}return t?hf(t,a,s):hf(a,s),s[el]})}function Cw(t,e){return Cg(ki,t,e)}function wT(t,e,r){return Un(Boolean,i=>i)(Kr,t,e,r)}var df=Qe(wT,3);function _T(t,e,r,i){return Un(Boolean,n=>n)(ji(e),t,r,i)}var pf=Qe(_T,4);function ST(t,e,r){return Un(Boolean,i=>i)(ki,t,e,r)}var gf=Qe(ST,3);function ET(t,e,r){var i=Je(e);return Vf(t,(s,a)=>{i(s,(o,l)=>{if(o)return a(o);a(o,{value:s,criteria:l})})},(s,a)=>{if(s)return r(s);r(null,a.sort(n).map(o=>o.value))});function n(s,a){var o=s.criteria,l=a.criteria;return o<l?-1:o>l?1:0}}var Dw=Qe(ET,3);function Pw(t,e,r){var i=Je(t);return Nc((n,s)=>{var a=!1,o;function l(){var c=t.name||"anonymous",u=new Error('Callback function "'+c+'" timed out.');u.code="ETIMEDOUT",r&&(u.info=r),a=!0,s(u)}n.push((...c)=>{a||(s(...c),clearTimeout(o))}),o=setTimeout(l,e),i(...n)})}function xT(t){for(var e=Array(t);t--;)e[t]=t;return e}function Zf(t,e,r,i){var n=Je(r);return Ic(xT(t),e,n,i)}function Ow(t,e,r){return Zf(t,1/0,e,r)}function kw(t,e,r){return Zf(t,1,e,r)}function Nw(t,e,r,i){arguments.length<=3&&typeof e=="function"&&(i=r,r=e,e=Array.isArray(t)?[]:{}),i=Ms(i||Mo());var n=Je(r);return Kr(t,(s,a,o)=>{n(e,s,a,o)},s=>i(s,e)),i[el]}function TT(t,e){var r=null,i;return Gl(t,(n,s)=>{Je(n)((a,...o)=>{if(a===!1)return s(a);o.length<2?[i]=o:i=o,r=a,s(a?null:{})})},()=>e(r,i))}var Fw=Qe(TT);function Iw(t){return(...e)=>(t.unmemoized||t)(...e)}function AT(t,e,r){r=Bs(r);var i=Je(e),n=Je(t),s=[];function a(l,...c){if(l)return r(l);s=c,l!==!1&&n(o)}function o(l,c){if(l)return r(l);if(l!==!1){if(!c)return r(null,...s);i(a)}}return n(o)}var Hl=Qe(AT,3);function Lw(t,e,r){const i=Je(t);return Hl(n=>i((s,a)=>n(s,!a)),e,r)}function $T(t,e){if(e=Ms(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var r=0;function i(s){var a=Je(t[r++]);a(...s,Bs(n))}function n(s,...a){if(s!==!1){if(s||r===t.length)return e(s,...a);i(a)}}i([])}var jw=Qe($T),RT={apply:qb,applyEach:Jb,applyEachSeries:ew,asyncify:Wl,auto:Tg,autoInject:tw,cargo:rw,cargoQueue:iw,compose:nw,concat:Qu,concatLimit:Bo,concatSeries:Xu,constant:sw,detect:Ju,detectLimit:ef,detectSeries:tf,dir:ow,doUntil:lw,doWhilst:Ul,each:rf,eachLimit:zl,eachOf:Kr,eachOfLimit:jo,eachOfSeries:ki,eachSeries:Gl,ensureAsync:Rg,every:nf,everyLimit:sf,everySeries:af,filter:of,filterLimit:lf,filterSeries:cf,forever:uw,groupBy:fw,groupByLimit:Yf,groupBySeries:hw,log:dw,map:Vf,mapLimit:Ic,mapSeries:xg,mapValues:pw,mapValuesLimit:Kf,mapValuesSeries:gw,memoize:mw,nextTick:vw,parallel:yw,parallelLimit:bw,priorityQueue:ww,queue:Dg,race:_w,reduce:Rs,reduceRight:uf,reflect:ff,reflectAll:Sw,reject:Ew,rejectLimit:xw,rejectSeries:Tw,retry:hf,retryable:Rw,seq:$g,series:Cw,setImmediate:$s,some:df,someLimit:pf,someSeries:gf,sortBy:Dw,timeout:Pw,times:Ow,timesLimit:Zf,timesSeries:kw,transform:Nw,tryEach:Fw,unmemoize:Iw,until:Lw,waterfall:jw,whilst:Hl,all:nf,allLimit:sf,allSeries:af,any:df,anyLimit:pf,anySeries:gf,find:Ju,findLimit:ef,findSeries:tf,flatMap:Qu,flatMapLimit:Bo,flatMapSeries:Xu,forEach:rf,forEachSeries:Gl,forEachLimit:zl,forEachOf:Kr,forEachOfSeries:ki,forEachOfLimit:jo,inject:Rs,foldl:Rs,foldr:uf,select:of,selectLimit:lf,selectSeries:cf,wrapSync:Wl,during:Hl,doDuring:Ul};const CT=Object.freeze(Object.defineProperty({__proto__:null,all:nf,allLimit:sf,allSeries:af,any:df,anyLimit:pf,anySeries:gf,apply:qb,applyEach:Jb,applyEachSeries:ew,asyncify:Wl,auto:Tg,autoInject:tw,cargo:rw,cargoQueue:iw,compose:nw,concat:Qu,concatLimit:Bo,concatSeries:Xu,constant:sw,default:RT,detect:Ju,detectLimit:ef,detectSeries:tf,dir:ow,doDuring:Ul,doUntil:lw,doWhilst:Ul,during:Hl,each:rf,eachLimit:zl,eachOf:Kr,eachOfLimit:jo,eachOfSeries:ki,eachSeries:Gl,ensureAsync:Rg,every:nf,everyLimit:sf,everySeries:af,filter:of,filterLimit:lf,filterSeries:cf,find:Ju,findLimit:ef,findSeries:tf,flatMap:Qu,flatMapLimit:Bo,flatMapSeries:Xu,foldl:Rs,foldr:uf,forEach:rf,forEachLimit:zl,forEachOf:Kr,forEachOfLimit:jo,forEachOfSeries:ki,forEachSeries:Gl,forever:uw,groupBy:fw,groupByLimit:Yf,groupBySeries:hw,inject:Rs,log:dw,map:Vf,mapLimit:Ic,mapSeries:xg,mapValues:pw,mapValuesLimit:Kf,mapValuesSeries:gw,memoize:mw,nextTick:vw,parallel:yw,parallelLimit:bw,priorityQueue:ww,queue:Dg,race:_w,reduce:Rs,reduceRight:uf,reflect:ff,reflectAll:Sw,reject:Ew,rejectLimit:xw,rejectSeries:Tw,retry:hf,retryable:Rw,select:of,selectLimit:lf,selectSeries:cf,seq:$g,series:Cw,setImmediate:$s,some:df,someLimit:pf,someSeries:gf,sortBy:Dw,timeout:Pw,times:Ow,timesLimit:Zf,timesSeries:kw,transform:Nw,tryEach:Fw,unmemoize:Iw,until:Lw,waterfall:jw,whilst:Hl,wrapSync:Wl},Symbol.toStringTag,{value:"Module"})),DT=ZE(CT);var Mw={exports:{}},ts=RE,PT=process.cwd,ku=null,OT=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return ku||(ku=PT.call(process)),ku};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var lv=process.chdir;process.chdir=function(t){ku=null,lv.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,lv)}var kT=NT;function NT(t){ts.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=s(t.chown),t.fchown=s(t.fchown),t.lchown=s(t.lchown),t.chmod=i(t.chmod),t.fchmod=i(t.fchmod),t.lchmod=i(t.lchmod),t.chownSync=a(t.chownSync),t.fchownSync=a(t.fchownSync),t.lchownSync=a(t.lchownSync),t.chmodSync=n(t.chmodSync),t.fchmodSync=n(t.fchmodSync),t.lchmodSync=n(t.lchmodSync),t.stat=o(t.stat),t.fstat=o(t.fstat),t.lstat=o(t.lstat),t.statSync=l(t.statSync),t.fstatSync=l(t.fstatSync),t.lstatSync=l(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(u,f,d){d&&process.nextTick(d)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(u,f,d,p){p&&process.nextTick(p)},t.lchownSync=function(){}),OT==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(u){function f(d,p,g){var m=Date.now(),w=0;u(d,p,function v(y){if(y&&(y.code==="EACCES"||y.code==="EPERM"||y.code==="EBUSY")&&Date.now()-m<6e4){setTimeout(function(){t.stat(p,function(b,T){b&&b.code==="ENOENT"?u(d,p,v):g(y)})},w),w<100&&(w+=10);return}g&&g(y)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(t.rename)),t.read=typeof t.read!="function"?t.read:function(u){function f(d,p,g,m,w,v){var y;if(v&&typeof v=="function"){var b=0;y=function(T,L,H){if(T&&T.code==="EAGAIN"&&b<10)return b++,u.call(t,d,p,g,m,w,y);v.apply(this,arguments)}}return u.call(t,d,p,g,m,w,y)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(u){return function(f,d,p,g,m){for(var w=0;;)try{return u.call(t,f,d,p,g,m)}catch(v){if(v.code==="EAGAIN"&&w<10){w++;continue}throw v}}}(t.readSync);function e(u){u.lchmod=function(f,d,p){u.open(f,ts.O_WRONLY|ts.O_SYMLINK,d,function(g,m){if(g){p&&p(g);return}u.fchmod(m,d,function(w){u.close(m,function(v){p&&p(w||v)})})})},u.lchmodSync=function(f,d){var p=u.openSync(f,ts.O_WRONLY|ts.O_SYMLINK,d),g=!0,m;try{m=u.fchmodSync(p,d),g=!1}finally{if(g)try{u.closeSync(p)}catch{}else u.closeSync(p)}return m}}function r(u){ts.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(f,d,p,g){u.open(f,ts.O_SYMLINK,function(m,w){if(m){g&&g(m);return}u.futimes(w,d,p,function(v){u.close(w,function(y){g&&g(v||y)})})})},u.lutimesSync=function(f,d,p){var g=u.openSync(f,ts.O_SYMLINK),m,w=!0;try{m=u.futimesSync(g,d,p),w=!1}finally{if(w)try{u.closeSync(g)}catch{}else u.closeSync(g)}return m}):u.futimes&&(u.lutimes=function(f,d,p,g){g&&process.nextTick(g)},u.lutimesSync=function(){})}function i(u){return u&&function(f,d,p){return u.call(t,f,d,function(g){c(g)&&(g=null),p&&p.apply(this,arguments)})}}function n(u){return u&&function(f,d){try{return u.call(t,f,d)}catch(p){if(!c(p))throw p}}}function s(u){return u&&function(f,d,p,g){return u.call(t,f,d,p,function(m){c(m)&&(m=null),g&&g.apply(this,arguments)})}}function a(u){return u&&function(f,d,p){try{return u.call(t,f,d,p)}catch(g){if(!c(g))throw g}}}function o(u){return u&&function(f,d,p){typeof d=="function"&&(p=d,d=null);function g(m,w){w&&(w.uid<0&&(w.uid+=4294967296),w.gid<0&&(w.gid+=4294967296)),p&&p.apply(this,arguments)}return d?u.call(t,f,d,g):u.call(t,f,g)}}function l(u){return u&&function(f,d){var p=d?u.call(t,f,d):u.call(t,f);return p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),p}}function c(u){if(!u||u.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(u.code==="EINVAL"||u.code==="EPERM"))}}var cv=wg.Stream,FT=IT;function IT(t){return{ReadStream:e,WriteStream:r};function e(i,n){if(!(this instanceof e))return new e(i,n);cv.call(this);var s=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var a=Object.keys(n),o=0,l=a.length;o<l;o++){var c=a[o];this[c]=n[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}t.open(this.path,this.flags,this.mode,function(u,f){if(u){s.emit("error",u),s.readable=!1;return}s.fd=f,s.emit("open",f),s._read()})}function r(i,n){if(!(this instanceof r))return new r(i,n);cv.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),a=0,o=s.length;a<o;a++){var l=s[a];this[l]=n[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var LT=MT,jT=Object.getPrototypeOf||function(t){return t.__proto__};function MT(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:jT(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var Dt=Bf,BT=kT,WT=FT,UT=LT,au=Li,or,mf;typeof Symbol=="function"&&typeof Symbol.for=="function"?(or=Symbol.for("graceful-fs.queue"),mf=Symbol.for("graceful-fs.previous")):(or="___graceful-fs.queue",mf="___graceful-fs.previous");function zT(){}function Bw(t,e){Object.defineProperty(t,or,{get:function(){return e}})}var ba=zT;au.debuglog?ba=au.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(ba=function(){var t=au.format.apply(au,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});if(!Dt[or]){var GT=Ct[or]||[];Bw(Dt,GT),Dt.close=function(t){function e(r,i){return t.call(Dt,r,function(n){n||uv(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(e,mf,{value:t}),e}(Dt.close),Dt.closeSync=function(t){function e(r){t.apply(Dt,arguments),uv()}return Object.defineProperty(e,mf,{value:t}),e}(Dt.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){ba(Dt[or]),CE.equal(Dt[or].length,0)})}Ct[or]||Bw(Ct,Dt[or]);var Og=kg(UT(Dt));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Dt.__patched&&(Og=kg(Dt),Dt.__patched=!0);function kg(t){BT(t),t.gracefulify=kg,t.createReadStream=L,t.createWriteStream=H;var e=t.readFile;t.readFile=r;function r(G,q,te){return typeof q=="function"&&(te=q,q=null),X(G,q,te);function X(M,ve,ue,ye){return e(M,ve,function(j){j&&(j.code==="EMFILE"||j.code==="ENFILE")?eo([X,[M,ve,ue],j,ye||Date.now(),Date.now()]):typeof ue=="function"&&ue.apply(this,arguments)})}}var i=t.writeFile;t.writeFile=n;function n(G,q,te,X){return typeof te=="function"&&(X=te,te=null),M(G,q,te,X);function M(ve,ue,ye,j,I){return i(ve,ue,ye,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?eo([M,[ve,ue,ye,j],Y,I||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}var s=t.appendFile;s&&(t.appendFile=a);function a(G,q,te,X){return typeof te=="function"&&(X=te,te=null),M(G,q,te,X);function M(ve,ue,ye,j,I){return s(ve,ue,ye,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?eo([M,[ve,ue,ye,j],Y,I||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}var o=t.copyFile;o&&(t.copyFile=l);function l(G,q,te,X){return typeof te=="function"&&(X=te,te=0),M(G,q,te,X);function M(ve,ue,ye,j,I){return o(ve,ue,ye,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?eo([M,[ve,ue,ye,j],Y,I||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}var c=t.readdir;t.readdir=f;var u=/^v[0-5]\./;function f(G,q,te){typeof q=="function"&&(te=q,q=null);var X=u.test(process.version)?function(ue,ye,j,I){return c(ue,M(ue,ye,j,I))}:function(ue,ye,j,I){return c(ue,ye,M(ue,ye,j,I))};return X(G,q,te);function M(ve,ue,ye,j){return function(I,Y){I&&(I.code==="EMFILE"||I.code==="ENFILE")?eo([X,[ve,ue,ye],I,j||Date.now(),Date.now()]):(Y&&Y.sort&&Y.sort(),typeof ye=="function"&&ye.call(this,I,Y))}}}if(process.version.substr(0,4)==="v0.8"){var d=WT(t);v=d.ReadStream,b=d.WriteStream}var p=t.ReadStream;p&&(v.prototype=Object.create(p.prototype),v.prototype.open=y);var g=t.WriteStream;g&&(b.prototype=Object.create(g.prototype),b.prototype.open=T),Object.defineProperty(t,"ReadStream",{get:function(){return v},set:function(G){v=G},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return b},set:function(G){b=G},enumerable:!0,configurable:!0});var m=v;Object.defineProperty(t,"FileReadStream",{get:function(){return m},set:function(G){m=G},enumerable:!0,configurable:!0});var w=b;Object.defineProperty(t,"FileWriteStream",{get:function(){return w},set:function(G){w=G},enumerable:!0,configurable:!0});function v(G,q){return this instanceof v?(p.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}function y(){var G=this;S(G.path,G.flags,G.mode,function(q,te){q?(G.autoClose&&G.destroy(),G.emit("error",q)):(G.fd=te,G.emit("open",te),G.read())})}function b(G,q){return this instanceof b?(g.apply(this,arguments),this):b.apply(Object.create(b.prototype),arguments)}function T(){var G=this;S(G.path,G.flags,G.mode,function(q,te){q?(G.destroy(),G.emit("error",q)):(G.fd=te,G.emit("open",te))})}function L(G,q){return new t.ReadStream(G,q)}function H(G,q){return new t.WriteStream(G,q)}var B=t.open;t.open=S;function S(G,q,te,X){return typeof te=="function"&&(X=te,te=null),M(G,q,te,X);function M(ve,ue,ye,j,I){return B(ve,ue,ye,function(Y,de){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?eo([M,[ve,ue,ye,j],Y,I||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}return t}function eo(t){ba("ENQUEUE",t[0].name,t[1]),Dt[or].push(t),Ng()}var ou;function uv(){for(var t=Date.now(),e=0;e<Dt[or].length;++e)Dt[or][e].length>2&&(Dt[or][e][3]=t,Dt[or][e][4]=t);Ng()}function Ng(){if(clearTimeout(ou),ou=void 0,Dt[or].length!==0){var t=Dt[or].shift(),e=t[0],r=t[1],i=t[2],n=t[3],s=t[4];if(n===void 0)ba("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-n>=6e4){ba("TIMEOUT",e.name,r);var a=r.pop();typeof a=="function"&&a.call(null,i)}else{var o=Date.now()-s,l=Math.max(s-n,1),c=Math.min(l*1.2,100);o>=c?(ba("RETRY",e.name,r),e.apply(null,r.concat([n]))):Dt[or].push(t)}ou===void 0&&(ou=setTimeout(Ng,0))}}const an=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";an.writable=t=>an(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";an.readable=t=>an(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";an.duplex=t=>an.writable(t)&&an.readable(t);an.transform=t=>an.duplex(t)&&typeof t._transform=="function";var Fg=an,np={exports:{}},sp={exports:{}};typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?sp.exports={nextTick:HT}:sp.exports=process;function HT(t,e,r,i){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,s,a;switch(n){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,i)});default:for(s=new Array(n-1),a=0;a<s.length;)s[a++]=arguments[a];return process.nextTick(function(){t.apply(null,s)})}}var Qf=sp.exports,VT={}.toString,qT=Array.isArray||function(t){return VT.call(t)=="[object Array]"},Ww=js.EventEmitter,ap={exports:{}};(function(t,e){var r=yn,i=r.Buffer;function n(a,o){for(var l in a)o[l]=a[l]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(n(r,e),e.Buffer=s);function s(a,o,l){return i(a,o,l)}n(i,s),s.from=function(a,o,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return i(a,o,l)},s.alloc=function(a,o,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=i(a);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(ap,ap.exports);var Xf=ap.exports,Ut={};function YT(t){return Array.isArray?Array.isArray(t):Jf(t)==="[object Array]"}Ut.isArray=YT;function KT(t){return typeof t=="boolean"}Ut.isBoolean=KT;function ZT(t){return t===null}Ut.isNull=ZT;function QT(t){return t==null}Ut.isNullOrUndefined=QT;function XT(t){return typeof t=="number"}Ut.isNumber=XT;function JT(t){return typeof t=="string"}Ut.isString=JT;function eA(t){return typeof t=="symbol"}Ut.isSymbol=eA;function tA(t){return t===void 0}Ut.isUndefined=tA;function rA(t){return Jf(t)==="[object RegExp]"}Ut.isRegExp=rA;function iA(t){return typeof t=="object"&&t!==null}Ut.isObject=iA;function nA(t){return Jf(t)==="[object Date]"}Ut.isDate=nA;function sA(t){return Jf(t)==="[object Error]"||t instanceof Error}Ut.isError=sA;function aA(t){return typeof t=="function"}Ut.isFunction=aA;function oA(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Ut.isPrimitive=oA;Ut.isBuffer=yn.Buffer.isBuffer;function Jf(t){return Object.prototype.toString.call(t)}var op={exports:{}};typeof Object.create=="function"?op.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:op.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}};var Lc=op.exports,ld={exports:{}},fv;function lA(){return fv||(fv=1,function(t){function e(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}var r=Xf.Buffer,i=Li;function n(s,a,o){s.copy(a,o)}t.exports=function(){function s(){e(this,s),this.head=null,this.tail=null,this.length=0}return s.prototype.push=function(o){var l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length},s.prototype.unshift=function(o){var l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length},s.prototype.shift=function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}},s.prototype.clear=function(){this.head=this.tail=null,this.length=0},s.prototype.join=function(o){if(this.length===0)return"";for(var l=this.head,c=""+l.data;l=l.next;)c+=o+l.data;return c},s.prototype.concat=function(o){if(this.length===0)return r.alloc(0);for(var l=r.allocUnsafe(o>>>0),c=this.head,u=0;c;)n(c.data,l,u),u+=c.data.length,c=c.next;return l},s}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var s=i.inspect({length:this.length});return this.constructor.name+" "+s})}(ld)),ld.exports}var lu=Qf;function cA(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,lu.nextTick(cu,this,t)):lu.nextTick(cu,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,lu.nextTick(cu,r,s)):lu.nextTick(cu,r,s):e&&e(s)}),this)}function uA(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function cu(t,e){t.emit("error",e)}var Uw={destroy:cA,undestroy:uA},fA=hA;function hA(t,e){if(cd("noDeprecation"))return t;var r=!1;function i(){if(!r){if(cd("throwDeprecation"))throw new Error(e);cd("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return i}function cd(t){try{if(!Ct.localStorage)return!1}catch{return!1}var e=Ct.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var ud,hv;function zw(){if(hv)return ud;hv=1;var t=Qf;ud=m;function e(j){var I=this;this.next=null,this.entry=null,this.finish=function(){ye(I,j)}}var r=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:t.nextTick,i;m.WritableState=p;var n=Object.create(Ut);n.inherits=Lc;var s={deprecate:fA},a=Ww,o=Xf.Buffer,l=(typeof Ct<"u"?Ct:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(j){return o.from(j)}function u(j){return o.isBuffer(j)||j instanceof l}var f=Uw;n.inherits(m,a);function d(){}function p(j,I){i=i||Wo(),j=j||{};var Y=I instanceof i;this.objectMode=!!j.objectMode,Y&&(this.objectMode=this.objectMode||!!j.writableObjectMode);var de=j.highWaterMark,Se=j.writableHighWaterMark,De=this.objectMode?16:16*1024;de||de===0?this.highWaterMark=de:Y&&(Se||Se===0)?this.highWaterMark=Se:this.highWaterMark=De,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ge=j.decodeStrings===!1;this.decodeStrings=!ge,this.defaultEncoding=j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ie){B(I,Ie)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}p.prototype.getBuffer=function(){for(var I=this.bufferedRequest,Y=[];I;)Y.push(I),I=I.next;return Y},function(){try{Object.defineProperty(p.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var g;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(j){return g.call(this,j)?!0:this!==m?!1:j&&j._writableState instanceof p}})):g=function(j){return j instanceof this};function m(j){if(i=i||Wo(),!g.call(m,this)&&!(this instanceof i))return new m(j);this._writableState=new p(j,this),this.writable=!0,j&&(typeof j.write=="function"&&(this._write=j.write),typeof j.writev=="function"&&(this._writev=j.writev),typeof j.destroy=="function"&&(this._destroy=j.destroy),typeof j.final=="function"&&(this._final=j.final)),a.call(this)}m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function w(j,I){var Y=new Error("write after end");j.emit("error",Y),t.nextTick(I,Y)}function v(j,I,Y,de){var Se=!0,De=!1;return Y===null?De=new TypeError("May not write null values to stream"):typeof Y!="string"&&Y!==void 0&&!I.objectMode&&(De=new TypeError("Invalid non-string/buffer chunk")),De&&(j.emit("error",De),t.nextTick(de,De),Se=!1),Se}m.prototype.write=function(j,I,Y){var de=this._writableState,Se=!1,De=!de.objectMode&&u(j);return De&&!o.isBuffer(j)&&(j=c(j)),typeof I=="function"&&(Y=I,I=null),De?I="buffer":I||(I=de.defaultEncoding),typeof Y!="function"&&(Y=d),de.ended?w(this,Y):(De||v(this,de,j,Y))&&(de.pendingcb++,Se=b(this,de,De,j,I,Y)),Se},m.prototype.cork=function(){var j=this._writableState;j.corked++},m.prototype.uncork=function(){var j=this._writableState;j.corked&&(j.corked--,!j.writing&&!j.corked&&!j.bufferProcessing&&j.bufferedRequest&&q(this,j))},m.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=I.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+I);return this._writableState.defaultEncoding=I,this};function y(j,I,Y){return!j.objectMode&&j.decodeStrings!==!1&&typeof I=="string"&&(I=o.from(I,Y)),I}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function b(j,I,Y,de,Se,De){if(!Y){var ge=y(I,de,Se);de!==ge&&(Y=!0,Se="buffer",de=ge)}var Ie=I.objectMode?1:de.length;I.length+=Ie;var nt=I.length<I.highWaterMark;if(nt||(I.needDrain=!0),I.writing||I.corked){var st=I.lastBufferedRequest;I.lastBufferedRequest={chunk:de,encoding:Se,isBuf:Y,callback:De,next:null},st?st.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else T(j,I,!1,Ie,de,Se,De);return nt}function T(j,I,Y,de,Se,De,ge){I.writelen=de,I.writecb=ge,I.writing=!0,I.sync=!0,Y?j._writev(Se,I.onwrite):j._write(Se,De,I.onwrite),I.sync=!1}function L(j,I,Y,de,Se){--I.pendingcb,Y?(t.nextTick(Se,de),t.nextTick(ve,j,I),j._writableState.errorEmitted=!0,j.emit("error",de)):(Se(de),j._writableState.errorEmitted=!0,j.emit("error",de),ve(j,I))}function H(j){j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0}function B(j,I){var Y=j._writableState,de=Y.sync,Se=Y.writecb;if(H(Y),I)L(j,Y,de,I,Se);else{var De=te(Y);!De&&!Y.corked&&!Y.bufferProcessing&&Y.bufferedRequest&&q(j,Y),de?r(S,j,Y,De,Se):S(j,Y,De,Se)}}function S(j,I,Y,de){Y||G(j,I),I.pendingcb--,de(),ve(j,I)}function G(j,I){I.length===0&&I.needDrain&&(I.needDrain=!1,j.emit("drain"))}function q(j,I){I.bufferProcessing=!0;var Y=I.bufferedRequest;if(j._writev&&Y&&Y.next){var de=I.bufferedRequestCount,Se=new Array(de),De=I.corkedRequestsFree;De.entry=Y;for(var ge=0,Ie=!0;Y;)Se[ge]=Y,Y.isBuf||(Ie=!1),Y=Y.next,ge+=1;Se.allBuffers=Ie,T(j,I,!0,I.length,Se,"",De.finish),I.pendingcb++,I.lastBufferedRequest=null,De.next?(I.corkedRequestsFree=De.next,De.next=null):I.corkedRequestsFree=new e(I),I.bufferedRequestCount=0}else{for(;Y;){var nt=Y.chunk,st=Y.encoding,R=Y.callback,P=I.objectMode?1:nt.length;if(T(j,I,!1,P,nt,st,R),Y=Y.next,I.bufferedRequestCount--,I.writing)break}Y===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=Y,I.bufferProcessing=!1}m.prototype._write=function(j,I,Y){Y(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(j,I,Y){var de=this._writableState;typeof j=="function"?(Y=j,j=null,I=null):typeof I=="function"&&(Y=I,I=null),j!=null&&this.write(j,I),de.corked&&(de.corked=1,this.uncork()),de.ending||ue(this,de,Y)};function te(j){return j.ending&&j.length===0&&j.bufferedRequest===null&&!j.finished&&!j.writing}function X(j,I){j._final(function(Y){I.pendingcb--,Y&&j.emit("error",Y),I.prefinished=!0,j.emit("prefinish"),ve(j,I)})}function M(j,I){!I.prefinished&&!I.finalCalled&&(typeof j._final=="function"?(I.pendingcb++,I.finalCalled=!0,t.nextTick(X,j,I)):(I.prefinished=!0,j.emit("prefinish")))}function ve(j,I){var Y=te(I);return Y&&(M(j,I),I.pendingcb===0&&(I.finished=!0,j.emit("finish"))),Y}function ue(j,I,Y){I.ending=!0,ve(j,I),Y&&(I.finished?t.nextTick(Y):j.once("finish",Y)),I.ended=!0,j.writable=!1}function ye(j,I,Y){var de=j.entry;for(j.entry=null;de;){var Se=de.callback;I.pendingcb--,Se(Y),de=de.next}I.corkedRequestsFree.next=j}return Object.defineProperty(m.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(j){this._writableState&&(this._writableState.destroyed=j)}}),m.prototype.destroy=f.destroy,m.prototype._undestroy=f.undestroy,m.prototype._destroy=function(j,I){this.end(),I(j)},ud}var fd,dv;function Wo(){if(dv)return fd;dv=1;var t=Qf,e=Object.keys||function(f){var d=[];for(var p in f)d.push(p);return d};fd=l;var r=Object.create(Ut);r.inherits=Lc;var i=Gw(),n=zw();r.inherits(l,i);for(var s=e(n.prototype),a=0;a<s.length;a++){var o=s[a];l.prototype[o]||(l.prototype[o]=n.prototype[o])}function l(f){if(!(this instanceof l))return new l(f);i.call(this,f),n.call(this,f),f&&f.readable===!1&&(this.readable=!1),f&&f.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,f&&f.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",c)}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function c(){this.allowHalfOpen||this._writableState.ended||t.nextTick(u,this)}function u(f){f.end()}return Object.defineProperty(l.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(f){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=f,this._writableState.destroyed=f)}}),l.prototype._destroy=function(f,d){this.push(null),this.end(),t.nextTick(d,f)},fd}var hd={},pv;function gv(){if(pv)return hd;pv=1;var t=Xf.Buffer,e=t.isEncoding||function(v){switch(v=""+v,v&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(v){if(!v)return"utf8";for(var y;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(y)return;v=(""+v).toLowerCase(),y=!0}}function i(v){var y=r(v);if(typeof y!="string"&&(t.isEncoding===e||!e(v)))throw new Error("Unknown encoding: "+v);return y||v}hd.StringDecoder=n;function n(v){this.encoding=i(v);var y;switch(this.encoding){case"utf16le":this.text=f,this.end=d,y=4;break;case"utf8":this.fillLast=l,y=4;break;case"base64":this.text=p,this.end=g,y=3;break;default:this.write=m,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(y)}n.prototype.write=function(v){if(v.length===0)return"";var y,b;if(this.lastNeed){if(y=this.fillLast(v),y===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<v.length?y?y+this.text(v,b):this.text(v,b):y||""},n.prototype.end=u,n.prototype.text=c,n.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length};function s(v){return v<=127?0:v>>5===6?2:v>>4===14?3:v>>3===30?4:v>>6===2?-1:-2}function a(v,y,b){var T=y.length-1;if(T<b)return 0;var L=s(y[T]);return L>=0?(L>0&&(v.lastNeed=L-1),L):--T<b||L===-2?0:(L=s(y[T]),L>=0?(L>0&&(v.lastNeed=L-2),L):--T<b||L===-2?0:(L=s(y[T]),L>=0?(L>0&&(L===2?L=0:v.lastNeed=L-3),L):0))}function o(v,y,b){if((y[0]&192)!==128)return v.lastNeed=0,"";if(v.lastNeed>1&&y.length>1){if((y[1]&192)!==128)return v.lastNeed=1,"";if(v.lastNeed>2&&y.length>2&&(y[2]&192)!==128)return v.lastNeed=2,""}}function l(v){var y=this.lastTotal-this.lastNeed,b=o(this,v);if(b!==void 0)return b;if(this.lastNeed<=v.length)return v.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,y,0,v.length),this.lastNeed-=v.length}function c(v,y){var b=a(this,v,y);if(!this.lastNeed)return v.toString("utf8",y);this.lastTotal=b;var T=v.length-(b-this.lastNeed);return v.copy(this.lastChar,0,T),v.toString("utf8",y,T)}function u(v){var y=v&&v.length?this.write(v):"";return this.lastNeed?y+"":y}function f(v,y){if((v.length-y)%2===0){var b=v.toString("utf16le",y);if(b){var T=b.charCodeAt(b.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",y,v.length-1)}function d(v){var y=v&&v.length?this.write(v):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,b)}return y}function p(v,y){var b=(v.length-y)%3;return b===0?v.toString("base64",y):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",y,v.length-b))}function g(v){var y=v&&v.length?this.write(v):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function m(v){return v.toString(this.encoding)}function w(v){return v&&v.length?this.write(v):""}return hd}var dd,mv;function Gw(){if(mv)return dd;mv=1;var t=Qf;dd=y;var e=qT,r;y.ReadableState=v,js.EventEmitter;var i=function(R,P){return R.listeners(P).length},n=Ww,s=Xf.Buffer,a=(typeof Ct<"u"?Ct:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(R){return s.from(R)}function l(R){return s.isBuffer(R)||R instanceof a}var c=Object.create(Ut);c.inherits=Lc;var u=Li,f=void 0;u&&u.debuglog?f=u.debuglog("stream"):f=function(){};var d=lA(),p=Uw,g;c.inherits(y,n);var m=["error","close","destroy","pause","resume"];function w(R,P,ae){if(typeof R.prependListener=="function")return R.prependListener(P,ae);!R._events||!R._events[P]?R.on(P,ae):e(R._events[P])?R._events[P].unshift(ae):R._events[P]=[ae,R._events[P]]}function v(R,P){r=r||Wo(),R=R||{};var ae=P instanceof r;this.objectMode=!!R.objectMode,ae&&(this.objectMode=this.objectMode||!!R.readableObjectMode);var K=R.highWaterMark,k=R.readableHighWaterMark,F=this.objectMode?16:16*1024;K||K===0?this.highWaterMark=K:ae&&(k||k===0)?this.highWaterMark=k:this.highWaterMark=F,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(g||(g=gv().StringDecoder),this.decoder=new g(R.encoding),this.encoding=R.encoding)}function y(R){if(r=r||Wo(),!(this instanceof y))return new y(R);this._readableState=new v(R,this),this.readable=!0,R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy)),n.call(this)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(R){this._readableState&&(this._readableState.destroyed=R)}}),y.prototype.destroy=p.destroy,y.prototype._undestroy=p.undestroy,y.prototype._destroy=function(R,P){this.push(null),P(R)},y.prototype.push=function(R,P){var ae=this._readableState,K;return ae.objectMode?K=!0:typeof R=="string"&&(P=P||ae.defaultEncoding,P!==ae.encoding&&(R=s.from(R,P),P=""),K=!0),b(this,R,P,!1,K)},y.prototype.unshift=function(R){return b(this,R,null,!0,!1)};function b(R,P,ae,K,k){var F=R._readableState;if(P===null)F.reading=!1,q(R,F);else{var E;k||(E=L(F,P)),E?R.emit("error",E):F.objectMode||P&&P.length>0?(typeof P!="string"&&!F.objectMode&&Object.getPrototypeOf(P)!==s.prototype&&(P=o(P)),K?F.endEmitted?R.emit("error",new Error("stream.unshift() after end event")):T(R,F,P,!0):F.ended?R.emit("error",new Error("stream.push() after EOF")):(F.reading=!1,F.decoder&&!ae?(P=F.decoder.write(P),F.objectMode||P.length!==0?T(R,F,P,!1):M(R,F)):T(R,F,P,!1))):K||(F.reading=!1)}return H(F)}function T(R,P,ae,K){P.flowing&&P.length===0&&!P.sync?(R.emit("data",ae),R.read(0)):(P.length+=P.objectMode?1:ae.length,K?P.buffer.unshift(ae):P.buffer.push(ae),P.needReadable&&te(R)),M(R,P)}function L(R,P){var ae;return!l(P)&&typeof P!="string"&&P!==void 0&&!R.objectMode&&(ae=new TypeError("Invalid non-string/buffer chunk")),ae}function H(R){return!R.ended&&(R.needReadable||R.length<R.highWaterMark||R.length===0)}y.prototype.isPaused=function(){return this._readableState.flowing===!1},y.prototype.setEncoding=function(R){return g||(g=gv().StringDecoder),this._readableState.decoder=new g(R),this._readableState.encoding=R,this};var B=8388608;function S(R){return R>=B?R=B:(R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++),R}function G(R,P){return R<=0||P.length===0&&P.ended?0:P.objectMode?1:R!==R?P.flowing&&P.length?P.buffer.head.data.length:P.length:(R>P.highWaterMark&&(P.highWaterMark=S(R)),R<=P.length?R:P.ended?P.length:(P.needReadable=!0,0))}y.prototype.read=function(R){f("read",R),R=parseInt(R,10);var P=this._readableState,ae=R;if(R!==0&&(P.emittedReadable=!1),R===0&&P.needReadable&&(P.length>=P.highWaterMark||P.ended))return f("read: emitReadable",P.length,P.ended),P.length===0&&P.ended?Ie(this):te(this),null;if(R=G(R,P),R===0&&P.ended)return P.length===0&&Ie(this),null;var K=P.needReadable;f("need readable",K),(P.length===0||P.length-R<P.highWaterMark)&&(K=!0,f("length less than watermark",K)),P.ended||P.reading?(K=!1,f("reading or ended",K)):K&&(f("do read"),P.reading=!0,P.sync=!0,P.length===0&&(P.needReadable=!0),this._read(P.highWaterMark),P.sync=!1,P.reading||(R=G(ae,P)));var k;return R>0?k=de(R,P):k=null,k===null?(P.needReadable=!0,R=0):P.length-=R,P.length===0&&(P.ended||(P.needReadable=!0),ae!==R&&P.ended&&Ie(this)),k!==null&&this.emit("data",k),k};function q(R,P){if(!P.ended){if(P.decoder){var ae=P.decoder.end();ae&&ae.length&&(P.buffer.push(ae),P.length+=P.objectMode?1:ae.length)}P.ended=!0,te(R)}}function te(R){var P=R._readableState;P.needReadable=!1,P.emittedReadable||(f("emitReadable",P.flowing),P.emittedReadable=!0,P.sync?t.nextTick(X,R):X(R))}function X(R){f("emit readable"),R.emit("readable"),Y(R)}function M(R,P){P.readingMore||(P.readingMore=!0,t.nextTick(ve,R,P))}function ve(R,P){for(var ae=P.length;!P.reading&&!P.flowing&&!P.ended&&P.length<P.highWaterMark&&(f("maybeReadMore read 0"),R.read(0),ae!==P.length);)ae=P.length;P.readingMore=!1}y.prototype._read=function(R){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(R,P){var ae=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=R;break;case 1:K.pipes=[K.pipes,R];break;default:K.pipes.push(R);break}K.pipesCount+=1,f("pipe count=%d opts=%j",K.pipesCount,P);var k=(!P||P.end!==!1)&&R!==process.stdout&&R!==process.stderr,F=k?$:he;K.endEmitted?t.nextTick(F):ae.once("end",F),R.on("unpipe",E);function E(me,Le){f("onunpipe"),me===ae&&Le&&Le.hasUnpiped===!1&&(Le.hasUnpiped=!0,N())}function $(){f("onend"),R.end()}var U=ue(ae);R.on("drain",U);var x=!1;function N(){f("cleanup"),R.removeListener("close",le),R.removeListener("finish",V),R.removeListener("drain",U),R.removeListener("error",oe),R.removeListener("unpipe",E),ae.removeListener("end",$),ae.removeListener("end",he),ae.removeListener("data",ee),x=!0,K.awaitDrain&&(!R._writableState||R._writableState.needDrain)&&U()}var z=!1;ae.on("data",ee);function ee(me){f("ondata"),z=!1;var Le=R.write(me);Le===!1&&!z&&((K.pipesCount===1&&K.pipes===R||K.pipesCount>1&&st(K.pipes,R)!==-1)&&!x&&(f("false write response, pause",K.awaitDrain),K.awaitDrain++,z=!0),ae.pause())}function oe(me){f("onerror",me),he(),R.removeListener("error",oe),i(R,"error")===0&&R.emit("error",me)}w(R,"error",oe);function le(){R.removeListener("finish",V),he()}R.once("close",le);function V(){f("onfinish"),R.removeListener("close",le),he()}R.once("finish",V);function he(){f("unpipe"),ae.unpipe(R)}return R.emit("pipe",ae),K.flowing||(f("pipe resume"),ae.resume()),R};function ue(R){return function(){var P=R._readableState;f("pipeOnDrain",P.awaitDrain),P.awaitDrain&&P.awaitDrain--,P.awaitDrain===0&&i(R,"data")&&(P.flowing=!0,Y(R))}}y.prototype.unpipe=function(R){var P=this._readableState,ae={hasUnpiped:!1};if(P.pipesCount===0)return this;if(P.pipesCount===1)return R&&R!==P.pipes?this:(R||(R=P.pipes),P.pipes=null,P.pipesCount=0,P.flowing=!1,R&&R.emit("unpipe",this,ae),this);if(!R){var K=P.pipes,k=P.pipesCount;P.pipes=null,P.pipesCount=0,P.flowing=!1;for(var F=0;F<k;F++)K[F].emit("unpipe",this,{hasUnpiped:!1});return this}var E=st(P.pipes,R);return E===-1?this:(P.pipes.splice(E,1),P.pipesCount-=1,P.pipesCount===1&&(P.pipes=P.pipes[0]),R.emit("unpipe",this,ae),this)},y.prototype.on=function(R,P){var ae=n.prototype.on.call(this,R,P);if(R==="data")this._readableState.flowing!==!1&&this.resume();else if(R==="readable"){var K=this._readableState;!K.endEmitted&&!K.readableListening&&(K.readableListening=K.needReadable=!0,K.emittedReadable=!1,K.reading?K.length&&te(this):t.nextTick(ye,this))}return ae},y.prototype.addListener=y.prototype.on;function ye(R){f("readable nexttick read 0"),R.read(0)}y.prototype.resume=function(){var R=this._readableState;return R.flowing||(f("resume"),R.flowing=!0,j(this,R)),this};function j(R,P){P.resumeScheduled||(P.resumeScheduled=!0,t.nextTick(I,R,P))}function I(R,P){P.reading||(f("resume read 0"),R.read(0)),P.resumeScheduled=!1,P.awaitDrain=0,R.emit("resume"),Y(R),P.flowing&&!P.reading&&R.read(0)}y.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Y(R){var P=R._readableState;for(f("flow",P.flowing);P.flowing&&R.read()!==null;);}y.prototype.wrap=function(R){var P=this,ae=this._readableState,K=!1;R.on("end",function(){if(f("wrapped end"),ae.decoder&&!ae.ended){var E=ae.decoder.end();E&&E.length&&P.push(E)}P.push(null)}),R.on("data",function(E){if(f("wrapped data"),ae.decoder&&(E=ae.decoder.write(E)),!(ae.objectMode&&E==null)&&!(!ae.objectMode&&(!E||!E.length))){var $=P.push(E);$||(K=!0,R.pause())}});for(var k in R)this[k]===void 0&&typeof R[k]=="function"&&(this[k]=function(E){return function(){return R[E].apply(R,arguments)}}(k));for(var F=0;F<m.length;F++)R.on(m[F],this.emit.bind(this,m[F]));return this._read=function(E){f("wrapped _read",E),K&&(K=!1,R.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=de;function de(R,P){if(P.length===0)return null;var ae;return P.objectMode?ae=P.buffer.shift():!R||R>=P.length?(P.decoder?ae=P.buffer.join(""):P.buffer.length===1?ae=P.buffer.head.data:ae=P.buffer.concat(P.length),P.buffer.clear()):ae=Se(R,P.buffer,P.decoder),ae}function Se(R,P,ae){var K;return R<P.head.data.length?(K=P.head.data.slice(0,R),P.head.data=P.head.data.slice(R)):R===P.head.data.length?K=P.shift():K=ae?De(R,P):ge(R,P),K}function De(R,P){var ae=P.head,K=1,k=ae.data;for(R-=k.length;ae=ae.next;){var F=ae.data,E=R>F.length?F.length:R;if(E===F.length?k+=F:k+=F.slice(0,R),R-=E,R===0){E===F.length?(++K,ae.next?P.head=ae.next:P.head=P.tail=null):(P.head=ae,ae.data=F.slice(E));break}++K}return P.length-=K,k}function ge(R,P){var ae=s.allocUnsafe(R),K=P.head,k=1;for(K.data.copy(ae),R-=K.data.length;K=K.next;){var F=K.data,E=R>F.length?F.length:R;if(F.copy(ae,ae.length-R,0,E),R-=E,R===0){E===F.length?(++k,K.next?P.head=K.next:P.head=P.tail=null):(P.head=K,K.data=F.slice(E));break}++k}return P.length-=k,ae}function Ie(R){var P=R._readableState;if(P.length>0)throw new Error('"endReadable()" called on non-empty stream');P.endEmitted||(P.ended=!0,t.nextTick(nt,P,R))}function nt(R,P){!R.endEmitted&&R.length===0&&(R.endEmitted=!0,P.readable=!1,P.emit("end"))}function st(R,P){for(var ae=0,K=R.length;ae<K;ae++)if(R[ae]===P)return ae;return-1}return dd}var Hw=jn,eh=Wo(),Vw=Object.create(Ut);Vw.inherits=Lc;Vw.inherits(jn,eh);function dA(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function jn(t){if(!(this instanceof jn))return new jn(t);eh.call(this,t),this._transformState={afterTransform:dA.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",pA)}function pA(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){vv(t,e,r)}):vv(this,null,null)}jn.prototype.push=function(t,e){return this._transformState.needTransform=!1,eh.prototype.push.call(this,t,e)};jn.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};jn.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};jn.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};jn.prototype._destroy=function(t,e){var r=this;eh.prototype._destroy.call(this,t,function(i){e(i),r.emit("close")})};function vv(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}var gA=Vl,qw=Hw,Yw=Object.create(Ut);Yw.inherits=Lc;Yw.inherits(Vl,qw);function Vl(t){if(!(this instanceof Vl))return new Vl(t);qw.call(this,t)}Vl.prototype._transform=function(t,e,r){r(null,t)};(function(t,e){e=t.exports=Gw(),e.Stream=e,e.Readable=e,e.Writable=zw(),e.Duplex=Wo(),e.Transform=Hw,e.PassThrough=gA})(np,np.exports);var mA=np.exports,vA=mA.PassThrough,Kw=Li,th=vA,yA={Readable:vf};Kw.inherits(vf,th);Kw.inherits(lp,th);function Zw(t,e,r){t[e]=function(){return delete t[e],r.apply(this,arguments),this[e].apply(this,arguments)}}function vf(t,e){if(!(this instanceof vf))return new vf(t,e);th.call(this,e),Zw(this,"_read",function(){var r=t.call(this,e),i=this.emit.bind(this,"error");r.on("error",i),r.pipe(this)}),this.emit("readable")}function lp(t,e){if(!(this instanceof lp))return new lp(t,e);th.call(this,e),Zw(this,"_write",function(){var r=t.call(this,e),i=this.emit.bind(this,"error");r.on("error",i),this.pipe(r)}),this.emit("writable")}/*!
 * normalize-path <https://github.com/jonschlinkert/normalize-path>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */var Qw=function(t,e){if(typeof t!="string")throw new TypeError("expected path to be a string");if(t==="\\"||t==="/")return"/";var r=t.length;if(r<=1)return t;var i="";if(r>4&&t[3]==="\\"){var n=t[2];(n==="?"||n===".")&&t.slice(0,2)==="\\\\"&&(t=t.slice(2),i="//")}var s=t.split(/[/\\]+/);return e!==!1&&s[s.length-1]===""&&s.pop(),i+s.join("/")};function bA(t){return t}var Xw=bA;function wA(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var _A=wA,SA=_A,yv=Math.max;function EA(t,e,r){return e=yv(e===void 0?t.length-1:e,0),function(){for(var i=arguments,n=-1,s=yv(i.length-e,0),a=Array(s);++n<s;)a[n]=i[e+n];n=-1;for(var o=Array(e+1);++n<e;)o[n]=i[n];return o[e]=r(a),SA(t,this,o)}}var xA=EA;function TA(t){return function(){return t}}var AA=TA,$A=typeof Ct=="object"&&Ct&&Ct.Object===Object&&Ct,Jw=$A,RA=Jw,CA=typeof self=="object"&&self&&self.Object===Object&&self,DA=RA||CA||Function("return this")(),jc=DA,PA=jc,OA=PA.Symbol,Ig=OA,bv=Ig,e_=Object.prototype,kA=e_.hasOwnProperty,NA=e_.toString,yl=bv?bv.toStringTag:void 0;function FA(t){var e=kA.call(t,yl),r=t[yl];try{t[yl]=void 0;var i=!0}catch{}var n=NA.call(t);return i&&(e?t[yl]=r:delete t[yl]),n}var IA=FA,LA=Object.prototype,jA=LA.toString;function MA(t){return jA.call(t)}var BA=MA,wv=Ig,WA=IA,UA=BA,zA="[object Null]",GA="[object Undefined]",_v=wv?wv.toStringTag:void 0;function HA(t){return t==null?t===void 0?GA:zA:_v&&_v in Object(t)?WA(t):UA(t)}var rh=HA;function VA(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ih=VA,qA=rh,YA=ih,KA="[object AsyncFunction]",ZA="[object Function]",QA="[object GeneratorFunction]",XA="[object Proxy]";function JA(t){if(!YA(t))return!1;var e=qA(t);return e==ZA||e==QA||e==KA||e==XA}var t_=JA,e$=jc,t$=e$["__core-js_shared__"],r$=t$,pd=r$,Sv=function(){var t=/[^.]+$/.exec(pd&&pd.keys&&pd.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function i$(t){return!!Sv&&Sv in t}var n$=i$,s$=Function.prototype,a$=s$.toString;function o$(t){if(t!=null){try{return a$.call(t)}catch{}try{return t+""}catch{}}return""}var l$=o$,c$=t_,u$=n$,f$=ih,h$=l$,d$=/[\\^$.*+?()[\]{}|]/g,p$=/^\[object .+?Constructor\]$/,g$=Function.prototype,m$=Object.prototype,v$=g$.toString,y$=m$.hasOwnProperty,b$=RegExp("^"+v$.call(y$).replace(d$,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function w$(t){if(!f$(t)||u$(t))return!1;var e=c$(t)?b$:p$;return e.test(h$(t))}var _$=w$;function S$(t,e){return t==null?void 0:t[e]}var E$=S$,x$=_$,T$=E$;function A$(t,e){var r=T$(t,e);return x$(r)?r:void 0}var nh=A$,$$=nh,R$=function(){try{var t=$$(Object,"defineProperty");return t({},"",{}),t}catch{}}(),C$=R$,D$=AA,Ev=C$,P$=Xw,O$=Ev?function(t,e){return Ev(t,"toString",{configurable:!0,enumerable:!1,value:D$(e),writable:!0})}:P$,k$=O$,N$=800,F$=16,I$=Date.now;function L$(t){var e=0,r=0;return function(){var i=I$(),n=F$-(i-r);if(r=i,n>0){if(++e>=N$)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var j$=L$,M$=k$,B$=j$,W$=B$(M$),U$=W$,z$=Xw,G$=xA,H$=U$;function V$(t,e){return H$(G$(t,e,z$),t+"")}var Lg=V$;function q$(t,e){return t===e||t!==t&&e!==e}var jg=q$,Y$=9007199254740991;function K$(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Y$}var r_=K$,Z$=t_,Q$=r_;function X$(t){return t!=null&&Q$(t.length)&&!Z$(t)}var Mg=X$,J$=9007199254740991,eR=/^(?:0|[1-9]\d*)$/;function tR(t,e){var r=typeof t;return e=e??J$,!!e&&(r=="number"||r!="symbol"&&eR.test(t))&&t>-1&&t%1==0&&t<e}var i_=tR,rR=jg,iR=Mg,nR=i_,sR=ih;function aR(t,e,r){if(!sR(r))return!1;var i=typeof e;return(i=="number"?iR(r)&&nR(e,r.length):i=="string"&&e in r)?rR(r[e],t):!1}var oR=aR;function lR(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var cR=lR;function uR(t){return t!=null&&typeof t=="object"}var Mc=uR,fR=rh,hR=Mc,dR="[object Arguments]";function pR(t){return hR(t)&&fR(t)==dR}var gR=pR,xv=gR,mR=Mc,n_=Object.prototype,vR=n_.hasOwnProperty,yR=n_.propertyIsEnumerable,bR=xv(function(){return arguments}())?xv:function(t){return mR(t)&&vR.call(t,"callee")&&!yR.call(t,"callee")},s_=bR,wR=Array.isArray,a_=wR,yf={exports:{}};function _R(){return!1}var SR=_R;yf.exports;(function(t,e){var r=jc,i=SR,n=e&&!e.nodeType&&e,s=n&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===n,o=a?r.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||i;t.exports=c})(yf,yf.exports);var ER=yf.exports,xR=rh,TR=r_,AR=Mc,$R="[object Arguments]",RR="[object Array]",CR="[object Boolean]",DR="[object Date]",PR="[object Error]",OR="[object Function]",kR="[object Map]",NR="[object Number]",FR="[object Object]",IR="[object RegExp]",LR="[object Set]",jR="[object String]",MR="[object WeakMap]",BR="[object ArrayBuffer]",WR="[object DataView]",UR="[object Float32Array]",zR="[object Float64Array]",GR="[object Int8Array]",HR="[object Int16Array]",VR="[object Int32Array]",qR="[object Uint8Array]",YR="[object Uint8ClampedArray]",KR="[object Uint16Array]",ZR="[object Uint32Array]",Et={};Et[UR]=Et[zR]=Et[GR]=Et[HR]=Et[VR]=Et[qR]=Et[YR]=Et[KR]=Et[ZR]=!0;Et[$R]=Et[RR]=Et[BR]=Et[CR]=Et[WR]=Et[DR]=Et[PR]=Et[OR]=Et[kR]=Et[NR]=Et[FR]=Et[IR]=Et[LR]=Et[jR]=Et[MR]=!1;function QR(t){return AR(t)&&TR(t.length)&&!!Et[xR(t)]}var XR=QR;function JR(t){return function(e){return t(e)}}var o_=JR,bf={exports:{}};bf.exports;(function(t,e){var r=Jw,i=e&&!e.nodeType&&e,n=i&&!0&&t&&!t.nodeType&&t,s=n&&n.exports===i,a=s&&r.process,o=function(){try{var l=n&&n.require&&n.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(bf,bf.exports);var eC=bf.exports,tC=XR,rC=o_,Tv=eC,Av=Tv&&Tv.isTypedArray,iC=Av?rC(Av):tC,nC=iC,sC=cR,aC=s_,oC=a_,lC=ER,cC=i_,uC=nC,fC=Object.prototype,hC=fC.hasOwnProperty;function dC(t,e){var r=oC(t),i=!r&&aC(t),n=!r&&!i&&lC(t),s=!r&&!i&&!n&&uC(t),a=r||i||n||s,o=a?sC(t.length,String):[],l=o.length;for(var c in t)(e||hC.call(t,c))&&!(a&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||cC(c,l)))&&o.push(c);return o}var pC=dC,gC=Object.prototype;function mC(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||gC;return t===r}var vC=mC;function yC(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var bC=yC,wC=ih,_C=vC,SC=bC,EC=Object.prototype,xC=EC.hasOwnProperty;function TC(t){if(!wC(t))return SC(t);var e=_C(t),r=[];for(var i in t)i=="constructor"&&(e||!xC.call(t,i))||r.push(i);return r}var AC=TC,$C=pC,RC=AC,CC=Mg;function DC(t){return CC(t)?$C(t,!0):RC(t)}var PC=DC,OC=Lg,kC=jg,NC=oR,FC=PC,l_=Object.prototype,IC=l_.hasOwnProperty,LC=OC(function(t,e){t=Object(t);var r=-1,i=e.length,n=i>2?e[2]:void 0;for(n&&NC(e[0],e[1],n)&&(i=1);++r<i;)for(var s=e[r],a=FC(s),o=-1,l=a.length;++o<l;){var c=a[o],u=t[c];(u===void 0||kC(u,l_[c])&&!IC.call(t,c))&&(t[c]=s[c])}return t}),jC=LC,c_={exports:{}},gd={exports:{}};let MC=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let i=0;i<e.length;i++)r+=`    ${e[i].stack}
`;super(r),this.name="AggregateError",this.errors=e}};var Pt={AggregateError:MC,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array},u_={exports:{}},f_={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,i]){const n=e.shift();return i==="f"?n.toFixed(6):i==="j"?JSON.stringify(n):i==="s"&&typeof n=="object"?`${n.constructor!==Object?n.constructor.name:""} {}`.trim():n.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}};const{format:BC,inspect:wf}=f_,{AggregateError:WC}=Pt,UC=globalThis.AggregateError||WC,zC=Symbol("kIsNodeError"),GC=["string","function","number","object","Function","Object","boolean","bigint","symbol"],HC=/^([A-Z][a-z0-9]*)+$/,VC="__node_internal_",sh={};function wa(t,e){if(!t)throw new sh.ERR_INTERNAL_ASSERTION(e)}function $v(t){let e="",r=t.length;const i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function qC(t,e,r){if(typeof e=="function")return wa(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);const i=(e.match(/%[dfijoOs]/g)||[]).length;return wa(i===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${i}).`),r.length===0?e:BC(e,...r)}function ur(t,e,r){r||(r=Error);class i extends r{constructor(...s){super(qC(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=t,i.prototype[zC]=!0,sh[t]=i}function Rv(t){const e=VC+t.name;return Object.defineProperty(t,"name",{value:e}),t}function YC(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const r=new UC([e,t],e.message);return r.code=e.code,r}return t||e}let KC=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new sh.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};ur("ERR_ASSERTION","%s",Error);ur("ERR_INVALID_ARG_TYPE",(t,e,r)=>{wa(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let i="The ";t.endsWith(" argument")?i+=`${t} `:i+=`"${t}" ${t.includes(".")?"property":"argument"} `,i+="must be ";const n=[],s=[],a=[];for(const l of e)wa(typeof l=="string","All expected entries have to be of type string"),GC.includes(l)?n.push(l.toLowerCase()):HC.test(l)?s.push(l):(wa(l!=="object",'The value "object" should be written as "Object"'),a.push(l));if(s.length>0){const l=n.indexOf("object");l!==-1&&(n.splice(n,l,1),s.push("Object"))}if(n.length>0){switch(n.length){case 1:i+=`of type ${n[0]}`;break;case 2:i+=`one of type ${n[0]} or ${n[1]}`;break;default:{const l=n.pop();i+=`one of type ${n.join(", ")}, or ${l}`}}(s.length>0||a.length>0)&&(i+=" or ")}if(s.length>0){switch(s.length){case 1:i+=`an instance of ${s[0]}`;break;case 2:i+=`an instance of ${s[0]} or ${s[1]}`;break;default:{const l=s.pop();i+=`an instance of ${s.join(", ")}, or ${l}`}}a.length>0&&(i+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(i+="an "),i+=`${a[0]}`;break;case 2:i+=`one of ${a[0]} or ${a[1]}`;break;default:{const l=a.pop();i+=`one of ${a.join(", ")}, or ${l}`}}if(r==null)i+=`. Received ${r}`;else if(typeof r=="function"&&r.name)i+=`. Received function ${r.name}`;else if(typeof r=="object"){var o;if((o=r.constructor)!==null&&o!==void 0&&o.name)i+=`. Received an instance of ${r.constructor.name}`;else{const l=wf(r,{depth:-1});i+=`. Received ${l}`}}else{let l=wf(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),i+=`. Received type ${typeof r} (${l})`}return i},TypeError);ur("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let i=wf(e);return i.length>128&&(i=i.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${i}`},TypeError);ur("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var i;const n=r!=null&&(i=r.constructor)!==null&&i!==void 0&&i.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${n}.`},TypeError);ur("ERR_MISSING_ARGS",(...t)=>{wa(t.length>0,"At least one arg needs to be specified");let e;const r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(i=>`"${i}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const i=t.pop();e+=`The ${t.join(", ")}, and ${i} arguments`}break}return`${e} must be specified`},TypeError);ur("ERR_OUT_OF_RANGE",(t,e,r)=>{wa(e,'Missing "range" argument');let i;if(Number.isInteger(r)&&Math.abs(r)>2**32)i=$v(String(r));else if(typeof r=="bigint"){i=String(r);const n=BigInt(2)**BigInt(32);(r>n||r<-n)&&(i=$v(i)),i+="n"}else i=wf(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${i}`},RangeError);ur("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ur("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ur("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ur("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ur("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ur("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ur("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ur("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ur("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ur("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ur("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Pr={AbortError:KC,aggregateTwoErrors:Rv(YC),hideStackFrames:Rv,codes:sh},bl={exports:{}},Cv;function ql(){if(Cv)return bl.exports;Cv=1;const{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return bl.exports=t,bl.exports.AbortSignal=e,bl.exports.default=t,bl.exports}(function(t){const e=yn,{format:r,inspect:i}=f_,{codes:{ERR_INVALID_ARG_TYPE:n}}=Pr,{kResistStopPropagation:s,AggregateError:a,SymbolDispose:o}=Pt,l=globalThis.AbortSignal||ql().AbortSignal,c=globalThis.AbortController||ql().AbortController,u=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||e.Blob,d=typeof f<"u"?function(w){return w instanceof f}:function(w){return!1},p=(m,w)=>{if(m!==void 0&&(m===null||typeof m!="object"||!("aborted"in m)))throw new n(w,"AbortSignal",m)},g=(m,w)=>{if(typeof m!="function")throw new n(w,"Function",m)};t.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(m){let w=!1;return function(...v){w||(w=!0,m.apply(this,v))}},createDeferredPromise:function(){let m,w;return{promise:new Promise((y,b)=>{m=y,w=b}),resolve:m,reject:w}},promisify(m){return new Promise((w,v)=>{m((y,...b)=>y?v(y):w(...b))})},debuglog(){return function(){}},format:r,inspect:i,types:{isAsyncFunction(m){return m instanceof u},isArrayBufferView(m){return ArrayBuffer.isView(m)}},isBlob:d,deprecate(m,w){return m},addAbortListener:js.addAbortListener||function(w,v){if(w===void 0)throw new n("signal","AbortSignal",w);p(w,"signal"),g(v,"listener");let y;return w.aborted?queueMicrotask(()=>v()):(w.addEventListener("abort",v,{__proto__:null,once:!0,[s]:!0}),y=()=>{w.removeEventListener("abort",v)}),{__proto__:null,[o](){var b;(b=y)===null||b===void 0||b()}}},AbortSignalAny:l.any||function(w){if(w.length===1)return w[0];const v=new c,y=()=>v.abort();return w.forEach(b=>{p(b,"signals"),b.addEventListener("abort",y,{once:!0})}),v.signal.addEventListener("abort",()=>{w.forEach(b=>b.removeEventListener("abort",y))},{once:!0}),v.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(u_);var Fr=u_.exports,Bg={};const{ArrayIsArray:h_,ArrayPrototypeIncludes:ZC,ArrayPrototypeJoin:QC,ArrayPrototypeMap:XC,NumberIsInteger:Wg,NumberMAX_SAFE_INTEGER:JC,NumberMIN_SAFE_INTEGER:eD,ObjectPrototypeHasOwnProperty:tD,String:rD}=Pt,{hideStackFrames:pi,codes:{ERR_INVALID_ARG_TYPE:gi,ERR_INVALID_ARG_VALUE:d_,ERR_OUT_OF_RANGE:Uo}}=Pr,{normalizeEncoding:s6}=Fr,{isAsyncFunction:iD,isArrayBufferView:nD}=Fr.types,sD=pi((t,e,r=eD,i=JC)=>{if(typeof t!="number")throw new gi(e,"number",t);if(!Wg(t))throw new Uo(e,"an integer",t);if(t<r||t>i)throw new Uo(e,`>= ${r} && <= ${i}`,t)});pi((t,e,r=-2147483648,i=2147483647)=>{if(typeof t!="number")throw new gi(e,"number",t);if(!Wg(t))throw new Uo(e,"an integer",t);if(t<r||t>i)throw new Uo(e,`>= ${r} && <= ${i}`,t)});pi((t,e,r=!1)=>{if(typeof t!="number")throw new gi(e,"number",t);if(!Wg(t))throw new Uo(e,"an integer",t);const i=r?1:0,n=4294967295;if(t<i||t>n)throw new Uo(e,`>= ${i} && <= ${n}`,t)});pi((t,e,r)=>{if(!ZC(r,t)){const n="must be one of: "+QC(XC(r,s=>typeof s=="string"?`'${s}'`:rD(s)),", ");throw new d_(e,t,n)}});function aD(t,e){if(typeof t!="boolean")throw new gi(e,"boolean",t)}function md(t,e,r){return t==null||!tD(t,e)?r:t[e]}const oD=pi((t,e,r=null)=>{const i=md(r,"allowArray",!1),n=md(r,"allowFunction",!1);if(!md(r,"nullable",!1)&&t===null||!i&&h_(t)||typeof t!="object"&&(!n||typeof t!="function"))throw new gi(e,"Object",t)});pi((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new gi(e,"a dictionary",t)});pi((t,e,r=0)=>{if(!h_(t))throw new gi(e,"Array",t);if(t.length<r){const i=`must be longer than ${r}`;throw new d_(e,t,i)}});pi((t,e="buffer")=>{if(!nD(t))throw new gi(e,["Buffer","TypedArray","DataView"],t)});const lD=pi((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new gi(e,"AbortSignal",t)}),cD=pi((t,e)=>{if(typeof t!="function")throw new gi(e,"Function",t)});pi((t,e)=>{if(typeof t!="function"||iD(t))throw new gi(e,"Function",t)});pi((t,e)=>{if(t!==void 0)throw new gi(e,"undefined",t)});var Bc={validateBoolean:aD,validateFunction:cD,validateInteger:sD,validateObject:oD,validateAbortSignal:lD},Ug={exports:{}},p_={exports:{}},Mt=p_.exports={},Gi,Hi;function cp(){throw new Error("setTimeout has not been defined")}function up(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Gi=setTimeout:Gi=cp}catch{Gi=cp}try{typeof clearTimeout=="function"?Hi=clearTimeout:Hi=up}catch{Hi=up}})();function g_(t){if(Gi===setTimeout)return setTimeout(t,0);if((Gi===cp||!Gi)&&setTimeout)return Gi=setTimeout,setTimeout(t,0);try{return Gi(t,0)}catch{try{return Gi.call(null,t,0)}catch{return Gi.call(this,t,0)}}}function uD(t){if(Hi===clearTimeout)return clearTimeout(t);if((Hi===up||!Hi)&&clearTimeout)return Hi=clearTimeout,clearTimeout(t);try{return Hi(t)}catch{try{return Hi.call(null,t)}catch{return Hi.call(this,t)}}}var In=[],mo=!1,ra,Nu=-1;function fD(){!mo||!ra||(mo=!1,ra.length?In=ra.concat(In):Nu=-1,In.length&&m_())}function m_(){if(!mo){var t=g_(fD);mo=!0;for(var e=In.length;e;){for(ra=In,In=[];++Nu<e;)ra&&ra[Nu].run();Nu=-1,e=In.length}ra=null,mo=!1,uD(t)}}Mt.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];In.push(new v_(t,e)),In.length===1&&!mo&&g_(m_)};function v_(t,e){this.fun=t,this.array=e}v_.prototype.run=function(){this.fun.apply(null,this.array)};Mt.title="browser";Mt.browser=!0;Mt.env={};Mt.argv=[];Mt.version="";Mt.versions={};function zn(){}Mt.on=zn;Mt.addListener=zn;Mt.once=zn;Mt.off=zn;Mt.removeListener=zn;Mt.removeAllListeners=zn;Mt.emit=zn;Mt.prependListener=zn;Mt.prependOnceListener=zn;Mt.listeners=function(t){return[]};Mt.binding=function(t){throw new Error("process.binding is not supported")};Mt.cwd=function(){return"/"};Mt.chdir=function(t){throw new Error("process.chdir is not supported")};Mt.umask=function(){return 0};var Ba=p_.exports;const{SymbolAsyncIterator:Dv,SymbolIterator:Pv,SymbolFor:Wa}=Pt,y_=Wa("nodejs.stream.destroyed"),hD=Wa("nodejs.stream.errored"),Ov=Wa("nodejs.stream.readable"),kv=Wa("nodejs.stream.writable"),dD=Wa("nodejs.stream.disturbed"),pD=Wa("nodejs.webstream.isClosedPromise"),gD=Wa("nodejs.webstream.controllerErrorFunction");function zg(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function ah(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function mD(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function bn(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function b_(t){return!!(t&&!bn(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function w_(t){return!!(t&&!bn(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function __(t){return!!(t&&!bn(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function vD(t){return b_(t)||w_(t)||__(t)}function yD(t,e){return t==null?!1:e===!0?typeof t[Dv]=="function":e===!1?typeof t[Pv]=="function":typeof t[Dv]=="function"||typeof t[Pv]=="function"}function oh(t){if(!bn(t))return null;const e=t._writableState,r=t._readableState,i=e||r;return!!(t.destroyed||t[y_]||i!=null&&i.destroyed)}function bD(t){if(!ah(t))return null;if(t.writableEnded===!0)return!0;const e=t._writableState;return e!=null&&e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function wD(t,e){if(!ah(t))return null;if(t.writableFinished===!0)return!0;const r=t._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function S_(t,e){if(!zg(t))return null;const r=t._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function E_(t){return t&&t[Ov]!=null?t[Ov]:typeof(t==null?void 0:t.readable)!="boolean"?null:oh(t)?!1:zg(t)&&t.readable&&!S_(t)}function x_(t){return t&&t[kv]!=null?t[kv]:typeof(t==null?void 0:t.writable)!="boolean"?null:oh(t)?!1:ah(t)&&t.writable&&!bD(t)}function _D(t,e){return bn(t)?oh(t)?!0:!((e==null?void 0:e.readable)!==!1&&E_(t)||(e==null?void 0:e.writable)!==!1&&x_(t)):null}function SD(t){var e,r;return bn(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function ED(t){var e,r;return bn(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function xD(t){if(!bn(t))return null;if(typeof t.closed=="boolean")return t.closed;const e=t._writableState,r=t._readableState;return typeof(e==null?void 0:e.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(e==null?void 0:e.closed)||(r==null?void 0:r.closed):typeof t._closed=="boolean"&&T_(t)?t._closed:null}function T_(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function TD(t){return typeof t._sent100=="boolean"&&T_(t)}function AD(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function $D(t){if(!bn(t))return null;const e=t._writableState,r=t._readableState,i=e||r;return!i&&TD(t)||!!(i&&i.autoDestroy&&i.emitClose&&i.closed===!1)}function RD(t){var e;return!!(t&&((e=t[dD])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function CD(t){var e,r,i,n,s,a,o,l,c,u;return!!(t&&((e=(r=(i=(n=(s=(a=t[hD])!==null&&a!==void 0?a:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&n!==void 0?n:(o=t._readableState)===null||o===void 0?void 0:o.errorEmitted)!==null&&i!==void 0?i:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}var Gn={isDestroyed:oh,kIsDestroyed:y_,isDisturbed:RD,isErrored:CD,isReadable:E_,kIsClosedPromise:pD,kControllerErrorFunction:gD,isClosed:xD,isDuplexNodeStream:mD,isFinished:_D,isIterable:yD,isReadableNodeStream:zg,isReadableStream:b_,isReadableFinished:S_,isReadableErrored:ED,isNodeStream:bn,isWebStream:vD,isWritable:x_,isWritableNodeStream:ah,isWritableStream:w_,isWritableFinished:wD,isWritableErrored:SD,isServerRequest:AD,willEmitClose:$D,isTransformStream:__};const us=Ba,{AbortError:A_,codes:DD}=Pr,{ERR_INVALID_ARG_TYPE:PD,ERR_STREAM_PREMATURE_CLOSE:Nv}=DD,{kEmptyObject:fp,once:hp}=Fr,{validateAbortSignal:OD,validateFunction:kD,validateObject:ND,validateBoolean:FD}=Bc,{Promise:ID,PromisePrototypeThen:LD,SymbolDispose:$_}=Pt,{isClosed:jD,isReadable:Fv,isReadableNodeStream:vd,isReadableStream:MD,isReadableFinished:Iv,isReadableErrored:Lv,isWritable:jv,isWritableNodeStream:Mv,isWritableStream:BD,isWritableFinished:Bv,isWritableErrored:Wv,isNodeStream:WD,willEmitClose:UD,kIsClosedPromise:zD}=Gn;let vo;function GD(t){return t.setHeader&&typeof t.abort=="function"}const dp=()=>{};function R_(t,e,r){var i,n;if(arguments.length===2?(r=e,e=fp):e==null?e=fp:ND(e,"options"),kD(r,"callback"),OD(e.signal,"options.signal"),r=hp(r),MD(t)||BD(t))return HD(t,e,r);if(!WD(t))throw new PD("stream",["ReadableStream","WritableStream","Stream"],t);const s=(i=e.readable)!==null&&i!==void 0?i:vd(t),a=(n=e.writable)!==null&&n!==void 0?n:Mv(t),o=t._writableState,l=t._readableState,c=()=>{t.writable||d()};let u=UD(t)&&vd(t)===s&&Mv(t)===a,f=Bv(t,!1);const d=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||p)&&r.call(t)};let p=Iv(t,!1);const g=()=>{p=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||a))&&(!a||f)&&r.call(t)},m=L=>{r.call(t,L)};let w=jD(t);const v=()=>{w=!0;const L=Wv(t)||Lv(t);if(L&&typeof L!="boolean")return r.call(t,L);if(s&&!p&&vd(t,!0)&&!Iv(t,!1))return r.call(t,new Nv);if(a&&!f&&!Bv(t,!1))return r.call(t,new Nv);r.call(t)},y=()=>{w=!0;const L=Wv(t)||Lv(t);if(L&&typeof L!="boolean")return r.call(t,L);r.call(t)},b=()=>{t.req.on("finish",d)};GD(t)?(t.on("complete",d),u||t.on("abort",v),t.req?b():t.on("request",b)):a&&!o&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",v),t.on("end",g),t.on("finish",d),e.error!==!1&&t.on("error",m),t.on("close",v),w?us.nextTick(v):o!=null&&o.errorEmitted||l!=null&&l.errorEmitted?u||us.nextTick(y):(!s&&(!u||Fv(t))&&(f||jv(t)===!1)||!a&&(!u||jv(t))&&(p||Fv(t)===!1)||l&&t.req&&t.aborted)&&us.nextTick(y);const T=()=>{r=dp,t.removeListener("aborted",v),t.removeListener("complete",d),t.removeListener("abort",v),t.removeListener("request",b),t.req&&t.req.removeListener("finish",d),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",d),t.removeListener("end",g),t.removeListener("error",m),t.removeListener("close",v)};if(e.signal&&!w){const L=()=>{const H=r;T(),H.call(t,new A_(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)us.nextTick(L);else{vo=vo||Fr.addAbortListener;const H=vo(e.signal,L),B=r;r=hp((...S)=>{H[$_](),B.apply(t,S)})}}return T}function HD(t,e,r){let i=!1,n=dp;if(e.signal)if(n=()=>{i=!0,r.call(t,new A_(void 0,{cause:e.signal.reason}))},e.signal.aborted)us.nextTick(n);else{vo=vo||Fr.addAbortListener;const a=vo(e.signal,n),o=r;r=hp((...l)=>{a[$_](),o.apply(t,l)})}const s=(...a)=>{i||us.nextTick(()=>r.apply(t,a))};return LD(t[zD].promise,s,s),dp}function VD(t,e){var r;let i=!1;return e===null&&(e=fp),(r=e)!==null&&r!==void 0&&r.cleanup&&(FD(e.cleanup,"cleanup"),i=e.cleanup),new ID((n,s)=>{const a=R_(t,e,o=>{i&&a(),o?s(o):n()})})}Ug.exports=R_;Ug.exports.finished=VD;var Ws=Ug.exports;const on=Ba,{aggregateTwoErrors:qD,codes:{ERR_MULTIPLE_CALLBACK:YD},AbortError:KD}=Pr,{Symbol:C_}=Pt,{kIsDestroyed:ZD,isDestroyed:QD,isFinished:XD,isServerRequest:JD}=Gn,D_=C_("kDestroy"),pp=C_("kConstruct");function P_(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function e2(t,e){const r=this._readableState,i=this._writableState,n=i||r;return i!=null&&i.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(P_(t,i,r),i&&(i.destroyed=!0),r&&(r.destroyed=!0),n.constructed?Uv(this,t,e):this.once(D_,function(s){Uv(this,qD(s,t),e)}),this)}function Uv(t,e,r){let i=!1;function n(s){if(i)return;i=!0;const a=t._readableState,o=t._writableState;P_(s,o,a),o&&(o.closed=!0),a&&(a.closed=!0),typeof r=="function"&&r(s),s?on.nextTick(t2,t,s):on.nextTick(O_,t)}try{t._destroy(e||null,n)}catch(s){n(s)}}function t2(t,e){gp(t,e),O_(t)}function O_(t){const e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function gp(t,e){const r=t._readableState,i=t._writableState;i!=null&&i.errorEmitted||r!=null&&r.errorEmitted||(i&&(i.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function r2(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function mp(t,e,r){const i=t._readableState,n=t._writableState;if(n!=null&&n.destroyed||i!=null&&i.destroyed)return this;i!=null&&i.autoDestroy||n!=null&&n.autoDestroy?t.destroy(e):e&&(e.stack,n&&!n.errored&&(n.errored=e),i&&!i.errored&&(i.errored=e),r?on.nextTick(gp,t,e):gp(t,e))}function i2(t,e){if(typeof t._construct!="function")return;const r=t._readableState,i=t._writableState;r&&(r.constructed=!1),i&&(i.constructed=!1),t.once(pp,e),!(t.listenerCount(pp)>1)&&on.nextTick(n2,t)}function n2(t){let e=!1;function r(i){if(e){mp(t,i??new YD);return}e=!0;const n=t._readableState,s=t._writableState,a=s||n;n&&(n.constructed=!0),s&&(s.constructed=!0),a.destroyed?t.emit(D_,i):i?mp(t,i,!0):on.nextTick(s2,t)}try{t._construct(i=>{on.nextTick(r,i)})}catch(i){on.nextTick(r,i)}}function s2(t){t.emit(pp)}function zv(t){return(t==null?void 0:t.setHeader)&&typeof t.abort=="function"}function k_(t){t.emit("close")}function a2(t,e){t.emit("error",e),on.nextTick(k_,t)}function o2(t,e){!t||QD(t)||(!e&&!XD(t)&&(e=new KD),JD(t)?(t.socket=null,t.destroy(e)):zv(t)?t.abort():zv(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?on.nextTick(a2,t,e):on.nextTick(k_,t),t.destroyed||(t[ZD]=!0))}var tl={construct:i2,destroyer:o2,destroy:e2,undestroy:r2,errorOrDestroy:mp};const{ArrayIsArray:l2,ObjectSetPrototypeOf:N_}=Pt,{EventEmitter:lh}=js;function ch(t){lh.call(this,t)}N_(ch.prototype,lh.prototype);N_(ch,lh);ch.prototype.pipe=function(t,e){const r=this;function i(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",i);function n(){r.readable&&r.resume&&r.resume()}t.on("drain",n),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",a),r.on("close",o));let s=!1;function a(){s||(s=!0,t.end())}function o(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),lh.listenerCount(this,"error")===0&&this.emit("error",u)}vp(r,"error",l),vp(t,"error",l);function c(){r.removeListener("data",i),t.removeListener("drain",n),r.removeListener("end",a),r.removeListener("close",o),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function vp(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):l2(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}var Gg={Stream:ch,prependListener:vp},F_={exports:{}};(function(t){const{SymbolDispose:e}=Pt,{AbortError:r,codes:i}=Pr,{isNodeStream:n,isWebStream:s,kControllerErrorFunction:a}=Gn,o=Ws,{ERR_INVALID_ARG_TYPE:l}=i;let c;const u=(f,d)=>{if(typeof f!="object"||!("aborted"in f))throw new l(d,"AbortSignal",f)};t.exports.addAbortSignal=function(d,p){if(u(d,"signal"),!n(p)&&!s(p))throw new l("stream",["ReadableStream","WritableStream","Stream"],p);return t.exports.addAbortSignalNoValidate(d,p)},t.exports.addAbortSignalNoValidate=function(f,d){if(typeof f!="object"||!("aborted"in f))return d;const p=n(d)?()=>{d.destroy(new r(void 0,{cause:f.reason}))}:()=>{d[a](new r(void 0,{cause:f.reason}))};if(f.aborted)p();else{c=c||Fr.addAbortListener;const g=c(f,p);o(d,g[e])}return d}})(F_);var uh=F_.exports;const{StringPrototypeSlice:Gv,SymbolIterator:c2,TypedArrayPrototypeSet:uu,Uint8Array:u2}=Pt,{Buffer:yd}=yn,{inspect:f2}=Fr;var h2=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){const r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,i=""+r.data;for(;(r=r.next)!==null;)i+=e+r.data;return i}concat(e){if(this.length===0)return yd.alloc(0);const r=yd.allocUnsafe(e>>>0);let i=this.head,n=0;for(;i;)uu(r,i.data,n),n+=i.data.length,i=i.next;return r}consume(e,r){const i=this.head.data;if(e<i.length){const n=i.slice(0,e);return this.head.data=i.slice(e),n}return e===i.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[c2](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",i=this.head,n=0;do{const s=i.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++n,i.next?this.head=i.next:this.head=this.tail=null):(r+=Gv(s,0,e),this.head=i,i.data=Gv(s,e));break}++n}while((i=i.next)!==null);return this.length-=n,r}_getBuffer(e){const r=yd.allocUnsafe(e),i=e;let n=this.head,s=0;do{const a=n.data;if(e>a.length)uu(r,a,i-e),e-=a.length;else{e===a.length?(uu(r,a,i-e),++s,n.next?this.head=n.next:this.head=this.tail=null):(uu(r,new u2(a.buffer,a.byteOffset,e),i-e),this.head=n,n.data=a.slice(e));break}++s}while((n=n.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return f2(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:d2,NumberIsInteger:p2}=Pt,{validateInteger:g2}=Bc,{ERR_INVALID_ARG_VALUE:m2}=Pr.codes;let I_=16*1024,L_=16;function v2(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function j_(t){return t?L_:I_}function y2(t,e){g2(e,"value",0),t?L_=e:I_=e}function b2(t,e,r,i){const n=v2(e,i,r);if(n!=null){if(!p2(n)||n<0){const s=i?`options.${r}`:"options.highWaterMark";throw new m2(s,n)}return d2(n)}return j_(t.objectMode)}var fh={getHighWaterMark:b2,getDefaultHighWaterMark:j_,setDefaultHighWaterMark:y2},M_={},yp={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=yn,i=r.Buffer;function n(a,o){for(var l in a)o[l]=a[l]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(n(r,e),e.Buffer=s);function s(a,o,l){return i(a,o,l)}s.prototype=Object.create(i.prototype),n(i,s),s.from=function(a,o,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return i(a,o,l)},s.alloc=function(a,o,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=i(a);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(yp,yp.exports);var w2=yp.exports,Hg=w2.Buffer,Hv=Hg.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _2(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function S2(t){var e=_2(t);if(typeof e!="string"&&(Hg.isEncoding===Hv||!Hv(t)))throw new Error("Unknown encoding: "+t);return e||t}M_.StringDecoder=Wc;function Wc(t){this.encoding=S2(t);var e;switch(this.encoding){case"utf16le":this.text=R2,this.end=C2,e=4;break;case"utf8":this.fillLast=T2,e=4;break;case"base64":this.text=D2,this.end=P2,e=3;break;default:this.write=O2,this.end=k2;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Hg.allocUnsafe(e)}Wc.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Wc.prototype.end=$2;Wc.prototype.text=A2;Wc.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function bd(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function E2(t,e,r){var i=e.length-1;if(i<r)return 0;var n=bd(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<r||n===-2?0:(n=bd(e[i]),n>=0?(n>0&&(t.lastNeed=n-2),n):--i<r||n===-2?0:(n=bd(e[i]),n>=0?(n>0&&(n===2?n=0:t.lastNeed=n-3),n):0))}function x2(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,""}}function T2(t){var e=this.lastTotal-this.lastNeed,r=x2(this,t);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function A2(t,e){var r=E2(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function $2(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function R2(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function C2(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function D2(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function P2(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function O2(t){return t.toString(this.encoding)}function k2(t){return t&&t.length?this.write(t):""}const Vv=Ba,{PromisePrototypeThen:N2,SymbolAsyncIterator:qv,SymbolIterator:Yv}=Pt,{Buffer:F2}=yn,{ERR_INVALID_ARG_TYPE:I2,ERR_STREAM_NULL_VALUES:L2}=Pr.codes;function j2(t,e,r){let i;if(typeof e=="string"||e instanceof F2)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let n;if(e&&e[qv])n=!0,i=e[qv]();else if(e&&e[Yv])n=!1,i=e[Yv]();else throw new I2("iterable",["Iterable"],e);const s=new t({objectMode:!0,highWaterMark:1,...r});let a=!1;s._read=function(){a||(a=!0,l())},s._destroy=function(c,u){N2(o(c),()=>Vv.nextTick(u,c),f=>Vv.nextTick(u,f||c))};async function o(c){const u=c!=null,f=typeof i.throw=="function";if(u&&f){const{value:d,done:p}=await i.throw(c);if(await d,p)return}if(typeof i.return=="function"){const{value:d}=await i.return();await d}}async function l(){for(;;){try{const{value:c,done:u}=n?await i.next():i.next();if(u)s.push(null);else{const f=c&&typeof c.then=="function"?await c:c;if(f===null)throw a=!1,new L2;if(s.push(f))continue;a=!1}}catch(c){s.destroy(c)}break}}return s}var B_=j2,wd,Kv;function hh(){if(Kv)return wd;Kv=1;const t=Ba,{ArrayPrototypeIndexOf:e,NumberIsInteger:r,NumberIsNaN:i,NumberParseInt:n,ObjectDefineProperties:s,ObjectKeys:a,ObjectSetPrototypeOf:o,Promise:l,SafeSet:c,SymbolAsyncDispose:u,SymbolAsyncIterator:f,Symbol:d}=Pt;wd=V,V.ReadableState=le;const{EventEmitter:p}=js,{Stream:g,prependListener:m}=Gg,{Buffer:w}=yn,{addAbortSignal:v}=uh,y=Ws;let b=Fr.debuglog("stream",A=>{b=A});const T=h2,L=tl,{getHighWaterMark:H,getDefaultHighWaterMark:B}=fh,{aggregateTwoErrors:S,codes:{ERR_INVALID_ARG_TYPE:G,ERR_METHOD_NOT_IMPLEMENTED:q,ERR_OUT_OF_RANGE:te,ERR_STREAM_PUSH_AFTER_EOF:X,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:M},AbortError:ve}=Pr,{validateObject:ue}=Bc,ye=d("kPaused"),{StringDecoder:j}=M_,I=B_;o(V.prototype,g.prototype),o(V,g);const Y=()=>{},{errorOrDestroy:de}=L,Se=1,De=2,ge=4,Ie=8,nt=16,st=32,R=64,P=128,ae=256,K=512,k=1024,F=2048,E=4096,$=8192,U=16384,x=32768,N=65536,z=1<<17,ee=1<<18;function oe(A){return{enumerable:!1,get(){return(this.state&A)!==0},set(C){C?this.state|=A:this.state&=~A}}}s(le.prototype,{objectMode:oe(Se),ended:oe(De),endEmitted:oe(ge),reading:oe(Ie),constructed:oe(nt),sync:oe(st),needReadable:oe(R),emittedReadable:oe(P),readableListening:oe(ae),resumeScheduled:oe(K),errorEmitted:oe(k),emitClose:oe(F),autoDestroy:oe(E),destroyed:oe($),closed:oe(U),closeEmitted:oe(x),multiAwaitDrain:oe(N),readingMore:oe(z),dataEmitted:oe(ee)});function le(A,C,pe){typeof pe!="boolean"&&(pe=C instanceof Mn()),this.state=F|E|nt|st,A&&A.objectMode&&(this.state|=Se),pe&&A&&A.readableObjectMode&&(this.state|=Se),this.highWaterMark=A?H(this,A,"readableHighWaterMark",pe):B(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[ye]=null,A&&A.emitClose===!1&&(this.state&=~F),A&&A.autoDestroy===!1&&(this.state&=~E),this.errored=null,this.defaultEncoding=A&&A.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,A&&A.encoding&&(this.decoder=new j(A.encoding),this.encoding=A.encoding)}function V(A){if(!(this instanceof V))return new V(A);const C=this instanceof Mn();this._readableState=new le(A,this,C),A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.construct=="function"&&(this._construct=A.construct),A.signal&&!C&&v(A.signal,this)),g.call(this,A),L.construct(this,()=>{this._readableState.needReadable&&xt(this,this._readableState)})}V.prototype.destroy=L.destroy,V.prototype._undestroy=L.undestroy,V.prototype._destroy=function(A,C){C(A)},V.prototype[p.captureRejectionSymbol]=function(A){this.destroy(A)},V.prototype[u]=function(){let A;return this.destroyed||(A=this.readableEnded?null:new ve,this.destroy(A)),new l((C,pe)=>y(this,fe=>fe&&fe!==A?pe(fe):C(null)))},V.prototype.push=function(A,C){return he(this,A,C,!1)},V.prototype.unshift=function(A,C){return he(this,A,C,!0)};function he(A,C,pe,fe){b("readableAddChunk",C);const Re=A._readableState;let He;if(Re.state&Se||(typeof C=="string"?(pe=pe||Re.defaultEncoding,Re.encoding!==pe&&(fe&&Re.encoding?C=w.from(C,pe).toString(Re.encoding):(C=w.from(C,pe),pe=""))):C instanceof w?pe="":g._isUint8Array(C)?(C=g._uint8ArrayToBuffer(C),pe=""):C!=null&&(He=new G("chunk",["string","Buffer","Uint8Array"],C))),He)de(A,He);else if(C===null)Re.state&=~Ie,kt(A,Re);else if(Re.state&Se||C&&C.length>0)if(fe)if(Re.state&ge)de(A,new M);else{if(Re.destroyed||Re.errored)return!1;me(A,Re,C,!0)}else if(Re.ended)de(A,new X);else{if(Re.destroyed||Re.errored)return!1;Re.state&=~Ie,Re.decoder&&!pe?(C=Re.decoder.write(C),Re.objectMode||C.length!==0?me(A,Re,C,!1):xt(A,Re)):me(A,Re,C,!1)}else fe||(Re.state&=~Ie,xt(A,Re));return!Re.ended&&(Re.length<Re.highWaterMark||Re.length===0)}function me(A,C,pe,fe){C.flowing&&C.length===0&&!C.sync&&A.listenerCount("data")>0?(C.state&N?C.awaitDrainWriters.clear():C.awaitDrainWriters=null,C.dataEmitted=!0,A.emit("data",pe)):(C.length+=C.objectMode?1:pe.length,fe?C.buffer.unshift(pe):C.buffer.push(pe),C.state&R&&at(A)),xt(A,C)}V.prototype.isPaused=function(){const A=this._readableState;return A[ye]===!0||A.flowing===!1},V.prototype.setEncoding=function(A){const C=new j(A);this._readableState.decoder=C,this._readableState.encoding=this._readableState.decoder.encoding;const pe=this._readableState.buffer;let fe="";for(const Re of pe)fe+=C.write(Re);return pe.clear(),fe!==""&&pe.push(fe),this._readableState.length=fe.length,this};const Le=1073741824;function ut(A){if(A>Le)throw new te("size","<= 1GiB",A);return A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++,A}function Ke(A,C){return A<=0||C.length===0&&C.ended?0:C.state&Se?1:i(A)?C.flowing&&C.length?C.buffer.first().length:C.length:A<=C.length?A:C.ended?C.length:0}V.prototype.read=function(A){b("read",A),A===void 0?A=NaN:r(A)||(A=n(A,10));const C=this._readableState,pe=A;if(A>C.highWaterMark&&(C.highWaterMark=ut(A)),A!==0&&(C.state&=~P),A===0&&C.needReadable&&((C.highWaterMark!==0?C.length>=C.highWaterMark:C.length>0)||C.ended))return b("read: emitReadable",C.length,C.ended),C.length===0&&C.ended?tt(this):at(this),null;if(A=Ke(A,C),A===0&&C.ended)return C.length===0&&tt(this),null;let fe=(C.state&R)!==0;if(b("need readable",fe),(C.length===0||C.length-A<C.highWaterMark)&&(fe=!0,b("length less than watermark",fe)),C.ended||C.reading||C.destroyed||C.errored||!C.constructed)fe=!1,b("reading, ended or constructing",fe);else if(fe){b("do read"),C.state|=Ie|st,C.length===0&&(C.state|=R);try{this._read(C.highWaterMark)}catch(He){de(this,He)}C.state&=~st,C.reading||(A=Ke(pe,C))}let Re;return A>0?Re=bt(A,C):Re=null,Re===null?(C.needReadable=C.length<=C.highWaterMark,A=0):(C.length-=A,C.multiAwaitDrain?C.awaitDrainWriters.clear():C.awaitDrainWriters=null),C.length===0&&(C.ended||(C.needReadable=!0),pe!==A&&C.ended&&tt(this)),Re!==null&&!C.errorEmitted&&!C.closeEmitted&&(C.dataEmitted=!0,this.emit("data",Re)),Re};function kt(A,C){if(b("onEofChunk"),!C.ended){if(C.decoder){const pe=C.decoder.end();pe&&pe.length&&(C.buffer.push(pe),C.length+=C.objectMode?1:pe.length)}C.ended=!0,C.sync?at(A):(C.needReadable=!1,C.emittedReadable=!0,je(A))}}function at(A){const C=A._readableState;b("emitReadable",C.needReadable,C.emittedReadable),C.needReadable=!1,C.emittedReadable||(b("emitReadable",C.flowing),C.emittedReadable=!0,t.nextTick(je,A))}function je(A){const C=A._readableState;b("emitReadable_",C.destroyed,C.length,C.ended),!C.destroyed&&!C.errored&&(C.length||C.ended)&&(A.emit("readable"),C.emittedReadable=!1),C.needReadable=!C.flowing&&!C.ended&&C.length<=C.highWaterMark,Fe(A)}function xt(A,C){!C.readingMore&&C.constructed&&(C.readingMore=!0,t.nextTick(fr,A,C))}function fr(A,C){for(;!C.reading&&!C.ended&&(C.length<C.highWaterMark||C.flowing&&C.length===0);){const pe=C.length;if(b("maybeReadMore read 0"),A.read(0),pe===C.length)break}C.readingMore=!1}V.prototype._read=function(A){throw new q("_read()")},V.prototype.pipe=function(A,C){const pe=this,fe=this._readableState;fe.pipes.length===1&&(fe.multiAwaitDrain||(fe.multiAwaitDrain=!0,fe.awaitDrainWriters=new c(fe.awaitDrainWriters?[fe.awaitDrainWriters]:[]))),fe.pipes.push(A),b("pipe count=%d opts=%j",fe.pipes.length,C);const He=(!C||C.end!==!1)&&A!==t.stdout&&A!==t.stderr?Nt:Sn;fe.endEmitted?t.nextTick(He):pe.once("end",He),A.on("unpipe",Pe);function Pe(Bi,mi){b("onunpipe"),Bi===pe&&mi&&mi.hasUnpiped===!1&&(mi.hasUnpiped=!0,Hh())}function Nt(){b("onend"),A.end()}let hr,Qn=!1;function Hh(){b("cleanup"),A.removeListener("close",pl),A.removeListener("finish",qs),hr&&A.removeListener("drain",hr),A.removeListener("error",Qa),A.removeListener("unpipe",Pe),pe.removeListener("end",Nt),pe.removeListener("end",Sn),pe.removeListener("data",dl),Qn=!0,hr&&fe.awaitDrainWriters&&(!A._writableState||A._writableState.needDrain)&&hr()}function br(){Qn||(fe.pipes.length===1&&fe.pipes[0]===A?(b("false write response, pause",0),fe.awaitDrainWriters=A,fe.multiAwaitDrain=!1):fe.pipes.length>1&&fe.pipes.includes(A)&&(b("false write response, pause",fe.awaitDrainWriters.size),fe.awaitDrainWriters.add(A)),pe.pause()),hr||(hr=Te(pe,A),A.on("drain",hr))}pe.on("data",dl);function dl(Bi){b("ondata");const mi=A.write(Bi);b("dest.write",mi),mi===!1&&br()}function Qa(Bi){if(b("onerror",Bi),Sn(),A.removeListener("error",Qa),A.listenerCount("error")===0){const mi=A._writableState||A._readableState;mi&&!mi.errorEmitted?de(A,Bi):A.emit("error",Bi)}}m(A,"error",Qa);function pl(){A.removeListener("finish",qs),Sn()}A.once("close",pl);function qs(){b("onfinish"),A.removeListener("close",pl),Sn()}A.once("finish",qs);function Sn(){b("unpipe"),pe.unpipe(A)}return A.emit("pipe",pe),A.writableNeedDrain===!0?br():fe.flowing||(b("pipe resume"),pe.resume()),A};function Te(A,C){return function(){const fe=A._readableState;fe.awaitDrainWriters===C?(b("pipeOnDrain",1),fe.awaitDrainWriters=null):fe.multiAwaitDrain&&(b("pipeOnDrain",fe.awaitDrainWriters.size),fe.awaitDrainWriters.delete(C)),(!fe.awaitDrainWriters||fe.awaitDrainWriters.size===0)&&A.listenerCount("data")&&A.resume()}}V.prototype.unpipe=function(A){const C=this._readableState,pe={hasUnpiped:!1};if(C.pipes.length===0)return this;if(!A){const Re=C.pipes;C.pipes=[],this.pause();for(let He=0;He<Re.length;He++)Re[He].emit("unpipe",this,{hasUnpiped:!1});return this}const fe=e(C.pipes,A);return fe===-1?this:(C.pipes.splice(fe,1),C.pipes.length===0&&this.pause(),A.emit("unpipe",this,pe),this)},V.prototype.on=function(A,C){const pe=g.prototype.on.call(this,A,C),fe=this._readableState;return A==="data"?(fe.readableListening=this.listenerCount("readable")>0,fe.flowing!==!1&&this.resume()):A==="readable"&&!fe.endEmitted&&!fe.readableListening&&(fe.readableListening=fe.needReadable=!0,fe.flowing=!1,fe.emittedReadable=!1,b("on readable",fe.length,fe.reading),fe.length?at(this):fe.reading||t.nextTick(J,this)),pe},V.prototype.addListener=V.prototype.on,V.prototype.removeListener=function(A,C){const pe=g.prototype.removeListener.call(this,A,C);return A==="readable"&&t.nextTick(Tt,this),pe},V.prototype.off=V.prototype.removeListener,V.prototype.removeAllListeners=function(A){const C=g.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&t.nextTick(Tt,this),C};function Tt(A){const C=A._readableState;C.readableListening=A.listenerCount("readable")>0,C.resumeScheduled&&C[ye]===!1?C.flowing=!0:A.listenerCount("data")>0?A.resume():C.readableListening||(C.flowing=null)}function J(A){b("readable nexttick read 0"),A.read(0)}V.prototype.resume=function(){const A=this._readableState;return A.flowing||(b("resume"),A.flowing=!A.readableListening,ne(this,A)),A[ye]=!1,this};function ne(A,C){C.resumeScheduled||(C.resumeScheduled=!0,t.nextTick(_e,A,C))}function _e(A,C){b("resume",C.reading),C.reading||A.read(0),C.resumeScheduled=!1,A.emit("resume"),Fe(A),C.flowing&&!C.reading&&A.read(0)}V.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ye]=!0,this};function Fe(A){const C=A._readableState;for(b("flow",C.flowing);C.flowing&&A.read()!==null;);}V.prototype.wrap=function(A){let C=!1;A.on("data",fe=>{!this.push(fe)&&A.pause&&(C=!0,A.pause())}),A.on("end",()=>{this.push(null)}),A.on("error",fe=>{de(this,fe)}),A.on("close",()=>{this.destroy()}),A.on("destroy",()=>{this.destroy()}),this._read=()=>{C&&A.resume&&(C=!1,A.resume())};const pe=a(A);for(let fe=1;fe<pe.length;fe++){const Re=pe[fe];this[Re]===void 0&&typeof A[Re]=="function"&&(this[Re]=A[Re].bind(A))}return this},V.prototype[f]=function(){return qe(this)},V.prototype.iterator=function(A){return A!==void 0&&ue(A,"options"),qe(this,A)};function qe(A,C){typeof A.read!="function"&&(A=V.wrap(A,{objectMode:!0}));const pe=dt(A,C);return pe.stream=A,pe}async function*dt(A,C){let pe=Y;function fe(Pe){this===A?(pe(),pe=Y):pe=Pe}A.on("readable",fe);let Re;const He=y(A,{writable:!1},Pe=>{Re=Pe?S(Re,Pe):null,pe(),pe=Y});try{for(;;){const Pe=A.destroyed?null:A.read();if(Pe!==null)yield Pe;else{if(Re)throw Re;if(Re===null)return;await new l(fe)}}}catch(Pe){throw Re=S(Re,Pe),Re}finally{(Re||(C==null?void 0:C.destroyOnReturn)!==!1)&&(Re===void 0||A._readableState.autoDestroy)?L.destroyer(A,null):(A.off("readable",fe),He())}}s(V.prototype,{readable:{__proto__:null,get(){const A=this._readableState;return!!A&&A.readable!==!1&&!A.destroyed&&!A.errorEmitted&&!A.endEmitted},set(A){this._readableState&&(this._readableState.readable=!!A)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(A){this._readableState&&(this._readableState.destroyed=A)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(le.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ye]!==!1},set(A){this[ye]=!!A}}}),V._fromList=bt;function bt(A,C){if(C.length===0)return null;let pe;return C.objectMode?pe=C.buffer.shift():!A||A>=C.length?(C.decoder?pe=C.buffer.join(""):C.buffer.length===1?pe=C.buffer.first():pe=C.buffer.concat(C.length),C.buffer.clear()):pe=C.buffer.consume(A,C.decoder),pe}function tt(A){const C=A._readableState;b("endReadable",C.endEmitted),C.endEmitted||(C.ended=!0,t.nextTick(gt,C,A))}function gt(A,C){if(b("endReadableNT",A.endEmitted,A.length),!A.errored&&!A.closeEmitted&&!A.endEmitted&&A.length===0){if(A.endEmitted=!0,C.emit("end"),C.writable&&C.allowHalfOpen===!1)t.nextTick(qt,C);else if(A.autoDestroy){const pe=C._writableState;(!pe||pe.autoDestroy&&(pe.finished||pe.writable===!1))&&C.destroy()}}}function qt(A){A.writable&&!A.writableEnded&&!A.destroyed&&A.end()}V.from=function(A,C){return I(V,A,C)};let ir;function jr(){return ir===void 0&&(ir={}),ir}return V.fromWeb=function(A,C){return jr().newStreamReadableFromReadableStream(A,C)},V.toWeb=function(A,C){return jr().newReadableStreamFromStreamReadable(A,C)},V.wrap=function(A,C){var pe,fe;return new V({objectMode:(pe=(fe=A.readableObjectMode)!==null&&fe!==void 0?fe:A.objectMode)!==null&&pe!==void 0?pe:!0,...C,destroy(Re,He){L.destroyer(A,Re),He(Re)}}).wrap(A)},wd}var _d,Zv;function Vg(){if(Zv)return _d;Zv=1;const t=Ba,{ArrayPrototypeSlice:e,Error:r,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:n,ObjectDefineProperties:s,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:c}=Pt;_d=ue,ue.WritableState=M;const{EventEmitter:u}=js,f=Gg.Stream,{Buffer:d}=yn,p=tl,{addAbortSignal:g}=uh,{getHighWaterMark:m,getDefaultHighWaterMark:w}=fh,{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:y,ERR_MULTIPLE_CALLBACK:b,ERR_STREAM_CANNOT_PIPE:T,ERR_STREAM_DESTROYED:L,ERR_STREAM_ALREADY_FINISHED:H,ERR_STREAM_NULL_VALUES:B,ERR_STREAM_WRITE_AFTER_END:S,ERR_UNKNOWN_ENCODING:G}=Pr.codes,{errorOrDestroy:q}=p;a(ue.prototype,f.prototype),a(ue,f);function te(){}const X=l("kOnFinished");function M(E,$,U){typeof U!="boolean"&&(U=$ instanceof Mn()),this.objectMode=!!(E&&E.objectMode),U&&(this.objectMode=this.objectMode||!!(E&&E.writableObjectMode)),this.highWaterMark=E?m(this,E,"writableHighWaterMark",U):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const x=!!(E&&E.decodeStrings===!1);this.decodeStrings=!x,this.defaultEncoding=E&&E.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=de.bind(void 0,$),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ve(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!E||E.emitClose!==!1,this.autoDestroy=!E||E.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[X]=[]}function ve(E){E.buffered=[],E.bufferedIndex=0,E.allBuffers=!0,E.allNoop=!0}M.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},n(M.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ue(E){const $=this instanceof Mn();if(!$&&!i(ue,this))return new ue(E);this._writableState=new M(E,this,$),E&&(typeof E.write=="function"&&(this._write=E.write),typeof E.writev=="function"&&(this._writev=E.writev),typeof E.destroy=="function"&&(this._destroy=E.destroy),typeof E.final=="function"&&(this._final=E.final),typeof E.construct=="function"&&(this._construct=E.construct),E.signal&&g(E.signal,this)),f.call(this,E),p.construct(this,()=>{const U=this._writableState;U.writing||Ie(this,U),P(this,U)})}n(ue,c,{__proto__:null,value:function(E){return i(this,E)?!0:this!==ue?!1:E&&E._writableState instanceof M}}),ue.prototype.pipe=function(){q(this,new T)};function ye(E,$,U,x){const N=E._writableState;if(typeof U=="function")x=U,U=N.defaultEncoding;else{if(!U)U=N.defaultEncoding;else if(U!=="buffer"&&!d.isEncoding(U))throw new G(U);typeof x!="function"&&(x=te)}if($===null)throw new B;if(!N.objectMode)if(typeof $=="string")N.decodeStrings!==!1&&($=d.from($,U),U="buffer");else if($ instanceof d)U="buffer";else if(f._isUint8Array($))$=f._uint8ArrayToBuffer($),U="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],$);let z;return N.ending?z=new S:N.destroyed&&(z=new L("write")),z?(t.nextTick(x,z),q(E,z,!0),z):(N.pendingcb++,j(E,N,$,U,x))}ue.prototype.write=function(E,$,U){return ye(this,E,$,U)===!0},ue.prototype.cork=function(){this._writableState.corked++},ue.prototype.uncork=function(){const E=this._writableState;E.corked&&(E.corked--,E.writing||Ie(this,E))},ue.prototype.setDefaultEncoding=function($){if(typeof $=="string"&&($=o($)),!d.isEncoding($))throw new G($);return this._writableState.defaultEncoding=$,this};function j(E,$,U,x,N){const z=$.objectMode?1:U.length;$.length+=z;const ee=$.length<$.highWaterMark;return ee||($.needDrain=!0),$.writing||$.corked||$.errored||!$.constructed?($.buffered.push({chunk:U,encoding:x,callback:N}),$.allBuffers&&x!=="buffer"&&($.allBuffers=!1),$.allNoop&&N!==te&&($.allNoop=!1)):($.writelen=z,$.writecb=N,$.writing=!0,$.sync=!0,E._write(U,x,$.onwrite),$.sync=!1),ee&&!$.errored&&!$.destroyed}function I(E,$,U,x,N,z,ee){$.writelen=x,$.writecb=ee,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new L("write")):U?E._writev(N,$.onwrite):E._write(N,z,$.onwrite),$.sync=!1}function Y(E,$,U,x){--$.pendingcb,x(U),ge($),q(E,U)}function de(E,$){const U=E._writableState,x=U.sync,N=U.writecb;if(typeof N!="function"){q(E,new b);return}U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0,$?($.stack,U.errored||(U.errored=$),E._readableState&&!E._readableState.errored&&(E._readableState.errored=$),x?t.nextTick(Y,E,U,$,N):Y(E,U,$,N)):(U.buffered.length>U.bufferedIndex&&Ie(E,U),x?U.afterWriteTickInfo!==null&&U.afterWriteTickInfo.cb===N?U.afterWriteTickInfo.count++:(U.afterWriteTickInfo={count:1,cb:N,stream:E,state:U},t.nextTick(Se,U.afterWriteTickInfo)):De(E,U,1,N))}function Se({stream:E,state:$,count:U,cb:x}){return $.afterWriteTickInfo=null,De(E,$,U,x)}function De(E,$,U,x){for(!$.ending&&!E.destroyed&&$.length===0&&$.needDrain&&($.needDrain=!1,E.emit("drain"));U-- >0;)$.pendingcb--,x();$.destroyed&&ge($),P(E,$)}function ge(E){if(E.writing)return;for(let N=E.bufferedIndex;N<E.buffered.length;++N){var $;const{chunk:z,callback:ee}=E.buffered[N],oe=E.objectMode?1:z.length;E.length-=oe,ee(($=E.errored)!==null&&$!==void 0?$:new L("write"))}const U=E[X].splice(0);for(let N=0;N<U.length;N++){var x;U[N]((x=E.errored)!==null&&x!==void 0?x:new L("end"))}ve(E)}function Ie(E,$){if($.corked||$.bufferProcessing||$.destroyed||!$.constructed)return;const{buffered:U,bufferedIndex:x,objectMode:N}=$,z=U.length-x;if(!z)return;let ee=x;if($.bufferProcessing=!0,z>1&&E._writev){$.pendingcb-=z-1;const oe=$.allNoop?te:V=>{for(let he=ee;he<U.length;++he)U[he].callback(V)},le=$.allNoop&&ee===0?U:e(U,ee);le.allBuffers=$.allBuffers,I(E,$,!0,$.length,le,"",oe),ve($)}else{do{const{chunk:oe,encoding:le,callback:V}=U[ee];U[ee++]=null;const he=N?1:oe.length;I(E,$,!1,he,oe,le,V)}while(ee<U.length&&!$.writing);ee===U.length?ve($):ee>256?(U.splice(0,ee),$.bufferedIndex=0):$.bufferedIndex=ee}$.bufferProcessing=!1}ue.prototype._write=function(E,$,U){if(this._writev)this._writev([{chunk:E,encoding:$}],U);else throw new y("_write()")},ue.prototype._writev=null,ue.prototype.end=function(E,$,U){const x=this._writableState;typeof E=="function"?(U=E,E=null,$=null):typeof $=="function"&&(U=$,$=null);let N;if(E!=null){const z=ye(this,E,$);z instanceof r&&(N=z)}return x.corked&&(x.corked=1,this.uncork()),N||(!x.errored&&!x.ending?(x.ending=!0,P(this,x,!0),x.ended=!0):x.finished?N=new H("end"):x.destroyed&&(N=new L("end"))),typeof U=="function"&&(N||x.finished?t.nextTick(U,N):x[X].push(U)),this};function nt(E){return E.ending&&!E.destroyed&&E.constructed&&E.length===0&&!E.errored&&E.buffered.length===0&&!E.finished&&!E.writing&&!E.errorEmitted&&!E.closeEmitted}function st(E,$){let U=!1;function x(N){if(U){q(E,N??b());return}if(U=!0,$.pendingcb--,N){const z=$[X].splice(0);for(let ee=0;ee<z.length;ee++)z[ee](N);q(E,N,$.sync)}else nt($)&&($.prefinished=!0,E.emit("prefinish"),$.pendingcb++,t.nextTick(ae,E,$))}$.sync=!0,$.pendingcb++;try{E._final(x)}catch(N){x(N)}$.sync=!1}function R(E,$){!$.prefinished&&!$.finalCalled&&(typeof E._final=="function"&&!$.destroyed?($.finalCalled=!0,st(E,$)):($.prefinished=!0,E.emit("prefinish")))}function P(E,$,U){nt($)&&(R(E,$),$.pendingcb===0&&(U?($.pendingcb++,t.nextTick((x,N)=>{nt(N)?ae(x,N):N.pendingcb--},E,$)):nt($)&&($.pendingcb++,ae(E,$))))}function ae(E,$){$.pendingcb--,$.finished=!0;const U=$[X].splice(0);for(let x=0;x<U.length;x++)U[x]();if(E.emit("finish"),$.autoDestroy){const x=E._readableState;(!x||x.autoDestroy&&(x.endEmitted||x.readable===!1))&&E.destroy()}}s(ue.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(E){this._writableState&&(this._writableState.destroyed=E)}},writable:{__proto__:null,get(){const E=this._writableState;return!!E&&E.writable!==!1&&!E.destroyed&&!E.errored&&!E.ending&&!E.ended},set(E){this._writableState&&(this._writableState.writable=!!E)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const E=this._writableState;return E?!E.destroyed&&!E.ending&&E.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const K=p.destroy;ue.prototype.destroy=function(E,$){const U=this._writableState;return!U.destroyed&&(U.bufferedIndex<U.buffered.length||U[X].length)&&t.nextTick(ge,U),K.call(this,E,$),this},ue.prototype._undestroy=p.undestroy,ue.prototype._destroy=function(E,$){$(E)},ue.prototype[u.captureRejectionSymbol]=function(E){this.destroy(E)};let k;function F(){return k===void 0&&(k={}),k}return ue.fromWeb=function(E,$){return F().newStreamWritableFromWritableStream(E,$)},ue.toWeb=function(E){return F().newWritableStreamFromStreamWritable(E)},_d}var Sd,Qv;function M2(){if(Qv)return Sd;Qv=1;const t=Ba,e=yn,{isReadable:r,isWritable:i,isIterable:n,isNodeStream:s,isReadableNodeStream:a,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:c,isWritableStream:u}=Gn,f=Ws,{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g}}=Pr,{destroyer:m}=tl,w=Mn(),v=hh(),y=Vg(),{createDeferredPromise:b}=Fr,T=B_,L=globalThis.Blob||e.Blob,H=typeof L<"u"?function(M){return M instanceof L}:function(M){return!1},B=globalThis.AbortController||ql().AbortController,{FunctionPrototypeCall:S}=Pt;class G extends w{constructor(M){super(M),(M==null?void 0:M.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(M==null?void 0:M.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Sd=function X(M,ve){if(l(M))return M;if(a(M))return te({readable:M});if(o(M))return te({writable:M});if(s(M))return te({writable:!1,readable:!1});if(c(M))return te({readable:v.fromWeb(M)});if(u(M))return te({writable:y.fromWeb(M)});if(typeof M=="function"){const{value:ye,write:j,final:I,destroy:Y}=q(M);if(n(ye))return T(G,ye,{objectMode:!0,write:j,final:I,destroy:Y});const de=ye==null?void 0:ye.then;if(typeof de=="function"){let Se;const De=S(de,ye,ge=>{if(ge!=null)throw new g("nully","body",ge)},ge=>{m(Se,ge)});return Se=new G({objectMode:!0,readable:!1,write:j,final(ge){I(async()=>{try{await De,t.nextTick(ge,null)}catch(Ie){t.nextTick(ge,Ie)}})},destroy:Y})}throw new g("Iterable, AsyncIterable or AsyncFunction",ve,ye)}if(H(M))return X(M.arrayBuffer());if(n(M))return T(G,M,{objectMode:!0,writable:!1});if(c(M==null?void 0:M.readable)&&u(M==null?void 0:M.writable))return G.fromWeb(M);if(typeof(M==null?void 0:M.writable)=="object"||typeof(M==null?void 0:M.readable)=="object"){const ye=M!=null&&M.readable?a(M==null?void 0:M.readable)?M==null?void 0:M.readable:X(M.readable):void 0,j=M!=null&&M.writable?o(M==null?void 0:M.writable)?M==null?void 0:M.writable:X(M.writable):void 0;return te({readable:ye,writable:j})}const ue=M==null?void 0:M.then;if(typeof ue=="function"){let ye;return S(ue,M,j=>{j!=null&&ye.push(j),ye.push(null)},j=>{m(ye,j)}),ye=new G({objectMode:!0,writable:!1,read(){}})}throw new p(ve,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],M)};function q(X){let{promise:M,resolve:ve}=b();const ue=new B,ye=ue.signal;return{value:X(async function*(){for(;;){const I=M;M=null;const{chunk:Y,done:de,cb:Se}=await I;if(t.nextTick(Se),de)return;if(ye.aborted)throw new d(void 0,{cause:ye.reason});({promise:M,resolve:ve}=b()),yield Y}}(),{signal:ye}),write(I,Y,de){const Se=ve;ve=null,Se({chunk:I,done:!1,cb:de})},final(I){const Y=ve;ve=null,Y({done:!0,cb:I})},destroy(I,Y){ue.abort(),Y(I)}}}function te(X){const M=X.readable&&typeof X.readable.read!="function"?v.wrap(X.readable):X.readable,ve=X.writable;let ue=!!r(M),ye=!!i(ve),j,I,Y,de,Se;function De(ge){const Ie=de;de=null,Ie?Ie(ge):ge&&Se.destroy(ge)}return Se=new G({readableObjectMode:!!(M!=null&&M.readableObjectMode),writableObjectMode:!!(ve!=null&&ve.writableObjectMode),readable:ue,writable:ye}),ye&&(f(ve,ge=>{ye=!1,ge&&m(M,ge),De(ge)}),Se._write=function(ge,Ie,nt){ve.write(ge,Ie)?nt():j=nt},Se._final=function(ge){ve.end(),I=ge},ve.on("drain",function(){if(j){const ge=j;j=null,ge()}}),ve.on("finish",function(){if(I){const ge=I;I=null,ge()}})),ue&&(f(M,ge=>{ue=!1,ge&&m(M,ge),De(ge)}),M.on("readable",function(){if(Y){const ge=Y;Y=null,ge()}}),M.on("end",function(){Se.push(null)}),Se._read=function(){for(;;){const ge=M.read();if(ge===null){Y=Se._read;return}if(!Se.push(ge))return}}),Se._destroy=function(ge,Ie){!ge&&de!==null&&(ge=new d),Y=null,j=null,I=null,de===null?Ie(ge):(de=Ie,m(ve,ge),m(M,ge))},Se}return Sd}var Ed,Xv;function Mn(){if(Xv)return Ed;Xv=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:r,ObjectSetPrototypeOf:i}=Pt;Ed=a;const n=hh(),s=Vg();i(a.prototype,n.prototype),i(a,n);{const u=r(s.prototype);for(let f=0;f<u.length;f++){const d=u[f];a.prototype[d]||(a.prototype[d]=s.prototype[d])}}function a(u){if(!(this instanceof a))return new a(u);n.call(this,u),s.call(this,u),u?(this.allowHalfOpen=u.allowHalfOpen!==!1,u.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),u.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(a.prototype,{writable:{__proto__:null,...e(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(s.prototype,"writableLength")},writableFinished:{__proto__:null,...e(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(u){this._readableState&&this._writableState&&(this._readableState.destroyed=u,this._writableState.destroyed=u)}}});let o;function l(){return o===void 0&&(o={}),o}a.fromWeb=function(u,f){return l().newStreamDuplexFromReadableWritablePair(u,f)},a.toWeb=function(u){return l().newReadableWritablePairFromDuplex(u)};let c;return a.from=function(u){return c||(c=M2()),c(u,"body")},Ed}const{ObjectSetPrototypeOf:W_,Symbol:B2}=Pt;var U_=Bn;const{ERR_METHOD_NOT_IMPLEMENTED:W2}=Pr.codes,qg=Mn(),{getHighWaterMark:U2}=fh;W_(Bn.prototype,qg.prototype);W_(Bn,qg);const Ll=B2("kCallback");function Bn(t){if(!(this instanceof Bn))return new Bn(t);const e=t?U2(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),qg.call(this,t),this._readableState.sync=!1,this[Ll]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",z2)}function bp(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function z2(){this._final!==bp&&bp.call(this)}Bn.prototype._final=bp;Bn.prototype._transform=function(t,e,r){throw new W2("_transform()")};Bn.prototype._write=function(t,e,r){const i=this._readableState,n=this._writableState,s=i.length;this._transform(t,e,(a,o)=>{if(a){r(a);return}o!=null&&this.push(o),n.ended||s===i.length||i.length<i.highWaterMark?r():this[Ll]=r})};Bn.prototype._read=function(){if(this[Ll]){const t=this[Ll];this[Ll]=null,t()}};const{ObjectSetPrototypeOf:z_}=Pt;var G_=zo;const Yg=U_;z_(zo.prototype,Yg.prototype);z_(zo,Yg);function zo(t){if(!(this instanceof zo))return new zo(t);Yg.call(this,t)}zo.prototype._transform=function(t,e,r){r(null,t)};const $l=Ba,{ArrayIsArray:G2,Promise:H2,SymbolAsyncIterator:V2,SymbolDispose:q2}=Pt,_f=Ws,{once:Y2}=Fr,K2=tl,Jv=Mn(),{aggregateTwoErrors:Z2,codes:{ERR_INVALID_ARG_TYPE:wp,ERR_INVALID_RETURN_VALUE:xd,ERR_MISSING_ARGS:Q2,ERR_STREAM_DESTROYED:X2,ERR_STREAM_PREMATURE_CLOSE:J2},AbortError:eP}=Pr,{validateFunction:tP,validateAbortSignal:rP}=Bc,{isIterable:Xs,isReadable:Td,isReadableNodeStream:Fu,isNodeStream:ey,isTransformStream:oo,isWebStream:iP,isReadableStream:Ad,isReadableFinished:nP}=Gn,sP=globalThis.AbortController||ql().AbortController;let $d,Rd,Cd;function ty(t,e,r){let i=!1;t.on("close",()=>{i=!0});const n=_f(t,{readable:e,writable:r},s=>{i=!s});return{destroy:s=>{i||(i=!0,K2.destroyer(t,s||new X2("pipe")))},cleanup:n}}function aP(t){return tP(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function Dd(t){if(Xs(t))return t;if(Fu(t))return oP(t);throw new wp("val",["Readable","Iterable","AsyncIterable"],t)}async function*oP(t){Rd||(Rd=hh()),yield*Rd.prototype[V2].call(t)}async function fu(t,e,r,{end:i}){let n,s=null;const a=c=>{if(c&&(n=c),s){const u=s;s=null,u()}},o=()=>new H2((c,u)=>{n?u(n):s=()=>{n?u(n):c()}});e.on("drain",a);const l=_f(e,{readable:!1},a);try{e.writableNeedDrain&&await o();for await(const c of t)e.write(c)||await o();i&&(e.end(),await o()),r()}catch(c){r(n!==c?Z2(n,c):c)}finally{l(),e.off("drain",a)}}async function Pd(t,e,r,{end:i}){oo(e)&&(e=e.writable);const n=e.getWriter();try{for await(const s of t)await n.ready,n.write(s).catch(()=>{});await n.ready,i&&await n.close(),r()}catch(s){try{await n.abort(s),r(s)}catch(a){r(a)}}}function lP(...t){return H_(t,Y2(aP(t)))}function H_(t,e,r){if(t.length===1&&G2(t[0])&&(t=t[0]),t.length<2)throw new Q2("streams");const i=new sP,n=i.signal,s=r==null?void 0:r.signal,a=[];rP(s,"options.signal");function o(){g(new eP)}Cd=Cd||Fr.addAbortListener;let l;s&&(l=Cd(s,o));let c,u;const f=[];let d=0;function p(y){g(y,--d===0)}function g(y,b){var T;if(y&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=y),!(!c&&!b)){for(;f.length;)f.shift()(c);(T=l)===null||T===void 0||T[q2](),i.abort(),b&&(c||a.forEach(L=>L()),$l.nextTick(e,c,u))}}let m;for(let y=0;y<t.length;y++){const b=t[y],T=y<t.length-1,L=y>0,H=T||(r==null?void 0:r.end)!==!1,B=y===t.length-1;if(ey(b)){let S=function(G){G&&G.name!=="AbortError"&&G.code!=="ERR_STREAM_PREMATURE_CLOSE"&&p(G)};if(H){const{destroy:G,cleanup:q}=ty(b,T,L);f.push(G),Td(b)&&B&&a.push(q)}b.on("error",S),Td(b)&&B&&a.push(()=>{b.removeListener("error",S)})}if(y===0)if(typeof b=="function"){if(m=b({signal:n}),!Xs(m))throw new xd("Iterable, AsyncIterable or Stream","source",m)}else Xs(b)||Fu(b)||oo(b)?m=b:m=Jv.from(b);else if(typeof b=="function"){if(oo(m)){var w;m=Dd((w=m)===null||w===void 0?void 0:w.readable)}else m=Dd(m);if(m=b(m,{signal:n}),T){if(!Xs(m,!0))throw new xd("AsyncIterable",`transform[${y-1}]`,m)}else{var v;$d||($d=G_);const S=new $d({objectMode:!0}),G=(v=m)===null||v===void 0?void 0:v.then;if(typeof G=="function")d++,G.call(m,X=>{u=X,X!=null&&S.write(X),H&&S.end(),$l.nextTick(p)},X=>{S.destroy(X),$l.nextTick(p,X)});else if(Xs(m,!0))d++,fu(m,S,p,{end:H});else if(Ad(m)||oo(m)){const X=m.readable||m;d++,fu(X,S,p,{end:H})}else throw new xd("AsyncIterable or Promise","destination",m);m=S;const{destroy:q,cleanup:te}=ty(m,!1,!0);f.push(q),B&&a.push(te)}}else if(ey(b)){if(Fu(m)){d+=2;const S=cP(m,b,p,{end:H});Td(b)&&B&&a.push(S)}else if(oo(m)||Ad(m)){const S=m.readable||m;d++,fu(S,b,p,{end:H})}else if(Xs(m))d++,fu(m,b,p,{end:H});else throw new wp("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=b}else if(iP(b)){if(Fu(m))d++,Pd(Dd(m),b,p,{end:H});else if(Ad(m)||Xs(m))d++,Pd(m,b,p,{end:H});else if(oo(m))d++,Pd(m.readable,b,p,{end:H});else throw new wp("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=b}else m=Jv.from(b)}return(n!=null&&n.aborted||s!=null&&s.aborted)&&$l.nextTick(o),m}function cP(t,e,r,{end:i}){let n=!1;if(e.on("close",()=>{n||r(new J2)}),t.pipe(e,{end:!1}),i){let s=function(){n=!0,e.end()};nP(t)?$l.nextTick(s):t.once("end",s)}else r();return _f(t,{readable:!0,writable:!1},s=>{const a=t._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(s)}),_f(e,{readable:!1,writable:!0},r)}var Kg={pipelineImpl:H_,pipeline:lP};const{pipeline:uP}=Kg,hu=Mn(),{destroyer:fP}=tl,{isNodeStream:du,isReadable:ry,isWritable:iy,isWebStream:Od,isTransformStream:Zs,isWritableStream:ny,isReadableStream:sy}=Gn,{AbortError:hP,codes:{ERR_INVALID_ARG_VALUE:ay,ERR_MISSING_ARGS:dP}}=Pr,pP=Ws;var V_=function(...e){if(e.length===0)throw new dP("streams");if(e.length===1)return hu.from(e[0]);const r=[...e];if(typeof e[0]=="function"&&(e[0]=hu.from(e[0])),typeof e[e.length-1]=="function"){const p=e.length-1;e[p]=hu.from(e[p])}for(let p=0;p<e.length;++p)if(!(!du(e[p])&&!Od(e[p]))){if(p<e.length-1&&!(ry(e[p])||sy(e[p])||Zs(e[p])))throw new ay(`streams[${p}]`,r[p],"must be readable");if(p>0&&!(iy(e[p])||ny(e[p])||Zs(e[p])))throw new ay(`streams[${p}]`,r[p],"must be writable")}let i,n,s,a,o;function l(p){const g=a;a=null,g?g(p):p?o.destroy(p):!d&&!f&&o.destroy()}const c=e[0],u=uP(e,l),f=!!(iy(c)||ny(c)||Zs(c)),d=!!(ry(u)||sy(u)||Zs(u));if(o=new hu({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:f,readable:d}),f){if(du(c))o._write=function(g,m,w){c.write(g,m)?w():i=w},o._final=function(g){c.end(),n=g},c.on("drain",function(){if(i){const g=i;i=null,g()}});else if(Od(c)){const m=(Zs(c)?c.writable:c).getWriter();o._write=async function(w,v,y){try{await m.ready,m.write(w).catch(()=>{}),y()}catch(b){y(b)}},o._final=async function(w){try{await m.ready,m.close().catch(()=>{}),n=w}catch(v){w(v)}}}const p=Zs(u)?u.readable:u;pP(p,()=>{if(n){const g=n;n=null,g()}})}if(d){if(du(u))u.on("readable",function(){if(s){const p=s;s=null,p()}}),u.on("end",function(){o.push(null)}),o._read=function(){for(;;){const p=u.read();if(p===null){s=o._read;return}if(!o.push(p))return}};else if(Od(u)){const g=(Zs(u)?u.readable:u).getReader();o._read=async function(){for(;;)try{const{value:m,done:w}=await g.read();if(!o.push(m))return;if(w){o.push(null);return}}catch{return}}}}return o._destroy=function(p,g){!p&&a!==null&&(p=new hP),s=null,i=null,n=null,a===null?g(p):(a=g,du(u)&&fP(u,p))},o};const gP=globalThis.AbortController||ql().AbortController,{codes:{ERR_INVALID_ARG_VALUE:mP,ERR_INVALID_ARG_TYPE:Uc,ERR_MISSING_ARGS:vP,ERR_OUT_OF_RANGE:yP},AbortError:hn}=Pr,{validateAbortSignal:Ua,validateInteger:oy,validateObject:za}=Bc,bP=Pt.Symbol("kWeak"),wP=Pt.Symbol("kResistStopPropagation"),{finished:_P}=Ws,SP=V_,{addAbortSignalNoValidate:EP}=uh,{isWritable:xP,isNodeStream:TP}=Gn,{deprecate:AP}=Fr,{ArrayPrototypePush:$P,Boolean:RP,MathFloor:ly,Number:CP,NumberIsNaN:DP,Promise:cy,PromiseReject:uy,PromiseResolve:PP,PromisePrototypeThen:fy,Symbol:q_}=Pt,Sf=q_("kEmpty"),hy=q_("kEof");function OP(t,e){if(e!=null&&za(e,"options"),(e==null?void 0:e.signal)!=null&&Ua(e.signal,"options.signal"),TP(t)&&!xP(t))throw new mP("stream",t,"must be writable");const r=SP(this,t);return e!=null&&e.signal&&EP(e.signal,r),r}function dh(t,e){if(typeof t!="function")throw new Uc("fn",["Function","AsyncFunction"],t);e!=null&&za(e,"options"),(e==null?void 0:e.signal)!=null&&Ua(e.signal,"options.signal");let r=1;(e==null?void 0:e.concurrency)!=null&&(r=ly(e.concurrency));let i=r-1;return(e==null?void 0:e.highWaterMark)!=null&&(i=ly(e.highWaterMark)),oy(r,"options.concurrency",1),oy(i,"options.highWaterMark",0),i+=r,(async function*(){const s=Fr.AbortSignalAny([e==null?void 0:e.signal].filter(RP)),a=this,o=[],l={signal:s};let c,u,f=!1,d=0;function p(){f=!0,g()}function g(){d-=1,m()}function m(){u&&!f&&d<r&&o.length<i&&(u(),u=null)}async function w(){try{for await(let v of a){if(f)return;if(s.aborted)throw new hn;try{if(v=t(v,l),v===Sf)continue;v=PP(v)}catch(y){v=uy(y)}d+=1,fy(v,g,p),o.push(v),c&&(c(),c=null),!f&&(o.length>=i||d>=r)&&await new cy(y=>{u=y})}o.push(hy)}catch(v){const y=uy(v);fy(y,g,p),o.push(y)}finally{f=!0,c&&(c(),c=null)}}w();try{for(;;){for(;o.length>0;){const v=await o[0];if(v===hy)return;if(s.aborted)throw new hn;v!==Sf&&(yield v),o.shift(),m()}await new cy(v=>{c=v})}}finally{f=!0,u&&(u(),u=null)}}).call(this)}function kP(t=void 0){return t!=null&&za(t,"options"),(t==null?void 0:t.signal)!=null&&Ua(t.signal,"options.signal"),(async function*(){let r=0;for await(const n of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new hn({cause:t.signal.reason});yield[r++,n]}}).call(this)}async function Y_(t,e=void 0){for await(const r of Zg.call(this,t,e))return!0;return!1}async function NP(t,e=void 0){if(typeof t!="function")throw new Uc("fn",["Function","AsyncFunction"],t);return!await Y_.call(this,async(...r)=>!await t(...r),e)}async function FP(t,e){for await(const r of Zg.call(this,t,e))return r}async function IP(t,e){if(typeof t!="function")throw new Uc("fn",["Function","AsyncFunction"],t);async function r(i,n){return await t(i,n),Sf}for await(const i of dh.call(this,r,e));}function Zg(t,e){if(typeof t!="function")throw new Uc("fn",["Function","AsyncFunction"],t);async function r(i,n){return await t(i,n)?i:Sf}return dh.call(this,r,e)}class LP extends vP{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function jP(t,e,r){var i;if(typeof t!="function")throw new Uc("reducer",["Function","AsyncFunction"],t);r!=null&&za(r,"options"),(r==null?void 0:r.signal)!=null&&Ua(r.signal,"options.signal");let n=arguments.length>1;if(r!=null&&(i=r.signal)!==null&&i!==void 0&&i.aborted){const c=new hn(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await _P(this.destroy(c)),c}const s=new gP,a=s.signal;if(r!=null&&r.signal){const c={once:!0,[bP]:this,[wP]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let o=!1;try{for await(const c of this){var l;if(o=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new hn;n?e=await t(e,c,{signal:a}):(e=c,n=!0)}if(!o&&!n)throw new LP}finally{s.abort()}return e}async function MP(t){t!=null&&za(t,"options"),(t==null?void 0:t.signal)!=null&&Ua(t.signal,"options.signal");const e=[];for await(const i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new hn(void 0,{cause:t.signal.reason});$P(e,i)}return e}function BP(t,e){const r=dh.call(this,t,e);return(async function*(){for await(const n of r)yield*n}).call(this)}function K_(t){if(t=CP(t),DP(t))return 0;if(t<0)throw new yP("number",">= 0",t);return t}function WP(t,e=void 0){return e!=null&&za(e,"options"),(e==null?void 0:e.signal)!=null&&Ua(e.signal,"options.signal"),t=K_(t),(async function*(){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new hn;for await(const s of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new hn;t--<=0&&(yield s)}}).call(this)}function UP(t,e=void 0){return e!=null&&za(e,"options"),(e==null?void 0:e.signal)!=null&&Ua(e.signal,"options.signal"),t=K_(t),(async function*(){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new hn;for await(const s of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new hn;if(t-- >0&&(yield s),t<=0)return}}).call(this)}Bg.streamReturningOperators={asIndexedPairs:AP(kP,"readable.asIndexedPairs will be removed in a future version."),drop:WP,filter:Zg,flatMap:BP,map:dh,take:UP,compose:OP};Bg.promiseReturningOperators={every:NP,forEach:IP,reduce:jP,toArray:MP,some:Y_,find:FP};var kd,dy;function Z_(){if(dy)return kd;dy=1;const{ArrayPrototypePop:t,Promise:e}=Pt,{isIterable:r,isNodeStream:i,isWebStream:n}=Gn,{pipelineImpl:s}=Kg,{finished:a}=Ws;Q_();function o(...l){return new e((c,u)=>{let f,d;const p=l[l.length-1];if(p&&typeof p=="object"&&!i(p)&&!r(p)&&!n(p)){const g=t(l);f=g.signal,d=g.end}s(l,(g,m)=>{g?u(g):c(m)},{signal:f,end:d})})}return kd={finished:a,pipeline:o},kd}var py;function Q_(){if(py)return gd.exports;py=1;const{Buffer:t}=yn,{ObjectDefineProperty:e,ObjectKeys:r,ReflectApply:i}=Pt,{promisify:{custom:n}}=Fr,{streamReturningOperators:s,promiseReturningOperators:a}=Bg,{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=Pr,l=V_,{setDefaultHighWaterMark:c,getDefaultHighWaterMark:u}=fh,{pipeline:f}=Kg,{destroyer:d}=tl,p=Ws,g=Z_(),m=Gn,w=gd.exports=Gg.Stream;w.isDestroyed=m.isDestroyed,w.isDisturbed=m.isDisturbed,w.isErrored=m.isErrored,w.isReadable=m.isReadable,w.isWritable=m.isWritable,w.Readable=hh();for(const y of r(s)){let T=function(...L){if(new.target)throw o();return w.Readable.from(i(b,this,L))};const b=s[y];e(T,"name",{__proto__:null,value:b.name}),e(T,"length",{__proto__:null,value:b.length}),e(w.Readable.prototype,y,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const y of r(a)){let T=function(...L){if(new.target)throw o();return i(b,this,L)};const b=a[y];e(T,"name",{__proto__:null,value:b.name}),e(T,"length",{__proto__:null,value:b.length}),e(w.Readable.prototype,y,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}w.Writable=Vg(),w.Duplex=Mn(),w.Transform=U_,w.PassThrough=G_,w.pipeline=f;const{addAbortSignal:v}=uh;return w.addAbortSignal=v,w.finished=p,w.destroy=d,w.compose=l,w.setDefaultHighWaterMark=c,w.getDefaultHighWaterMark=u,e(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return g}}),e(f,n,{__proto__:null,enumerable:!0,get(){return g.pipeline}}),e(p,n,{__proto__:null,enumerable:!0,get(){return g.finished}}),w.Stream=w,w._isUint8Array=function(b){return b instanceof Uint8Array},w._uint8ArrayToBuffer=function(b){return t.from(b.buffer,b.byteOffset,b.byteLength)},gd.exports}(function(t){const e=Q_(),r=Z_(),i=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=i,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return r}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(c_);var rl=c_.exports,X_={exports:{}};function zP(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}var GP=zP,gy=Ig,HP=s_,VP=a_,my=gy?gy.isConcatSpreadable:void 0;function qP(t){return VP(t)||HP(t)||!!(my&&t&&t[my])}var YP=qP,KP=GP,ZP=YP;function J_(t,e,r,i,n){var s=-1,a=t.length;for(r||(r=ZP),n||(n=[]);++s<a;){var o=t[s];e>0&&r(o)?e>1?J_(o,e-1,r,i,n):KP(n,o):i||(n[n.length]=o)}return n}var Qg=J_,QP=Qg;function XP(t){var e=t==null?0:t.length;return e?QP(t,1):[]}var JP=XP,eO=nh,tO=eO(Object,"create"),ph=tO,vy=ph;function rO(){this.__data__=vy?vy(null):{},this.size=0}var iO=rO;function nO(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var sO=nO,aO=ph,oO="__lodash_hash_undefined__",lO=Object.prototype,cO=lO.hasOwnProperty;function uO(t){var e=this.__data__;if(aO){var r=e[t];return r===oO?void 0:r}return cO.call(e,t)?e[t]:void 0}var fO=uO,hO=ph,dO=Object.prototype,pO=dO.hasOwnProperty;function gO(t){var e=this.__data__;return hO?e[t]!==void 0:pO.call(e,t)}var mO=gO,vO=ph,yO="__lodash_hash_undefined__";function bO(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vO&&e===void 0?yO:e,this}var wO=bO,_O=iO,SO=sO,EO=fO,xO=mO,TO=wO;function il(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}il.prototype.clear=_O;il.prototype.delete=SO;il.prototype.get=EO;il.prototype.has=xO;il.prototype.set=TO;var AO=il;function $O(){this.__data__=[],this.size=0}var RO=$O,CO=jg;function DO(t,e){for(var r=t.length;r--;)if(CO(t[r][0],e))return r;return-1}var gh=DO,PO=gh,OO=Array.prototype,kO=OO.splice;function NO(t){var e=this.__data__,r=PO(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():kO.call(e,r,1),--this.size,!0}var FO=NO,IO=gh;function LO(t){var e=this.__data__,r=IO(e,t);return r<0?void 0:e[r][1]}var jO=LO,MO=gh;function BO(t){return MO(this.__data__,t)>-1}var WO=BO,UO=gh;function zO(t,e){var r=this.__data__,i=UO(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}var GO=zO,HO=RO,VO=FO,qO=jO,YO=WO,KO=GO;function nl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}nl.prototype.clear=HO;nl.prototype.delete=VO;nl.prototype.get=qO;nl.prototype.has=YO;nl.prototype.set=KO;var ZO=nl,QO=nh,XO=jc,JO=QO(XO,"Map"),ek=JO,yy=AO,tk=ZO,rk=ek;function ik(){this.size=0,this.__data__={hash:new yy,map:new(rk||tk),string:new yy}}var nk=ik;function sk(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var ak=sk,ok=ak;function lk(t,e){var r=t.__data__;return ok(e)?r[typeof e=="string"?"string":"hash"]:r.map}var mh=lk,ck=mh;function uk(t){var e=ck(this,t).delete(t);return this.size-=e?1:0,e}var fk=uk,hk=mh;function dk(t){return hk(this,t).get(t)}var pk=dk,gk=mh;function mk(t){return gk(this,t).has(t)}var vk=mk,yk=mh;function bk(t,e){var r=yk(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}var wk=bk,_k=nk,Sk=fk,Ek=pk,xk=vk,Tk=wk;function sl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}sl.prototype.clear=_k;sl.prototype.delete=Sk;sl.prototype.get=Ek;sl.prototype.has=xk;sl.prototype.set=Tk;var Ak=sl,$k="__lodash_hash_undefined__";function Rk(t){return this.__data__.set(t,$k),this}var Ck=Rk;function Dk(t){return this.__data__.has(t)}var Pk=Dk,Ok=Ak,kk=Ck,Nk=Pk;function Ef(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Ok;++e<r;)this.add(t[e])}Ef.prototype.add=Ef.prototype.push=kk;Ef.prototype.has=Nk;var e0=Ef;function Fk(t,e,r,i){for(var n=t.length,s=r+(i?1:-1);i?s--:++s<n;)if(e(t[s],s,t))return s;return-1}var Ik=Fk;function Lk(t){return t!==t}var jk=Lk;function Mk(t,e,r){for(var i=r-1,n=t.length;++i<n;)if(t[i]===e)return i;return-1}var Bk=Mk,Wk=Ik,Uk=jk,zk=Bk;function Gk(t,e,r){return e===e?zk(t,e,r):Wk(t,Uk,r)}var Hk=Gk,Vk=Hk;function qk(t,e){var r=t==null?0:t.length;return!!r&&Vk(t,e,0)>-1}var t0=qk;function Yk(t,e,r){for(var i=-1,n=t==null?0:t.length;++i<n;)if(r(e,t[i]))return!0;return!1}var r0=Yk;function Kk(t,e){for(var r=-1,i=t==null?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}var Zk=Kk;function Qk(t,e){return t.has(e)}var i0=Qk,Xk=e0,Jk=t0,eN=r0,tN=Zk,rN=o_,iN=i0,nN=200;function sN(t,e,r,i){var n=-1,s=Jk,a=!0,o=t.length,l=[],c=e.length;if(!o)return l;r&&(e=tN(e,rN(r))),i?(s=eN,a=!1):e.length>=nN&&(s=iN,a=!1,e=new Xk(e));e:for(;++n<o;){var u=t[n],f=r==null?u:r(u);if(u=i||u!==0?u:0,a&&f===f){for(var d=c;d--;)if(e[d]===f)continue e;l.push(u)}else s(e,f,i)||l.push(u)}return l}var aN=sN,oN=Mg,lN=Mc;function cN(t){return lN(t)&&oN(t)}var n0=cN,uN=aN,fN=Qg,hN=Lg,by=n0,dN=hN(function(t,e){return by(t)?uN(t,fN(e,1,by,!0)):[]}),pN=dN,gN=nh,mN=jc,vN=gN(mN,"Set"),yN=vN;function bN(){}var wN=bN;function _N(t){var e=-1,r=Array(t.size);return t.forEach(function(i){r[++e]=i}),r}var s0=_N,Nd=yN,SN=wN,EN=s0,xN=1/0,TN=Nd&&1/EN(new Nd([,-0]))[1]==xN?function(t){return new Nd(t)}:SN,AN=TN,$N=e0,RN=t0,CN=r0,DN=i0,PN=AN,ON=s0,kN=200;function NN(t,e,r){var i=-1,n=RN,s=t.length,a=!0,o=[],l=o;if(r)a=!1,n=CN;else if(s>=kN){var c=e?null:PN(t);if(c)return ON(c);a=!1,n=DN,l=new $N}else l=e?[]:o;e:for(;++i<s;){var u=t[i],f=e?e(u):u;if(u=r||u!==0?u:0,a&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;e&&l.push(f),o.push(u)}else n(l,f,r)||(l!==o&&l.push(f),o.push(u))}return o}var FN=NN,IN=Qg,LN=Lg,jN=FN,MN=n0,BN=LN(function(t){return jN(IN(t,1,MN,!0))}),WN=BN;function UN(t,e){return function(r){return t(e(r))}}var zN=UN,GN=zN,HN=GN(Object.getPrototypeOf,Object),VN=HN,qN=rh,YN=VN,KN=Mc,ZN="[object Object]",QN=Function.prototype,XN=Object.prototype,a0=QN.toString,JN=XN.hasOwnProperty,eF=a0.call(Object);function tF(t){if(!KN(t)||qN(t)!=ZN)return!1;var e=YN(t);if(e===null)return!0;var r=JN.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&a0.call(r)==eF}var rF=tF,o0={},ks={},vh={};Object.defineProperty(vh,"__esModule",{value:!0});vh.assertValidPattern=void 0;const iF=1024*64,nF=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>iF)throw new TypeError("pattern is too long")};vh.assertValidPattern=nF;var Yl={},yh={};Object.defineProperty(yh,"__esModule",{value:!0});yh.parseClass=void 0;const sF={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},wl=t=>t.replace(/[[\]\\-]/g,"\\$&"),aF=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),wy=t=>t.join(""),oF=(t,e)=>{const r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");const i=[],n=[];let s=r+1,a=!1,o=!1,l=!1,c=!1,u=r,f="";e:for(;s<t.length;){const m=t.charAt(s);if((m==="!"||m==="^")&&s===r+1){c=!0,s++;continue}if(m==="]"&&a&&!l){u=s+1;break}if(a=!0,m==="\\"&&!l){l=!0,s++;continue}if(m==="["&&!l){for(const[w,[v,y,b]]of Object.entries(sF))if(t.startsWith(w,s)){if(f)return["$.",!1,t.length-r,!0];s+=w.length,b?n.push(v):i.push(v),o=o||y;continue e}}if(l=!1,f){m>f?i.push(wl(f)+"-"+wl(m)):m===f&&i.push(wl(m)),f="",s++;continue}if(t.startsWith("-]",s+1)){i.push(wl(m+"-")),s+=2;continue}if(t.startsWith("-",s+1)){f=m,s+=2;continue}i.push(wl(m)),s++}if(u<s)return["",!1,0,!1];if(!i.length&&!n.length)return["$.",!1,t.length-r,!0];if(n.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!c){const m=i[0].length===2?i[0].slice(-1):i[0];return[aF(m),!1,u-r,!1]}const d="["+(c?"^":"")+wy(i)+"]",p="["+(c?"":"^")+wy(n)+"]";return[i.length&&n.length?"("+d+"|"+p+")":i.length?d:p,o,u-r,!0]};yh.parseClass=oF;var Go={};Object.defineProperty(Go,"__esModule",{value:!0});Go.unescape=void 0;const lF=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");Go.unescape=lF;Object.defineProperty(Yl,"__esModule",{value:!0});Yl.AST=void 0;const cF=yh,pu=Go,uF=new Set(["!","?","+","*","@"]),_y=t=>uF.has(t),fF="(?!(?:^|/)\\.\\.?(?:$|/))",gu="(?!\\.)",hF=new Set(["[","."]),dF=new Set(["..","."]),pF=new Set("().*{}+?[]^$\\!"),gF=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Xg="[^/]",Sy=Xg+"*?",Ey=Xg+"+?";var Gt,Kt,$n,$t,Bt,ds,sa,ps,Yi,aa,ac,ja,l0,Os,Iu,Sp,c0;const Sr=class Sr{constructor(e,r,i={}){ie(this,ja);Q(this,"type");ie(this,Gt);ie(this,Kt);ie(this,$n,!1);ie(this,$t,[]);ie(this,Bt);ie(this,ds);ie(this,sa);ie(this,ps,!1);ie(this,Yi);ie(this,aa);ie(this,ac,!1);this.type=e,e&&W(this,Kt,!0),W(this,Bt,r),W(this,Gt,h(this,Bt)?h(h(this,Bt),Gt):this),W(this,Yi,h(this,Gt)===this?i:h(h(this,Gt),Yi)),W(this,sa,h(this,Gt)===this?[]:h(h(this,Gt),sa)),e==="!"&&!h(h(this,Gt),ps)&&h(this,sa).push(this),W(this,ds,h(this,Bt)?h(h(this,Bt),$t).length:0)}get hasMagic(){if(h(this,Kt)!==void 0)return h(this,Kt);for(const e of h(this,$t))if(typeof e!="string"&&(e.type||e.hasMagic))return W(this,Kt,!0);return h(this,Kt)}toString(){return h(this,aa)!==void 0?h(this,aa):this.type?W(this,aa,this.type+"("+h(this,$t).map(e=>String(e)).join("|")+")"):W(this,aa,h(this,$t).map(e=>String(e)).join(""))}push(...e){for(const r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof Sr&&h(r,Bt)===this))throw new Error("invalid part: "+r);h(this,$t).push(r)}}toJSON(){var r;const e=this.type===null?h(this,$t).slice().map(i=>typeof i=="string"?i:i.toJSON()):[this.type,...h(this,$t).map(i=>i.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===h(this,Gt)||h(h(this,Gt),ps)&&((r=h(this,Bt))==null?void 0:r.type)==="!")&&e.push({}),e}isStart(){var r;if(h(this,Gt)===this)return!0;if(!((r=h(this,Bt))!=null&&r.isStart()))return!1;if(h(this,ds)===0)return!0;const e=h(this,Bt);for(let i=0;i<h(this,ds);i++){const n=h(e,$t)[i];if(!(n instanceof Sr&&n.type==="!"))return!1}return!0}isEnd(){var r,i,n;if(h(this,Gt)===this||((r=h(this,Bt))==null?void 0:r.type)==="!")return!0;if(!((i=h(this,Bt))!=null&&i.isEnd()))return!1;if(!this.type)return(n=h(this,Bt))==null?void 0:n.isEnd();const e=h(this,Bt)?h(h(this,Bt),$t).length:0;return h(this,ds)===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){const r=new Sr(this.type,e);for(const i of h(this,$t))r.copyIn(i);return r}static fromGlob(e,r={}){var n;const i=new Sr(null,void 0,r);return re(n=Sr,Os,Iu).call(n,e,i,0,r),i}toMMPattern(){if(this!==h(this,Gt))return h(this,Gt).toMMPattern();const e=this.toString(),[r,i,n,s]=this.toRegExpSource();if(!(n||h(this,Kt)||h(this,Yi).nocase&&!h(this,Yi).nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return i;const o=(h(this,Yi).nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${r}$`,o),{_src:r,_glob:e})}get options(){return h(this,Yi)}toRegExpSource(e){var l;const r=e??!!h(this,Yi).dot;if(h(this,Gt)===this&&re(this,ja,l0).call(this),!this.type){const c=this.isStart()&&this.isEnd(),u=h(this,$t).map(g=>{var b;const[m,w,v,y]=typeof g=="string"?re(b=Sr,Os,c0).call(b,g,h(this,Kt),c):g.toRegExpSource(e);return W(this,Kt,h(this,Kt)||v),W(this,$n,h(this,$n)||y),m}).join("");let f="";if(this.isStart()&&typeof h(this,$t)[0]=="string"&&!(h(this,$t).length===1&&dF.has(h(this,$t)[0]))){const m=hF,w=r&&m.has(u.charAt(0))||u.startsWith("\\.")&&m.has(u.charAt(2))||u.startsWith("\\.\\.")&&m.has(u.charAt(4)),v=!r&&!e&&m.has(u.charAt(0));f=w?fF:v?gu:""}let d="";return this.isEnd()&&h(h(this,Gt),ps)&&((l=h(this,Bt))==null?void 0:l.type)==="!"&&(d="(?:$|\\/)"),[f+u+d,(0,pu.unescape)(u),W(this,Kt,!!h(this,Kt)),h(this,$n)]}const i=this.type==="*"||this.type==="+",n=this.type==="!"?"(?:(?!(?:":"(?:";let s=re(this,ja,Sp).call(this,r);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){const c=this.toString();return W(this,$t,[c]),this.type=null,W(this,Kt,void 0),[c,(0,pu.unescape)(this.toString()),!1,!1]}let a=!i||e||r||!gu?"":re(this,ja,Sp).call(this,!0);a===s&&(a=""),a&&(s=`(?:${s})(?:${a})*?`);let o="";if(this.type==="!"&&h(this,ac))o=(this.isStart()&&!r?gu:"")+Ey;else{const c=this.type==="!"?"))"+(this.isStart()&&!r&&!e?gu:"")+Sy+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;o=n+s+c}return[o,(0,pu.unescape)(s),W(this,Kt,!!h(this,Kt)),h(this,$n)]}};Gt=new WeakMap,Kt=new WeakMap,$n=new WeakMap,$t=new WeakMap,Bt=new WeakMap,ds=new WeakMap,sa=new WeakMap,ps=new WeakMap,Yi=new WeakMap,aa=new WeakMap,ac=new WeakMap,ja=new WeakSet,l0=function(){if(this!==h(this,Gt))throw new Error("should only call on root");if(h(this,ps))return this;this.toString(),W(this,ps,!0);let e;for(;e=h(this,sa).pop();){if(e.type!=="!")continue;let r=e,i=h(r,Bt);for(;i;){for(let n=h(r,ds)+1;!i.type&&n<h(i,$t).length;n++)for(const s of h(e,$t)){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(h(i,$t)[n])}r=i,i=h(r,Bt)}}return this},Os=new WeakSet,Iu=function(e,r,i,n){var p,g;let s=!1,a=!1,o=-1,l=!1;if(r.type===null){let m=i,w="";for(;m<e.length;){const v=e.charAt(m++);if(s||v==="\\"){s=!s,w+=v;continue}if(a){m===o+1?(v==="^"||v==="!")&&(l=!0):v==="]"&&!(m===o+2&&l)&&(a=!1),w+=v;continue}else if(v==="["){a=!0,o=m,l=!1,w+=v;continue}if(!n.noext&&_y(v)&&e.charAt(m)==="("){r.push(w),w="";const y=new Sr(v,r);m=re(p=Sr,Os,Iu).call(p,e,y,m,n),r.push(y);continue}w+=v}return r.push(w),m}let c=i+1,u=new Sr(null,r);const f=[];let d="";for(;c<e.length;){const m=e.charAt(c++);if(s||m==="\\"){s=!s,d+=m;continue}if(a){c===o+1?(m==="^"||m==="!")&&(l=!0):m==="]"&&!(c===o+2&&l)&&(a=!1),d+=m;continue}else if(m==="["){a=!0,o=c,l=!1,d+=m;continue}if(_y(m)&&e.charAt(c)==="("){u.push(d),d="";const w=new Sr(m,u);u.push(w),c=re(g=Sr,Os,Iu).call(g,e,w,c,n);continue}if(m==="|"){u.push(d),d="",f.push(u),u=new Sr(null,r);continue}if(m===")")return d===""&&h(r,$t).length===0&&W(r,ac,!0),u.push(d),d="",r.push(...f,u),c;d+=m}return r.type=null,W(r,Kt,void 0),W(r,$t,[e.substring(i-1)]),c},Sp=function(e){return h(this,$t).map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");const[i,n,s,a]=r.toRegExpSource(e);return W(this,$n,h(this,$n)||a),i}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")},c0=function(e,r,i=!1){let n=!1,s="",a=!1;for(let o=0;o<e.length;o++){const l=e.charAt(o);if(n){n=!1,s+=(pF.has(l)?"\\":"")+l;continue}if(l==="\\"){o===e.length-1?s+="\\\\":n=!0;continue}if(l==="["){const[c,u,f,d]=(0,cF.parseClass)(e,o);if(f){s+=c,a=a||u,o+=f-1,r=r||d;continue}}if(l==="*"){i&&e==="*"?s+=Ey:s+=Sy,r=!0;continue}if(l==="?"){s+=Xg,r=!0;continue}s+=gF(l)}return[s,(0,pu.unescape)(e),!!r,a]},ie(Sr,Os);let _p=Sr;Yl.AST=_p;var Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.escape=void 0;const mF=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");Kl.escape=mF;(function(t){var e=Ct&&Ct.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(t,"__esModule",{value:!0}),t.unescape=t.escape=t.AST=t.Minimatch=t.match=t.makeRe=t.braceExpand=t.defaults=t.filter=t.GLOBSTAR=t.sep=t.minimatch=void 0;const r=e(Nb),i=vh,n=Yl,s=Kl,a=Go,o=(K,k,F={})=>((0,i.assertValidPattern)(k),!F.nocomment&&k.charAt(0)==="#"?!1:new st(k,F).match(K));t.minimatch=o;const l=/^\*+([^+@!?\*\[\(]*)$/,c=K=>k=>!k.startsWith(".")&&k.endsWith(K),u=K=>k=>k.endsWith(K),f=K=>(K=K.toLowerCase(),k=>!k.startsWith(".")&&k.toLowerCase().endsWith(K)),d=K=>(K=K.toLowerCase(),k=>k.toLowerCase().endsWith(K)),p=/^\*+\.\*+$/,g=K=>!K.startsWith(".")&&K.includes("."),m=K=>K!=="."&&K!==".."&&K.includes("."),w=/^\.\*+$/,v=K=>K!=="."&&K!==".."&&K.startsWith("."),y=/^\*+$/,b=K=>K.length!==0&&!K.startsWith("."),T=K=>K.length!==0&&K!=="."&&K!=="..",L=/^\?+([^+@!?\*\[\(]*)?$/,H=([K,k=""])=>{const F=q([K]);return k?(k=k.toLowerCase(),E=>F(E)&&E.toLowerCase().endsWith(k)):F},B=([K,k=""])=>{const F=te([K]);return k?(k=k.toLowerCase(),E=>F(E)&&E.toLowerCase().endsWith(k)):F},S=([K,k=""])=>{const F=te([K]);return k?E=>F(E)&&E.endsWith(k):F},G=([K,k=""])=>{const F=q([K]);return k?E=>F(E)&&E.endsWith(k):F},q=([K])=>{const k=K.length;return F=>F.length===k&&!F.startsWith(".")},te=([K])=>{const k=K.length;return F=>F.length===k&&F!=="."&&F!==".."},X=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",M={win32:{sep:"\\"},posix:{sep:"/"}};t.sep=X==="win32"?M.win32.sep:M.posix.sep,t.minimatch.sep=t.sep,t.GLOBSTAR=Symbol("globstar **"),t.minimatch.GLOBSTAR=t.GLOBSTAR;const ue="[^/]"+"*?",ye="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",j="(?:(?!(?:\\/|^)\\.).)*?",I=(K,k={})=>F=>(0,t.minimatch)(F,K,k);t.filter=I,t.minimatch.filter=t.filter;const Y=(K,k={})=>Object.assign({},K,k),de=K=>{if(!K||typeof K!="object"||!Object.keys(K).length)return t.minimatch;const k=t.minimatch;return Object.assign((E,$,U={})=>k(E,$,Y(K,U)),{Minimatch:class extends k.Minimatch{constructor($,U={}){super($,Y(K,U))}static defaults($){return k.defaults(Y(K,$)).Minimatch}},AST:class extends k.AST{constructor($,U,x={}){super($,U,Y(K,x))}static fromGlob($,U={}){return k.AST.fromGlob($,Y(K,U))}},unescape:(E,$={})=>k.unescape(E,Y(K,$)),escape:(E,$={})=>k.escape(E,Y(K,$)),filter:(E,$={})=>k.filter(E,Y(K,$)),defaults:E=>k.defaults(Y(K,E)),makeRe:(E,$={})=>k.makeRe(E,Y(K,$)),braceExpand:(E,$={})=>k.braceExpand(E,Y(K,$)),match:(E,$,U={})=>k.match(E,$,Y(K,U)),sep:k.sep,GLOBSTAR:t.GLOBSTAR})};t.defaults=de,t.minimatch.defaults=t.defaults;const Se=(K,k={})=>((0,i.assertValidPattern)(K),k.nobrace||!/\{(?:(?!\{).)*\}/.test(K)?[K]:(0,r.default)(K));t.braceExpand=Se,t.minimatch.braceExpand=t.braceExpand;const De=(K,k={})=>new st(K,k).makeRe();t.makeRe=De,t.minimatch.makeRe=t.makeRe;const ge=(K,k,F={})=>{const E=new st(k,F);return K=K.filter($=>E.match($)),E.options.nonull&&!K.length&&K.push(k),K};t.match=ge,t.minimatch.match=t.match;const Ie=/[?*]|[+@!]\(.*?\)|\[|\]/,nt=K=>K.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class st{constructor(k,F={}){Q(this,"options");Q(this,"set");Q(this,"pattern");Q(this,"windowsPathsNoEscape");Q(this,"nonegate");Q(this,"negate");Q(this,"comment");Q(this,"empty");Q(this,"preserveMultipleSlashes");Q(this,"partial");Q(this,"globSet");Q(this,"globParts");Q(this,"nocase");Q(this,"isWindows");Q(this,"platform");Q(this,"windowsNoMagicRoot");Q(this,"regexp");(0,i.assertValidPattern)(k),F=F||{},this.options=F,this.pattern=k,this.platform=F.platform||X,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!F.windowsPathsNoEscape||F.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!F.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!F.nonegate,this.comment=!1,this.empty=!1,this.partial=!!F.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=F.windowsNoMagicRoot!==void 0?F.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const k of this.set)for(const F of k)if(typeof F!="string")return!0;return!1}debug(...k){}make(){const k=this.pattern,F=this.options;if(!F.nocomment&&k.charAt(0)==="#"){this.comment=!0;return}if(!k){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],F.debug&&(this.debug=(...U)=>console.error(...U)),this.debug(this.pattern,this.globSet);const E=this.globSet.map(U=>this.slashSplit(U));this.globParts=this.preprocess(E),this.debug(this.pattern,this.globParts);let $=this.globParts.map((U,x,N)=>{if(this.isWindows&&this.windowsNoMagicRoot){const z=U[0]===""&&U[1]===""&&(U[2]==="?"||!Ie.test(U[2]))&&!Ie.test(U[3]),ee=/^[a-z]:/i.test(U[0]);if(z)return[...U.slice(0,4),...U.slice(4).map(oe=>this.parse(oe))];if(ee)return[U[0],...U.slice(1).map(oe=>this.parse(oe))]}return U.map(z=>this.parse(z))});if(this.debug(this.pattern,$),this.set=$.filter(U=>U.indexOf(!1)===-1),this.isWindows)for(let U=0;U<this.set.length;U++){const x=this.set[U];x[0]===""&&x[1]===""&&this.globParts[U][2]==="?"&&typeof x[3]=="string"&&/^[a-z]:$/i.test(x[3])&&(x[2]="?")}this.debug(this.pattern,this.set)}preprocess(k){if(this.options.noglobstar)for(let E=0;E<k.length;E++)for(let $=0;$<k[E].length;$++)k[E][$]==="**"&&(k[E][$]="*");const{optimizationLevel:F=1}=this.options;return F>=2?(k=this.firstPhasePreProcess(k),k=this.secondPhasePreProcess(k)):F>=1?k=this.levelOneOptimize(k):k=this.adjascentGlobstarOptimize(k),k}adjascentGlobstarOptimize(k){return k.map(F=>{let E=-1;for(;(E=F.indexOf("**",E+1))!==-1;){let $=E;for(;F[$+1]==="**";)$++;$!==E&&F.splice(E,$-E)}return F})}levelOneOptimize(k){return k.map(F=>(F=F.reduce((E,$)=>{const U=E[E.length-1];return $==="**"&&U==="**"?E:$===".."&&U&&U!==".."&&U!=="."&&U!=="**"?(E.pop(),E):(E.push($),E)},[]),F.length===0?[""]:F))}levelTwoFileOptimize(k){Array.isArray(k)||(k=this.slashSplit(k));let F=!1;do{if(F=!1,!this.preserveMultipleSlashes){for(let $=1;$<k.length-1;$++){const U=k[$];$===1&&U===""&&k[0]===""||(U==="."||U==="")&&(F=!0,k.splice($,1),$--)}k[0]==="."&&k.length===2&&(k[1]==="."||k[1]==="")&&(F=!0,k.pop())}let E=0;for(;(E=k.indexOf("..",E+1))!==-1;){const $=k[E-1];$&&$!=="."&&$!==".."&&$!=="**"&&(F=!0,k.splice(E-1,2),E-=2)}}while(F);return k.length===0?[""]:k}firstPhasePreProcess(k){let F=!1;do{F=!1;for(let E of k){let $=-1;for(;($=E.indexOf("**",$+1))!==-1;){let x=$;for(;E[x+1]==="**";)x++;x>$&&E.splice($+1,x-$);let N=E[$+1];const z=E[$+2],ee=E[$+3];if(N!==".."||!z||z==="."||z===".."||!ee||ee==="."||ee==="..")continue;F=!0,E.splice($,1);const oe=E.slice(0);oe[$]="**",k.push(oe),$--}if(!this.preserveMultipleSlashes){for(let x=1;x<E.length-1;x++){const N=E[x];x===1&&N===""&&E[0]===""||(N==="."||N==="")&&(F=!0,E.splice(x,1),x--)}E[0]==="."&&E.length===2&&(E[1]==="."||E[1]==="")&&(F=!0,E.pop())}let U=0;for(;(U=E.indexOf("..",U+1))!==-1;){const x=E[U-1];if(x&&x!=="."&&x!==".."&&x!=="**"){F=!0;const z=U===1&&E[U+1]==="**"?["."]:[];E.splice(U-1,2,...z),E.length===0&&E.push(""),U-=2}}}}while(F);return k}secondPhasePreProcess(k){for(let F=0;F<k.length-1;F++)for(let E=F+1;E<k.length;E++){const $=this.partsMatch(k[F],k[E],!this.preserveMultipleSlashes);if($){k[F]=[],k[E]=$;break}}return k.filter(F=>F.length)}partsMatch(k,F,E=!1){let $=0,U=0,x=[],N="";for(;$<k.length&&U<F.length;)if(k[$]===F[U])x.push(N==="b"?F[U]:k[$]),$++,U++;else if(E&&k[$]==="**"&&F[U]===k[$+1])x.push(k[$]),$++;else if(E&&F[U]==="**"&&k[$]===F[U+1])x.push(F[U]),U++;else if(k[$]==="*"&&F[U]&&(this.options.dot||!F[U].startsWith("."))&&F[U]!=="**"){if(N==="b")return!1;N="a",x.push(k[$]),$++,U++}else if(F[U]==="*"&&k[$]&&(this.options.dot||!k[$].startsWith("."))&&k[$]!=="**"){if(N==="a")return!1;N="b",x.push(F[U]),$++,U++}else return!1;return k.length===F.length&&x}parseNegate(){if(this.nonegate)return;const k=this.pattern;let F=!1,E=0;for(let $=0;$<k.length&&k.charAt($)==="!";$++)F=!F,E++;E&&(this.pattern=k.slice(E)),this.negate=F}matchOne(k,F,E=!1){const $=this.options;if(this.isWindows){const Le=typeof k[0]=="string"&&/^[a-z]:$/i.test(k[0]),ut=!Le&&k[0]===""&&k[1]===""&&k[2]==="?"&&/^[a-z]:$/i.test(k[3]),Ke=typeof F[0]=="string"&&/^[a-z]:$/i.test(F[0]),kt=!Ke&&F[0]===""&&F[1]===""&&F[2]==="?"&&typeof F[3]=="string"&&/^[a-z]:$/i.test(F[3]),at=ut?3:Le?0:void 0,je=kt?3:Ke?0:void 0;if(typeof at=="number"&&typeof je=="number"){const[xt,fr]=[k[at],F[je]];xt.toLowerCase()===fr.toLowerCase()&&(F[je]=xt,je>at?F=F.slice(je):at>je&&(k=k.slice(at)))}}const{optimizationLevel:U=1}=this.options;U>=2&&(k=this.levelTwoFileOptimize(k)),this.debug("matchOne",this,{file:k,pattern:F}),this.debug("matchOne",k.length,F.length);for(var x=0,N=0,z=k.length,ee=F.length;x<z&&N<ee;x++,N++){this.debug("matchOne loop");var oe=F[N],le=k[x];if(this.debug(F,oe,le),oe===!1)return!1;if(oe===t.GLOBSTAR){this.debug("GLOBSTAR",[F,oe,le]);var V=x,he=N+1;if(he===ee){for(this.debug("** at the end");x<z;x++)if(k[x]==="."||k[x]===".."||!$.dot&&k[x].charAt(0)===".")return!1;return!0}for(;V<z;){var me=k[V];if(this.debug(`
globstar while`,k,V,F,he,me),this.matchOne(k.slice(V),F.slice(he),E))return this.debug("globstar found match!",V,z,me),!0;if(me==="."||me===".."||!$.dot&&me.charAt(0)==="."){this.debug("dot detected!",k,V,F,he);break}this.debug("globstar swallow a segment, and continue"),V++}return!!(E&&(this.debug(`
>>> no match, partial?`,k,V,F,he),V===z))}let Le;if(typeof oe=="string"?(Le=le===oe,this.debug("string match",oe,le,Le)):(Le=oe.test(le),this.debug("pattern match",oe,le,Le)),!Le)return!1}if(x===z&&N===ee)return!0;if(x===z)return E;if(N===ee)return x===z-1&&k[x]==="";throw new Error("wtf?")}braceExpand(){return(0,t.braceExpand)(this.pattern,this.options)}parse(k){(0,i.assertValidPattern)(k);const F=this.options;if(k==="**")return t.GLOBSTAR;if(k==="")return"";let E,$=null;(E=k.match(y))?$=F.dot?T:b:(E=k.match(l))?$=(F.nocase?F.dot?d:f:F.dot?u:c)(E[1]):(E=k.match(L))?$=(F.nocase?F.dot?B:H:F.dot?S:G)(E):(E=k.match(p))?$=F.dot?m:g:(E=k.match(w))&&($=v);const U=n.AST.fromGlob(k,this.options).toMMPattern();return $&&typeof U=="object"&&Reflect.defineProperty(U,"test",{value:$}),U}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const k=this.set;if(!k.length)return this.regexp=!1,this.regexp;const F=this.options,E=F.noglobstar?ue:F.dot?ye:j,$=new Set(F.nocase?["i"]:[]);let U=k.map(z=>{const ee=z.map(oe=>{if(oe instanceof RegExp)for(const le of oe.flags.split(""))$.add(le);return typeof oe=="string"?nt(oe):oe===t.GLOBSTAR?t.GLOBSTAR:oe._src});return ee.forEach((oe,le)=>{const V=ee[le+1],he=ee[le-1];oe!==t.GLOBSTAR||he===t.GLOBSTAR||(he===void 0?V!==void 0&&V!==t.GLOBSTAR?ee[le+1]="(?:\\/|"+E+"\\/)?"+V:ee[le]=E:V===void 0?ee[le-1]=he+"(?:\\/|"+E+")?":V!==t.GLOBSTAR&&(ee[le-1]=he+"(?:\\/|\\/"+E+"\\/)"+V,ee[le+1]=t.GLOBSTAR))}),ee.filter(oe=>oe!==t.GLOBSTAR).join("/")}).join("|");const[x,N]=k.length>1?["(?:",")"]:["",""];U="^"+x+U+N+"$",this.negate&&(U="^(?!"+U+").+$");try{this.regexp=new RegExp(U,[...$].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(k){return this.preserveMultipleSlashes?k.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(k)?["",...k.split(/\/+/)]:k.split(/\/+/)}match(k,F=this.partial){if(this.debug("match",k,this.pattern),this.comment)return!1;if(this.empty)return k==="";if(k==="/"&&F)return!0;const E=this.options;this.isWindows&&(k=k.split("\\").join("/"));const $=this.slashSplit(k);this.debug(this.pattern,"split",$);const U=this.set;this.debug(this.pattern,"set",U);let x=$[$.length-1];if(!x)for(let N=$.length-2;!x&&N>=0;N--)x=$[N];for(let N=0;N<U.length;N++){const z=U[N];let ee=$;if(E.matchBase&&z.length===1&&(ee=[x]),this.matchOne(ee,z,F))return E.flipNegate?!0:!this.negate}return E.flipNegate?!1:this.negate}static defaults(k){return t.minimatch.defaults(k).Minimatch}}t.Minimatch=st;var R=Yl;Object.defineProperty(t,"AST",{enumerable:!0,get:function(){return R.AST}});var P=Kl;Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return P.escape}});var ae=Go;Object.defineProperty(t,"unescape",{enumerable:!0,get:function(){return ae.unescape}}),t.minimatch.AST=n.AST,t.minimatch.Minimatch=st,t.minimatch.escape=s.escape,t.minimatch.unescape=a.unescape})(ks);var Zl={},Rt={},bh={};Object.defineProperty(bh,"__esModule",{value:!0});bh.LRUCache=void 0;const to=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,u0=new Set,Ep=typeof process=="object"&&process?process:{},f0=(t,e,r,i)=>{typeof Ep.emitWarning=="function"?Ep.emitWarning(t,e,r,i):console.error(`[${r}] ${e}: ${t}`)};let xf=globalThis.AbortController,xy=globalThis.AbortSignal;var Sb;if(typeof xf>"u"){xy=class{constructor(){Q(this,"onabort");Q(this,"_onabort",[]);Q(this,"reason");Q(this,"aborted",!1)}addEventListener(i,n){this._onabort.push(n)}},xf=class{constructor(){Q(this,"signal",new xy);e()}abort(i){var n,s;if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(const a of this.signal._onabort)a(i);(s=(n=this.signal).onabort)==null||s.call(n,i)}}};let t=((Sb=Ep.env)==null?void 0:Sb.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,f0("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const vF=t=>!u0.has(t),ns=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),h0=t=>ns(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Lu:null:null;class Lu extends Array{constructor(e){super(e),this.fill(0)}}var Eo;const ta=class ta{constructor(e,r){Q(this,"heap");Q(this,"length");if(!h(ta,Eo))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}static create(e){const r=h0(e);if(!r)return[];W(ta,Eo,!0);const i=new ta(e,r);return W(ta,Eo,!1),i}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};Eo=new WeakMap,ie(ta,Eo,!1);let xp=ta;var Eb,xb,wi,Wr,_i,Si,xo,To,Ht,Ei,Wt,St,Ge,xr,Ur,pr,Zt,xi,Qt,Ti,Ai,zr,$i,gs,Tr,xe,Ap,oa,Rn,oc,Gr,d0,la,Ao,lc,ss,as,$p,ju,Mu,_t,Rp,Rl,os,Cp;const Wm=class Wm{constructor(e){ie(this,xe);ie(this,wi);ie(this,Wr);ie(this,_i);ie(this,Si);ie(this,xo);ie(this,To);Q(this,"ttl");Q(this,"ttlResolution");Q(this,"ttlAutopurge");Q(this,"updateAgeOnGet");Q(this,"updateAgeOnHas");Q(this,"allowStale");Q(this,"noDisposeOnSet");Q(this,"noUpdateTTL");Q(this,"maxEntrySize");Q(this,"sizeCalculation");Q(this,"noDeleteOnFetchRejection");Q(this,"noDeleteOnStaleGet");Q(this,"allowStaleOnFetchAbort");Q(this,"allowStaleOnFetchRejection");Q(this,"ignoreFetchAbort");ie(this,Ht);ie(this,Ei);ie(this,Wt);ie(this,St);ie(this,Ge);ie(this,xr);ie(this,Ur);ie(this,pr);ie(this,Zt);ie(this,xi);ie(this,Qt);ie(this,Ti);ie(this,Ai);ie(this,zr);ie(this,$i);ie(this,gs);ie(this,Tr);ie(this,oa,()=>{});ie(this,Rn,()=>{});ie(this,oc,()=>{});ie(this,Gr,()=>!1);ie(this,la,e=>{});ie(this,Ao,(e,r,i)=>{});ie(this,lc,(e,r,i,n)=>{if(i||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Q(this,Eb,"LRUCache");const{max:r=0,ttl:i,ttlResolution:n=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:o,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:f,noUpdateTTL:d,maxSize:p=0,maxEntrySize:g=0,sizeCalculation:m,fetchMethod:w,memoMethod:v,noDeleteOnFetchRejection:y,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:T,allowStaleOnFetchAbort:L,ignoreFetchAbort:H}=e;if(r!==0&&!ns(r))throw new TypeError("max option must be a nonnegative integer");const B=r?h0(r):Array;if(!B)throw new Error("invalid max value: "+r);if(W(this,wi,r),W(this,Wr,p),this.maxEntrySize=g||h(this,Wr),this.sizeCalculation=m,this.sizeCalculation){if(!h(this,Wr)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(v!==void 0&&typeof v!="function")throw new TypeError("memoMethod must be a function if defined");if(W(this,To,v),w!==void 0&&typeof w!="function")throw new TypeError("fetchMethod must be a function if specified");if(W(this,xo,w),W(this,gs,!!w),W(this,Wt,new Map),W(this,St,new Array(r).fill(void 0)),W(this,Ge,new Array(r).fill(void 0)),W(this,xr,new B(r)),W(this,Ur,new B(r)),W(this,pr,0),W(this,Zt,0),W(this,xi,xp.create(r)),W(this,Ht,0),W(this,Ei,0),typeof c=="function"&&W(this,_i,c),typeof u=="function"?(W(this,Si,u),W(this,Qt,[])):(W(this,Si,void 0),W(this,Qt,void 0)),W(this,$i,!!h(this,_i)),W(this,Tr,!!h(this,Si)),this.noDisposeOnSet=!!f,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!y,this.allowStaleOnFetchRejection=!!T,this.allowStaleOnFetchAbort=!!L,this.ignoreFetchAbort=!!H,this.maxEntrySize!==0){if(h(this,Wr)!==0&&!ns(h(this,Wr)))throw new TypeError("maxSize must be a positive integer if specified");if(!ns(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");re(this,xe,d0).call(this)}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!o,this.ttlResolution=ns(n)||n===0?n:1,this.ttlAutopurge=!!s,this.ttl=i||0,this.ttl){if(!ns(this.ttl))throw new TypeError("ttl must be a positive integer if specified");re(this,xe,Ap).call(this)}if(h(this,wi)===0&&this.ttl===0&&h(this,Wr)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!h(this,wi)&&!h(this,Wr)){const S="LRU_CACHE_UNBOUNDED";vF(S)&&(u0.add(S),f0("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",S,Wm))}}static unsafeExposeInternals(e){return{starts:h(e,Ai),ttls:h(e,zr),sizes:h(e,Ti),keyMap:h(e,Wt),keyList:h(e,St),valList:h(e,Ge),next:h(e,xr),prev:h(e,Ur),get head(){return h(e,pr)},get tail(){return h(e,Zt)},free:h(e,xi),isBackgroundFetch:r=>{var i;return re(i=e,xe,_t).call(i,r)},backgroundFetch:(r,i,n,s)=>{var a;return re(a=e,xe,Mu).call(a,r,i,n,s)},moveToTail:r=>{var i;return re(i=e,xe,Rl).call(i,r)},indexes:r=>{var i;return re(i=e,xe,ss).call(i,r)},rindexes:r=>{var i;return re(i=e,xe,as).call(i,r)},isStale:r=>{var i;return h(i=e,Gr).call(i,r)}}}get max(){return h(this,wi)}get maxSize(){return h(this,Wr)}get calculatedSize(){return h(this,Ei)}get size(){return h(this,Ht)}get fetchMethod(){return h(this,xo)}get memoMethod(){return h(this,To)}get dispose(){return h(this,_i)}get disposeAfter(){return h(this,Si)}getRemainingTTL(e){return h(this,Wt).has(e)?1/0:0}*entries(){for(const e of re(this,xe,ss).call(this))h(this,Ge)[e]!==void 0&&h(this,St)[e]!==void 0&&!re(this,xe,_t).call(this,h(this,Ge)[e])&&(yield[h(this,St)[e],h(this,Ge)[e]])}*rentries(){for(const e of re(this,xe,as).call(this))h(this,Ge)[e]!==void 0&&h(this,St)[e]!==void 0&&!re(this,xe,_t).call(this,h(this,Ge)[e])&&(yield[h(this,St)[e],h(this,Ge)[e]])}*keys(){for(const e of re(this,xe,ss).call(this)){const r=h(this,St)[e];r!==void 0&&!re(this,xe,_t).call(this,h(this,Ge)[e])&&(yield r)}}*rkeys(){for(const e of re(this,xe,as).call(this)){const r=h(this,St)[e];r!==void 0&&!re(this,xe,_t).call(this,h(this,Ge)[e])&&(yield r)}}*values(){for(const e of re(this,xe,ss).call(this))h(this,Ge)[e]!==void 0&&!re(this,xe,_t).call(this,h(this,Ge)[e])&&(yield h(this,Ge)[e])}*rvalues(){for(const e of re(this,xe,as).call(this))h(this,Ge)[e]!==void 0&&!re(this,xe,_t).call(this,h(this,Ge)[e])&&(yield h(this,Ge)[e])}[(xb=Symbol.iterator,Eb=Symbol.toStringTag,xb)](){return this.entries()}find(e,r={}){for(const i of re(this,xe,ss).call(this)){const n=h(this,Ge)[i],s=re(this,xe,_t).call(this,n)?n.__staleWhileFetching:n;if(s!==void 0&&e(s,h(this,St)[i],this))return this.get(h(this,St)[i],r)}}forEach(e,r=this){for(const i of re(this,xe,ss).call(this)){const n=h(this,Ge)[i],s=re(this,xe,_t).call(this,n)?n.__staleWhileFetching:n;s!==void 0&&e.call(r,s,h(this,St)[i],this)}}rforEach(e,r=this){for(const i of re(this,xe,as).call(this)){const n=h(this,Ge)[i],s=re(this,xe,_t).call(this,n)?n.__staleWhileFetching:n;s!==void 0&&e.call(r,s,h(this,St)[i],this)}}purgeStale(){let e=!1;for(const r of re(this,xe,as).call(this,{allowStale:!0}))h(this,Gr).call(this,r)&&(re(this,xe,os).call(this,h(this,St)[r],"expire"),e=!0);return e}info(e){const r=h(this,Wt).get(e);if(r===void 0)return;const i=h(this,Ge)[r],n=re(this,xe,_t).call(this,i)?i.__staleWhileFetching:i;if(n===void 0)return;const s={value:n};if(h(this,zr)&&h(this,Ai)){const a=h(this,zr)[r],o=h(this,Ai)[r];if(a&&o){const l=a-(to.now()-o);s.ttl=l,s.start=Date.now()}}return h(this,Ti)&&(s.size=h(this,Ti)[r]),s}dump(){const e=[];for(const r of re(this,xe,ss).call(this,{allowStale:!0})){const i=h(this,St)[r],n=h(this,Ge)[r],s=re(this,xe,_t).call(this,n)?n.__staleWhileFetching:n;if(s===void 0||i===void 0)continue;const a={value:s};if(h(this,zr)&&h(this,Ai)){a.ttl=h(this,zr)[r];const o=to.now()-h(this,Ai)[r];a.start=Math.floor(Date.now()-o)}h(this,Ti)&&(a.size=h(this,Ti)[r]),e.unshift([i,a])}return e}load(e){this.clear();for(const[r,i]of e){if(i.start){const n=Date.now()-i.start;i.start=to.now()-n}this.set(r,i.value,i)}}set(e,r,i={}){var d,p,g,m,w;if(r===void 0)return this.delete(e),this;const{ttl:n=this.ttl,start:s,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:l}=i;let{noUpdateTTL:c=this.noUpdateTTL}=i;const u=h(this,lc).call(this,e,r,i.size||0,o);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),re(this,xe,os).call(this,e,"set"),this;let f=h(this,Ht)===0?void 0:h(this,Wt).get(e);if(f===void 0)f=h(this,Ht)===0?h(this,Zt):h(this,xi).length!==0?h(this,xi).pop():h(this,Ht)===h(this,wi)?re(this,xe,ju).call(this,!1):h(this,Ht),h(this,St)[f]=e,h(this,Ge)[f]=r,h(this,Wt).set(e,f),h(this,xr)[h(this,Zt)]=f,h(this,Ur)[f]=h(this,Zt),W(this,Zt,f),su(this,Ht)._++,h(this,Ao).call(this,f,u,l),l&&(l.set="add"),c=!1;else{re(this,xe,Rl).call(this,f);const v=h(this,Ge)[f];if(r!==v){if(h(this,gs)&&re(this,xe,_t).call(this,v)){v.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:y}=v;y!==void 0&&!a&&(h(this,$i)&&((d=h(this,_i))==null||d.call(this,y,e,"set")),h(this,Tr)&&((p=h(this,Qt))==null||p.push([y,e,"set"])))}else a||(h(this,$i)&&((g=h(this,_i))==null||g.call(this,v,e,"set")),h(this,Tr)&&((m=h(this,Qt))==null||m.push([v,e,"set"])));if(h(this,la).call(this,f),h(this,Ao).call(this,f,u,l),h(this,Ge)[f]=r,l){l.set="replace";const y=v&&re(this,xe,_t).call(this,v)?v.__staleWhileFetching:v;y!==void 0&&(l.oldValue=y)}}else l&&(l.set="update")}if(n!==0&&!h(this,zr)&&re(this,xe,Ap).call(this),h(this,zr)&&(c||h(this,oc).call(this,f,n,s),l&&h(this,Rn).call(this,l,f)),!a&&h(this,Tr)&&h(this,Qt)){const v=h(this,Qt);let y;for(;y=v==null?void 0:v.shift();)(w=h(this,Si))==null||w.call(this,...y)}return this}pop(){var e;try{for(;h(this,Ht);){const r=h(this,Ge)[h(this,pr)];if(re(this,xe,ju).call(this,!0),re(this,xe,_t).call(this,r)){if(r.__staleWhileFetching)return r.__staleWhileFetching}else if(r!==void 0)return r}}finally{if(h(this,Tr)&&h(this,Qt)){const r=h(this,Qt);let i;for(;i=r==null?void 0:r.shift();)(e=h(this,Si))==null||e.call(this,...i)}}}has(e,r={}){const{updateAgeOnHas:i=this.updateAgeOnHas,status:n}=r,s=h(this,Wt).get(e);if(s!==void 0){const a=h(this,Ge)[s];if(re(this,xe,_t).call(this,a)&&a.__staleWhileFetching===void 0)return!1;if(h(this,Gr).call(this,s))n&&(n.has="stale",h(this,Rn).call(this,n,s));else return i&&h(this,oa).call(this,s),n&&(n.has="hit",h(this,Rn).call(this,n,s)),!0}else n&&(n.has="miss");return!1}peek(e,r={}){const{allowStale:i=this.allowStale}=r,n=h(this,Wt).get(e);if(n===void 0||!i&&h(this,Gr).call(this,n))return;const s=h(this,Ge)[n];return re(this,xe,_t).call(this,s)?s.__staleWhileFetching:s}async fetch(e,r={}){const{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:g=this.allowStaleOnFetchAbort,context:m,forceRefresh:w=!1,status:v,signal:y}=r;if(!h(this,gs))return v&&(v.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,status:v});const b={allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,ttl:a,noDisposeOnSet:o,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:g,ignoreFetchAbort:p,status:v,signal:y};let T=h(this,Wt).get(e);if(T===void 0){v&&(v.fetch="miss");const L=re(this,xe,Mu).call(this,e,T,b,m);return L.__returned=L}else{const L=h(this,Ge)[T];if(re(this,xe,_t).call(this,L)){const q=i&&L.__staleWhileFetching!==void 0;return v&&(v.fetch="inflight",q&&(v.returnedStale=!0)),q?L.__staleWhileFetching:L.__returned=L}const H=h(this,Gr).call(this,T);if(!w&&!H)return v&&(v.fetch="hit"),re(this,xe,Rl).call(this,T),n&&h(this,oa).call(this,T),v&&h(this,Rn).call(this,v,T),L;const B=re(this,xe,Mu).call(this,e,T,b,m),G=B.__staleWhileFetching!==void 0&&i;return v&&(v.fetch=H?"stale":"refresh",G&&H&&(v.returnedStale=!0)),G?B.__staleWhileFetching:B.__returned=B}}async forceFetch(e,r={}){const i=await this.fetch(e,r);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(e,r={}){const i=h(this,To);if(!i)throw new Error("no memoMethod provided to constructor");const{context:n,forceRefresh:s,...a}=r,o=this.get(e,a);if(!s&&o!==void 0)return o;const l=i(e,o,{options:a,context:n});return this.set(e,l,a),l}get(e,r={}){const{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:a}=r,o=h(this,Wt).get(e);if(o!==void 0){const l=h(this,Ge)[o],c=re(this,xe,_t).call(this,l);return a&&h(this,Rn).call(this,a,o),h(this,Gr).call(this,o)?(a&&(a.get="stale"),c?(a&&i&&l.__staleWhileFetching!==void 0&&(a.returnedStale=!0),i?l.__staleWhileFetching:void 0):(s||re(this,xe,os).call(this,e,"expire"),a&&i&&(a.returnedStale=!0),i?l:void 0)):(a&&(a.get="hit"),c?l.__staleWhileFetching:(re(this,xe,Rl).call(this,o),n&&h(this,oa).call(this,o),l))}else a&&(a.get="miss")}delete(e){return re(this,xe,os).call(this,e,"delete")}clear(){return re(this,xe,Cp).call(this,"delete")}};wi=new WeakMap,Wr=new WeakMap,_i=new WeakMap,Si=new WeakMap,xo=new WeakMap,To=new WeakMap,Ht=new WeakMap,Ei=new WeakMap,Wt=new WeakMap,St=new WeakMap,Ge=new WeakMap,xr=new WeakMap,Ur=new WeakMap,pr=new WeakMap,Zt=new WeakMap,xi=new WeakMap,Qt=new WeakMap,Ti=new WeakMap,Ai=new WeakMap,zr=new WeakMap,$i=new WeakMap,gs=new WeakMap,Tr=new WeakMap,xe=new WeakSet,Ap=function(){const e=new Lu(h(this,wi)),r=new Lu(h(this,wi));W(this,zr,e),W(this,Ai,r),W(this,oc,(s,a,o=to.now())=>{if(r[s]=a!==0?o:0,e[s]=a,a!==0&&this.ttlAutopurge){const l=setTimeout(()=>{h(this,Gr).call(this,s)&&re(this,xe,os).call(this,h(this,St)[s],"expire")},a+1);l.unref&&l.unref()}}),W(this,oa,s=>{r[s]=e[s]!==0?to.now():0}),W(this,Rn,(s,a)=>{if(e[a]){const o=e[a],l=r[a];if(!o||!l)return;s.ttl=o,s.start=l,s.now=i||n();const c=s.now-l;s.remainingTTL=o-c}});let i=0;const n=()=>{const s=to.now();if(this.ttlResolution>0){i=s;const a=setTimeout(()=>i=0,this.ttlResolution);a.unref&&a.unref()}return s};this.getRemainingTTL=s=>{const a=h(this,Wt).get(s);if(a===void 0)return 0;const o=e[a],l=r[a];if(!o||!l)return 1/0;const c=(i||n())-l;return o-c},W(this,Gr,s=>{const a=r[s],o=e[s];return!!o&&!!a&&(i||n())-a>o})},oa=new WeakMap,Rn=new WeakMap,oc=new WeakMap,Gr=new WeakMap,d0=function(){const e=new Lu(h(this,wi));W(this,Ei,0),W(this,Ti,e),W(this,la,r=>{W(this,Ei,h(this,Ei)-e[r]),e[r]=0}),W(this,lc,(r,i,n,s)=>{if(re(this,xe,_t).call(this,i))return 0;if(!ns(n))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(n=s(i,r),!ns(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n}),W(this,Ao,(r,i,n)=>{if(e[r]=i,h(this,Wr)){const s=h(this,Wr)-e[r];for(;h(this,Ei)>s;)re(this,xe,ju).call(this,!0)}W(this,Ei,h(this,Ei)+e[r]),n&&(n.entrySize=i,n.totalCalculatedSize=h(this,Ei))})},la=new WeakMap,Ao=new WeakMap,lc=new WeakMap,ss=function*({allowStale:e=this.allowStale}={}){if(h(this,Ht))for(let r=h(this,Zt);!(!re(this,xe,$p).call(this,r)||((e||!h(this,Gr).call(this,r))&&(yield r),r===h(this,pr)));)r=h(this,Ur)[r]},as=function*({allowStale:e=this.allowStale}={}){if(h(this,Ht))for(let r=h(this,pr);!(!re(this,xe,$p).call(this,r)||((e||!h(this,Gr).call(this,r))&&(yield r),r===h(this,Zt)));)r=h(this,xr)[r]},$p=function(e){return e!==void 0&&h(this,Wt).get(h(this,St)[e])===e},ju=function(e){var s,a;const r=h(this,pr),i=h(this,St)[r],n=h(this,Ge)[r];return h(this,gs)&&re(this,xe,_t).call(this,n)?n.__abortController.abort(new Error("evicted")):(h(this,$i)||h(this,Tr))&&(h(this,$i)&&((s=h(this,_i))==null||s.call(this,n,i,"evict")),h(this,Tr)&&((a=h(this,Qt))==null||a.push([n,i,"evict"]))),h(this,la).call(this,r),e&&(h(this,St)[r]=void 0,h(this,Ge)[r]=void 0,h(this,xi).push(r)),h(this,Ht)===1?(W(this,pr,W(this,Zt,0)),h(this,xi).length=0):W(this,pr,h(this,xr)[r]),h(this,Wt).delete(i),su(this,Ht)._--,r},Mu=function(e,r,i,n){const s=r===void 0?void 0:h(this,Ge)[r];if(re(this,xe,_t).call(this,s))return s;const a=new xf,{signal:o}=i;o==null||o.addEventListener("abort",()=>a.abort(o.reason),{signal:a.signal});const l={signal:a.signal,options:i,context:n},c=(m,w=!1)=>{const{aborted:v}=a.signal,y=i.ignoreFetchAbort&&m!==void 0;if(i.status&&(v&&!w?(i.status.fetchAborted=!0,i.status.fetchError=a.signal.reason,y&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),v&&!y&&!w)return f(a.signal.reason);const b=p;return h(this,Ge)[r]===p&&(m===void 0?b.__staleWhileFetching?h(this,Ge)[r]=b.__staleWhileFetching:re(this,xe,os).call(this,e,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(e,m,l.options))),m},u=m=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=m),f(m)),f=m=>{const{aborted:w}=a.signal,v=w&&i.allowStaleOnFetchAbort,y=v||i.allowStaleOnFetchRejection,b=y||i.noDeleteOnFetchRejection,T=p;if(h(this,Ge)[r]===p&&(!b||T.__staleWhileFetching===void 0?re(this,xe,os).call(this,e,"fetch"):v||(h(this,Ge)[r]=T.__staleWhileFetching)),y)return i.status&&T.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),T.__staleWhileFetching;if(T.__returned===T)throw m},d=(m,w)=>{var y;const v=(y=h(this,xo))==null?void 0:y.call(this,e,s,l);v&&v instanceof Promise&&v.then(b=>m(b===void 0?void 0:b),w),a.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(m(void 0),i.allowStaleOnFetchAbort&&(m=b=>c(b,!0)))})};i.status&&(i.status.fetchDispatched=!0);const p=new Promise(d).then(c,u),g=Object.assign(p,{__abortController:a,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(e,g,{...l.options,status:void 0}),r=h(this,Wt).get(e)):h(this,Ge)[r]=g,g},_t=function(e){if(!h(this,gs))return!1;const r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof xf},Rp=function(e,r){h(this,Ur)[r]=e,h(this,xr)[e]=r},Rl=function(e){e!==h(this,Zt)&&(e===h(this,pr)?W(this,pr,h(this,xr)[e]):re(this,xe,Rp).call(this,h(this,Ur)[e],h(this,xr)[e]),re(this,xe,Rp).call(this,h(this,Zt),e),W(this,Zt,e))},os=function(e,r){var n,s,a,o;let i=!1;if(h(this,Ht)!==0){const l=h(this,Wt).get(e);if(l!==void 0)if(i=!0,h(this,Ht)===1)re(this,xe,Cp).call(this,r);else{h(this,la).call(this,l);const c=h(this,Ge)[l];if(re(this,xe,_t).call(this,c)?c.__abortController.abort(new Error("deleted")):(h(this,$i)||h(this,Tr))&&(h(this,$i)&&((n=h(this,_i))==null||n.call(this,c,e,r)),h(this,Tr)&&((s=h(this,Qt))==null||s.push([c,e,r]))),h(this,Wt).delete(e),h(this,St)[l]=void 0,h(this,Ge)[l]=void 0,l===h(this,Zt))W(this,Zt,h(this,Ur)[l]);else if(l===h(this,pr))W(this,pr,h(this,xr)[l]);else{const u=h(this,Ur)[l];h(this,xr)[u]=h(this,xr)[l];const f=h(this,xr)[l];h(this,Ur)[f]=h(this,Ur)[l]}su(this,Ht)._--,h(this,xi).push(l)}}if(h(this,Tr)&&((a=h(this,Qt))!=null&&a.length)){const l=h(this,Qt);let c;for(;c=l==null?void 0:l.shift();)(o=h(this,Si))==null||o.call(this,...c)}return i},Cp=function(e){var r,i,n;for(const s of re(this,xe,as).call(this,{allowStale:!0})){const a=h(this,Ge)[s];if(re(this,xe,_t).call(this,a))a.__abortController.abort(new Error("deleted"));else{const o=h(this,St)[s];h(this,$i)&&((r=h(this,_i))==null||r.call(this,a,o,e)),h(this,Tr)&&((i=h(this,Qt))==null||i.push([a,o,e]))}}if(h(this,Wt).clear(),h(this,Ge).fill(void 0),h(this,St).fill(void 0),h(this,zr)&&h(this,Ai)&&(h(this,zr).fill(0),h(this,Ai).fill(0)),h(this,Ti)&&h(this,Ti).fill(0),W(this,pr,0),W(this,Zt,0),h(this,xi).length=0,W(this,Ei,0),W(this,Ht,0),h(this,Tr)&&h(this,Qt)){const s=h(this,Qt);let a;for(;a=s==null?void 0:s.shift();)(n=h(this,Si))==null||n.call(this,...a)}};let Tp=Wm;bh.LRUCache=Tp;var Jg={};(function(t){var $,U,x,N,z,ee,oe,le,V,he,me,Le,ut,Ke,kt,at,je,xt,fr;var e=Ct&&Ct.__importDefault||function(Te){return Te&&Te.__esModule?Te:{default:Te}};Object.defineProperty(t,"__esModule",{value:!0}),t.Minipass=t.isWritable=t.isReadable=t.isStream=void 0;const r=typeof process=="object"&&process?process:{stdout:null,stderr:null},i=kE,n=e(NE),s=FE,a=Te=>!!Te&&typeof Te=="object"&&(Te instanceof E||Te instanceof n.default||(0,t.isReadable)(Te)||(0,t.isWritable)(Te));t.isStream=a;const o=Te=>!!Te&&typeof Te=="object"&&Te instanceof i.EventEmitter&&typeof Te.pipe=="function"&&Te.pipe!==n.default.Writable.prototype.pipe;t.isReadable=o;const l=Te=>!!Te&&typeof Te=="object"&&Te instanceof i.EventEmitter&&typeof Te.write=="function"&&typeof Te.end=="function";t.isWritable=l;const c=Symbol("EOF"),u=Symbol("maybeEmitEnd"),f=Symbol("emittedEnd"),d=Symbol("emittingEnd"),p=Symbol("emittedError"),g=Symbol("closed"),m=Symbol("read"),w=Symbol("flush"),v=Symbol("flushChunk"),y=Symbol("encoding"),b=Symbol("decoder"),T=Symbol("flowing"),L=Symbol("paused"),H=Symbol("resume"),B=Symbol("buffer"),S=Symbol("pipes"),G=Symbol("bufferLength"),q=Symbol("bufferPush"),te=Symbol("bufferShift"),X=Symbol("objectMode"),M=Symbol("destroyed"),ve=Symbol("error"),ue=Symbol("emitData"),ye=Symbol("emitEnd"),j=Symbol("emitEnd2"),I=Symbol("async"),Y=Symbol("abort"),de=Symbol("aborted"),Se=Symbol("signal"),De=Symbol("dataListeners"),ge=Symbol("discarded"),Ie=Te=>Promise.resolve().then(Te),nt=Te=>Te(),st=Te=>Te==="end"||Te==="finish"||Te==="prefinish",R=Te=>Te instanceof ArrayBuffer||!!Te&&typeof Te=="object"&&Te.constructor&&Te.constructor.name==="ArrayBuffer"&&Te.byteLength>=0,P=Te=>!Buffer.isBuffer(Te)&&ArrayBuffer.isView(Te);class ae{constructor(Tt,J,ne){Q(this,"src");Q(this,"dest");Q(this,"opts");Q(this,"ondrain");this.src=Tt,this.dest=J,this.opts=ne,this.ondrain=()=>Tt[H](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(Tt){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class K extends ae{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(Tt,J,ne){super(Tt,J,ne),this.proxyErrors=_e=>J.emit("error",_e),Tt.on("error",this.proxyErrors)}}const k=Te=>!!Te.objectMode,F=Te=>!Te.objectMode&&!!Te.encoding&&Te.encoding!=="buffer";class E extends i.EventEmitter{constructor(...J){const ne=J[0]||{};super();Q(this,fr,!1);Q(this,xt,!1);Q(this,je,[]);Q(this,at,[]);Q(this,kt);Q(this,Ke);Q(this,ut);Q(this,Le);Q(this,me,!1);Q(this,he,!1);Q(this,V,!1);Q(this,le,!1);Q(this,oe,null);Q(this,ee,0);Q(this,z,!1);Q(this,N);Q(this,x,!1);Q(this,U,0);Q(this,$,!1);Q(this,"writable",!0);Q(this,"readable",!0);if(ne.objectMode&&typeof ne.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");k(ne)?(this[X]=!0,this[y]=null):F(ne)?(this[y]=ne.encoding,this[X]=!1):(this[X]=!1,this[y]=null),this[I]=!!ne.async,this[b]=this[y]?new s.StringDecoder(this[y]):null,ne&&ne.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[B]}),ne&&ne.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[S]});const{signal:_e}=ne;_e&&(this[Se]=_e,_e.aborted?this[Y]():_e.addEventListener("abort",()=>this[Y]()))}get bufferLength(){return this[G]}get encoding(){return this[y]}set encoding(J){throw new Error("Encoding must be set at instantiation time")}setEncoding(J){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[X]}set objectMode(J){throw new Error("objectMode must be set at instantiation time")}get async(){return this[I]}set async(J){this[I]=this[I]||!!J}[(fr=T,xt=L,je=S,at=B,kt=X,Ke=y,ut=I,Le=b,me=c,he=f,V=d,le=g,oe=p,ee=G,z=M,N=Se,x=de,U=De,$=ge,Y)](){var J,ne;this[de]=!0,this.emit("abort",(J=this[Se])==null?void 0:J.reason),this.destroy((ne=this[Se])==null?void 0:ne.reason)}get aborted(){return this[de]}set aborted(J){}write(J,ne,_e){var qe;if(this[de])return!1;if(this[c])throw new Error("write after end");if(this[M])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof ne=="function"&&(_e=ne,ne="utf8"),ne||(ne="utf8");const Fe=this[I]?Ie:nt;if(!this[X]&&!Buffer.isBuffer(J)){if(P(J))J=Buffer.from(J.buffer,J.byteOffset,J.byteLength);else if(R(J))J=Buffer.from(J);else if(typeof J!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[X]?(this[T]&&this[G]!==0&&this[w](!0),this[T]?this.emit("data",J):this[q](J),this[G]!==0&&this.emit("readable"),_e&&Fe(_e),this[T]):J.length?(typeof J=="string"&&!(ne===this[y]&&!((qe=this[b])!=null&&qe.lastNeed))&&(J=Buffer.from(J,ne)),Buffer.isBuffer(J)&&this[y]&&(J=this[b].write(J)),this[T]&&this[G]!==0&&this[w](!0),this[T]?this.emit("data",J):this[q](J),this[G]!==0&&this.emit("readable"),_e&&Fe(_e),this[T]):(this[G]!==0&&this.emit("readable"),_e&&Fe(_e),this[T])}read(J){if(this[M])return null;if(this[ge]=!1,this[G]===0||J===0||J&&J>this[G])return this[u](),null;this[X]&&(J=null),this[B].length>1&&!this[X]&&(this[B]=[this[y]?this[B].join(""):Buffer.concat(this[B],this[G])]);const ne=this[m](J||null,this[B][0]);return this[u](),ne}[m](J,ne){if(this[X])this[te]();else{const _e=ne;J===_e.length||J===null?this[te]():typeof _e=="string"?(this[B][0]=_e.slice(J),ne=_e.slice(0,J),this[G]-=J):(this[B][0]=_e.subarray(J),ne=_e.subarray(0,J),this[G]-=J)}return this.emit("data",ne),!this[B].length&&!this[c]&&this.emit("drain"),ne}end(J,ne,_e){return typeof J=="function"&&(_e=J,J=void 0),typeof ne=="function"&&(_e=ne,ne="utf8"),J!==void 0&&this.write(J,ne),_e&&this.once("end",_e),this[c]=!0,this.writable=!1,(this[T]||!this[L])&&this[u](),this}[H](){this[M]||(!this[De]&&!this[S].length&&(this[ge]=!0),this[L]=!1,this[T]=!0,this.emit("resume"),this[B].length?this[w]():this[c]?this[u]():this.emit("drain"))}resume(){return this[H]()}pause(){this[T]=!1,this[L]=!0,this[ge]=!1}get destroyed(){return this[M]}get flowing(){return this[T]}get paused(){return this[L]}[q](J){this[X]?this[G]+=1:this[G]+=J.length,this[B].push(J)}[te](){return this[X]?this[G]-=1:this[G]-=this[B][0].length,this[B].shift()}[w](J=!1){do;while(this[v](this[te]())&&this[B].length);!J&&!this[B].length&&!this[c]&&this.emit("drain")}[v](J){return this.emit("data",J),this[T]}pipe(J,ne){if(this[M])return J;this[ge]=!1;const _e=this[f];return ne=ne||{},J===r.stdout||J===r.stderr?ne.end=!1:ne.end=ne.end!==!1,ne.proxyErrors=!!ne.proxyErrors,_e?ne.end&&J.end():(this[S].push(ne.proxyErrors?new K(this,J,ne):new ae(this,J,ne)),this[I]?Ie(()=>this[H]()):this[H]()),J}unpipe(J){const ne=this[S].find(_e=>_e.dest===J);ne&&(this[S].length===1?(this[T]&&this[De]===0&&(this[T]=!1),this[S]=[]):this[S].splice(this[S].indexOf(ne),1),ne.unpipe())}addListener(J,ne){return this.on(J,ne)}on(J,ne){const _e=super.on(J,ne);if(J==="data")this[ge]=!1,this[De]++,!this[S].length&&!this[T]&&this[H]();else if(J==="readable"&&this[G]!==0)super.emit("readable");else if(st(J)&&this[f])super.emit(J),this.removeAllListeners(J);else if(J==="error"&&this[p]){const Fe=ne;this[I]?Ie(()=>Fe.call(this,this[p])):Fe.call(this,this[p])}return _e}removeListener(J,ne){return this.off(J,ne)}off(J,ne){const _e=super.off(J,ne);return J==="data"&&(this[De]=this.listeners("data").length,this[De]===0&&!this[ge]&&!this[S].length&&(this[T]=!1)),_e}removeAllListeners(J){const ne=super.removeAllListeners(J);return(J==="data"||J===void 0)&&(this[De]=0,!this[ge]&&!this[S].length&&(this[T]=!1)),ne}get emittedEnd(){return this[f]}[u](){!this[d]&&!this[f]&&!this[M]&&this[B].length===0&&this[c]&&(this[d]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[g]&&this.emit("close"),this[d]=!1)}emit(J,...ne){const _e=ne[0];if(J!=="error"&&J!=="close"&&J!==M&&this[M])return!1;if(J==="data")return!this[X]&&!_e?!1:this[I]?(Ie(()=>this[ue](_e)),!0):this[ue](_e);if(J==="end")return this[ye]();if(J==="close"){if(this[g]=!0,!this[f]&&!this[M])return!1;const qe=super.emit("close");return this.removeAllListeners("close"),qe}else if(J==="error"){this[p]=_e,super.emit(ve,_e);const qe=!this[Se]||this.listeners("error").length?super.emit("error",_e):!1;return this[u](),qe}else if(J==="resume"){const qe=super.emit("resume");return this[u](),qe}else if(J==="finish"||J==="prefinish"){const qe=super.emit(J);return this.removeAllListeners(J),qe}const Fe=super.emit(J,...ne);return this[u](),Fe}[ue](J){for(const _e of this[S])_e.dest.write(J)===!1&&this.pause();const ne=this[ge]?!1:super.emit("data",J);return this[u](),ne}[ye](){return this[f]?!1:(this[f]=!0,this.readable=!1,this[I]?(Ie(()=>this[j]()),!0):this[j]())}[j](){if(this[b]){const ne=this[b].end();if(ne){for(const _e of this[S])_e.dest.write(ne);this[ge]||super.emit("data",ne)}}for(const ne of this[S])ne.end();const J=super.emit("end");return this.removeAllListeners("end"),J}async collect(){const J=Object.assign([],{dataLength:0});this[X]||(J.dataLength=0);const ne=this.promise();return this.on("data",_e=>{J.push(_e),this[X]||(J.dataLength+=_e.length)}),await ne,J}async concat(){if(this[X])throw new Error("cannot concat in objectMode");const J=await this.collect();return this[y]?J.join(""):Buffer.concat(J,J.dataLength)}async promise(){return new Promise((J,ne)=>{this.on(M,()=>ne(new Error("stream destroyed"))),this.on("error",_e=>ne(_e)),this.on("end",()=>J())})}[Symbol.asyncIterator](){this[ge]=!1;let J=!1;const ne=async()=>(this.pause(),J=!0,{value:void 0,done:!0});return{next:()=>{if(J)return ne();const Fe=this.read();if(Fe!==null)return Promise.resolve({done:!1,value:Fe});if(this[c])return ne();let qe,dt;const bt=ir=>{this.off("data",tt),this.off("end",gt),this.off(M,qt),ne(),dt(ir)},tt=ir=>{this.off("error",bt),this.off("end",gt),this.off(M,qt),this.pause(),qe({value:ir,done:!!this[c]})},gt=()=>{this.off("error",bt),this.off("data",tt),this.off(M,qt),ne(),qe({done:!0,value:void 0})},qt=()=>bt(new Error("stream destroyed"));return new Promise((ir,jr)=>{dt=jr,qe=ir,this.once(M,qt),this.once("error",bt),this.once("end",gt),this.once("data",tt)})},throw:ne,return:ne,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[ge]=!1;let J=!1;const ne=()=>(this.pause(),this.off(ve,ne),this.off(M,ne),this.off("end",ne),J=!0,{done:!0,value:void 0}),_e=()=>{if(J)return ne();const Fe=this.read();return Fe===null?ne():{done:!1,value:Fe}};return this.once("end",ne),this.once(ve,ne),this.once(M,ne),{next:_e,throw:ne,return:ne,[Symbol.iterator](){return this}}}destroy(J){if(this[M])return J?this.emit("error",J):this.emit(M),this;this[M]=!0,this[ge]=!0,this[B].length=0,this[G]=0;const ne=this;return typeof ne.close=="function"&&!this[g]&&ne.close(),J?this.emit("error",J):this.emit(M),this}static get isStream(){return t.isStream}}t.Minipass=E})(Jg);var yF=Ct&&Ct.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),bF=Ct&&Ct.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wF=Ct&&Ct.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yF(e,t,r);return bF(e,t),e};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.PathScurry=Rt.Path=Rt.PathScurryDarwin=Rt.PathScurryPosix=Rt.PathScurryWin32=Rt.PathScurryBase=Rt.PathPosix=Rt.PathWin32=Rt.PathBase=Rt.ChildrenCache=Rt.ResolveCache=void 0;const p0=bh,Tf=DE,_F=Ab,Cl=Bf,SF=wF(PE),EF=Cl.realpathSync.native,mu=OE,Ty=Jg,Dl={lstatSync:Cl.lstatSync,readdir:Cl.readdir,readdirSync:Cl.readdirSync,readlinkSync:Cl.readlinkSync,realpathSync:EF,promises:{lstat:mu.lstat,readdir:mu.readdir,readlink:mu.readlink,realpath:mu.realpath}},g0=t=>!t||t===Dl||t===SF?Dl:{...Dl,...t,promises:{...Dl.promises,...t.promises||{}}},m0=/^\\\\\?\\([a-z]:)\\?$/i,xF=t=>t.replace(/\//g,"\\").replace(m0,"$1\\"),TF=/[\\\/]/,oi=0,v0=1,y0=2,Vi=4,b0=6,w0=8,Js=10,_0=12,ri=15,_l=~ri,Fd=16,Ay=32,Pl=64,bi=128,vu=256,Bu=512,$y=Pl|bi|Bu,AF=1023,Id=t=>t.isFile()?w0:t.isDirectory()?Vi:t.isSymbolicLink()?Js:t.isCharacterDevice()?y0:t.isBlockDevice()?b0:t.isSocket()?_0:t.isFIFO()?v0:oi,Ry=new Map,Ol=t=>{const e=Ry.get(t);if(e)return e;const r=t.normalize("NFKD");return Ry.set(t,r),r},Cy=new Map,yu=t=>{const e=Cy.get(t);if(e)return e;const r=Ol(t.toLowerCase());return Cy.set(t,r),r};class Dp extends p0.LRUCache{constructor(){super({max:256})}}Rt.ResolveCache=Dp;class S0 extends p0.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}}Rt.ChildrenCache=S0;const E0=Symbol("PathScurry setAsCwd");var Ar,cc,uc,fc,hc,dc,pc,gc,mc,vc,yc,bc,wc,_c,Sc,Ec,xc,Tc,Ac,ms,ca,Ki,Cn,Dn,Pn,Be,ua,On,Zi,Ne,Pp,Wu,kl,Op,kp,Nl,Uu,Np,Fp,zu,x0,T0,A0,Ip,$o,Ro,$0,fa;class Er{constructor(e,r=oi,i,n,s,a,o){ie(this,Ne);Q(this,"name");Q(this,"root");Q(this,"roots");Q(this,"parent");Q(this,"nocase");Q(this,"isCWD",!1);ie(this,Ar);ie(this,cc);ie(this,uc);ie(this,fc);ie(this,hc);ie(this,dc);ie(this,pc);ie(this,gc);ie(this,mc);ie(this,vc);ie(this,yc);ie(this,bc);ie(this,wc);ie(this,_c);ie(this,Sc);ie(this,Ec);ie(this,xc);ie(this,Tc);ie(this,Ac);ie(this,ms);ie(this,ca);ie(this,Ki);ie(this,Cn);ie(this,Dn);ie(this,Pn);ie(this,Be);ie(this,ua);ie(this,On);ie(this,Zi);ie(this,$o,[]);ie(this,Ro,!1);ie(this,fa);this.name=e,W(this,ms,s?yu(e):Ol(e)),W(this,Be,r&AF),this.nocase=s,this.roots=n,this.root=i||this,W(this,ua,a),W(this,Ki,o.fullpath),W(this,Dn,o.relative),W(this,Pn,o.relativePosix),this.parent=o.parent,this.parent?W(this,Ar,h(this.parent,Ar)):W(this,Ar,g0(o.fs))}get dev(){return h(this,cc)}get mode(){return h(this,uc)}get nlink(){return h(this,fc)}get uid(){return h(this,hc)}get gid(){return h(this,dc)}get rdev(){return h(this,pc)}get blksize(){return h(this,gc)}get ino(){return h(this,mc)}get size(){return h(this,vc)}get blocks(){return h(this,yc)}get atimeMs(){return h(this,bc)}get mtimeMs(){return h(this,wc)}get ctimeMs(){return h(this,_c)}get birthtimeMs(){return h(this,Sc)}get atime(){return h(this,Ec)}get mtime(){return h(this,xc)}get ctime(){return h(this,Tc)}get birthtime(){return h(this,Ac)}get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}depth(){return h(this,ca)!==void 0?h(this,ca):this.parent?W(this,ca,this.parent.depth()+1):W(this,ca,0)}childrenCache(){return h(this,ua)}resolve(e){var a;if(!e)return this;const r=this.getRootString(e),n=e.substring(r.length).split(this.splitSep);return r?re(a=this.getRoot(r),Ne,Pp).call(a,n):re(this,Ne,Pp).call(this,n)}children(){const e=h(this,ua).get(this);if(e)return e;const r=Object.assign([],{provisional:0});return h(this,ua).set(this,r),W(this,Be,h(this,Be)&~Fd),r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;const i=this.children(),n=this.nocase?yu(e):Ol(e);for(const l of i)if(h(l,ms)===n)return l;const s=this.parent?this.sep:"",a=h(this,Ki)?h(this,Ki)+s+e:void 0,o=this.newChild(e,oi,{...r,parent:this,fullpath:a});return this.canReaddir()||W(o,Be,h(o,Be)|bi),i.push(o),o}relative(){if(this.isCWD)return"";if(h(this,Dn)!==void 0)return h(this,Dn);const e=this.name,r=this.parent;if(!r)return W(this,Dn,this.name);const i=r.relative();return i+(!i||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(h(this,Pn)!==void 0)return h(this,Pn);const e=this.name,r=this.parent;if(!r)return W(this,Pn,this.fullpathPosix());const i=r.relativePosix();return i+(!i||!r.parent?"":"/")+e}fullpath(){if(h(this,Ki)!==void 0)return h(this,Ki);const e=this.name,r=this.parent;if(!r)return W(this,Ki,this.name);const n=r.fullpath()+(r.parent?this.sep:"")+e;return W(this,Ki,n)}fullpathPosix(){if(h(this,Cn)!==void 0)return h(this,Cn);if(this.sep==="/")return W(this,Cn,this.fullpath());if(!this.parent){const n=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(n)?W(this,Cn,`//?/${n}`):W(this,Cn,n)}const e=this.parent,r=e.fullpathPosix(),i=r+(!r||!e.parent?"":"/")+this.name;return W(this,Cn,i)}isUnknown(){return(h(this,Be)&ri)===oi}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(h(this,Be)&ri)===w0}isDirectory(){return(h(this,Be)&ri)===Vi}isCharacterDevice(){return(h(this,Be)&ri)===y0}isBlockDevice(){return(h(this,Be)&ri)===b0}isFIFO(){return(h(this,Be)&ri)===v0}isSocket(){return(h(this,Be)&ri)===_0}isSymbolicLink(){return(h(this,Be)&Js)===Js}lstatCached(){return h(this,Be)&Ay?this:void 0}readlinkCached(){return h(this,On)}realpathCached(){return h(this,Zi)}readdirCached(){const e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(h(this,On))return!0;if(!this.parent)return!1;const e=h(this,Be)&ri;return!(e!==oi&&e!==Js||h(this,Be)&vu||h(this,Be)&bi)}calledReaddir(){return!!(h(this,Be)&Fd)}isENOENT(){return!!(h(this,Be)&bi)}isNamed(e){return this.nocase?h(this,ms)===yu(e):h(this,ms)===Ol(e)}async readlink(){var r;const e=h(this,On);if(e)return e;if(this.canReadlink()&&this.parent)try{const i=await h(this,Ar).promises.readlink(this.fullpath()),n=(r=await this.parent.realpath())==null?void 0:r.resolve(i);if(n)return W(this,On,n)}catch(i){re(this,Ne,Fp).call(this,i.code);return}}readlinkSync(){var r;const e=h(this,On);if(e)return e;if(this.canReadlink()&&this.parent)try{const i=h(this,Ar).readlinkSync(this.fullpath()),n=(r=this.parent.realpathSync())==null?void 0:r.resolve(i);if(n)return W(this,On,n)}catch(i){re(this,Ne,Fp).call(this,i.code);return}}async lstat(){if(!(h(this,Be)&bi))try{return re(this,Ne,Ip).call(this,await h(this,Ar).promises.lstat(this.fullpath())),this}catch(e){re(this,Ne,Np).call(this,e.code)}}lstatSync(){if(!(h(this,Be)&bi))try{return re(this,Ne,Ip).call(this,h(this,Ar).lstatSync(this.fullpath())),this}catch(e){re(this,Ne,Np).call(this,e.code)}}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}const i=this.children();if(this.calledReaddir()){const s=i.slice(0,i.provisional);r?e(null,s):queueMicrotask(()=>e(null,s));return}if(h(this,$o).push(e),h(this,Ro))return;W(this,Ro,!0);const n=this.fullpath();h(this,Ar).readdir(n,{withFileTypes:!0},(s,a)=>{if(s)re(this,Ne,Uu).call(this,s.code),i.provisional=0;else{for(const o of a)re(this,Ne,zu).call(this,o,i);re(this,Ne,Wu).call(this,i)}re(this,Ne,$0).call(this,i.slice(0,i.provisional))})}async readdir(){if(!this.canReaddir())return[];const e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);const r=this.fullpath();if(h(this,fa))await h(this,fa);else{let i=()=>{};W(this,fa,new Promise(n=>i=n));try{for(const n of await h(this,Ar).promises.readdir(r,{withFileTypes:!0}))re(this,Ne,zu).call(this,n,e);re(this,Ne,Wu).call(this,e)}catch(n){re(this,Ne,Uu).call(this,n.code),e.provisional=0}W(this,fa,void 0),i()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];const e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);const r=this.fullpath();try{for(const i of h(this,Ar).readdirSync(r,{withFileTypes:!0}))re(this,Ne,zu).call(this,i,e);re(this,Ne,Wu).call(this,e)}catch(i){re(this,Ne,Uu).call(this,i.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(h(this,Be)&$y)return!1;const e=ri&h(this,Be);return e===oi||e===Vi||e===Js}shouldWalk(e,r){return(h(this,Be)&Vi)===Vi&&!(h(this,Be)&$y)&&!e.has(this)&&(!r||r(this))}async realpath(){if(h(this,Zi))return h(this,Zi);if(!((Bu|vu|bi)&h(this,Be)))try{const e=await h(this,Ar).promises.realpath(this.fullpath());return W(this,Zi,this.resolve(e))}catch{re(this,Ne,kp).call(this)}}realpathSync(){if(h(this,Zi))return h(this,Zi);if(!((Bu|vu|bi)&h(this,Be)))try{const e=h(this,Ar).realpathSync(this.fullpath());return W(this,Zi,this.resolve(e))}catch{re(this,Ne,kp).call(this)}}[E0](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;const r=new Set([]);let i=[],n=this;for(;n&&n.parent;)r.add(n),W(n,Dn,i.join(this.sep)),W(n,Pn,i.join("/")),n=n.parent,i.push("..");for(n=e;n&&n.parent&&!r.has(n);)W(n,Dn,void 0),W(n,Pn,void 0),n=n.parent}}Ar=new WeakMap,cc=new WeakMap,uc=new WeakMap,fc=new WeakMap,hc=new WeakMap,dc=new WeakMap,pc=new WeakMap,gc=new WeakMap,mc=new WeakMap,vc=new WeakMap,yc=new WeakMap,bc=new WeakMap,wc=new WeakMap,_c=new WeakMap,Sc=new WeakMap,Ec=new WeakMap,xc=new WeakMap,Tc=new WeakMap,Ac=new WeakMap,ms=new WeakMap,ca=new WeakMap,Ki=new WeakMap,Cn=new WeakMap,Dn=new WeakMap,Pn=new WeakMap,Be=new WeakMap,ua=new WeakMap,On=new WeakMap,Zi=new WeakMap,Ne=new WeakSet,Pp=function(e){let r=this;for(const i of e)r=r.child(i);return r},Wu=function(e){var r;W(this,Be,h(this,Be)|Fd);for(let i=e.provisional;i<e.length;i++){const n=e[i];n&&re(r=n,Ne,kl).call(r)}},kl=function(){h(this,Be)&bi||(W(this,Be,(h(this,Be)|bi)&_l),re(this,Ne,Op).call(this))},Op=function(){var r;const e=this.children();e.provisional=0;for(const i of e)re(r=i,Ne,kl).call(r)},kp=function(){W(this,Be,h(this,Be)|Bu),re(this,Ne,Nl).call(this)},Nl=function(){if(h(this,Be)&Pl)return;let e=h(this,Be);(e&ri)===Vi&&(e&=_l),W(this,Be,e|Pl),re(this,Ne,Op).call(this)},Uu=function(e=""){e==="ENOTDIR"||e==="EPERM"?re(this,Ne,Nl).call(this):e==="ENOENT"?re(this,Ne,kl).call(this):this.children().provisional=0},Np=function(e=""){var r;if(e==="ENOTDIR"){const i=this.parent;re(r=i,Ne,Nl).call(r)}else e==="ENOENT"&&re(this,Ne,kl).call(this)},Fp=function(e=""){var i;let r=h(this,Be);r|=vu,e==="ENOENT"&&(r|=bi),(e==="EINVAL"||e==="UNKNOWN")&&(r&=_l),W(this,Be,r),e==="ENOTDIR"&&this.parent&&re(i=this.parent,Ne,Nl).call(i)},zu=function(e,r){return re(this,Ne,T0).call(this,e,r)||re(this,Ne,x0).call(this,e,r)},x0=function(e,r){const i=Id(e),n=this.newChild(e.name,i,{parent:this}),s=h(n,Be)&ri;return s!==Vi&&s!==Js&&s!==oi&&W(n,Be,h(n,Be)|Pl),r.unshift(n),r.provisional++,n},T0=function(e,r){for(let i=r.provisional;i<r.length;i++){const n=r[i];if((this.nocase?yu(e.name):Ol(e.name))===h(n,ms))return re(this,Ne,A0).call(this,e,n,i,r)}},A0=function(e,r,i,n){const s=r.name;return W(r,Be,h(r,Be)&_l|Id(e)),s!==e.name&&(r.name=e.name),i!==n.provisional&&(i===n.length-1?n.pop():n.splice(i,1),n.unshift(r)),n.provisional++,r},Ip=function(e){const{atime:r,atimeMs:i,birthtime:n,birthtimeMs:s,blksize:a,blocks:o,ctime:l,ctimeMs:c,dev:u,gid:f,ino:d,mode:p,mtime:g,mtimeMs:m,nlink:w,rdev:v,size:y,uid:b}=e;W(this,Ec,r),W(this,bc,i),W(this,Ac,n),W(this,Sc,s),W(this,gc,a),W(this,yc,o),W(this,Tc,l),W(this,_c,c),W(this,cc,u),W(this,dc,f),W(this,mc,d),W(this,uc,p),W(this,xc,g),W(this,wc,m),W(this,fc,w),W(this,pc,v),W(this,vc,y),W(this,hc,b);const T=Id(e);W(this,Be,h(this,Be)&_l|T|Ay),T!==oi&&T!==Vi&&T!==Js&&W(this,Be,h(this,Be)|Pl)},$o=new WeakMap,Ro=new WeakMap,$0=function(e){W(this,Ro,!1);const r=h(this,$o).slice();h(this,$o).length=0,r.forEach(i=>i(null,e))},fa=new WeakMap;Rt.PathBase=Er;class zc extends Er{constructor(r,i=oi,n,s,a,o,l){super(r,i,n,s,a,o,l);Q(this,"sep","\\");Q(this,"splitSep",TF)}newChild(r,i=oi,n={}){return new zc(r,i,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(r){return Tf.win32.parse(r).root}getRoot(r){if(r=xF(r.toUpperCase()),r===this.root.name)return this.root;for(const[i,n]of Object.entries(this.roots))if(this.sameRoot(r,i))return this.roots[r]=n;return this.roots[r]=new tm(r,this).root}sameRoot(r,i=this.root.name){return r=r.toUpperCase().replace(/\//g,"\\").replace(m0,"$1\\"),r===i}}Rt.PathWin32=zc;class Gc extends Er{constructor(r,i=oi,n,s,a,o,l){super(r,i,n,s,a,o,l);Q(this,"splitSep","/");Q(this,"sep","/")}getRootString(r){return r.startsWith("/")?"/":""}getRoot(r){return this.root}newChild(r,i=oi,n={}){return new Gc(r,i,this.root,this.roots,this.nocase,this.childrenCache(),n)}}Rt.PathPosix=Gc;var Co,Do,$c,Rc;class em{constructor(e=process.cwd(),r,i,{nocase:n,childrenCacheSize:s=16*1024,fs:a=Dl}={}){Q(this,"root");Q(this,"rootPath");Q(this,"roots");Q(this,"cwd");ie(this,Co);ie(this,Do);ie(this,$c);Q(this,"nocase");ie(this,Rc);W(this,Rc,g0(a)),(e instanceof URL||e.startsWith("file://"))&&(e=(0,_F.fileURLToPath)(e));const o=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(o),W(this,Co,new Dp),W(this,Do,new Dp),W(this,$c,new S0(s));const l=o.substring(this.rootPath.length).split(i);if(l.length===1&&!l[0]&&l.pop(),n===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(h(this,Rc)),this.roots[this.rootPath]=this.root;let c=this.root,u=l.length-1;const f=r.sep;let d=this.rootPath,p=!1;for(const g of l){const m=u--;c=c.child(g,{relative:new Array(m).fill("..").join(f),relativePosix:new Array(m).fill("..").join("/"),fullpath:d+=(p?"":f)+g}),p=!0}this.cwd=c}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return h(this,$c)}resolve(...e){let r="";for(let s=e.length-1;s>=0;s--){const a=e[s];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}const i=h(this,Co).get(r);if(i!==void 0)return i;const n=this.cwd.resolve(r).fullpath();return h(this,Co).set(r,n),n}resolvePosix(...e){let r="";for(let s=e.length-1;s>=0;s--){const a=e[s];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}const i=h(this,Do).get(r);if(i!==void 0)return i;const n=this.cwd.resolve(r).fullpathPosix();return h(this,Do).set(r,n),n}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e,e=this.cwd);const{withFileTypes:i}=r;if(e.canReaddir()){const n=await e.readdir();return i?n:n.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e,e=this.cwd);const{withFileTypes:i=!0}=r;return e.canReaddir()?i?e.readdirSync():e.readdirSync().map(n=>n.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e.withFileTypes,e=this.cwd);const i=await e.readlink();return r?i:i==null?void 0:i.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e.withFileTypes,e=this.cwd);const i=e.readlinkSync();return r?i:i==null?void 0:i.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e.withFileTypes,e=this.cwd);const i=await e.realpath();return r?i:i==null?void 0:i.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e.withFileTypes,e=this.cwd);const i=e.realpathSync();return r?i:i==null?void 0:i.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e,e=this.cwd);const{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=r,o=[];(!s||s(e))&&o.push(i?e:e.fullpath());const l=new Set,c=(f,d)=>{l.add(f),f.readdirCB((p,g)=>{if(p)return d(p);let m=g.length;if(!m)return d();const w=()=>{--m===0&&d()};for(const v of g)(!s||s(v))&&o.push(i?v:v.fullpath()),n&&v.isSymbolicLink()?v.realpath().then(y=>y!=null&&y.isUnknown()?y.lstat():y).then(y=>y!=null&&y.shouldWalk(l,a)?c(y,w):w()):v.shouldWalk(l,a)?c(v,w):w()},!0)},u=e;return new Promise((f,d)=>{c(u,p=>{if(p)return d(p);f(o)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e,e=this.cwd);const{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=r,o=[];(!s||s(e))&&o.push(i?e:e.fullpath());const l=new Set([e]);for(const c of l){const u=c.readdirSync();for(const f of u){(!s||s(f))&&o.push(i?f:f.fullpath());let d=f;if(f.isSymbolicLink()){if(!(n&&(d=f.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(l,a)&&l.add(d)}}return o}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e,e=this.cwd);const{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=r;(!s||s(e))&&(yield i?e:e.fullpath());const o=new Set([e]);for(const l of o){const c=l.readdirSync();for(const u of c){(!s||s(u))&&(yield i?u:u.fullpath());let f=u;if(u.isSymbolicLink()){if(!(n&&(f=u.realpathSync())))continue;f.isUnknown()&&f.lstatSync()}f.shouldWalk(o,a)&&o.add(f)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e,e=this.cwd);const{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=r,o=new Ty.Minipass({objectMode:!0});(!s||s(e))&&o.write(i?e:e.fullpath());const l=new Set,c=[e];let u=0;const f=()=>{let d=!1;for(;!d;){const p=c.shift();if(!p){u===0&&o.end();return}u++,l.add(p);const g=(w,v,y=!1)=>{if(w)return o.emit("error",w);if(n&&!y){const b=[];for(const T of v)T.isSymbolicLink()&&b.push(T.realpath().then(L=>L!=null&&L.isUnknown()?L.lstat():L));if(b.length){Promise.all(b).then(()=>g(null,v,!0));return}}for(const b of v)b&&(!s||s(b))&&(o.write(i?b:b.fullpath())||(d=!0));u--;for(const b of v){const T=b.realpathCached()||b;T.shouldWalk(l,a)&&c.push(T)}d&&!o.flowing?o.once("drain",f):m||f()};let m=!0;p.readdirCB(g,!0),m=!1}};return f(),o}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Er||(r=e,e=this.cwd);const{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=r,o=new Ty.Minipass({objectMode:!0}),l=new Set;(!s||s(e))&&o.write(i?e:e.fullpath());const c=[e];let u=0;const f=()=>{let d=!1;for(;!d;){const p=c.shift();if(!p){u===0&&o.end();return}u++,l.add(p);const g=p.readdirSync();for(const m of g)(!s||s(m))&&(o.write(i?m:m.fullpath())||(d=!0));u--;for(const m of g){let w=m;if(m.isSymbolicLink()){if(!(n&&(w=m.realpathSync())))continue;w.isUnknown()&&w.lstatSync()}w.shouldWalk(l,a)&&c.push(w)}}d&&!o.flowing&&o.once("drain",f)};return f(),o}chdir(e=this.cwd){const r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[E0](r)}}Co=new WeakMap,Do=new WeakMap,$c=new WeakMap,Rc=new WeakMap;Rt.PathScurryBase=em;class tm extends em{constructor(r=process.cwd(),i={}){const{nocase:n=!0}=i;super(r,Tf.win32,"\\",{...i,nocase:n});Q(this,"sep","\\");this.nocase=n;for(let s=this.cwd;s;s=s.parent)s.nocase=this.nocase}parseRootPath(r){return Tf.win32.parse(r).root.toUpperCase()}newRoot(r){return new zc(this.rootPath,Vi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:r})}isAbsolute(r){return r.startsWith("/")||r.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(r)}}Rt.PathScurryWin32=tm;class rm extends em{constructor(r=process.cwd(),i={}){const{nocase:n=!1}=i;super(r,Tf.posix,"/",{...i,nocase:n});Q(this,"sep","/");this.nocase=n}parseRootPath(r){return"/"}newRoot(r){return new Gc(this.rootPath,Vi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:r})}isAbsolute(r){return r.startsWith("/")}}Rt.PathScurryPosix=rm;class R0 extends rm{constructor(e=process.cwd(),r={}){const{nocase:i=!0}=r;super(e,{...r,nocase:i})}}Rt.PathScurryDarwin=R0;Rt.Path=process.platform==="win32"?zc:Gc;Rt.PathScurry=process.platform==="win32"?tm:process.platform==="darwin"?R0:rm;var Hc={};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.Pattern=void 0;const $F=ks,RF=t=>t.length>=1,CF=t=>t.length>=1;var Vt,Hr,Xt,ha,Ri,Cc,vs,ys,bs,Po;const Um=class Um{constructor(e,r,i,n){ie(this,Vt);ie(this,Hr);ie(this,Xt);Q(this,"length");ie(this,ha);ie(this,Ri);ie(this,Cc);ie(this,vs);ie(this,ys);ie(this,bs);ie(this,Po,!0);if(!RF(e))throw new TypeError("empty pattern list");if(!CF(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,i<0||i>=this.length)throw new TypeError("index out of range");if(W(this,Vt,e),W(this,Hr,r),W(this,Xt,i),W(this,ha,n),h(this,Xt)===0){if(this.isUNC()){const[s,a,o,l,...c]=h(this,Vt),[u,f,d,p,...g]=h(this,Hr);c[0]===""&&(c.shift(),g.shift());const m=[s,a,o,l,""].join("/"),w=[u,f,d,p,""].join("/");W(this,Vt,[m,...c]),W(this,Hr,[w,...g]),this.length=h(this,Vt).length}else if(this.isDrive()||this.isAbsolute()){const[s,...a]=h(this,Vt),[o,...l]=h(this,Hr);a[0]===""&&(a.shift(),l.shift());const c=s+"/",u=o+"/";W(this,Vt,[c,...a]),W(this,Hr,[u,...l]),this.length=h(this,Vt).length}}}pattern(){return h(this,Vt)[h(this,Xt)]}isString(){return typeof h(this,Vt)[h(this,Xt)]=="string"}isGlobstar(){return h(this,Vt)[h(this,Xt)]===$F.GLOBSTAR}isRegExp(){return h(this,Vt)[h(this,Xt)]instanceof RegExp}globString(){return W(this,Cc,h(this,Cc)||(h(this,Xt)===0?this.isAbsolute()?h(this,Hr)[0]+h(this,Hr).slice(1).join("/"):h(this,Hr).join("/"):h(this,Hr).slice(h(this,Xt)).join("/")))}hasMore(){return this.length>h(this,Xt)+1}rest(){return h(this,Ri)!==void 0?h(this,Ri):this.hasMore()?(W(this,Ri,new Um(h(this,Vt),h(this,Hr),h(this,Xt)+1,h(this,ha))),W(h(this,Ri),bs,h(this,bs)),W(h(this,Ri),ys,h(this,ys)),W(h(this,Ri),vs,h(this,vs)),h(this,Ri)):W(this,Ri,null)}isUNC(){const e=h(this,Vt);return h(this,ys)!==void 0?h(this,ys):W(this,ys,h(this,ha)==="win32"&&h(this,Xt)===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3])}isDrive(){const e=h(this,Vt);return h(this,vs)!==void 0?h(this,vs):W(this,vs,h(this,ha)==="win32"&&h(this,Xt)===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]))}isAbsolute(){const e=h(this,Vt);return h(this,bs)!==void 0?h(this,bs):W(this,bs,e[0]===""&&e.length>1||this.isDrive()||this.isUNC())}root(){const e=h(this,Vt)[0];return typeof e=="string"&&this.isAbsolute()&&h(this,Xt)===0?e:""}checkFollowGlobstar(){return!(h(this,Xt)===0||!this.isGlobstar()||!h(this,Po))}markFollowGlobstar(){return h(this,Xt)===0||!this.isGlobstar()||!h(this,Po)?!1:(W(this,Po,!1),!0)}};Vt=new WeakMap,Hr=new WeakMap,Xt=new WeakMap,ha=new WeakMap,Ri=new WeakMap,Cc=new WeakMap,vs=new WeakMap,ys=new WeakMap,bs=new WeakMap,Po=new WeakMap;let Lp=Um;Hc.Pattern=Lp;var Cs={},Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.Ignore=void 0;const Dy=ks,DF=Hc,PF=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux";class OF{constructor(e,{nobrace:r,nocase:i,noext:n,noglobstar:s,platform:a=PF}){Q(this,"relative");Q(this,"relativeChildren");Q(this,"absolute");Q(this,"absoluteChildren");Q(this,"platform");Q(this,"mmopts");this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=a,this.mmopts={dot:!0,nobrace:r,nocase:i,noext:n,noglobstar:s,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(const o of e)this.add(o)}add(e){const r=new Dy.Minimatch(e,this.mmopts);for(let i=0;i<r.set.length;i++){const n=r.set[i],s=r.globParts[i];if(!n||!s)throw new Error("invalid pattern object");for(;n[0]==="."&&s[0]===".";)n.shift(),s.shift();const a=new DF.Pattern(n,s,0,this.platform),o=new Dy.Minimatch(a.globString(),this.mmopts),l=s[s.length-1]==="**",c=a.isAbsolute();c?this.absolute.push(o):this.relative.push(o),l&&(c?this.absoluteChildren.push(o):this.relativeChildren.push(o))}}ignored(e){const r=e.fullpath(),i=`${r}/`,n=e.relative()||".",s=`${n}/`;for(const a of this.relative)if(a.match(n)||a.match(s))return!0;for(const a of this.absolute)if(a.match(r)||a.match(i))return!0;return!1}childrenIgnored(e){const r=e.fullpath()+"/",i=(e.relative()||".")+"/";for(const n of this.relativeChildren)if(n.match(i))return!0;for(const n of this.absoluteChildren)if(n.match(r))return!0;return!1}}Vc.Ignore=OF;var nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.Processor=nn.SubWalks=nn.MatchRecord=nn.HasWalkedCache=void 0;const Py=ks;class wh{constructor(e=new Map){Q(this,"store");this.store=e}copy(){return new wh(new Map(this.store))}hasWalked(e,r){var i;return(i=this.store.get(e.fullpath()))==null?void 0:i.has(r.globString())}storeWalked(e,r){const i=e.fullpath(),n=this.store.get(i);n?n.add(r.globString()):this.store.set(i,new Set([r.globString()]))}}nn.HasWalkedCache=wh;class C0{constructor(){Q(this,"store",new Map)}add(e,r,i){const n=(r?2:0)|(i?1:0),s=this.store.get(e);this.store.set(e,s===void 0?n:n&s)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}}nn.MatchRecord=C0;class D0{constructor(){Q(this,"store",new Map)}add(e,r){if(!e.canReaddir())return;const i=this.store.get(e);i?i.find(n=>n.globString()===r.globString())||i.push(r):this.store.set(e,[r])}get(e){const r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}}nn.SubWalks=D0;class im{constructor(e,r){Q(this,"hasWalkedCache");Q(this,"matches",new C0);Q(this,"subwalks",new D0);Q(this,"patterns");Q(this,"follow");Q(this,"dot");Q(this,"opts");this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new wh}processPatterns(e,r){this.patterns=r;const i=r.map(n=>[e,n]);for(let[n,s]of i){this.hasWalkedCache.storeWalked(n,s);const a=s.root(),o=s.isAbsolute()&&this.opts.absolute!==!1;if(a){n=n.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);const f=s.rest();if(f)s=f;else{this.matches.add(n,!0,!1);continue}}if(n.isENOENT())continue;let l,c,u=!1;for(;typeof(l=s.pattern())=="string"&&(c=s.rest());)n=n.resolve(l),s=c,u=!0;if(l=s.pattern(),c=s.rest(),u){if(this.hasWalkedCache.hasWalked(n,s))continue;this.hasWalkedCache.storeWalked(n,s)}if(typeof l=="string"){const f=l===".."||l===""||l===".";this.matches.add(n.resolve(l),o,f);continue}else if(l===Py.GLOBSTAR){(!n.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(n,s);const f=c==null?void 0:c.pattern(),d=c==null?void 0:c.rest();if(!c||(f===""||f===".")&&!d)this.matches.add(n,o,f===""||f===".");else if(f===".."){const p=n.parent||n;d?this.hasWalkedCache.hasWalked(p,d)||this.subwalks.add(p,d):this.matches.add(p,o,!0)}}else l instanceof RegExp&&this.subwalks.add(n,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new im(this.opts,this.hasWalkedCache)}filterEntries(e,r){const i=this.subwalks.get(e),n=this.child();for(const s of r)for(const a of i){const o=a.isAbsolute(),l=a.pattern(),c=a.rest();l===Py.GLOBSTAR?n.testGlobstar(s,a,c,o):l instanceof RegExp?n.testRegExp(s,l,c,o):n.testString(s,l,c,o)}return n}testGlobstar(e,r,i,n){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,n,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(i&&r.checkFollowGlobstar()?this.subwalks.add(e,i):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),i){const s=i.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,i.rest(),n);else if(s===".."){const a=e.parent||e;this.subwalks.add(a,i)}else s instanceof RegExp&&this.testRegExp(e,s,i.rest(),n)}}testRegExp(e,r,i,n){r.test(e.name)&&(i?this.subwalks.add(e,i):this.matches.add(e,n,!1))}testString(e,r,i,n){e.isNamed(r)&&(i?this.subwalks.add(e,i):this.matches.add(e,n,!1))}}nn.Processor=im;Object.defineProperty(Cs,"__esModule",{value:!0});Cs.GlobStream=Cs.GlobWalker=Cs.GlobUtil=void 0;const kF=Jg,Oy=Vc,ky=nn,NF=(t,e)=>typeof t=="string"?new Oy.Ignore([t],e):Array.isArray(t)?new Oy.Ignore(t,e):t;var Oo,kn,da,ci,ea,jp;class nm{constructor(e,r,i){ie(this,ci);Q(this,"path");Q(this,"patterns");Q(this,"opts");Q(this,"seen",new Set);Q(this,"paused",!1);Q(this,"aborted",!1);ie(this,Oo,[]);ie(this,kn);ie(this,da);Q(this,"signal");Q(this,"maxDepth");Q(this,"includeChildMatches");if(this.patterns=e,this.path=r,this.opts=i,W(this,da,!i.posix&&i.platform==="win32"?"\\":"/"),this.includeChildMatches=i.includeChildMatches!==!1,(i.ignore||!this.includeChildMatches)&&(W(this,kn,NF(i.ignore??[],i)),!this.includeChildMatches&&typeof h(this,kn).add!="function")){const n="cannot ignore child matches, ignore lacks add() method.";throw new Error(n)}this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",()=>{h(this,Oo).length=0}))}pause(){this.paused=!0}resume(){var r;if((r=this.signal)!=null&&r.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=h(this,Oo).shift());)e()}onResume(e){var r;(r=this.signal)!=null&&r.aborted||(this.paused?h(this,Oo).push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||await e.realpath(),!i)return;e=i}const s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&(s!=null&&s.isSymbolicLink())){const a=await s.realpath();a&&(a.isUnknown()||this.opts.stat)&&await a.lstat()}return this.matchCheckTest(s,r)}matchCheckTest(e,r){var i;return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!((i=e.realpathCached())!=null&&i.isDirectory()))&&!re(this,ci,ea).call(this,e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||e.realpathSync(),!i)return;e=i}const s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&(s!=null&&s.isSymbolicLink())){const a=s.realpathSync();a&&(a!=null&&a.isUnknown()||this.opts.stat)&&a.lstatSync()}return this.matchCheckTest(s,r)}matchFinish(e,r){var s;if(re(this,ci,ea).call(this,e))return;if(!this.includeChildMatches&&((s=h(this,kn))!=null&&s.add)){const a=`${e.relativePosix()}/**`;h(this,kn).add(a)}const i=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);const n=this.opts.mark&&e.isDirectory()?h(this,da):"";if(this.opts.withFileTypes)this.matchEmit(e);else if(i){const a=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(a+n)}else{const a=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!a.startsWith(".."+h(this,da))?"."+h(this,da):"";this.matchEmit(a?o+a+n:"."+n)}}async match(e,r,i){const n=await this.matchCheck(e,i);n&&this.matchFinish(n,r)}matchSync(e,r,i){const n=this.matchCheckSync(e,i);n&&this.matchFinish(n,r)}walkCB(e,r,i){var n;(n=this.signal)!=null&&n.aborted&&i(),this.walkCB2(e,r,new ky.Processor(this.opts),i)}walkCB2(e,r,i,n){var o;if(re(this,ci,jp).call(this,e))return n();if((o=this.signal)!=null&&o.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2(e,r,i,n));return}i.processPatterns(e,r);let s=1;const a=()=>{--s===0&&n()};for(const[l,c,u]of i.matches.entries())re(this,ci,ea).call(this,l)||(s++,this.match(l,c,u).then(()=>a()));for(const l of i.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;s++;const c=l.readdirCached();l.calledReaddir()?this.walkCB3(l,c,i,a):l.readdirCB((u,f)=>this.walkCB3(l,f,i,a),!0)}a()}walkCB3(e,r,i,n){i=i.filterEntries(e,r);let s=1;const a=()=>{--s===0&&n()};for(const[o,l,c]of i.matches.entries())re(this,ci,ea).call(this,o)||(s++,this.match(o,l,c).then(()=>a()));for(const[o,l]of i.subwalks.entries())s++,this.walkCB2(o,l,i.child(),a);a()}walkCBSync(e,r,i){var n;(n=this.signal)!=null&&n.aborted&&i(),this.walkCB2Sync(e,r,new ky.Processor(this.opts),i)}walkCB2Sync(e,r,i,n){var o;if(re(this,ci,jp).call(this,e))return n();if((o=this.signal)!=null&&o.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,i,n));return}i.processPatterns(e,r);let s=1;const a=()=>{--s===0&&n()};for(const[l,c,u]of i.matches.entries())re(this,ci,ea).call(this,l)||this.matchSync(l,c,u);for(const l of i.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;s++;const c=l.readdirSync();this.walkCB3Sync(l,c,i,a)}a()}walkCB3Sync(e,r,i,n){i=i.filterEntries(e,r);let s=1;const a=()=>{--s===0&&n()};for(const[o,l,c]of i.matches.entries())re(this,ci,ea).call(this,o)||this.matchSync(o,l,c);for(const[o,l]of i.subwalks.entries())s++,this.walkCB2Sync(o,l,i.child(),a);a()}}Oo=new WeakMap,kn=new WeakMap,da=new WeakMap,ci=new WeakSet,ea=function(e){var r,i;return this.seen.has(e)||!!((i=(r=h(this,kn))==null?void 0:r.ignored)!=null&&i.call(r,e))},jp=function(e){var r,i;return!!((i=(r=h(this,kn))==null?void 0:r.childrenIgnored)!=null&&i.call(r,e))};Cs.GlobUtil=nm;class FF extends nm{constructor(r,i,n){super(r,i,n);Q(this,"matches",new Set)}matchEmit(r){this.matches.add(r)}async walk(){var r;if((r=this.signal)!=null&&r.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((i,n)=>{this.walkCB(this.path,this.patterns,()=>{var s;(s=this.signal)!=null&&s.aborted?n(this.signal.reason):i(this.matches)})}),this.matches}walkSync(){var r;if((r=this.signal)!=null&&r.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{var i;if((i=this.signal)!=null&&i.aborted)throw this.signal.reason}),this.matches}}Cs.GlobWalker=FF;class IF extends nm{constructor(r,i,n){super(r,i,n);Q(this,"results");this.results=new kF.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(r){this.results.write(r),this.results.flowing||this.pause()}stream(){const r=this.path;return r.isUnknown()?r.lstat().then(()=>{this.walkCB(r,this.patterns,()=>this.results.end())}):this.walkCB(r,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}}Cs.GlobStream=IF;Object.defineProperty(Zl,"__esModule",{value:!0});Zl.Glob=void 0;const LF=ks,jF=Ab,bu=Rt,MF=Hc,wu=Cs,BF=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux";class WF{constructor(e,r){Q(this,"absolute");Q(this,"cwd");Q(this,"root");Q(this,"dot");Q(this,"dotRelative");Q(this,"follow");Q(this,"ignore");Q(this,"magicalBraces");Q(this,"mark");Q(this,"matchBase");Q(this,"maxDepth");Q(this,"nobrace");Q(this,"nocase");Q(this,"nodir");Q(this,"noext");Q(this,"noglobstar");Q(this,"pattern");Q(this,"platform");Q(this,"realpath");Q(this,"scurry");Q(this,"stat");Q(this,"signal");Q(this,"windowsPathsNoEscape");Q(this,"withFileTypes");Q(this,"includeChildMatches");Q(this,"opts");Q(this,"patterns");if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,jF.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=e,this.platform=r.platform||BF,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{const l=r.platform==="win32"?bu.PathScurryWin32:r.platform==="darwin"?bu.PathScurryDarwin:r.platform?bu.PathScurryPosix:bu.PathScurry;this.scurry=new l(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;const i=this.platform==="darwin"||this.platform==="win32",n={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:i,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(l=>new LF.Minimatch(l,n)),[a,o]=s.reduce((l,c)=>(l[0].push(...c.set),l[1].push(...c.globParts),l),[[],[]]);this.patterns=a.map((l,c)=>{const u=o[c];if(!u)throw new Error("invalid pattern object");return new MF.Pattern(l,u,0,this.platform)})}async walk(){return[...await new wu.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new wu.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new wu.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new wu.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}Zl.Glob=WF;var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.hasMagic=void 0;const UF=ks,zF=(t,e={})=>{Array.isArray(t)||(t=[t]);for(const r of t)if(new UF.Minimatch(r,e).hasMagic())return!0;return!1};Ql.hasMagic=zF;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.glob=t.sync=t.iterate=t.iterateSync=t.stream=t.streamSync=t.Ignore=t.hasMagic=t.Glob=t.unescape=t.escape=void 0,t.globStreamSync=l,t.globStream=c,t.globSync=u,t.globIterateSync=d,t.globIterate=p;const e=ks,r=Zl,i=Ql;var n=ks;Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return n.escape}}),Object.defineProperty(t,"unescape",{enumerable:!0,get:function(){return n.unescape}});var s=Zl;Object.defineProperty(t,"Glob",{enumerable:!0,get:function(){return s.Glob}});var a=Ql;Object.defineProperty(t,"hasMagic",{enumerable:!0,get:function(){return a.hasMagic}});var o=Vc;Object.defineProperty(t,"Ignore",{enumerable:!0,get:function(){return o.Ignore}});function l(g,m={}){return new r.Glob(g,m).streamSync()}function c(g,m={}){return new r.Glob(g,m).stream()}function u(g,m={}){return new r.Glob(g,m).walkSync()}async function f(g,m={}){return new r.Glob(g,m).walk()}function d(g,m={}){return new r.Glob(g,m).iterateSync()}function p(g,m={}){return new r.Glob(g,m).iterate()}t.streamSync=l,t.stream=Object.assign(c,{sync:l}),t.iterateSync=d,t.iterate=Object.assign(p,{sync:d}),t.sync=Object.assign(u,{stream:l,iterate:d}),t.glob=Object.assign(f,{glob:f,globSync:u,sync:t.sync,globStream:c,stream:t.stream,globStreamSync:l,streamSync:t.streamSync,globIterate:p,iterate:t.iterate,globIterateSync:d,iterateSync:t.iterateSync,Glob:r.Glob,hasMagic:i.hasMagic,escape:e.escape,unescape:e.unescape}),t.glob.glob=t.glob})(o0);var P0=Og,yo=Wf,Mp=JP,GF=pN,HF=WN,VF=rF,qF=o0,_a=X_.exports={},Ny=/[\/\\]/g,YF=function(t,e){var r=[];return Mp(t).forEach(function(i){var n=i.indexOf("!")===0;n&&(i=i.slice(1));var s=e(i);n?r=GF(r,s):r=HF(r,s)}),r};_a.exists=function(){var t=yo.join.apply(yo,arguments);return P0.existsSync(t)};_a.expand=function(...t){var e=VF(t[0])?t.shift():{},r=Array.isArray(t[0])?t[0]:t;if(r.length===0)return[];var i=YF(r,function(n){return qF.sync(n,e)});return e.filter&&(i=i.filter(function(n){n=yo.join(e.cwd||"",n);try{return typeof e.filter=="function"?e.filter(n):P0.statSync(n)[e.filter]()}catch{return!1}})),i};_a.expandMapping=function(t,e,r){r=Object.assign({rename:function(s,a){return yo.join(s||"",a)}},r);var i=[],n={};return _a.expand(r,t).forEach(function(s){var a=s;r.flatten&&(a=yo.basename(a)),r.ext&&(a=a.replace(/(\.[^\/]*)?$/,r.ext));var o=r.rename(e,a,r);r.cwd&&(s=yo.join(r.cwd,s)),o=o.replace(Ny,"/"),s=s.replace(Ny,"/"),n[o]?n[o].src.push(s):(i.push({src:[s],dest:o}),n[o]=i[i.length-1])}),i};_a.normalizeFilesArray=function(t){var e=[];return t.forEach(function(r){("src"in r||"dest"in r)&&e.push(r)}),e.length===0?[]:(e=_(e).chain().forEach(function(r){!("src"in r)||!r.src||(Array.isArray(r.src)?r.src=Mp(r.src):r.src=[r.src])}).map(function(r){var i=Object.assign({},r);if(delete i.src,delete i.dest,r.expand)return _a.expandMapping(r.src,r.dest,i).map(function(s){var a=Object.assign({},r);return a.orig=Object.assign({},r),a.src=s.src,a.dest=s.dest,["expand","cwd","flatten","rename","ext"].forEach(function(o){delete a[o]}),a});var n=Object.assign({},r);return n.orig=Object.assign({},r),"src"in n&&Object.defineProperty(n,"src",{enumerable:!0,get:function s(){var a;return"result"in s||(a=r.src,a=Array.isArray(a)?Mp(a):[a],s.result=_a.expand(i,a)),s.result}}),"dest"in n&&(n.dest=r.dest),n}).flatten().value(),e)};var KF=X_.exports,Bp=Og,Fy=Wf,ZF=Fg,QF=yA,O0=Qw,XF=jC;wg.Stream;var JF=rl.PassThrough,Zr=Mw.exports={};Zr.file=KF;Zr.collectStream=function(t,e){var r=[],i=0;t.on("error",e),t.on("data",function(n){r.push(n),i+=n.length}),t.on("end",function(){var n=Buffer.alloc(i),s=0;r.forEach(function(a){a.copy(n,s),s+=a.length}),e(null,n)})};Zr.dateify=function(t){return t=t||new Date,t instanceof Date?t=t:typeof t=="string"?t=new Date(t):t=new Date,t};Zr.defaults=function(t,e,r){var i=arguments;return i[0]=i[0]||{},XF(...i)};Zr.isStream=function(t){return ZF(t)};Zr.lazyReadStream=function(t){return new QF.Readable(function(){return Bp.createReadStream(t)})};Zr.normalizeInputSource=function(t){return t===null?Buffer.alloc(0):typeof t=="string"?Buffer.from(t):Zr.isStream(t)?t.pipe(new JF):t};Zr.sanitizePath=function(t){return O0(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,"")};Zr.trailingSlashIt=function(t){return t.slice(-1)!=="/"?t+"/":t};Zr.unixifyPath=function(t){return O0(t,!1).replace(/^\w+:/,"")};Zr.walkdir=function(t,e,r){var i=[];typeof e=="function"&&(r=e,e=t),Bp.readdir(t,function(n,s){var a=0,o,l;if(n)return r(n);(function c(){if(o=s[a++],!o)return r(null,i);l=Fy.join(t,o),Bp.stat(l,function(u,f){i.push({path:l,relative:Fy.relative(e,l).replace(/\\/g,"/"),stats:f}),f&&f.isDirectory()?Zr.walkdir(l,e,function(d,p){if(d)return r(d);p.forEach(function(g){i.push(g)}),c()}):c()})})()})};var qc=Mw.exports,k0={exports:{}};/**
 * Archiver Core
 *
 * @ignore
 * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
 * @copyright (c) 2012-2014 Chris Talkington, contributors.
 */(function(t,e){var r=Li;const i={ABORTED:"archive was aborted",DIRECTORYDIRPATHREQUIRED:"diretory dirpath argument must be a non-empty string value",DIRECTORYFUNCTIONINVALIDDATA:"invalid data returned by directory custom data function",ENTRYNAMEREQUIRED:"entry name must be a non-empty string value",FILEFILEPATHREQUIRED:"file filepath argument must be a non-empty string value",FINALIZING:"archive already finalizing",QUEUECLOSED:"queue closed",NOENDMETHOD:"no suitable finalize/end method defined by module",DIRECTORYNOTSUPPORTED:"support for directory entries not defined by module",FORMATSET:"archive format already set",INPUTSTEAMBUFFERREQUIRED:"input source must be valid Stream or Buffer instance",MODULESET:"module already set",SYMLINKNOTSUPPORTED:"support for symlink entries not defined by module",SYMLINKFILEPATHREQUIRED:"symlink filepath argument must be a non-empty string value",SYMLINKTARGETREQUIRED:"symlink target argument must be a non-empty string value",ENTRYNOTSUPPORTED:"entry not supported"};function n(s,a){Error.captureStackTrace(this,this.constructor),this.message=i[s]||s,this.code=s,this.data=a}r.inherits(n,Error),t.exports=n})(k0);var eI=k0.exports;/**
 * Archiver Core
 *
 * @ignore
 * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
 * @copyright (c) 2012-2014 Chris Talkington, contributors.
 */var sm=Bf,N0=mx,Iy=DT,Ld=Wf,ln=qc,tI=Li.inherits,It=eI,F0=rl.Transform,jd=process.platform==="win32",ct=function(t,e){if(!(this instanceof ct))return new ct(t,e);typeof t!="string"&&(e=t,t="zip"),e=this.options=ln.defaults(e,{highWaterMark:1024*1024,statConcurrency:4}),F0.call(this,e),this._format=!1,this._module=!1,this._pending=0,this._pointer=0,this._entriesCount=0,this._entriesProcessedCount=0,this._fsEntriesTotalBytes=0,this._fsEntriesProcessedBytes=0,this._queue=Iy.queue(this._onQueueTask.bind(this),1),this._queue.drain(this._onQueueDrain.bind(this)),this._statQueue=Iy.queue(this._onStatQueueTask.bind(this),e.statConcurrency),this._statQueue.drain(this._onQueueDrain.bind(this)),this._state={aborted:!1,finalize:!1,finalizing:!1,finalized:!1,modulePiped:!1},this._streams=[]};tI(ct,F0);ct.prototype._abort=function(){this._state.aborted=!0,this._queue.kill(),this._statQueue.kill(),this._queue.idle()&&this._shutdown()};ct.prototype._append=function(t,e){e=e||{};var r={source:null,filepath:t};e.name||(e.name=t),e.sourcePath=t,r.data=e,this._entriesCount++,e.stats&&e.stats instanceof sm.Stats?(r=this._updateQueueTaskWithStats(r,e.stats),r&&(e.stats.size&&(this._fsEntriesTotalBytes+=e.stats.size),this._queue.push(r))):this._statQueue.push(r)};ct.prototype._finalize=function(){this._state.finalizing||this._state.finalized||this._state.aborted||(this._state.finalizing=!0,this._moduleFinalize(),this._state.finalizing=!1,this._state.finalized=!0)};ct.prototype._maybeFinalize=function(){return this._state.finalizing||this._state.finalized||this._state.aborted?!1:this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()?(this._finalize(),!0):!1};ct.prototype._moduleAppend=function(t,e,r){if(this._state.aborted){r();return}this._module.append(t,e,(function(i){if(this._task=null,this._state.aborted){this._shutdown();return}if(i){this.emit("error",i),setImmediate(r);return}this.emit("entry",e),this._entriesProcessedCount++,e.stats&&e.stats.size&&(this._fsEntriesProcessedBytes+=e.stats.size),this.emit("progress",{entries:{total:this._entriesCount,processed:this._entriesProcessedCount},fs:{totalBytes:this._fsEntriesTotalBytes,processedBytes:this._fsEntriesProcessedBytes}}),setImmediate(r)}).bind(this))};ct.prototype._moduleFinalize=function(){typeof this._module.finalize=="function"?this._module.finalize():typeof this._module.end=="function"?this._module.end():this.emit("error",new It("NOENDMETHOD"))};ct.prototype._modulePipe=function(){this._module.on("error",this._onModuleError.bind(this)),this._module.pipe(this),this._state.modulePiped=!0};ct.prototype._moduleSupports=function(t){return!this._module.supports||!this._module.supports[t]?!1:this._module.supports[t]};ct.prototype._moduleUnpipe=function(){this._module.unpipe(this),this._state.modulePiped=!1};ct.prototype._normalizeEntryData=function(t,e){t=ln.defaults(t,{type:"file",name:null,date:null,mode:null,prefix:null,sourcePath:null,stats:!1}),e&&t.stats===!1&&(t.stats=e);var r=t.type==="directory";return t.name&&(typeof t.prefix=="string"&&t.prefix!==""&&(t.name=t.prefix+"/"+t.name,t.prefix=null),t.name=ln.sanitizePath(t.name),t.type!=="symlink"&&t.name.slice(-1)==="/"?(r=!0,t.type="directory"):r&&(t.name+="/")),typeof t.mode=="number"?jd?t.mode&=511:t.mode&=4095:t.stats&&t.mode===null?(jd?t.mode=t.stats.mode&511:t.mode=t.stats.mode&4095,jd&&r&&(t.mode=493)):t.mode===null&&(t.mode=r?493:420),t.stats&&t.date===null?t.date=t.stats.mtime:t.date=ln.dateify(t.date),t};ct.prototype._onModuleError=function(t){this.emit("error",t)};ct.prototype._onQueueDrain=function(){this._state.finalizing||this._state.finalized||this._state.aborted||this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize()};ct.prototype._onQueueTask=function(t,e){var r=()=>{t.data.callback&&t.data.callback(),e()};if(this._state.finalizing||this._state.finalized||this._state.aborted){r();return}this._task=t,this._moduleAppend(t.source,t.data,r)};ct.prototype._onStatQueueTask=function(t,e){if(this._state.finalizing||this._state.finalized||this._state.aborted){e();return}sm.lstat(t.filepath,(function(r,i){if(this._state.aborted){setImmediate(e);return}if(r){this._entriesCount--,this.emit("warning",r),setImmediate(e);return}t=this._updateQueueTaskWithStats(t,i),t&&(i.size&&(this._fsEntriesTotalBytes+=i.size),this._queue.push(t)),setImmediate(e)}).bind(this))};ct.prototype._shutdown=function(){this._moduleUnpipe(),this.end()};ct.prototype._transform=function(t,e,r){t&&(this._pointer+=t.length),r(null,t)};ct.prototype._updateQueueTaskWithStats=function(t,e){if(e.isFile())t.data.type="file",t.data.sourceType="stream",t.source=ln.lazyReadStream(t.filepath);else if(e.isDirectory()&&this._moduleSupports("directory"))t.data.name=ln.trailingSlashIt(t.data.name),t.data.type="directory",t.data.sourcePath=ln.trailingSlashIt(t.filepath),t.data.sourceType="buffer",t.source=Buffer.concat([]);else if(e.isSymbolicLink()&&this._moduleSupports("symlink")){var r=sm.readlinkSync(t.filepath),i=Ld.dirname(t.filepath);t.data.type="symlink",t.data.linkname=Ld.relative(i,Ld.resolve(i,r)),t.data.sourceType="buffer",t.source=Buffer.concat([])}else return e.isDirectory()?this.emit("warning",new It("DIRECTORYNOTSUPPORTED",t.data)):e.isSymbolicLink()?this.emit("warning",new It("SYMLINKNOTSUPPORTED",t.data)):this.emit("warning",new It("ENTRYNOTSUPPORTED",t.data)),null;return t.data=this._normalizeEntryData(t.data,e),t};ct.prototype.abort=function(){return this._state.aborted||this._state.finalized?this:(this._abort(),this)};ct.prototype.append=function(t,e){if(this._state.finalize||this._state.aborted)return this.emit("error",new It("QUEUECLOSED")),this;if(e=this._normalizeEntryData(e),typeof e.name!="string"||e.name.length===0)return this.emit("error",new It("ENTRYNAMEREQUIRED")),this;if(e.type==="directory"&&!this._moduleSupports("directory"))return this.emit("error",new It("DIRECTORYNOTSUPPORTED",{name:e.name})),this;if(t=ln.normalizeInputSource(t),Buffer.isBuffer(t))e.sourceType="buffer";else if(ln.isStream(t))e.sourceType="stream";else return this.emit("error",new It("INPUTSTEAMBUFFERREQUIRED",{name:e.name})),this;return this._entriesCount++,this._queue.push({data:e,source:t}),this};ct.prototype.directory=function(t,e,r){if(this._state.finalize||this._state.aborted)return this.emit("error",new It("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new It("DIRECTORYDIRPATHREQUIRED")),this;this._pending++,e===!1?e="":typeof e!="string"&&(e=t);var i=!1;typeof r=="function"?(i=r,r={}):typeof r!="object"&&(r={});var n={stat:!0,dot:!0};function s(){this._pending--,this._maybeFinalize()}function a(c){this.emit("error",c)}function o(c){l.pause();var u=!1,f=Object.assign({},r);f.name=c.relative,f.prefix=e,f.stats=c.stat,f.callback=l.resume.bind(l);try{if(i){if(f=i(f),f===!1)u=!0;else if(typeof f!="object")throw new It("DIRECTORYFUNCTIONINVALIDDATA",{dirpath:t})}}catch(d){this.emit("error",d);return}if(u){l.resume();return}this._append(c.absolute,f)}var l=N0(t,n);return l.on("error",a.bind(this)),l.on("match",o.bind(this)),l.on("end",s.bind(this)),this};ct.prototype.file=function(t,e){return this._state.finalize||this._state.aborted?(this.emit("error",new It("QUEUECLOSED")),this):typeof t!="string"||t.length===0?(this.emit("error",new It("FILEFILEPATHREQUIRED")),this):(this._append(t,e),this)};ct.prototype.glob=function(t,e,r){this._pending++,e=ln.defaults(e,{stat:!0,pattern:t});function i(){this._pending--,this._maybeFinalize()}function n(o){this.emit("error",o)}function s(o){a.pause();var l=Object.assign({},r);l.callback=a.resume.bind(a),l.stats=o.stat,l.name=o.relative,this._append(o.absolute,l)}var a=N0(e.cwd||".",e);return a.on("error",n.bind(this)),a.on("match",s.bind(this)),a.on("end",i.bind(this)),this};ct.prototype.finalize=function(){if(this._state.aborted){var t=new It("ABORTED");return this.emit("error",t),Promise.reject(t)}if(this._state.finalize){var e=new It("FINALIZING");return this.emit("error",e),Promise.reject(e)}this._state.finalize=!0,this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize();var r=this;return new Promise(function(i,n){var s;r._module.on("end",function(){s||i()}),r._module.on("error",function(a){s=!0,n(a)})})};ct.prototype.setFormat=function(t){return this._format?(this.emit("error",new It("FORMATSET")),this):(this._format=t,this)};ct.prototype.setModule=function(t){return this._state.aborted?(this.emit("error",new It("ABORTED")),this):this._state.module?(this.emit("error",new It("MODULESET")),this):(this._module=t,this._modulePipe(),this)};ct.prototype.symlink=function(t,e,r){if(this._state.finalize||this._state.aborted)return this.emit("error",new It("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new It("SYMLINKFILEPATHREQUIRED")),this;if(typeof e!="string"||e.length===0)return this.emit("error",new It("SYMLINKTARGETREQUIRED",{filepath:t})),this;if(!this._moduleSupports("symlink"))return this.emit("error",new It("SYMLINKNOTSUPPORTED",{filepath:t})),this;var i={};return i.type="symlink",i.name=t.replace(/\\/g,"/"),i.linkname=e.replace(/\\/g,"/"),i.sourceType="buffer",typeof r=="number"&&(i.mode=r),this._entriesCount++,this._queue.push({data:i,source:Buffer.concat([])}),this};ct.prototype.pointer=function(){return this._pointer};ct.prototype.use=function(t){return this._streams.push(t),this};var rI=ct,I0={exports:{}},L0={exports:{}},_h=L0.exports=function(){};_h.prototype.getName=function(){};_h.prototype.getSize=function(){};_h.prototype.getLastModifiedDate=function(){};_h.prototype.isDirectory=function(){};var j0=L0.exports,M0={exports:{}},B0={exports:{}},W0={exports:{}},ui=W0.exports={};ui.dateToDos=function(t,e){e=e||!1;var r=e?t.getFullYear():t.getUTCFullYear();if(r<1980)return 2162688;if(r>=2044)return 2141175677;var i={year:r,month:e?t.getMonth():t.getUTCMonth(),date:e?t.getDate():t.getUTCDate(),hours:e?t.getHours():t.getUTCHours(),minutes:e?t.getMinutes():t.getUTCMinutes(),seconds:e?t.getSeconds():t.getUTCSeconds()};return i.year-1980<<25|i.month+1<<21|i.date<<16|i.hours<<11|i.minutes<<5|i.seconds/2};ui.dosToDate=function(t){return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(t&31)<<1)};ui.fromDosTime=function(t){return ui.dosToDate(t.readUInt32LE(0))};ui.getEightBytes=function(t){var e=Buffer.alloc(8);return e.writeUInt32LE(t%4294967296,0),e.writeUInt32LE(t/4294967296|0,4),e};ui.getShortBytes=function(t){var e=Buffer.alloc(2);return e.writeUInt16LE((t&65535)>>>0,0),e};ui.getShortBytesValue=function(t,e){return t.readUInt16LE(e)};ui.getLongBytes=function(t){var e=Buffer.alloc(4);return e.writeUInt32LE((t&4294967295)>>>0,0),e};ui.getLongBytesValue=function(t,e){return t.readUInt32LE(e)};ui.toDosTime=function(t){return ui.getLongBytes(ui.dateToDos(t))};var am=W0.exports,U0=am,z0=8,G0=1,iI=4,nI=2,H0=64,V0=2048,cr=B0.exports=function(){return this instanceof cr?(this.descriptor=!1,this.encryption=!1,this.utf8=!1,this.numberOfShannonFanoTrees=0,this.strongEncryption=!1,this.slidingDictionarySize=0,this):new cr};cr.prototype.encode=function(){return U0.getShortBytes((this.descriptor?z0:0)|(this.utf8?V0:0)|(this.encryption?G0:0)|(this.strongEncryption?H0:0))};cr.prototype.parse=function(t,e){var r=U0.getShortBytesValue(t,e),i=new cr;return i.useDataDescriptor((r&z0)!==0),i.useUTF8ForNames((r&V0)!==0),i.useStrongEncryption((r&H0)!==0),i.useEncryption((r&G0)!==0),i.setSlidingDictionarySize(r&nI?8192:4096),i.setNumberOfShannonFanoTrees(r&iI?3:2),i};cr.prototype.setNumberOfShannonFanoTrees=function(t){this.numberOfShannonFanoTrees=t};cr.prototype.getNumberOfShannonFanoTrees=function(){return this.numberOfShannonFanoTrees};cr.prototype.setSlidingDictionarySize=function(t){this.slidingDictionarySize=t};cr.prototype.getSlidingDictionarySize=function(){return this.slidingDictionarySize};cr.prototype.useDataDescriptor=function(t){this.descriptor=t};cr.prototype.usesDataDescriptor=function(){return this.descriptor};cr.prototype.useEncryption=function(t){this.encryption=t};cr.prototype.usesEncryption=function(){return this.encryption};cr.prototype.useStrongEncryption=function(t){this.strongEncryption=t};cr.prototype.usesStrongEncryption=function(){return this.strongEncryption};cr.prototype.useUTF8ForNames=function(t){this.utf8=t};cr.prototype.usesUTF8ForNames=function(){return this.utf8};var sI=B0.exports,aI={FILE_TYPE_FLAG:61440,LINK_FLAG:40960},q0={EMPTY:Buffer.alloc(0),SHORT_MASK:65535,SHORT_SHIFT:16,SHORT_ZERO:Buffer.from(Array(2)),LONG_ZERO:Buffer.from(Array(4)),MIN_VERSION_INITIAL:10,MIN_VERSION_DATA_DESCRIPTOR:20,MIN_VERSION_ZIP64:45,VERSION_MADEBY:45,METHOD_STORED:0,METHOD_DEFLATED:8,PLATFORM_UNIX:3,PLATFORM_FAT:0,SIG_LFH:67324752,SIG_DD:134695760,SIG_CFH:33639248,SIG_EOCD:101010256,SIG_ZIP64_EOCD:101075792,SIG_ZIP64_EOCD_LOC:117853008,ZIP64_MAGIC_SHORT:65535,ZIP64_MAGIC:4294967295,ZIP64_EXTRA_ID:1,ZLIB_BEST_SPEED:1,MODE_MASK:4095,S_IFDIR:16384,S_IFREG:32768,S_DOS_A:32,S_DOS_D:16},oI=Li.inherits,lI=Qw,Y0=j0,K0=sI,Ly=aI,Rr=q0,Z0=am,et=M0.exports=function(t){if(!(this instanceof et))return new et(t);Y0.call(this),this.platform=Rr.PLATFORM_FAT,this.method=-1,this.name=null,this.size=0,this.csize=0,this.gpb=new K0,this.crc=0,this.time=-1,this.minver=Rr.MIN_VERSION_INITIAL,this.mode=-1,this.extra=null,this.exattr=0,this.inattr=0,this.comment=null,t&&this.setName(t)};oI(et,Y0);et.prototype.getCentralDirectoryExtra=function(){return this.getExtra()};et.prototype.getComment=function(){return this.comment!==null?this.comment:""};et.prototype.getCompressedSize=function(){return this.csize};et.prototype.getCrc=function(){return this.crc};et.prototype.getExternalAttributes=function(){return this.exattr};et.prototype.getExtra=function(){return this.extra!==null?this.extra:Rr.EMPTY};et.prototype.getGeneralPurposeBit=function(){return this.gpb};et.prototype.getInternalAttributes=function(){return this.inattr};et.prototype.getLastModifiedDate=function(){return this.getTime()};et.prototype.getLocalFileDataExtra=function(){return this.getExtra()};et.prototype.getMethod=function(){return this.method};et.prototype.getName=function(){return this.name};et.prototype.getPlatform=function(){return this.platform};et.prototype.getSize=function(){return this.size};et.prototype.getTime=function(){return this.time!==-1?Z0.dosToDate(this.time):-1};et.prototype.getTimeDos=function(){return this.time!==-1?this.time:0};et.prototype.getUnixMode=function(){return this.platform!==Rr.PLATFORM_UNIX?0:this.getExternalAttributes()>>Rr.SHORT_SHIFT&Rr.SHORT_MASK};et.prototype.getVersionNeededToExtract=function(){return this.minver};et.prototype.setComment=function(t){Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.comment=t};et.prototype.setCompressedSize=function(t){if(t<0)throw new Error("invalid entry compressed size");this.csize=t};et.prototype.setCrc=function(t){if(t<0)throw new Error("invalid entry crc32");this.crc=t};et.prototype.setExternalAttributes=function(t){this.exattr=t>>>0};et.prototype.setExtra=function(t){this.extra=t};et.prototype.setGeneralPurposeBit=function(t){if(!(t instanceof K0))throw new Error("invalid entry GeneralPurposeBit");this.gpb=t};et.prototype.setInternalAttributes=function(t){this.inattr=t};et.prototype.setMethod=function(t){if(t<0)throw new Error("invalid entry compression method");this.method=t};et.prototype.setName=function(t,e=!1){t=lI(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,""),e&&(t=`/${t}`),Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.name=t};et.prototype.setPlatform=function(t){this.platform=t};et.prototype.setSize=function(t){if(t<0)throw new Error("invalid entry size");this.size=t};et.prototype.setTime=function(t,e){if(!(t instanceof Date))throw new Error("invalid entry time");this.time=Z0.dateToDos(t,e)};et.prototype.setUnixMode=function(t){t|=this.isDirectory()?Rr.S_IFDIR:Rr.S_IFREG;var e=0;e|=t<<Rr.SHORT_SHIFT|(this.isDirectory()?Rr.S_DOS_D:Rr.S_DOS_A),this.setExternalAttributes(e),this.mode=t&Rr.MODE_MASK,this.platform=Rr.PLATFORM_UNIX};et.prototype.setVersionNeededToExtract=function(t){this.minver=t};et.prototype.isDirectory=function(){return this.getName().slice(-1)==="/"};et.prototype.isUnixSymlink=function(){return(this.getUnixMode()&Ly.FILE_TYPE_FLAG)===Ly.LINK_FLAG};et.prototype.isZip64=function(){return this.csize>Rr.ZIP64_MAGIC||this.size>Rr.ZIP64_MAGIC};var cI=M0.exports,Q0={exports:{}},X0={exports:{}};wg.Stream;var uI=rl.PassThrough,fI=Fg,hI=X0.exports={};hI.normalizeInputSource=function(t){if(t===null)return Buffer.alloc(0);if(typeof t=="string")return Buffer.from(t);if(fI(t)&&!t._readableState){var e=new uI;return t.pipe(e),e}return t};var dI=X0.exports,pI=Li.inherits,gI=Fg,om=rl.Transform,mI=j0,vI=dI,Qr=Q0.exports=function(t){if(!(this instanceof Qr))return new Qr(t);om.call(this,t),this.offset=0,this._archive={finish:!1,finished:!1,processing:!1}};pI(Qr,om);Qr.prototype._appendBuffer=function(t,e,r){};Qr.prototype._appendStream=function(t,e,r){};Qr.prototype._emitErrorCallback=function(t){t&&this.emit("error",t)};Qr.prototype._finish=function(t){};Qr.prototype._normalizeEntry=function(t){};Qr.prototype._transform=function(t,e,r){r(null,t)};Qr.prototype.entry=function(t,e,r){if(e=e||null,typeof r!="function"&&(r=this._emitErrorCallback.bind(this)),!(t instanceof mI)){r(new Error("not a valid instance of ArchiveEntry"));return}if(this._archive.finish||this._archive.finished){r(new Error("unacceptable entry after finish"));return}if(this._archive.processing){r(new Error("already processing an entry"));return}if(this._archive.processing=!0,this._normalizeEntry(t),this._entry=t,e=vI.normalizeInputSource(e),Buffer.isBuffer(e))this._appendBuffer(t,e,r);else if(gI(e))this._appendStream(t,e,r);else{this._archive.processing=!1,r(new Error("input source must be valid Stream or Buffer instance"));return}return this};Qr.prototype.finish=function(){if(this._archive.processing){this._archive.finish=!0;return}this._finish()};Qr.prototype.getBytesWritten=function(){return this.offset};Qr.prototype.write=function(t,e){return t&&(this.offset+=t.length),om.prototype.write.call(this,t,e)};var yI=Q0.exports,J0={exports:{}},Sh={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */(function(t){(function(e){e(typeof DO_NOT_EXPORT_CRC>"u"?t:{})})(function(e){e.version="1.2.2";function r(){for(var S=0,G=new Array(256),q=0;q!=256;++q)S=q,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,G[q]=S;return typeof Int32Array<"u"?new Int32Array(G):G}var i=r();function n(S){var G=0,q=0,te=0,X=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(te=0;te!=256;++te)X[te]=S[te];for(te=0;te!=256;++te)for(q=S[te],G=256+te;G<4096;G+=256)q=X[G]=q>>>8^S[q&255];var M=[];for(te=1;te!=16;++te)M[te-1]=typeof Int32Array<"u"?X.subarray(te*256,te*256+256):X.slice(te*256,te*256+256);return M}var s=n(i),a=s[0],o=s[1],l=s[2],c=s[3],u=s[4],f=s[5],d=s[6],p=s[7],g=s[8],m=s[9],w=s[10],v=s[11],y=s[12],b=s[13],T=s[14];function L(S,G){for(var q=G^-1,te=0,X=S.length;te<X;)q=q>>>8^i[(q^S.charCodeAt(te++))&255];return~q}function H(S,G){for(var q=G^-1,te=S.length-15,X=0;X<te;)q=T[S[X++]^q&255]^b[S[X++]^q>>8&255]^y[S[X++]^q>>16&255]^v[S[X++]^q>>>24]^w[S[X++]]^m[S[X++]]^g[S[X++]]^p[S[X++]]^d[S[X++]]^f[S[X++]]^u[S[X++]]^c[S[X++]]^l[S[X++]]^o[S[X++]]^a[S[X++]]^i[S[X++]];for(te+=15;X<te;)q=q>>>8^i[(q^S[X++])&255];return~q}function B(S,G){for(var q=G^-1,te=0,X=S.length,M=0,ve=0;te<X;)M=S.charCodeAt(te++),M<128?q=q>>>8^i[(q^M)&255]:M<2048?(q=q>>>8^i[(q^(192|M>>6&31))&255],q=q>>>8^i[(q^(128|M&63))&255]):M>=55296&&M<57344?(M=(M&1023)+64,ve=S.charCodeAt(te++)&1023,q=q>>>8^i[(q^(240|M>>8&7))&255],q=q>>>8^i[(q^(128|M>>2&63))&255],q=q>>>8^i[(q^(128|ve>>6&15|(M&3)<<4))&255],q=q>>>8^i[(q^(128|ve&63))&255]):(q=q>>>8^i[(q^(224|M>>12&15))&255],q=q>>>8^i[(q^(128|M>>6&63))&255],q=q>>>8^i[(q^(128|M&63))&255]);return~q}e.table=i,e.bstr=L,e.buf=H,e.str=B})})(Sh);const{Transform:bI}=rl,wI=Sh;let _I=class extends bI{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0}_transform(e,r,i){e&&(this.checksum=wI.buf(e,this.checksum)>>>0,this.rawSize+=e.length),i(null,e)}digest(e){const r=Buffer.allocUnsafe(4);return r.writeUInt32BE(this.checksum>>>0,0),e?r.toString(e):r}hex(){return this.digest("hex").toUpperCase()}size(){return this.rawSize}};var SI=_I;const{DeflateRaw:EI}=$b,xI=Sh;let TI=class extends EI{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0,this.compressedSize=0}push(e,r){return e&&(this.compressedSize+=e.length),super.push(e,r)}_transform(e,r,i){e&&(this.checksum=xI.buf(e,this.checksum)>>>0,this.rawSize+=e.length),super._transform(e,r,i)}digest(e){const r=Buffer.allocUnsafe(4);return r.writeUInt32BE(this.checksum>>>0,0),e?r.toString(e):r}hex(){return this.digest("hex").toUpperCase()}size(e=!1){return e?this.compressedSize:this.rawSize}};var AI=TI,eS={CRC32Stream:SI,DeflateCRC32Stream:AI},$I=Li.inherits,RI=Sh,{CRC32Stream:CI}=eS,{DeflateCRC32Stream:DI}=eS,tS=yI,Ye=q0,Oe=am,rr=J0.exports=function(t){if(!(this instanceof rr))return new rr(t);t=this.options=this._defaults(t),tS.call(this,t),this._entry=null,this._entries=[],this._archive={centralLength:0,centralOffset:0,comment:"",finish:!1,finished:!1,processing:!1,forceZip64:t.forceZip64,forceLocalTime:t.forceLocalTime}};$I(rr,tS);rr.prototype._afterAppend=function(t){this._entries.push(t),t.getGeneralPurposeBit().usesDataDescriptor()&&this._writeDataDescriptor(t),this._archive.processing=!1,this._entry=null,this._archive.finish&&!this._archive.finished&&this._finish()};rr.prototype._appendBuffer=function(t,e,r){e.length===0&&t.setMethod(Ye.METHOD_STORED);var i=t.getMethod();if(i===Ye.METHOD_STORED&&(t.setSize(e.length),t.setCompressedSize(e.length),t.setCrc(RI.buf(e)>>>0)),this._writeLocalFileHeader(t),i===Ye.METHOD_STORED){this.write(e),this._afterAppend(t),r(null,t);return}else if(i===Ye.METHOD_DEFLATED){this._smartStream(t,r).end(e);return}else{r(new Error("compression method "+i+" not implemented"));return}};rr.prototype._appendStream=function(t,e,r){t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(Ye.MIN_VERSION_DATA_DESCRIPTOR),this._writeLocalFileHeader(t);var i=this._smartStream(t,r);e.once("error",function(n){i.emit("error",n),i.end()}),e.pipe(i)};rr.prototype._defaults=function(t){return typeof t!="object"&&(t={}),typeof t.zlib!="object"&&(t.zlib={}),typeof t.zlib.level!="number"&&(t.zlib.level=Ye.ZLIB_BEST_SPEED),t.forceZip64=!!t.forceZip64,t.forceLocalTime=!!t.forceLocalTime,t};rr.prototype._finish=function(){this._archive.centralOffset=this.offset,this._entries.forEach((function(t){this._writeCentralFileHeader(t)}).bind(this)),this._archive.centralLength=this.offset-this._archive.centralOffset,this.isZip64()&&this._writeCentralDirectoryZip64(),this._writeCentralDirectoryEnd(),this._archive.processing=!1,this._archive.finish=!0,this._archive.finished=!0,this.end()};rr.prototype._normalizeEntry=function(t){t.getMethod()===-1&&t.setMethod(Ye.METHOD_DEFLATED),t.getMethod()===Ye.METHOD_DEFLATED&&(t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(Ye.MIN_VERSION_DATA_DESCRIPTOR)),t.getTime()===-1&&t.setTime(new Date,this._archive.forceLocalTime),t._offsets={file:0,data:0,contents:0}};rr.prototype._smartStream=function(t,e){var r=t.getMethod()===Ye.METHOD_DEFLATED,i=r?new DI(this.options.zlib):new CI,n=null;function s(){var a=i.digest().readUInt32BE(0);t.setCrc(a),t.setSize(i.size()),t.setCompressedSize(i.size(!0)),this._afterAppend(t),e(n,t)}return i.once("end",s.bind(this)),i.once("error",function(a){n=a}),i.pipe(this,{end:!1}),i};rr.prototype._writeCentralDirectoryEnd=function(){var t=this._entries.length,e=this._archive.centralLength,r=this._archive.centralOffset;this.isZip64()&&(t=Ye.ZIP64_MAGIC_SHORT,e=Ye.ZIP64_MAGIC,r=Ye.ZIP64_MAGIC),this.write(Oe.getLongBytes(Ye.SIG_EOCD)),this.write(Ye.SHORT_ZERO),this.write(Ye.SHORT_ZERO),this.write(Oe.getShortBytes(t)),this.write(Oe.getShortBytes(t)),this.write(Oe.getLongBytes(e)),this.write(Oe.getLongBytes(r));var i=this.getComment(),n=Buffer.byteLength(i);this.write(Oe.getShortBytes(n)),this.write(i)};rr.prototype._writeCentralDirectoryZip64=function(){this.write(Oe.getLongBytes(Ye.SIG_ZIP64_EOCD)),this.write(Oe.getEightBytes(44)),this.write(Oe.getShortBytes(Ye.MIN_VERSION_ZIP64)),this.write(Oe.getShortBytes(Ye.MIN_VERSION_ZIP64)),this.write(Ye.LONG_ZERO),this.write(Ye.LONG_ZERO),this.write(Oe.getEightBytes(this._entries.length)),this.write(Oe.getEightBytes(this._entries.length)),this.write(Oe.getEightBytes(this._archive.centralLength)),this.write(Oe.getEightBytes(this._archive.centralOffset)),this.write(Oe.getLongBytes(Ye.SIG_ZIP64_EOCD_LOC)),this.write(Ye.LONG_ZERO),this.write(Oe.getEightBytes(this._archive.centralOffset+this._archive.centralLength)),this.write(Oe.getLongBytes(1))};rr.prototype._writeCentralFileHeader=function(t){var e=t.getGeneralPurposeBit(),r=t.getMethod(),i=t._offsets.file,n=t.getSize(),s=t.getCompressedSize();if(t.isZip64()||i>Ye.ZIP64_MAGIC){n=Ye.ZIP64_MAGIC,s=Ye.ZIP64_MAGIC,i=Ye.ZIP64_MAGIC,t.setVersionNeededToExtract(Ye.MIN_VERSION_ZIP64);var a=Buffer.concat([Oe.getShortBytes(Ye.ZIP64_EXTRA_ID),Oe.getShortBytes(24),Oe.getEightBytes(t.getSize()),Oe.getEightBytes(t.getCompressedSize()),Oe.getEightBytes(t._offsets.file)],28);t.setExtra(a)}this.write(Oe.getLongBytes(Ye.SIG_CFH)),this.write(Oe.getShortBytes(t.getPlatform()<<8|Ye.VERSION_MADEBY)),this.write(Oe.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(Oe.getShortBytes(r)),this.write(Oe.getLongBytes(t.getTimeDos())),this.write(Oe.getLongBytes(t.getCrc())),this.write(Oe.getLongBytes(s)),this.write(Oe.getLongBytes(n));var o=t.getName(),l=t.getComment(),c=t.getCentralDirectoryExtra();e.usesUTF8ForNames()&&(o=Buffer.from(o),l=Buffer.from(l)),this.write(Oe.getShortBytes(o.length)),this.write(Oe.getShortBytes(c.length)),this.write(Oe.getShortBytes(l.length)),this.write(Ye.SHORT_ZERO),this.write(Oe.getShortBytes(t.getInternalAttributes())),this.write(Oe.getLongBytes(t.getExternalAttributes())),this.write(Oe.getLongBytes(i)),this.write(o),this.write(c),this.write(l)};rr.prototype._writeDataDescriptor=function(t){this.write(Oe.getLongBytes(Ye.SIG_DD)),this.write(Oe.getLongBytes(t.getCrc())),t.isZip64()?(this.write(Oe.getEightBytes(t.getCompressedSize())),this.write(Oe.getEightBytes(t.getSize()))):(this.write(Oe.getLongBytes(t.getCompressedSize())),this.write(Oe.getLongBytes(t.getSize())))};rr.prototype._writeLocalFileHeader=function(t){var e=t.getGeneralPurposeBit(),r=t.getMethod(),i=t.getName(),n=t.getLocalFileDataExtra();t.isZip64()&&(e.useDataDescriptor(!0),t.setVersionNeededToExtract(Ye.MIN_VERSION_ZIP64)),e.usesUTF8ForNames()&&(i=Buffer.from(i)),t._offsets.file=this.offset,this.write(Oe.getLongBytes(Ye.SIG_LFH)),this.write(Oe.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(Oe.getShortBytes(r)),this.write(Oe.getLongBytes(t.getTimeDos())),t._offsets.data=this.offset,e.usesDataDescriptor()?(this.write(Ye.LONG_ZERO),this.write(Ye.LONG_ZERO),this.write(Ye.LONG_ZERO)):(this.write(Oe.getLongBytes(t.getCrc())),this.write(Oe.getLongBytes(t.getCompressedSize())),this.write(Oe.getLongBytes(t.getSize()))),this.write(Oe.getShortBytes(i.length)),this.write(Oe.getShortBytes(n.length)),this.write(i),this.write(n),t._offsets.contents=this.offset};rr.prototype.getComment=function(t){return this._archive.comment!==null?this._archive.comment:""};rr.prototype.isZip64=function(){return this._archive.forceZip64||this._entries.length>Ye.ZIP64_MAGIC_SHORT||this._archive.centralLength>Ye.ZIP64_MAGIC||this._archive.centralOffset>Ye.ZIP64_MAGIC};rr.prototype.setComment=function(t){this._archive.comment=t};var PI=J0.exports,rS={ZipArchiveEntry:cI,ZipArchiveOutputStream:PI};/**
 * ZipStream
 *
 * @ignore
 * @license [MIT]{@link https://github.com/archiverjs/node-zip-stream/blob/master/LICENSE}
 * @copyright (c) 2014 Chris Talkington, contributors.
 */var OI=Li.inherits,lm=rS.ZipArchiveOutputStream,kI=rS.ZipArchiveEntry,Md=qc,Ho=I0.exports=function(t){if(!(this instanceof Ho))return new Ho(t);t=this.options=t||{},t.zlib=t.zlib||{},lm.call(this,t),typeof t.level=="number"&&t.level>=0&&(t.zlib.level=t.level,delete t.level),!t.forceZip64&&typeof t.zlib.level=="number"&&t.zlib.level===0&&(t.store=!0),t.namePrependSlash=t.namePrependSlash||!1,t.comment&&t.comment.length>0&&this.setComment(t.comment)};OI(Ho,lm);Ho.prototype._normalizeFileData=function(t){t=Md.defaults(t,{type:"file",name:null,namePrependSlash:this.options.namePrependSlash,linkname:null,date:null,mode:null,store:this.options.store,comment:""});var e=t.type==="directory",r=t.type==="symlink";return t.name&&(t.name=Md.sanitizePath(t.name),!r&&t.name.slice(-1)==="/"?(e=!0,t.type="directory"):e&&(t.name+="/")),(e||r)&&(t.store=!0),t.date=Md.dateify(t.date),t};Ho.prototype.entry=function(t,e,r){if(typeof r!="function"&&(r=this._emitErrorCallback.bind(this)),e=this._normalizeFileData(e),e.type!=="file"&&e.type!=="directory"&&e.type!=="symlink"){r(new Error(e.type+" entries not currently supported"));return}if(typeof e.name!="string"||e.name.length===0){r(new Error("entry name must be a non-empty string value"));return}if(e.type==="symlink"&&typeof e.linkname!="string"){r(new Error("entry linkname must be a non-empty string value when type equals symlink"));return}var i=new kI(e.name);return i.setTime(e.date,this.options.forceLocalTime),e.namePrependSlash&&i.setName(e.name,!0),e.store&&i.setMethod(0),e.comment.length>0&&i.setComment(e.comment),e.type==="symlink"&&typeof e.mode!="number"&&(e.mode=40960),typeof e.mode=="number"&&(e.type==="symlink"&&(e.mode|=40960),i.setUnixMode(e.mode)),e.type==="symlink"&&typeof e.linkname=="string"&&(t=Buffer.from(e.linkname)),lm.prototype.entry.call(this,i,t,r)};Ho.prototype.finalize=function(){this.finish()};var NI=I0.exports;/**
 * ZIP Format Plugin
 *
 * @module plugins/zip
 * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
 * @copyright (c) 2012-2014 Chris Talkington, contributors.
 */var FI=NI,II=qc,Ns=function(t){if(!(this instanceof Ns))return new Ns(t);t=this.options=II.defaults(t,{comment:"",forceUTC:!1,namePrependSlash:!1,store:!1}),this.supports={directory:!0,symlink:!0},this.engine=new FI(t)};Ns.prototype.append=function(t,e,r){this.engine.entry(t,e,r)};Ns.prototype.finalize=function(){this.engine.finalize()};Ns.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};Ns.prototype.pipe=function(){return this.engine.pipe.apply(this.engine,arguments)};Ns.prototype.unpipe=function(){return this.engine.unpipe.apply(this.engine,arguments)};var LI=Ns,cm={},jI=js,MI=class{constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}};const jy=MI;var iS=class{constructor(e){this.hwm=e||16,this.head=new jy(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){const r=this.head;this.head=r.next=new jy(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;const e=this.tail.shift();if(e===void 0&&this.tail.next){const r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}peek(){const e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}},nS=class{constructor(e){this.decoder=new TextDecoder(e==="utf16le"?"utf16-le":e)}get remaining(){return-1}decode(e){return this.decoder.decode(e,{stream:!0})}flush(){return this.decoder.decode(new Uint8Array(0))}};const BI=nS,WI=nS;var UI=class{constructor(e="utf8"){switch(this.encoding=zI(e),this.encoding){case"utf8":this.decoder=new WI;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new BI(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let r="";return e&&(r=this.push(e)),r+=this.decoder.flush(),r}};function zI(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}const{EventEmitter:GI}=jI,Eh=new Error("Stream was destroyed"),sS=iS,HI=UI,Wp=typeof queueMicrotask>"u"?t=>Ct.process.nextTick(t):queueMicrotask,Ot=(1<<29)-1,Us=1,um=2,$a=4,Xl=8,aS=Ot^Us,VI=Ot^um,Yc=16,bo=32,al=64,Ds=128,Kc=256,fm=512,Ra=1024,Up=2048,hm=4096,dm=8192,Ni=16384,Es=32768,xh=65536,Ca=131072,oS=Kc|fm,qI=Yc|xh,YI=al|Yc,KI=hm|Ds,pm=Kc|Ca,ZI=Ot^Yc,QI=Ot^al,XI=Ot^(al|xh),My=Ot^xh,JI=Ot^Kc,eL=Ot^(Ds|dm),tL=Ot^Ra,By=Ot^oS,lS=Ot^Es,rL=Ot^bo,cS=Ot^Ca,iL=Ot^pm,Hn=1<<18,Vo=2<<18,Zc=4<<18,Da=8<<18,Qc=16<<18,zs=32<<18,zp=64<<18,wo=128<<18,gm=256<<18,Pa=512<<18,Th=1024<<18,nL=Ot^(Hn|gm),uS=Ot^Zc,sL=Ot^(Hn|Pa),aL=Ot^Qc,oL=Ot^Da,fS=Ot^wo,lL=Ot^Vo,hS=Ot^Th,Jl=Yc|Hn,dS=Ot^Jl,mm=Ni|zs,dn=$a|Xl|um,Jr=dn|Us,pS=dn|mm,cL=uS&QI,vm=wo|Es,uL=vm&dS,gS=Jr|uL,fL=Jr|Ra|Ni,Wy=Jr|Ni|Ds,hL=Jr|Ra|Ds,dL=Jr|hm|Ds|dm,pL=Jr|Yc|Ra|Ni|xh|Ca,gL=dn|Ra|Ni,mL=bo|Jr|Es|al,vL=Es|Us,yL=Jr|Pa|zs,bL=Da|Qc,mS=Da|Hn,wL=Da|Qc|Jr|Hn,Uy=Jr|Hn|Da|Th,_L=Zc|Hn,SL=Hn|gm,EL=Jr|Pa|mS|zs,xL=Qc|dn|Pa|zs,TL=Vo|Jr|wo|Zc,AL=Pa|zs|dn,_u=Symbol.asyncIterator||Symbol("asyncIterator");class vS{constructor(e,{highWaterMark:r=16384,map:i=null,mapWritable:n,byteLength:s,byteLengthWritable:a}={}){this.stream=e,this.queue=new sS,this.highWaterMark=r,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=a||s||xS,this.map=n||i,this.afterWrite=PL.bind(this),this.afterUpdateNextTick=NL.bind(this)}get ended(){return(this.stream._duplexState&zs)!==0}push(e){return this.stream._duplexState&AL?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=Da,!0):(this.stream._duplexState|=bL,!1))}shift(){const e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=oL),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|Pa)&uS}autoBatch(e,r){const i=[],n=this.stream;for(i.push(e);(n._duplexState&Uy)===mS;)i.push(n._writableState.shift());if(n._duplexState&Jr)return r(null);n._writev(i,r)}update(){const e=this.stream;e._duplexState|=Vo;do{for(;(e._duplexState&Uy)===Da;){const r=this.shift();e._duplexState|=SL,e._write(r,this.afterWrite)}e._duplexState&_L||this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=lL}updateNonPrimary(){const e=this.stream;if((e._duplexState&EL)===Pa){e._duplexState=e._duplexState|Hn,e._final(DL.bind(this));return}if((e._duplexState&dn)===$a){e._duplexState&vm||(e._duplexState|=Jl,e._destroy(yS.bind(this)));return}(e._duplexState&gS)===Us&&(e._duplexState=(e._duplexState|Jl)&aS,e._open(bS.bind(this)))}continueUpdate(){return this.stream._duplexState&wo?(this.stream._duplexState&=fS,!0):!1}updateCallback(){(this.stream._duplexState&TL)===Zc?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&wo||(this.stream._duplexState|=wo,this.stream._duplexState&Vo||Wp(this.afterUpdateNextTick))}}class $L{constructor(e,{highWaterMark:r=16384,map:i=null,mapReadable:n,byteLength:s,byteLengthReadable:a}={}){this.stream=e,this.queue=new sS,this.highWaterMark=r===0?1:r,this.buffered=0,this.readAhead=r>0,this.error=null,this.pipeline=null,this.byteLength=a||s||xS,this.map=n||i,this.pipeTo=null,this.afterRead=OL.bind(this),this.afterUpdateNextTick=kL.bind(this)}get ended(){return(this.stream._duplexState&Ni)!==0}pipe(e,r){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof r!="function"&&(r=null),this.stream._duplexState|=fm,this.pipeTo=e,this.pipeline=new RL(this.stream,e,r),r&&this.stream.on("error",zy),ES(e))e._writableState.pipeline=this.pipeline,r&&e.on("error",zy),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{const i=this.pipeline.done.bind(this.pipeline,e),n=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",i),e.on("close",n),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",CL.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){const r=this.stream;return e===null?(this.highWaterMark=0,r._duplexState=(r._duplexState|Ra)&XI,!1):this.map!==null&&(e=this.map(e),e===null)?(r._duplexState&=My,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),r._duplexState=(r._duplexState|Ds)&My,this.buffered<this.highWaterMark)}shift(){const e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=eL),e}unshift(e){const r=[this.map!==null?this.map(e):e];for(;this.buffered>0;)r.push(this.shift());for(let i=0;i<r.length-1;i++){const n=r[i];this.buffered+=this.byteLength(n),this.queue.push(n)}this.push(r[r.length-1])}read(){const e=this.stream;if((e._duplexState&Wy)===Ds){const r=this.shift();return this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=By),e._duplexState&Up&&e.emit("data",r),r}return this.readAhead===!1&&(e._duplexState|=Ca,this.updateNextTick()),null}drain(){const e=this.stream;for(;(e._duplexState&Wy)===Ds&&e._duplexState&oS;){const r=this.shift();this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=By),e._duplexState&Up&&e.emit("data",r)}}update(){const e=this.stream;e._duplexState|=bo;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&pL)===Ca;)e._duplexState|=qI,e._read(this.afterRead),this.drain();(e._duplexState&dL)===KI&&(e._duplexState|=dm,e.emit("readable")),e._duplexState&YI||this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=rL}updateNonPrimary(){const e=this.stream;if((e._duplexState&hL)===Ra&&(e._duplexState=(e._duplexState|Ni)&tL,e.emit("end"),(e._duplexState&pS)===mm&&(e._duplexState|=$a),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&dn)===$a){e._duplexState&vm||(e._duplexState|=Jl,e._destroy(yS.bind(this)));return}(e._duplexState&gS)===Us&&(e._duplexState=(e._duplexState|Jl)&aS,e._open(bS.bind(this)))}continueUpdate(){return this.stream._duplexState&Es?(this.stream._duplexState&=lS,!0):!1}updateCallback(){(this.stream._duplexState&mL)===al?this.update():this.updateNextTick()}updateNextTickIfOpen(){this.stream._duplexState&vL||(this.stream._duplexState|=Es,this.stream._duplexState&bo||Wp(this.afterUpdateNextTick))}updateNextTick(){this.stream._duplexState&Es||(this.stream._duplexState|=Es,this.stream._duplexState&bo||Wp(this.afterUpdateNextTick))}}class RL{constructor(e,r,i){this.from=e,this.to=r,this.afterPipe=i,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,r){if(r&&(this.error=r),e===this.to&&(this.to=null,this.from!==null)){(!(this.from._duplexState&Ni)||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){e._duplexState&Ni||this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}}function CL(){this.stream._duplexState|=fm,this.updateCallback()}function DL(t){const e=this.stream;t&&e.destroy(t),e._duplexState&dn||(e._duplexState|=zs,e.emit("finish")),(e._duplexState&pS)===mm&&(e._duplexState|=$a),e._duplexState&=sL,e._duplexState&Vo?this.updateNextTick():this.update()}function yS(t){const e=this.stream;!t&&this.error!==Eh&&(t=this.error),t&&e.emit("error",t),e._duplexState|=Xl,e.emit("close");const r=e._readableState,i=e._writableState;if(r!==null&&r.pipeline!==null&&r.pipeline.done(e,t),i!==null){for(;i.drains!==null&&i.drains.length>0;)i.drains.shift().resolve(!1);i.pipeline!==null&&i.pipeline.done(e,t)}}function PL(t){const e=this.stream;t&&e.destroy(t),e._duplexState&=nL,this.drains!==null&&FL(this.drains),(e._duplexState&wL)===Qc&&(e._duplexState&=aL,(e._duplexState&zp)===zp&&e.emit("drain")),this.updateCallback()}function OL(t){t&&this.stream.destroy(t),this.stream._duplexState&=ZI,this.readAhead===!1&&!(this.stream._duplexState&Kc)&&(this.stream._duplexState&=cS),this.updateCallback()}function kL(){this.stream._duplexState&bo||(this.stream._duplexState&=lS,this.update())}function NL(){this.stream._duplexState&Vo||(this.stream._duplexState&=fS,this.update())}function FL(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function bS(t){const e=this.stream;t&&e.destroy(t),e._duplexState&$a||(e._duplexState&fL||(e._duplexState|=al),e._duplexState&yL||(e._duplexState|=Zc),e.emit("open")),e._duplexState&=dS,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function IL(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=Up|pm,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=hm,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=zp,this._writableState.updateNextTick())}class wS extends GI{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",zL.bind(this))),this.on("newListener",IL)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&Xl)!==0}get destroying(){return(this._duplexState&dn)!==0}destroy(e){this._duplexState&dn||(e||(e=Eh),this._duplexState=(this._duplexState|$a)&cL,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=um,this._predestroy(),this._duplexState&=VI,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}}let _S=class Gp extends wS{constructor(e){super(e),this._duplexState|=Us|zs|Ca,this._readableState=new $L(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=cS),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){const r=new HI(e),i=this._readableState.map||jL;return this._readableState.map=n,this;function n(s){const a=r.push(s);return a===""&&(s.byteLength!==0||r.remaining>0)?null:i(a)}}_read(e){e(null)}pipe(e,r){return this._readableState.updateNextTick(),this._readableState.pipe(e,r),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=pm,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?iL:JI,this}static _fromAsyncIterator(e,r){let i;const n=new Gp({...r,read(a){e.next().then(s).then(a.bind(null,null)).catch(a)},predestroy(){i=e.return()},destroy(a){if(!i)return a(null);i.then(a.bind(null,null)).catch(a)}});return n;function s(a){a.done?n.push(null):n.push(a.value)}}static from(e,r){if(WL(e))return e;if(e[_u])return this._fromAsyncIterator(e[_u](),r);Array.isArray(e)||(e=e===void 0?[]:[e]);let i=0;return new Gp({...r,read(n){this.push(i===e.length?null:e[i++]),n(null)}})}static isBackpressured(e){return(e._duplexState&gL)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&Kc)===0}[_u](){const e=this;let r=null,i=null,n=null;return this.on("error",c=>{r=c}),this.on("readable",s),this.on("close",a),{[_u](){return this},next(){return new Promise(function(c,u){i=c,n=u;const f=e.read();f!==null?o(f):e._duplexState&Xl&&o(null)})},return(){return l(null)},throw(c){return l(c)}};function s(){i!==null&&o(e.read())}function a(){i!==null&&o(null)}function o(c){n!==null&&(r?n(r):c===null&&!(e._duplexState&Ni)?n(Eh):i({value:c,done:c===null}),n=i=null)}function l(c){return e.destroy(c),new Promise((u,f)=>{if(e._duplexState&Xl)return u({value:void 0,done:!0});e.once("close",function(){c?f(c):u({value:void 0,done:!0})})})}}},SS=class extends wS{constructor(e){super(e),this._duplexState|=Us|Ni,this._writableState=new vS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=Th}uncork(){this._duplexState&=hS,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&xL)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);const r=e._writableState,n=(GL(e)?Math.min(1,r.queue.length):r.queue.length)+(e._duplexState&gm?1:0);return n===0?Promise.resolve(!0):(r.drains===null&&(r.drains=[]),new Promise(s=>{r.drains.push({writes:n,resolve:s})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}};class LL extends _S{constructor(e){super(e),this._duplexState=Us|this._duplexState&Ca,this._writableState=new vS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=Th}uncork(){this._duplexState&=hS,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}}function jL(t){return t}function ML(t){return!!t._readableState||!!t._writableState}function ES(t){return typeof t._duplexState=="number"&&ML(t)}function BL(t,e={}){const r=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&r===Eh?null:r}function WL(t){return ES(t)&&t.readable}function UL(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function xS(t){return UL(t)?t.byteLength:1024}function zy(){}function zL(){this.destroy(new Error("Stream aborted."))}function GL(t){return t._writev!==SS.prototype._writev&&t._writev!==LL.prototype._writev}var TS={getStreamError:BL,Writable:SS,Readable:_S},Hp={exports:{}};function HL(t){return t.length}function VL(t){const e=t.byteLength;let r="";for(let i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r}function qL(t,e){const r=t.byteLength;for(let i=0;i<r;i++)t[i]=e.charCodeAt(i);return r}var YL={byteLength:HL,toString:VL,write:qL};const fo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ia=new Uint8Array(256);for(let t=0;t<fo.length;t++)ia[fo.charCodeAt(t)]=t;ia[45]=62;ia[95]=63;function KL(t){let e=t.length;return t.charCodeAt(e-1)===61&&e--,e>1&&t.charCodeAt(e-1)===61&&e--,e*3>>>2}function ZL(t){const e=t.byteLength;let r="";for(let i=0;i<e;i+=3)r+=fo[t[i]>>2]+fo[(t[i]&3)<<4|t[i+1]>>4]+fo[(t[i+1]&15)<<2|t[i+2]>>6]+fo[t[i+2]&63];return e%3===2?r=r.substring(0,r.length-1)+"=":e%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function QL(t,e){const r=t.byteLength;for(let i=0,n=0;n<r;i+=4){const s=ia[e.charCodeAt(i)],a=ia[e.charCodeAt(i+1)],o=ia[e.charCodeAt(i+2)],l=ia[e.charCodeAt(i+3)];t[n++]=s<<2|a>>4,t[n++]=(a&15)<<4|o>>2,t[n++]=(o&3)<<6|l&63}return r}var XL={byteLength:KL,toString:ZL,write:QL};function JL(t){return t.length>>>1}function ej(t){const e=t.byteLength;t=new DataView(t.buffer,t.byteOffset,e);let r="",i=0;for(let n=e-e%4;i<n;i+=4)r+=t.getUint32(i).toString(16).padStart(8,"0");for(;i<e;i++)r+=t.getUint8(i).toString(16).padStart(2,"0");return r}function tj(t,e){const r=t.byteLength;for(let i=0;i<r;i++){const n=Gy(e.charCodeAt(i*2)),s=Gy(e.charCodeAt(i*2+1));if(n===void 0||s===void 0)return t.subarray(0,i);t[i]=n<<4|s}return r}var rj={byteLength:JL,toString:ej,write:tj};function Gy(t){if(t>=48&&t<=57)return t-48;if(t>=65&&t<=70)return t-65+10;if(t>=97&&t<=102)return t-97+10}function ij(t){let e=0;for(let r=0,i=t.length;r<i;r++){const n=t.charCodeAt(r);if(n>=55296&&n<=56319&&r+1<i){const s=t.charCodeAt(r+1);if(s>=56320&&s<=57343){e+=4,r++;continue}}n<=127?e+=1:n<=2047?e+=2:e+=3}return e}let Vp;if(typeof TextDecoder<"u"){const t=new TextDecoder;Vp=function(r){return t.decode(r)}}else Vp=function(e){const r=e.byteLength;let i="",n=0;for(;n<r;){let s=e[n];if(s<=127){i+=String.fromCharCode(s),n++;continue}let a=0,o=0;if(s<=223?(a=1,o=s&31):s<=239?(a=2,o=s&15):s<=244&&(a=3,o=s&7),r-n-a>0){let l=0;for(;l<a;)s=e[n+l+1],o=o<<6|s&63,l+=1}else o=65533,a=r-n;i+=String.fromCodePoint(o),n+=a+1}return i};let qp;if(typeof TextEncoder<"u"){const t=new TextEncoder;qp=function(r,i){return t.encodeInto(i,r).written}}else qp=function(e,r){const i=e.byteLength;let n=0,s=0;for(;n<r.length;){const a=r.codePointAt(n);if(a<=127){e[s++]=a,n++;continue}let o=0,l=0;for(a<=2047?(o=6,l=192):a<=65535?(o=12,l=224):a<=2097151&&(o=18,l=240),e[s++]=l|a>>o,o-=6;o>=0;)e[s++]=128|a>>o&63,o-=6;n+=a>=65536?2:1}return i};var nj={byteLength:ij,toString:Vp,write:qp};function sj(t){return t.length*2}function aj(t){const e=t.byteLength;let r="";for(let i=0;i<e-1;i+=2)r+=String.fromCharCode(t[i]+t[i+1]*256);return r}function oj(t,e){const r=t.byteLength;let i=r;for(let n=0;n<e.length&&!((i-=2)<0);++n){const s=e.charCodeAt(n),a=s>>8,o=s%256;t[n*2]=o,t[n*2+1]=a}return r}var lj={byteLength:sj,toString:aj,write:oj};(function(t,e){const r=YL,i=XL,n=rj,s=nj,a=lj,o=new Uint8Array(Uint16Array.of(255).buffer)[0]===255;function l(x){switch(x){case"ascii":return r;case"base64":return i;case"hex":return n;case"utf8":case"utf-8":case void 0:case null:return s;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a;default:throw new Error(`Unknown encoding '${x}'`)}}function c(x){return x instanceof Uint8Array}function u(x){try{return l(x),!0}catch{return!1}}function f(x,N,z){const ee=new Uint8Array(x);return N!==void 0&&e.fill(ee,N,0,ee.byteLength,z),ee}function d(x){return new Uint8Array(x)}function p(x){return new Uint8Array(x)}function g(x,N){return l(N).byteLength(x)}function m(x,N){if(x===N)return 0;const z=Math.min(x.byteLength,N.byteLength);x=new DataView(x.buffer,x.byteOffset,x.byteLength),N=new DataView(N.buffer,N.byteOffset,N.byteLength);let ee=0;for(let oe=z-z%4;ee<oe;ee+=4){const le=x.getUint32(ee,o),V=N.getUint32(ee,o);if(le!==V)break}for(;ee<z;ee++){const oe=x.getUint8(ee),le=N.getUint8(ee);if(oe<le)return-1;if(oe>le)return 1}return x.byteLength>N.byteLength?1:x.byteLength<N.byteLength?-1:0}function w(x,N){N===void 0&&(N=x.reduce((oe,le)=>oe+le.byteLength,0));const z=new Uint8Array(N);let ee=0;for(const oe of x){if(ee+oe.byteLength>z.byteLength)return z.set(oe.subarray(0,z.byteLength-ee),ee),z;z.set(oe,ee),ee+=oe.byteLength}return z}function v(x,N,z=0,ee=0,oe=x.byteLength){if(z<0&&(z=0),z>=N.byteLength)return 0;const le=N.byteLength-z;if(ee<0&&(ee=0),ee>=x.byteLength||oe<=ee)return 0;oe>x.byteLength&&(oe=x.byteLength),oe-ee>le&&(oe=ee+le);const V=oe-ee;return x===N?N.copyWithin(z,ee,oe):((ee!==0||oe!==x.byteLength)&&(x=x.subarray(ee,oe)),N.set(x,z)),V}function y(x,N){return x===N?!0:x.byteLength!==N.byteLength?!1:m(x,N)===0}function b(x,N,z=0,ee=x.byteLength,oe="utf8"){if(typeof N=="string"?typeof z=="string"?(oe=z,z=0,ee=x.byteLength):typeof ee=="string"&&(oe=ee,ee=x.byteLength):typeof N=="number"?N=N&255:typeof N=="boolean"&&(N=+N),z<0&&(z=0),z>=x.byteLength||ee<=z)return x;if(ee>x.byteLength&&(ee=x.byteLength),typeof N=="number")return x.fill(N,z,ee);typeof N=="string"&&(N=e.from(N,oe));const le=N.byteLength;for(let V=0,he=ee-z;V<he;++V)x[V+z]=N[V%le];return x}function T(x,N,z){return typeof x=="string"?L(x,N):Array.isArray(x)?H(x):ArrayBuffer.isView(x)?B(x):S(x,N,z)}function L(x,N){const z=l(N),ee=new Uint8Array(z.byteLength(x));return z.write(ee,x),ee}function H(x){const N=new Uint8Array(x.length);return N.set(x),N}function B(x){const N=new Uint8Array(x.byteLength);return N.set(x),N}function S(x,N,z){return new Uint8Array(x,N,z)}function G(x,N,z,ee){return q(x,N,z,ee)!==-1}function q(x,N,z,ee){return X(x,N,z,ee,!0)}function te(x,N,z,ee){return X(x,N,z,ee,!1)}function X(x,N,z,ee,oe){if(x.byteLength===0)return-1;if(typeof z=="string"?(ee=z,z=0):z===void 0?z=oe?0:x.length-1:z<0&&(z+=x.byteLength),z>=x.byteLength){if(oe)return-1;z=x.byteLength-1}else if(z<0)if(oe)z=0;else return-1;if(typeof N=="string")N=T(N,ee);else if(typeof N=="number")return N=N&255,oe?x.indexOf(N,z):x.lastIndexOf(N,z);if(N.byteLength===0)return-1;if(oe){let le=-1;for(let V=z;V<x.byteLength;V++)if(x[V]===N[le===-1?0:V-le]){if(le===-1&&(le=V),V-le+1===N.byteLength)return le}else le!==-1&&(V-=V-le),le=-1}else{z+N.byteLength>x.byteLength&&(z=x.byteLength-N.byteLength);for(let le=z;le>=0;le--){let V=!0;for(let he=0;he<N.byteLength;he++)if(x[le+he]!==N[he]){V=!1;break}if(V)return le}}return-1}function M(x,N,z){const ee=x[N];x[N]=x[z],x[z]=ee}function ve(x){const N=x.byteLength;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<N;z+=2)M(x,z,z+1);return x}function ue(x){const N=x.byteLength;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<N;z+=4)M(x,z,z+3),M(x,z+1,z+2);return x}function ye(x){const N=x.byteLength;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<N;z+=8)M(x,z,z+7),M(x,z+1,z+6),M(x,z+2,z+5),M(x,z+3,z+4);return x}function j(x){return x}function I(x,N="utf8",z=0,ee=x.byteLength){return arguments.length===1?s.toString(x):arguments.length===2?l(N).toString(x):(z<0&&(z=0),z>=x.byteLength||ee<=z?"":(ee>x.byteLength&&(ee=x.byteLength),(z!==0||ee!==x.byteLength)&&(x=x.subarray(z,ee)),l(N).toString(x)))}function Y(x,N,z,ee,oe){if(arguments.length===2)return s.write(x,N);typeof z=="string"?(oe=z,z=0,ee=x.byteLength):typeof ee=="string"&&(oe=ee,ee=x.byteLength-z),ee=Math.min(ee,e.byteLength(N,oe));let le=z;if(le<0&&(le=0),le>=x.byteLength)return 0;let V=z+ee;return V<=le?0:(V>x.byteLength&&(V=x.byteLength),(le!==0||V!==x.byteLength)&&(x=x.subarray(le,V)),l(oe).write(x,N))}function de(x,N=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).getFloat64(N,!1)}function Se(x,N=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).getFloat64(N,!0)}function De(x,N=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).getFloat32(N,!1)}function ge(x,N=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).getFloat32(N,!0)}function Ie(x,N=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).getInt32(N,!1)}function nt(x,N=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).getInt32(N,!0)}function st(x,N=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).getUint32(N,!1)}function R(x,N=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).getUint32(N,!0)}function P(x,N,z=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).setFloat64(z,N,!1),z+8}function ae(x,N,z=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).setFloat64(z,N,!0),z+8}function K(x,N,z=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).setFloat32(z,N,!1),z+4}function k(x,N,z=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).setFloat32(z,N,!0),z+4}function F(x,N,z=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).setInt32(z,N,!1),z+4}function E(x,N,z=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).setInt32(z,N,!0),z+4}function $(x,N,z=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).setUint32(z,N,!1),z+4}function U(x,N,z=0){return new DataView(x.buffer,x.byteOffset,x.byteLength).setUint32(z,N,!0),z+4}t.exports=e={isBuffer:c,isEncoding:u,alloc:f,allocUnsafe:d,allocUnsafeSlow:p,byteLength:g,compare:m,concat:w,copy:v,equals:y,fill:b,from:T,includes:G,indexOf:q,lastIndexOf:te,swap16:ve,swap32:ue,swap64:ye,toBuffer:j,toString:I,write:Y,readDoubleBE:de,readDoubleLE:Se,readFloatBE:De,readFloatLE:ge,readInt32BE:Ie,readInt32LE:nt,readUInt32BE:st,readUInt32LE:R,writeDoubleBE:P,writeDoubleLE:ae,writeFloatBE:K,writeFloatLE:k,writeInt32BE:F,writeInt32LE:E,writeUInt32BE:$,writeUInt32LE:U}})(Hp,Hp.exports);var ym=Hp.exports,Ga={};const it=ym,cj="0000000000000000000",uj="7777777777777777777",Af=48,AS=it.from([117,115,116,97,114,0]),fj=it.from([Af,Af]),hj=it.from([117,115,116,97,114,32]),dj=it.from([32,0]),pj=4095,ec=257,Yp=263;Ga.decodeLongPath=function(e,r){return lo(e,0,e.length,r)};Ga.encodePax=function(e){let r="";e.name&&(r+=Bd(" path="+e.name+`
`)),e.linkname&&(r+=Bd(" linkpath="+e.linkname+`
`));const i=e.pax;if(i)for(const n in i)r+=Bd(" "+n+"="+i[n]+`
`);return it.from(r)};Ga.decodePax=function(e){const r={};for(;e.length;){let i=0;for(;i<e.length&&e[i]!==32;)i++;const n=parseInt(it.toString(e.subarray(0,i)),10);if(!n)return r;const s=it.toString(e.subarray(i+1,n-1)),a=s.indexOf("=");if(a===-1)return r;r[s.slice(0,a)]=s.slice(a+1),e=e.subarray(n)}return r};Ga.encode=function(e){const r=it.alloc(512);let i=e.name,n="";if(e.typeflag===5&&i[i.length-1]!=="/"&&(i+="/"),it.byteLength(i)!==i.length)return null;for(;it.byteLength(i)>100;){const s=i.indexOf("/");if(s===-1)return null;n+=n?"/"+i.slice(0,s):i.slice(0,s),i=i.slice(s+1)}return it.byteLength(i)>100||it.byteLength(n)>155||e.linkname&&it.byteLength(e.linkname)>100?null:(it.write(r,i),it.write(r,ls(e.mode&pj,6),100),it.write(r,ls(e.uid,6),108),it.write(r,ls(e.gid,6),116),_j(e.size,r,124),it.write(r,ls(e.mtime.getTime()/1e3|0,11),136),r[156]=Af+bj(e.type),e.linkname&&it.write(r,e.linkname,157),it.copy(AS,r,ec),it.copy(fj,r,Yp),e.uname&&it.write(r,e.uname,265),e.gname&&it.write(r,e.gname,297),it.write(r,ls(e.devmajor||0,6),329),it.write(r,ls(e.devminor||0,6),337),n&&it.write(r,n,345),it.write(r,ls(RS(r),6),148),r)};Ga.decode=function(e,r,i){let n=e[156]===0?0:e[156]-Af,s=lo(e,0,100,r);const a=rs(e,100,8),o=rs(e,108,8),l=rs(e,116,8),c=rs(e,124,12),u=rs(e,136,12),f=yj(n),d=e[157]===0?null:lo(e,157,100,r),p=lo(e,265,32),g=lo(e,297,32),m=rs(e,329,8),w=rs(e,337,8),v=RS(e);if(v===8*32)return null;if(v!==rs(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(gj(e))e[345]&&(s=lo(e,345,155,r)+"/"+s);else if(!mj(e)){if(!i)throw new Error("Invalid tar header: unknown format.")}return n===0&&s&&s[s.length-1]==="/"&&(n=5),{name:s,mode:a,uid:o,gid:l,size:c,mtime:new Date(1e3*u),type:f,linkname:d,uname:p,gname:g,devmajor:m,devminor:w,pax:null}};function gj(t){return it.equals(AS,t.subarray(ec,ec+6))}function mj(t){return it.equals(hj,t.subarray(ec,ec+6))&&it.equals(dj,t.subarray(Yp,Yp+2))}function vj(t,e,r){return typeof t!="number"?r:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function yj(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function bj(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function $S(t,e,r,i){for(;r<i;r++)if(t[r]===e)return r;return i}function RS(t){let e=256;for(let r=0;r<148;r++)e+=t[r];for(let r=156;r<512;r++)e+=t[r];return e}function ls(t,e){return t=t.toString(8),t.length>e?uj.slice(0,e)+" ":cj.slice(0,e-t.length)+t+" "}function wj(t,e,r){e[r]=128;for(let i=11;i>0;i--)e[r+i]=t&255,t=Math.floor(t/256)}function _j(t,e,r){t.toString(8).length>11?wj(t,e,r):it.write(e,ls(t,11),r)}function Sj(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;const r=[];let i;for(i=t.length-1;i>0;i--){const a=t[i];e?r.push(a):r.push(255-a)}let n=0;const s=r.length;for(i=0;i<s;i++)n+=r[i]*Math.pow(256,i);return e?n:-1*n}function rs(t,e,r){if(t=t.subarray(e,e+r),e=0,t[e]&128)return Sj(t);{for(;e<t.length&&t[e]===32;)e++;const i=vj($S(t,32,e,t.length),t.length,t.length);for(;e<i&&t[e]===0;)e++;return i===e?0:parseInt(it.toString(t.subarray(e,i)),8)}}function lo(t,e,r,i){return it.toString(t.subarray(e,$S(t,0,e,e+r)),i)}function Bd(t){const e=it.byteLength(t);let r=Math.floor(Math.log(e)/Math.log(10))+1;return e+r>=Math.pow(10,r)&&r++,e+r+t}const{Writable:Ej,Readable:xj,getStreamError:CS}=TS,Tj=iS,DS=ym,ro=Ga,Aj=DS.alloc(0);class $j{constructor(){this.buffered=0,this.shifted=0,this.queue=new Tj,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return Aj;let r=this._next(e);if(e===r.byteLength)return r;const i=[r];for(;(e-=r.byteLength)>0;)r=this._next(e),i.push(r);return DS.concat(i)}_next(e){const r=this.queue.peek(),i=r.byteLength-this._offset;if(e>=i){const n=this._offset?r.subarray(this._offset,r.byteLength):r;return this.queue.shift(),this._offset=0,this.buffered-=i,this.shifted+=i,n}return this.buffered-=e,this.shifted+=e,r.subarray(this._offset,this._offset+=e)}}class Rj extends xj{constructor(e,r,i){super(),this.header=r,this.offset=i,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(CS(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=PS(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}}class Cj extends Ej{constructor(e){super(e),e||(e={}),this._buffer=new $j,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=Wd,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=ro.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=ro.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=ro.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=ro.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?ro.decodePax(e):Object.assign({},this._paxGlobal,ro.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=PS(this._header.size);const e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(r){return this._continueWrite(r),!1}return!0}_consumeStream(){const e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;const r=this._stream.push(e);return this._missing===0?(this._stream.push(null),r&&this._stream._detach(),r&&this._locked===!1):r}_createStream(){return new Rj(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}const e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){const r=this._callback;this._callback=Wd,r(e)}_write(e,r){this._callback=r,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(CS(this)),e(null)}[Symbol.asyncIterator](){let e=null,r=null,i=null,n=null,s=null;const a=this;return this.on("entry",c),this.on("error",d=>{e=d}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(l)},return(){return f(null)},throw(d){return f(d)}};function o(d){if(!s)return;const p=s;s=null,p(d)}function l(d,p){if(e)return p(e);if(n){d({value:n,done:!1}),n=null;return}r=d,i=p,o(null),a._finished&&r&&(r({value:void 0,done:!0}),r=i=null)}function c(d,p,g){s=g,p.on("error",Wd),r?(r({value:p,done:!1}),r=i=null):n=p}function u(){o(e),r&&(e?i(e):r({value:void 0,done:!0}),r=i=null)}function f(d){return a.destroy(d),o(d),new Promise((p,g)=>{if(a.destroyed)return p({value:void 0,done:!0});a.once("close",function(){d?g(d):p({value:void 0,done:!0})})})}}}var Dj=function(e){return new Cj(e)};function Wd(){}function PS(t){return t&=511,t&&512-t}var Kp={exports:{}};const Hy={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{Kp.exports=require("fs").constants||Hy}catch{Kp.exports=Hy}var Pj=Kp.exports;const{Readable:Oj,Writable:kj,getStreamError:OS}=TS,Oa=ym,io=Pj,Su=Ga,Nj=493,Fj=420,kS=Oa.alloc(1024);class Ij extends kj{constructor(e,r,i){super({mapWritable:Bj,eagerOpen:!0}),this.written=0,this.header=r,this._callback=i,this._linkname=null,this._isLinkname=r.type==="symlink"&&!r.linkname,this._isVoid=r.type!=="file"&&r.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;const r=this._callback;this._callback=null,r(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);const e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,r){if(this._isLinkname)return this._linkname=this._linkname?Oa.concat([this._linkname,e]):e,r(null);if(this._isVoid)return e.byteLength>0?r(new Error("No body allowed for this entry")):r();if(this.written+=e.byteLength,this._pack.push(e))return r();this._pack._drain=r}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Oa.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),NS(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return OS(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}}class Lj extends Oj{constructor(e){super(e),this._drain=Ud,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,r,i){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof r=="function"&&(i=r,r=null),i||(i=Ud),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=Mj(e.mode)),e.mode||(e.mode=e.type==="directory"?Nj:Fj),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof r=="string"&&(r=Oa.from(r));const n=new Ij(this,e,i);return Oa.isBuffer(r)?(e.size=r.byteLength,n.write(r),n.end(),n):(n._isVoid,n)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(kS),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){const r=Su.encode(e);if(r){this.push(r);return}}this._encodePax(e)}_encodePax(e){const r=Su.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),i={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:r.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(Su.encode(i)),this.push(r),NS(this,r.byteLength),i.size=e.size,i.type=e.type,this.push(Su.encode(i))}_doDrain(){const e=this._drain;this._drain=Ud,e()}_predestroy(){const e=OS(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){const r=this._pending.shift();r.destroy(e),r._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}}var jj=function(e){return new Lj(e)};function Mj(t){switch(t&io.S_IFMT){case io.S_IFBLK:return"block-device";case io.S_IFCHR:return"character-device";case io.S_IFDIR:return"directory";case io.S_IFIFO:return"fifo";case io.S_IFLNK:return"symlink"}return"file"}function Ud(){}function NS(t,e){e&=511,e&&t.push(kS.subarray(0,512-e))}function Bj(t){return Oa.isBuffer(t)?t:Oa.from(t)}cm.extract=Dj;cm.pack=jj;/**
 * TAR Format Plugin
 *
 * @module plugins/tar
 * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
 * @copyright (c) 2012-2014 Chris Talkington, contributors.
 */var Wj=$b,Uj=cm,FS=qc,Wn=function(t){if(!(this instanceof Wn))return new Wn(t);t=this.options=FS.defaults(t,{gzip:!1}),typeof t.gzipOptions!="object"&&(t.gzipOptions={}),this.supports={directory:!0,symlink:!0},this.engine=Uj.pack(t),this.compressor=!1,t.gzip&&(this.compressor=Wj.createGzip(t.gzipOptions),this.compressor.on("error",this._onCompressorError.bind(this)))};Wn.prototype._onCompressorError=function(t){this.engine.emit("error",t)};Wn.prototype.append=function(t,e,r){var i=this;e.mtime=e.date;function n(a,o){if(a){r(a);return}i.engine.entry(e,o,function(l){r(l,e)})}if(e.sourceType==="buffer")n(null,t);else if(e.sourceType==="stream"&&e.stats){e.size=e.stats.size;var s=i.engine.entry(e,function(a){r(a,e)});t.pipe(s)}else e.sourceType==="stream"&&FS.collectStream(t,n)};Wn.prototype.finalize=function(){this.engine.finalize()};Wn.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};Wn.prototype.pipe=function(t,e){return this.compressor?this.engine.pipe.apply(this.engine,[this.compressor]).pipe(t,e):this.engine.pipe.apply(this.engine,arguments)};Wn.prototype.unpipe=function(){return this.compressor?this.compressor.unpipe.apply(this.compressor,arguments):this.engine.unpipe.apply(this.engine,arguments)};var zj=Wn;function Gj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const Hj=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function IS(t){if(Buffer.isBuffer(t))return t;if(typeof t=="number")return Buffer.alloc(t);if(typeof t=="string")return Buffer.from(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function Vj(t){const e=IS(4);return e.writeInt32BE(t,0),e}function bm(t,e){t=IS(t),Buffer.isBuffer(e)&&(e=e.readUInt32BE(0));let r=~~e^-1;for(var i=0;i<t.length;i++)r=Hj[(r^t[i])&255]^r>>>8;return r^-1}function wm(){return Vj(bm.apply(null,arguments))}wm.signed=function(){return bm.apply(null,arguments)};wm.unsigned=function(){return bm.apply(null,arguments)>>>0};var qj=wm;const Yj=Gj(qj);var Kj=Yj;/**
 * JSON Format Plugin
 *
 * @module plugins/json
 * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
 * @copyright (c) 2012-2014 Chris Talkington, contributors.
 */var Zj=Li.inherits,LS=rl.Transform,Qj=Kj,jS=qc,Fs=function(t){if(!(this instanceof Fs))return new Fs(t);t=this.options=jS.defaults(t,{}),LS.call(this,t),this.supports={directory:!0,symlink:!0},this.files=[]};Zj(Fs,LS);Fs.prototype._transform=function(t,e,r){r(null,t)};Fs.prototype._writeStringified=function(){var t=JSON.stringify(this.files);this.write(t)};Fs.prototype.append=function(t,e,r){var i=this;e.crc32=0;function n(s,a){if(s){r(s);return}e.size=a.length||0,e.crc32=Qj.unsigned(a),i.files.push(e),r(null,e)}e.sourceType==="buffer"?n(null,t):e.sourceType==="stream"&&jS.collectStream(t,n)};Fs.prototype.finalize=function(){this._writeStringified(),this.end()};var Xj=Fs;/**
 * Archiver Vending
 *
 * @ignore
 * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
 * @copyright (c) 2012-2014 Chris Talkington, contributors.
 */var Jj=rI,tc={},Gs=function(t,e){return Gs.create(t,e)};Gs.create=function(t,e){if(tc[t]){var r=new Jj(t,e);return r.setFormat(t),r.setModule(new tc[t](e)),r}else throw new Error("create("+t+"): format not registered")};Gs.registerFormat=function(t,e){if(tc[t])throw new Error("register("+t+"): format already registered");if(typeof e!="function")throw new Error("register("+t+"): format module invalid");if(typeof e.prototype.append!="function"||typeof e.prototype.finalize!="function")throw new Error("register("+t+"): format module missing methods");tc[t]=e};Gs.isRegisteredFormat=function(t){return!!tc[t]};Gs.registerFormat("zip",LI);Gs.registerFormat("tar",zj);Gs.registerFormat("json",Xj);var eM=Gs;class tM{constructor(e){this.app=e,this.backupIntervalMinutes=10,this.maxBackups=5,this.maxBackupAgeDays=30}async createBackup(e,r){try{const i=this.app.vault.getAbstractFileByPath(e);if(!i||!(i instanceof Z.TFolder))return console.warn(`BackupService: Draft folder not found: ${e}`),!1;const n=this.getAllFilesInFolder(i);if(n.length===0)return console.warn(`BackupService: No files to backup in: ${e}`),!1;const a=`${e.split("/").slice(0,-1).join("/")}/${xl(r)}`;this.app.vault.getAbstractFileByPath(a)||await this.app.vault.createFolder(a);const o=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),c=`${e.split("/").pop()||"unknown"}_${o}.zip`,u=`${a}/${c}`,f=eM.create("zip",{zlib:{level:9}}),d=[];f.on("data",m=>{d.push(m)});for(const m of n){const w=m.path.substring(e.length+1),v=await this.app.vault.read(m);f.append(v,{name:w})}await new Promise((m,w)=>{f.on("end",()=>m()),f.on("error",w),f.finalize()});const p=Buffer.concat(d),g=p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength);return await this.app.vault.createBinary(u,g),console.log(`BackupService: Created backup: ${u}`),!0}catch(i){return console.error("BackupService: Failed to create backup:",i),!1}}async listBackups(e,r){try{const n=`${e.split("/").slice(0,-1).join("/")}/${xl(r)}`,s=this.app.vault.getAbstractFileByPath(n);if(!s||!(s instanceof Z.TFolder))return[];const a=e.split("/").pop()||"unknown",o=[];for(const l of s.children)if(l instanceof Z.TFile&&l.name.startsWith(`${a}_`)&&l.name.endsWith(".zip")){const c=l.name.match(/_(\d{4}-\d{2}-\d{2}T\d{2}-\d{2}-\d{2})\.zip$/);c&&o.push(c[1])}return o.sort().reverse()}catch(i){return console.error("BackupService: Failed to list backups:",i),[]}}async restoreBackup(e,r,i){try{const s=`${e.split("/").slice(0,-1).join("/")}/${xl(i)}`,o=`${e.split("/").pop()||"unknown"}_${r}.zip`,l=`${s}/${o}`,c=this.app.vault.getAbstractFileByPath(l);if(!c||!(c instanceof Z.TFile))return console.warn(`BackupService: Backup file not found: ${l}`),!1;const u=await this.app.vault.readBinary(c);return console.warn("BackupService: Restore functionality not yet implemented"),!1}catch(n){return console.error("BackupService: Failed to restore backup:",n),!1}}async deleteBackup(e,r,i){try{const s=`${e.split("/").slice(0,-1).join("/")}/${xl(i)}`,o=`${e.split("/").pop()||"unknown"}_${r}.zip`,l=`${s}/${o}`,c=this.app.vault.getAbstractFileByPath(l);return!c||!(c instanceof Z.TFile)?(console.warn(`BackupService: Backup file not found: ${l}`),!1):(await this.app.vault.delete(c),console.log(`BackupService: Deleted backup: ${l}`),!0)}catch(n){return console.error("BackupService: Failed to delete backup:",n),!1}}async clearOldBackups(e,r,i){try{const n=await this.listBackups(e,i),s=new Date;s.setDate(s.getDate()-r);for(const a of n)new Date(a.replace(/-/g,":"))<s&&await this.deleteBackup(e,a,i)}catch(n){console.error("BackupService: Failed to clear old backups:",n)}}getAllFilesInFolder(e){const r=[];function i(n){for(const s of n.children)s instanceof Z.TFile?r.push(s):s instanceof Z.TFolder&&i(s)}return i(e),r}}class rM{constructor(e){var r,i,n;this.app=e,this.manager=((n=(i=(r=this.app.plugins).getPlugin)==null?void 0:i.call(r,"obsidian-writeaid-plugin"))==null?void 0:n.manager)??null}async reorderChapters(e,r,i){const n=this.resolveProjectPath(e);if(!n)return!1;const s=this.getDraftsFolderName(n);if(!s)return!1;const a=`${n}/${s}/${r}`;for(let o=0;o<i.length;o++){const{chapterName:l}=i[o],c=`${a}/${l}.md`,u=this.app.vault.getAbstractFileByPath(c);if(u&&u instanceof Z.TFile){let f=await this.app.vault.read(u);f.match(/^---\n([\s\S]*?)\n---/)&&(f=f.replace(/^---\n([\s\S]*?)\n---/,(d,p)=>{let g=p.replace(/^order:.*\n?/gm,"");return g.endsWith(`
`)||(g+=`
`),g+=`order: ${o+1}
`,`---
${g}---`}),await this.app.vault.modify(u,f))}}return!0}async listChapters(e,r){we(`${be} ChapterFileService.listChapters: projectPath=${e}, draftName=${r}`);const i=this.resolveProjectPath(e);if(!i)return we(`${be} ChapterFileService.listChapters: no project resolved`),[];const n=this.getDraftsFolderName(i);if(!n)return we(`${be} ChapterFileService.listChapters: no drafts folder found in project ${i}`),[];const s=`${i}/${n}/${r}`;we(`${be} ChapterFileService.listChapters: resolved project=${i}, draftsFolder=${n}, draftFolder=${s}`);const a=this.app.vault.getAbstractFileByPath(s),o=[];if(a&&a instanceof Z.TFolder){we(`${be} ChapterFileService.listChapters: found folder with ${a.children.length} children`);for(const l of a.children)l instanceof Z.TFile&&l.extension==="md"&&(we(`${be} ChapterFileService.listChapters: processing file ${l.path}`),await sr(async()=>{const c=await this.app.vault.read(l);we(`${be} ChapterFileService.listChapters: content length ${c.length}`);const u=c.match(/^---\n([\s\S]*?)\n---/);let f,d;if(u){we(`${be} ChapterFileService.listChapters: found frontmatter`);const m=u[1].split(/\r?\n/);for(const w of m){const v=w.match(/^order:\s*(\d+)/i);v&&(f=parseInt(v[1],10));const y=w.match(/^chapter_name:\s*(.*)$/i);if(y){let b=y[1].trim();(b.startsWith('"')&&b.endsWith('"')||b.startsWith("'")&&b.endsWith("'"))&&(b=b.slice(1,-1)),b.length>0&&(d=b)}}}else we(`${be} ChapterFileService.listChapters: no frontmatter`);we(`${be} ChapterFileService.listChapters: parsed order=${f}, chapterName=${d}`);const p=d&&d.length>0?d:l.name.replace(/\.md$/,""),g=typeof f=="number"&&!isNaN(f)?f:0;we(`${be} ChapterFileService.listChapters: adding chapter ${l.name} with name ${p}, order ${g}`),o.push({name:l.name.replace(/\.md$/,""),chapterName:p,order:g})}))}else we(`${be} ChapterFileService.listChapters: no folder found`);return o.sort((l,c)=>l.order-c.order),we(`${be} ChapterFileService.listChapters: returning ${o.length} chapters`),o.map(({name:l,chapterName:c})=>({name:l,chapterName:c}))}async createChapter(e,r,i,n){const s=this.resolveProjectPath(e);if(!s)return!1;const a=this.getDraftsFolderName(s);if(!a)return!1;const o=`${s}/${a}/${r}`,c=`${li(i,n==null?void 0:n.slugStyle)}.md`,u=`${o}/${c}`;if(this.app.vault.getAbstractFileByPath(u))return!1;let f=0;const d=this.app.vault.getAbstractFileByPath(o);if(d&&d instanceof Z.TFolder)for(const w of d.children)w instanceof Z.TFile&&w.extension==="md"&&await sr(async()=>{const y=(await this.app.vault.read(w)).match(/^---\n([\s\S]*?)\n---/);if(y){const b=y[1].split(/\r?\n/);for(const T of b){const L=T.match(/^order:\s*(\d+)/i);if(L){const H=parseInt(L[1],10);!isNaN(H)&&H>f&&(f=H)}}}});const p=f+1;let g=`# ${i}`;const m=`---
order: ${p}
chapter_name: ${JSON.stringify(i)}
---
`;return await this.app.vault.create(u,`${m}
${g}

`),!0}async deleteChapter(e,r,i){const n=this.resolveProjectPath(e);if(!n)return!1;const s=this.getDraftsFolderName(n);if(!s)return!1;const a=`${n}/${s}/${r}`,o=`${i}.md`,l=`${a}/${o}`,c=this.app.vault.getAbstractFileByPath(l);if(c&&c instanceof Z.TFile){await this.app.vault.delete(c);const u=await this.listChapters(e,r);for(let f=0;f<u.length;f++){const{name:d}=u[f],p=`${a}/${d}.md`,g=this.app.vault.getAbstractFileByPath(p);if(g&&g instanceof Z.TFile){let m=await this.app.vault.read(g);m.match(/^---\n([\s\S]*?)\n---/)&&(m=m.replace(/^---\n([\s\S]*?)\n---/,(w,v)=>{let y=v.replace(/^order:.*\n?/gm,"");return y.endsWith(`
`)||(y+=`
`),y+=`order: ${f+1}
`,`---
${y}---`}),await this.app.vault.modify(g,m))}}return!0}return!1}async renameChapter(e,r,i,n){const s=this.resolveProjectPath(e);if(!s)return!1;const a=this.getDraftsFolderName(s);if(!a)return!1;const o=`${s}/${a}/${r}`,l=`${o}/${i}.md`,c=`${o}/${n}.md`,u=this.app.vault.getAbstractFileByPath(l);if(!u||!(u instanceof Z.TFile))return!1;let f=await this.app.vault.read(u),d=`# ${n}`;return f.match(/^---\n([\s\S]*?)\n---/)&&(f=f.replace(/^---\n([\s\S]*?)\n---/,(p,g)=>{let m=g.replace(/^chapter_name:.*\n?/gm,"");return m.endsWith(`
`)||(m+=`
`),m+=`chapter_name: ${JSON.stringify(n)}
`,`---
${m}---`})),f=f.replace(/^#.*$/m,d),i!==n?(await this.app.vault.create(c,f),await this.app.vault.delete(u)):await this.app.vault.modify(u,f),!0}async openChapter(e,r,i){const n=this.resolveProjectPath(e);if(!n)return!1;const s=this.getDraftsFolderName(n);if(!s)return!1;const a=`${n}/${s}/${r}/${i}.md`,o=this.app.vault.getAbstractFileByPath(a);return o&&o instanceof Z.TFile?(await sr(async()=>{await this.app.workspace.getLeaf().openFile(o)}),!0):!1}resolveProjectPath(e){var r;return e||((r=this.manager)==null?void 0:r.activeProject)||null}getFolderName(e){var i;const r=((i=this.manager)==null?void 0:i.settings)||{};switch(e){case"draftsFolderName":return r.draftsFolderName||"drafts";case"manuscriptsFolderName":return r.manuscriptsFolderName||"manuscripts";case"backupsFolderName":return r.backupsFolderName||".writeaid-backups";default:return"drafts"}}getFileName(e){var i;const r=((i=this.manager)==null?void 0:i.settings)||{};switch(e){case"metaFileName":return r.metaFileName||"meta.md";case"outlineFileName":return r.outlineFileName||"outline.md";default:return"meta.md"}}getDraftsFolderName(e){const r=this.app.vault.getAbstractFileByPath(e),i=this.getFolderName("draftsFolderName");if(r&&r instanceof Z.TFolder){for(const n of r.children)if(n instanceof Z.TFolder&&n.name.toLowerCase()===i.toLowerCase())return n.name}return null}}class _m{constructor(e,r){this.chapters=new rM(e),this.backups=new tM(e),this.drafts=new iM(e,this.chapters,r,this.backups)}}class Sm{constructor(e){this.app=e,this.tpl=new Db(e),this.projectFileService=new _m(e,this)}async createProject(e,r,i,n,s){if(!e)return new Z.Notice("Project name is required."),null;const a=n&&n!==""?`${n}/${e}`:e,o=`${a}/${rn(s)}`;this.app.vault.getAbstractFileByPath(a)||await this.app.vault.createFolder(a),this.app.vault.getAbstractFileByPath(o)||await this.app.vault.createFolder(o);const l=`${a}/${Pu(s)}`;if(!this.app.vault.getAbstractFileByPath(l)){const u=r?"single-file":"multi-file",f=r?(s==null?void 0:s.defaultSingleTargetWordCount)??2e4:(s==null?void 0:s.defaultMultiTargetWordCount)??5e4,d=`---
project_type: ${u}
target_word_count: ${f}
---
`;await this.app.vault.create(l,d)}const c=i||"Draft 1";return await this.projectFileService.drafts.createDraft(c,void 0,a,s),a}async openProject(e){const r=`${e}/meta.md`,i=this.app.vault.getAbstractFileByPath(r);if(i&&i instanceof Z.TFile)return await this.app.workspace.getLeaf().openFile(i),!0;const n=[`${e}/${e}.md`,`${e}/Chapter 1.md`,`${e}/Chapter 01.md`,`${e}/outline.md`,`${e}/${rn()}/Draft 1/outline.md`];for(const s of n){const a=this.app.vault.getAbstractFileByPath(s);if(a&&a instanceof Z.TFile)return await this.app.workspace.getLeaf().openFile(a),!0}return new Z.Notice("Could not find a file to open in the project."),!1}listAllFolders(){const e=this.app.vault.getRoot(),r=[""];function i(n){for(const s of n.children)s instanceof Z.TFolder&&(r.push(s.path),i(s))}return i(e),r}async listProjects(){const e=this.listAllFolders(),r=e.filter(n=>!!n);we(`${be} allFolders:`,e),we(`${be} filteredFolders:`,r);const i=await go(r,n=>this.isProjectFolder(n));return we(`${be} found ${r.length} folders, ${i.length} projects:`,i),i}async getProjectType(e){const r=`${e}/${Pu()}`,i=await Ma(this.app,r);if(i&&i.project_type){const n=i.project_type;if(Object.values(As).includes(n))return n}return null}getDraftsFolder(e){const r=`${e}/${rn()}`;let i=this.app.vault.getAbstractFileByPath(r);if(i&&i instanceof Z.TFolder)return i;const n=`${e}/Drafts`;return i=this.app.vault.getAbstractFileByPath(n),i&&i instanceof Z.TFolder?i:null}async getManuscriptsFolder(e){const r=`${e}/${Cb()}`,i=this.app.vault.getAbstractFileByPath(r);return i&&i instanceof Z.TFolder?i:null}async isProjectFolder(e){if(!e||typeof e!="string")return!1;const r=e.trim().replace(/\\/g,"/").replace(/\/+$/,"");try{const i=Z.normalizePath(`${r}/${Pu()}`),n=await this.app.vault.adapter.exists(i),s=Z.normalizePath(`${r}/${rn()}`);let a=await this.app.vault.adapter.exists(s);if(!a){const o=Z.normalizePath(`${r}/Drafts`);a=await this.app.vault.adapter.exists(o)}if(!n&&!a)return!1;if(n)try{const{readMetaFile:o}=await Promise.resolve().then(()=>Jd),{VALID_PROJECT_TYPES:l}=await Promise.resolve().then(()=>LE),c=await o(this.app,i);if(!c||!l.includes(c.project_type))return!1}catch{return!1}return!0}catch{return!1}}}class iM{constructor(e,r,i,n){var s,a,o;this.app=e,this.tpl=new Db(e),this.projectSvc=i,this.backupSvc=n,this.chapters=r,this.manager=((o=(a=(s=this.app.plugins).getPlugin)==null?void 0:a.call(s,"obsidian-writeaid-plugin"))==null?void 0:o.manager)??null}resolveProjectPath(e){var r;return e||((r=this.manager)==null?void 0:r.activeProject)||null}getFolderName(e){var i;const r=((i=this.manager)==null?void 0:i.settings)||{};switch(e){case"draftsFolderName":return r.draftsFolderName||"drafts";case"manuscriptsFolderName":return r.manuscriptsFolderName||"manuscripts";case"backupsFolderName":return r.backupsFolderName||".writeaid-backups";default:return"drafts"}}getFileName(e){var i;const r=((i=this.manager)==null?void 0:i.settings)||{};switch(e){case"metaFileName":return r.metaFileName||"meta.md";case"outlineFileName":return r.outlineFileName||"outline.md";default:return"meta.md"}}getDraftsFolderName(e){const r=this.app.vault.getAbstractFileByPath(e),i=this.getFolderName("draftsFolderName");if(r&&r instanceof Z.TFolder){for(const n of r.children)if(n instanceof Z.TFolder&&n.name.toLowerCase()===i.toLowerCase())return n.name}return null}async suggestNextDraftName(e){const r=this.resolveProjectPath(e);if(!r)return"Draft 1";const i=`${r}/${this.getFileName("metaFileName")}`;let n=0;return await sr(async()=>{const s=await Ma(this.app,i);s&&typeof s.total_drafts=="number"&&(n=s.total_drafts)}),`Draft ${n+1}`}async createDraft(e,r,i,n){var f;const s=this.resolveProjectPath(i);if(!s){new Z.Notice("No project folder detected. Please open a folder named after your project.");return}const o=this.getDraftsFolderName(s)||this.getFolderName("draftsFolderName"),l=`${s}/${o}`,c=`${l}/${e}`,u=s.split("/").pop()||s;if(this.app.vault.getAbstractFileByPath(l)||await this.app.vault.createFolder(l),this.app.vault.getAbstractFileByPath(c)||await this.app.vault.createFolder(c),r){const d=`${l}/${r}`,p=this.app.vault.getFiles().filter(w=>w.path.startsWith(d)),m=`${li(r,n==null?void 0:n.slugStyle)}.md`;for(const w of p){let v=w.path.substring(d.length+1);v===m&&(v=`${li(e,n==null?void 0:n.slugStyle)}.md`);const y=`${c}/${v}`,b=y.substring(0,y.lastIndexOf("/"));b!==c&&!this.app.vault.getAbstractFileByPath(b)&&await this.app.vault.createFolder(b);let T=await this.app.vault.read(w);T=aM(T,e,u),await this.app.vault.create(y,T)}}else{if((n==null?void 0:n.includeDraftOutline)===!0){const g=(n==null?void 0:n.draftOutlineTemplate)??"",m=await this.tpl.render(g,{draftName:e});await this.app.vault.create(`${c}/outline.md`,m)}if(await this.projectSvc.getProjectType(s)===As.SINGLE){const m=`${li(e,n==null?void 0:n.slugStyle)}.md`,w=`${c}/${m}`;if(!this.app.vault.getAbstractFileByPath(w)){const v=`---
draft: ${e}
project: ${u}
created: ${new Date().toISOString()}
---

`,y=await this.tpl.render("# {{draftName}}",{draftName:e});await this.app.vault.create(w,v+y)}}else{const g=this.app.vault.getAbstractFileByPath(c);let m=!1;if(g&&g instanceof Z.TFolder){for(const w of g.children)if(w instanceof Z.TFile&&w.extension==="md"&&(await sr(async()=>{const y=(await this.app.vault.read(w)).match(/^---\n([\s\S]*?)\n---/);if(y){const b=y[1].split(/\r?\n/);for(const T of b){const L=T.match(/^order:\s*(\d+)/i);if(L&&!isNaN(parseInt(L[1],10))){m=!0;break}}}}),m))break}m||await this.chapters.createChapter(s,e,"Chapter 1",n)}}await uo(this.app,s,e,void 0,(f=this.manager)==null?void 0:f.settings)}listDrafts(e){var n;const r=this.resolveProjectPath(e);if(we(`${be} listDrafts called with projectPath:`,e,"resolved to:",r),!r)return[];const i=this.projectSvc.getDraftsFolder(r);if(we(`${be} getDraftsFolder for ${r} returned:`,i==null?void 0:i.path,(n=i==null?void 0:i.children)==null?void 0:n.length),i&&i instanceof Z.TFolder){const s=i.children.filter(a=>a instanceof Z.TFolder).map(a=>a.name);return we(`${be} found drafts:`,s),s}return[]}async openDraft(e,r){const i=this.resolveProjectPath(e);if(!i)return!1;const n=this.getDraftsFolderName(i);if(!n)return!1;const s=`${i}/${n}/${r}/${this.getFileName("outlineFileName")}`,a=this.app.vault.getAbstractFileByPath(s);if(await sr(async()=>a&&a instanceof Z.TFile?(await this.app.workspace.getLeaf().openFile(a),!0):!1))return!0;const l=`${i}/${n}/${r}`,c=this.app.vault.getFiles().filter(u=>u.path.startsWith(l));return c.length>0?(await this.app.workspace.getLeaf().openFile(c[0]),!0):!1}async renameDraft(e,r,i,n=!1,s){const a=this.resolveProjectPath(e);if(!a)return!1;const o=this.getDraftsFolderName(a);if(!o)return!1;const l=`${a}/${o}/${r}`,c=`${a}/${o}/${i}`;try{this.app.vault.getAbstractFileByPath(c)||await this.app.vault.createFolder(c);const u=this.app.vault.getFiles().filter(w=>w.path.startsWith(l));let f="",d="";if(n){const w=s==null?void 0:s.slugStyle;f=li(r,w),d=li(i,w)}for(const w of u){let v=w.path.substring(l.length+1),y=`${c}/${v}`;n&&f&&d&&v===`${f}.md`&&(v=`${d}.md`,y=`${c}/${v}`);let b=await this.app.vault.read(w);w.extension==="md"&&(b=b.replace(/^(---\s*\n[\s\S]*?\n)(draft:.*\n)?/m,(T,L)=>L.replace(/^draft:.*\n/m,"").replace(/^(---\s*\n)/,`$1draft: ${i}
`))),await this.app.vault.create(y,b),await this.app.vault.delete(w)}const p=this.app.vault.getAbstractFileByPath(l);p&&p instanceof Z.TFolder&&await this.app.vault.delete(p,!0),await sr(async()=>{await Promise.resolve().then(()=>Jd).then(w=>{var v;return w.updateMetaStats(this.app,a,i,void 0,(v=this.manager)==null?void 0:v.settings)})});const g=`${c}/${this.getFileName("metaFileName")}`;return this.app.vault.getAbstractFileByPath(g)&&await sr(async()=>{const{readMetaFile:w,writeMetaFile:v}=await Promise.resolve().then(()=>Jd),y=await w(this.app,g);y&&(y.draft=i,await v(this.app,g,y))}),!0}catch{return!1}}async deleteDraft(e,r,i=!0){var o;const n=this.resolveProjectPath(e);if(!n)return!1;const s=this.getDraftsFolderName(n);if(!s)return!1;const a=`${n}/${s}/${r}`;try{const l=this.app.vault.getFiles().filter(u=>u.path.startsWith(a));i&&await this.backupSvc.createBackup(a,(o=this.manager)==null?void 0:o.settings);for(const u of l)await sr(async()=>{await this.app.vault.delete(u)});const c=this.app.vault.getAbstractFileByPath(a);return c&&c instanceof Z.TFolder&&await sr(async()=>{await this.app.vault.delete(c)}),!0}catch{return!1}}async generateManuscript(e,r,i){const n=this.resolveProjectPath(e);if(!n)return!1;const s=this.getDraftsFolderName(n);if(!s)return!1;const a=await this.projectSvc.getProjectType(n),o=`${n}/${s}/${r}`;if(!this.app.vault.getAbstractFileByPath(o))return new Z.Notice(`Draft folder ${o} does not exist.`),!1;const l=`${n}/${this.getFolderName("manuscriptsFolderName")}`;this.app.vault.getAbstractFileByPath(l)||await this.app.vault.createFolder(l);const c=n.split("/").pop()||n,u=(i==null?void 0:i.manuscriptNameTemplate)||"{{draftName}}";we(`${be} DraftFileService.generateManuscript - manuscriptNameTemplate: "${u}"`),we(`${be} DraftFileService.generateManuscript - settings object:`,i);const f=li(r,i==null?void 0:i.slugStyle),d=await this.tpl.render(u,{draftName:r,projectName:c,draftSlug:f}),p=`${l}/${d}.md`;let g=`# Manuscript for ${r}

`;if(a===As.SINGLE){const m=`${f}.md`,w=`${o}/${m}`,v=this.app.vault.getAbstractFileByPath(w);if(v&&v instanceof Z.TFile){const y=await this.app.vault.read(v);g+=sM(nM(y));const b=this.app.vault.getAbstractFileByPath(p);if(b&&b instanceof Z.TFile){if(!await new KE(this.app,p).open())return!1;we(`${be} Overwriting existing manuscript: ${p}`),await this.app.vault.modify(b,g)}else we(`${be} Creating new manuscript: ${p}`),await this.app.vault.create(p,g)}else return new Z.Notice(`Main draft file ${w} not found.`),!1}return!0}}function nM(t){return t.replace(/^---\n([\s\S]*?)\n---/,"").trim()}function sM(t){return t.replace(/^#{1,6} .*\n/,"").trim()}function aM(t,e,r){const i=t.match(/^---\n([\s\S]*?)\n---/);if(!i)return t;const n=i[1],s=t.substring(i[0].length),a=n.split(`
`),o=[];for(const c of a)c.match(/^draft:/i)?o.push(`draft: ${e}`):c.match(/^project:/i)?o.push(`project: ${r}`):c.match(/^created:/i)?o.push(`created: ${new Date().toISOString()}`):o.push(c);return`---
${o.join(`
`)}
---${s}`}const MS="pen-tool",oM="5";var Tb;typeof window<"u"&&((Tb=window.__svelte??(window.__svelte={})).v??(Tb.v=new Set)).add(oM);let ol=!1,lM=!1;function cM(){ol=!0}cM();const Ah=1,$h=2,BS=4,uM=8,fM=16,hM=1,dM=2,pM=4,gM=8,mM=16,vM=1,yM=2,WS="[",Rh="[!",Em="]",qo={},Jt=Symbol(),bM="http://www.w3.org/1999/xhtml",wM="http://www.w3.org/2000/svg",_M="@attach",US=!1;var ll=Array.isArray,SM=Array.prototype.indexOf,xm=Array.from,$f=Object.keys,Yo=Object.defineProperty,cn=Object.getOwnPropertyDescriptor,zS=Object.getOwnPropertyDescriptors,EM=Object.prototype,xM=Array.prototype,Tm=Object.getPrototypeOf,Vy=Object.isExtensible;function co(t){return typeof t=="function"}const mr=()=>{};function TM(t){return t()}function Zp(t){for(var e=0;e<t.length;e++)t[e]()}function GS(){var t,e,r=new Promise((i,n)=>{t=i,e=n});return{promise:r,resolve:t,reject:e}}function AM(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const r=[];for(const i of t)if(r.push(i),r.length===e)break;return r}const Nr=2,Am=4,Ch=8,Ha=16,Vn=32,Hs=64,$m=128,fi=256,Rf=512,ar=1024,Xr=2048,qn=4096,Pi=8192,Va=16384,Rm=32768,cl=65536,qy=1<<17,$M=1<<18,qa=1<<19,HS=1<<20,Qp=1<<21,Dh=1<<22,Sa=1<<23,un=Symbol("$state"),Cm=Symbol("legacy props"),RM=Symbol(""),jl=new class extends Error{constructor(){super(...arguments);Q(this,"name","StaleReactionError");Q(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}},CM=1,Ph=3,ul=8;function Oh(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function DM(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function PM(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function OM(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function kM(t){throw new Error("https://svelte.dev/e/effect_orphan")}function NM(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function FM(){throw new Error("https://svelte.dev/e/hydration_failed")}function IM(t){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function LM(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function jM(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function MM(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function BM(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function WM(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function kh(t){console.warn("https://svelte.dev/e/hydration_mismatch")}function UM(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function zM(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let ke=!1;function Cr(t){ke=t}let Ve;function er(t){if(t===null)throw kh(),qo;return Ve=t}function ka(){return er(wn(Ve))}function Me(t){if(ke){if(wn(Ve)!==null)throw kh(),qo;Ve=t}}function cs(t=1){if(ke){for(var e=t,r=Ve;e--;)r=wn(r);Ve=r}}function Cf(t=!0){for(var e=0,r=Ve;;){if(r.nodeType===ul){var i=r.data;if(i===Em){if(e===0)return r;e-=1}else(i===WS||i===Rh)&&(e+=1)}var n=wn(r);t&&r.remove(),r=n}}function VS(t){if(!t||t.nodeType!==ul)throw kh(),qo;return t.data}function qS(t){return t===this.v}function YS(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function KS(t){return!YS(t,this.v)}let mt=null;function Ko(t){mt=t}function Ir(t,e=!1,r){mt={p:mt,c:null,e:null,s:t,x:null,l:ol&&!e?{s:null,u:null,$:[]}:null}}function Lr(t){var e=mt,r=e.e;if(r!==null){e.e=null;for(var i of r)g1(i)}return t!==void 0&&(e.x=t),mt=e.p,t??{}}function Xc(){return!ol||mt!==null&&mt.l===null}let na=[];function ZS(){var t=na;na=[],Zp(t)}function pn(t){if(na.length===0&&!Ml){var e=na;queueMicrotask(()=>{e===na&&ZS()})}na.push(t)}function GM(){for(;na.length>0;)ZS()}const HM=new WeakMap;function QS(t){var e=Ze;if(e===null)return Xe.f|=Sa,t;if(e.f&Rm)Zo(t,e);else{if(!(e.f&$m))throw!e.parent&&t instanceof Error&&XS(t),t;e.b.error(t)}}function Zo(t,e){for(;e!==null;){if(e.f&$m)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t instanceof Error&&XS(t),t}function XS(t){const e=HM.get(t);e&&(Yo(t,"message",{value:e.message}),Yo(t,"stack",{value:e.stack}))}const Eu=new Set;let wt=null,Gu=null,Xp=new Set,en=[],Nh=null,Jp=!1,Ml=!1;var ko,No,pa,Dc,Fo,Io,ga,Lo,Pc,Oc,hi,eg,Hu,tg;const po=class po{constructor(){ie(this,hi);Q(this,"current",new Map);ie(this,ko,new Map);ie(this,No,new Set);ie(this,pa,0);ie(this,Dc,null);ie(this,Fo,[]);ie(this,Io,[]);ie(this,ga,[]);ie(this,Lo,[]);ie(this,Pc,[]);ie(this,Oc,[]);Q(this,"skipped_effects",new Set)}process(e){var s;en=[],Gu=null;var r=po.apply(this);for(const a of e)re(this,hi,eg).call(this,a);if(h(this,pa)===0){re(this,hi,tg).call(this);var i=h(this,Io),n=h(this,ga);W(this,Io,[]),W(this,ga,[]),W(this,Lo,[]),Gu=this,wt=null,Yy(i),Yy(n),Gu=null,(s=h(this,Dc))==null||s.resolve()}else re(this,hi,Hu).call(this,h(this,Io)),re(this,hi,Hu).call(this,h(this,ga)),re(this,hi,Hu).call(this,h(this,Lo));r();for(const a of h(this,Fo))Xo(a);W(this,Fo,[])}capture(e,r){h(this,ko).has(e)||h(this,ko).set(e,r),this.current.set(e,e.v)}activate(){wt=this}deactivate(){wt=null}flush(){if(en.length>0){if(this.activate(),JS(),wt!==null&&wt!==this)return}else h(this,pa)===0&&re(this,hi,tg).call(this);this.deactivate();for(const e of Xp)if(Xp.delete(e),e(),wt!==null)break}increment(){W(this,pa,h(this,pa)+1)}decrement(){W(this,pa,h(this,pa)-1);for(const e of h(this,Pc))vr(e,Xr),Na(e);for(const e of h(this,Oc))vr(e,qn),Na(e);this.flush()}add_callback(e){h(this,No).add(e)}settled(){return(h(this,Dc)??W(this,Dc,GS())).promise}static ensure(){if(wt===null){const e=wt=new po;Eu.add(wt),Ml||po.enqueue(()=>{wt===e&&e.flush()})}return wt}static enqueue(e){pn(e)}static apply(e){return mr}};ko=new WeakMap,No=new WeakMap,pa=new WeakMap,Dc=new WeakMap,Fo=new WeakMap,Io=new WeakMap,ga=new WeakMap,Lo=new WeakMap,Pc=new WeakMap,Oc=new WeakMap,hi=new WeakSet,eg=function(e){var c;e.f^=ar;for(var r=e.first;r!==null;){var i=r.f,n=(i&(Vn|Hs))!==0,s=n&&(i&ar)!==0,a=s||(i&Pi)!==0||this.skipped_effects.has(r);if(!a&&r.fn!==null){n?r.f^=ar:i&Am?h(this,ga).push(r):i&ar||(i&Dh&&((c=r.b)!=null&&c.is_pending())?h(this,Fo).push(r):eu(r)&&(r.f&Ha&&h(this,Lo).push(r),Xo(r)));var o=r.first;if(o!==null){r=o;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)r=l.next,l=l.parent}},Hu=function(e){for(const r of e)(r.f&Xr?h(this,Pc):h(this,Oc)).push(r),vr(r,ar);e.length=0},tg=function(){var e;for(const r of h(this,No))r();if(h(this,No).clear(),Eu.size>1){h(this,ko).clear();let r=!0;for(const i of Eu){if(i===this){r=!1;continue}for(const[n,s]of this.current){if(i.current.has(n))if(r)i.current.set(n,s);else continue;e1(n)}if(en.length>0){wt=i;const n=po.apply(i);for(const s of en)re(e=i,hi,eg).call(e,s);en=[],n()}}wt=null}Eu.delete(this)};let sn=po;function Ae(t){var e=Ml;Ml=!0;try{for(var r;;){if(GM(),en.length===0&&(wt==null||wt.flush(),en.length===0))return Nh=null,r;JS()}}finally{Ml=e}}function JS(){var t=_o;Jp=!0;try{var e=0;for(Qy(!0);en.length>0;){var r=sn.ensure();if(e++>1e3){var i,n;VM()}r.process(en),Ps.clear()}}finally{Jp=!1,Qy(t),Nh=null}}function VM(){try{NM()}catch(t){Zo(t,Nh)}}let An=null;function Yy(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var i=t[r++];if(!(i.f&(Va|Pi))&&eu(i)&&(An=[],Xo(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?y1(i):i.fn=null),(An==null?void 0:An.length)>0)){Ps.clear();for(const n of An)Xo(n);An=[]}}An=null}}function e1(t){if(t.reactions!==null)for(const e of t.reactions){const r=e.f;r&Nr?e1(e):r&(Dh|Ha)&&(vr(e,Xr),Na(e))}}function Na(t){for(var e=Nh=t;e.parent!==null;){e=e.parent;var r=e.f;if(Jp&&e===Ze&&r&Ha)return;if(r&(Hs|Vn)){if(!(r&ar))return;e.f^=ar}}en.push(e)}function qM(t){let e=0,r=Fa(0),i;return()=>{a3()&&(O(r),Ya(()=>(e===0&&(i=yt(()=>t(()=>Bl(r)))),e+=1,()=>{pn(()=>{e-=1,e===0&&(i==null||i(),i=void 0,Bl(r))})})))}}var YM=cl|qa|$m;function KM(t,e,r){new ZM(t,e,r)}var Ci,Vr,kc,Qi,ma,Xi,si,Or,Ji,ws,va,_s,ya,Ss,jf,Mf,lr,t1,r1,Vu,qu,rg;class ZM{constructor(e,r,i){ie(this,lr);Q(this,"parent");ie(this,Ci,!1);ie(this,Vr);ie(this,kc,ke?Ve:null);ie(this,Qi);ie(this,ma);ie(this,Xi);ie(this,si,null);ie(this,Or,null);ie(this,Ji,null);ie(this,ws,null);ie(this,va,0);ie(this,_s,0);ie(this,ya,!1);ie(this,Ss,null);ie(this,jf,()=>{h(this,Ss)&&Qo(h(this,Ss),h(this,va))});ie(this,Mf,qM(()=>(W(this,Ss,Fa(h(this,va))),()=>{W(this,Ss,null)})));W(this,Vr,e),W(this,Qi,r),W(this,ma,i),this.parent=Ze.b,W(this,Ci,!!h(this,Qi).pending),W(this,Xi,Ka(()=>{if(Ze.b=this,ke){const n=h(this,kc);ka(),n.nodeType===ul&&n.data===Rh?re(this,lr,r1).call(this):re(this,lr,t1).call(this)}else{try{W(this,si,gr(()=>i(h(this,Vr))))}catch(n){this.error(n)}h(this,_s)>0?re(this,lr,qu).call(this):W(this,Ci,!1)}},YM)),ke&&W(this,Vr,Ve)}is_pending(){return h(this,Ci)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!h(this,Qi).pending}update_pending_count(e){re(this,lr,rg).call(this,e),W(this,va,h(this,va)+e),Xp.add(h(this,jf))}get_effect_pending(){return h(this,Mf).call(this),O(h(this,Ss))}error(e){var r=h(this,Qi).onerror;let i=h(this,Qi).failed;if(h(this,ya)||!r&&!i)throw e;h(this,si)&&(tr(h(this,si)),W(this,si,null)),h(this,Or)&&(tr(h(this,Or)),W(this,Or,null)),h(this,Ji)&&(tr(h(this,Ji)),W(this,Ji,null)),ke&&(er(h(this,kc)),cs(),er(Cf()));var n=!1,s=!1;const a=()=>{if(n){zM();return}n=!0,s&&WM(),sn.ensure(),W(this,va,0),h(this,Ji)!==null&&Ea(h(this,Ji),()=>{W(this,Ji,null)}),W(this,Ci,this.has_pending_snippet()),W(this,si,re(this,lr,Vu).call(this,()=>(W(this,ya,!1),gr(()=>h(this,ma).call(this,h(this,Vr)))))),h(this,_s)>0?re(this,lr,qu).call(this):W(this,Ci,!1)};var o=Xe;try{kr(null),s=!0,r==null||r(e,a),s=!1}catch(l){Zo(l,h(this,Xi)&&h(this,Xi).parent)}finally{kr(o)}i&&pn(()=>{W(this,Ji,re(this,lr,Vu).call(this,()=>{W(this,ya,!0);try{return gr(()=>{i(h(this,Vr),()=>e,()=>a)})}catch(l){return Zo(l,h(this,Xi).parent),null}finally{W(this,ya,!1)}}))})}}Ci=new WeakMap,Vr=new WeakMap,kc=new WeakMap,Qi=new WeakMap,ma=new WeakMap,Xi=new WeakMap,si=new WeakMap,Or=new WeakMap,Ji=new WeakMap,ws=new WeakMap,va=new WeakMap,_s=new WeakMap,ya=new WeakMap,Ss=new WeakMap,jf=new WeakMap,Mf=new WeakMap,lr=new WeakSet,t1=function(){try{W(this,si,gr(()=>h(this,ma).call(this,h(this,Vr))))}catch(e){this.error(e)}W(this,Ci,!1)},r1=function(){const e=h(this,Qi).pending;e&&(W(this,Or,gr(()=>e(h(this,Vr)))),sn.enqueue(()=>{W(this,si,re(this,lr,Vu).call(this,()=>(sn.ensure(),gr(()=>h(this,ma).call(this,h(this,Vr)))))),h(this,_s)>0?re(this,lr,qu).call(this):(Ea(h(this,Or),()=>{W(this,Or,null)}),W(this,Ci,!1))}))},Vu=function(e){var r=Ze,i=Xe,n=mt;mn(h(this,Xi)),kr(h(this,Xi)),Ko(h(this,Xi).ctx);try{return e()}catch(s){return QS(s),null}finally{mn(r),kr(i),Ko(n)}},qu=function(){const e=h(this,Qi).pending;h(this,si)!==null&&(W(this,ws,document.createDocumentFragment()),QM(h(this,si),h(this,ws))),h(this,Or)===null&&W(this,Or,gr(()=>e(h(this,Vr))))},rg=function(e){var r;if(!this.has_pending_snippet()){this.parent&&re(r=this.parent,lr,rg).call(r,e);return}W(this,_s,h(this,_s)+e),h(this,_s)===0&&(W(this,Ci,!1),h(this,Or)&&Ea(h(this,Or),()=>{W(this,Or,null)}),h(this,ws)&&(h(this,Vr).before(h(this,ws)),W(this,ws,null)),pn(()=>{sn.ensure().flush()}))};function QM(t,e){for(var r=t.nodes_start,i=t.nodes_end;r!==null;){var n=r===i?null:wn(r);e.append(r),r=n}}function i1(t,e,r){const i=Xc()?Jc:rc;if(e.length===0){r(t.map(i));return}var n=wt,s=Ze,a=XM(),o=ke;Promise.all(e.map(l=>JM(l))).then(l=>{a();try{r([...t.map(i),...l])}catch(c){s.f&Va||Zo(c,s)}o&&Cr(!1),n==null||n.deactivate(),n1()}).catch(l=>{Zo(l,s)})}function XM(){var t=Ze,e=Xe,r=mt,i=wt,n=ke;if(n)var s=Ve;return function(){mn(t),kr(e),Ko(r),i==null||i.activate(),n&&(Cr(!0),er(s))}}function n1(){mn(null),kr(null),Ko(null)}function Jc(t){var e=Nr|Xr,r=Xe!==null&&Xe.f&Nr?Xe:null;return Ze===null||r!==null&&r.f&fi?e|=fi:Ze.f|=qa,{ctx:mt,deps:null,effects:null,equals:qS,f:e,fn:t,reactions:null,rv:0,v:Jt,wv:0,parent:r??Ze,ac:null}}function JM(t,e){let r=Ze;r===null&&DM();var i=r.b,n=void 0,s=Fa(Jt),a=!Xe,o=new Map;return f3(()=>{var d;var l=GS();n=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject)}catch(p){l.reject(p)}var c=wt,u=i.is_pending();a&&(i.update_pending_count(1),u||(c.increment(),(d=o.get(c))==null||d.reject(jl),o.set(c,l)));const f=(p,g=void 0)=>{u||c.activate(),g?g!==jl&&(s.f|=Sa,Qo(s,g)):(s.f&Sa&&(s.f^=Sa),Qo(s,p)),a&&(i.update_pending_count(-1),u||c.decrement()),n1()};l.promise.then(f,p=>f(null,p||"unknown"))}),Ih(()=>{for(const l of o.values())l.reject(jl)}),new Promise(l=>{function c(u){function f(){u===n?l(s):c(n)}u.then(f,f)}c(n)})}function e3(t){const e=Jc(t);return _1(e),e}function rc(t){const e=Jc(t);return e.equals=KS,e}function s1(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)tr(e[r])}}function t3(t){for(var e=t.parent;e!==null;){if(!(e.f&Nr))return e;e=e.parent}return null}function Dm(t){var e,r=Ze;mn(t3(t));try{s1(t),e=T1(t)}finally{mn(r)}return e}function a1(t){var e=Dm(t);if(t.equals(e)||(t.v=e,t.wv=E1()),!Za){var r=(xs||t.f&fi)&&t.deps!==null?qn:ar;vr(t,r)}}const Ps=new Map;function Fa(t,e){var r={f:0,v:t,reactions:null,equals:qS,rv:0,wv:0};return r}function is(t,e){const r=Fa(t);return _1(r),r}function rt(t,e=!1,r=!0){var n;const i=Fa(t);return e||(i.equals=KS),ol&&r&&mt!==null&&mt.l!==null&&((n=mt.l).s??(n.s=[])).push(i),i}function xu(t,e){return ce(t,yt(()=>O(t))),e}function ce(t,e,r=!1){Xe!==null&&(!Di||Xe.f&qy)&&Xc()&&Xe.f&(Nr|Ha|Dh|qy)&&!(Dr!=null&&Dr.includes(t))&&BM();let i=r?ho(e):e;return Qo(t,i)}function Qo(t,e){if(!t.equals(e)){var r=t.v;Za?Ps.set(t,e):Ps.set(t,r),t.v=e;var i=sn.ensure();i.capture(t,r),t.f&Nr&&(t.f&Xr&&Dm(t),vr(t,t.f&fi?qn:ar)),t.wv=E1(),o1(t,Xr),Xc()&&Ze!==null&&Ze.f&ar&&!(Ze.f&(Vn|Hs))&&(ni===null?p3([t]):ni.push(t))}return e}function Bl(t){ce(t,t.v+1)}function o1(t,e){var r=t.reactions;if(r!==null)for(var i=Xc(),n=r.length,s=0;s<n;s++){var a=r[s],o=a.f;if(!(!i&&a===Ze)){var l=(o&Xr)===0;l&&vr(a,e),o&Nr?o1(a,qn):l&&(o&Ha&&An!==null&&An.push(a),Na(a))}}}function ho(t){if(typeof t!="object"||t===null||un in t)return t;const e=Tm(t);if(e!==EM&&e!==xM)return t;var r=new Map,i=ll(t),n=is(0),s=xa,a=o=>{if(xa===s)return o();var l=Xe,c=xa;kr(null),Jy(s);var u=o();return kr(l),Jy(c),u};return i&&r.set("length",is(t.length)),new Proxy(t,{defineProperty(o,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&jM();var u=r.get(l);return u===void 0?u=a(()=>{var f=is(c.value);return r.set(l,f),f}):ce(u,c.value,!0),!0},deleteProperty(o,l){var c=r.get(l);if(c===void 0){if(l in o){const u=a(()=>is(Jt));r.set(l,u),Bl(n)}}else ce(c,Jt),Bl(n);return!0},get(o,l,c){var p;if(l===un)return t;var u=r.get(l),f=l in o;if(u===void 0&&(!f||(p=cn(o,l))!=null&&p.writable)&&(u=a(()=>{var g=ho(f?o[l]:Jt),m=is(g);return m}),r.set(l,u)),u!==void 0){var d=O(u);return d===Jt?void 0:d}return Reflect.get(o,l,c)},getOwnPropertyDescriptor(o,l){var c=Reflect.getOwnPropertyDescriptor(o,l);if(c&&"value"in c){var u=r.get(l);u&&(c.value=O(u))}else if(c===void 0){var f=r.get(l),d=f==null?void 0:f.v;if(f!==void 0&&d!==Jt)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return c},has(o,l){var d;if(l===un)return!0;var c=r.get(l),u=c!==void 0&&c.v!==Jt||Reflect.has(o,l);if(c!==void 0||Ze!==null&&(!u||(d=cn(o,l))!=null&&d.writable)){c===void 0&&(c=a(()=>{var p=u?ho(o[l]):Jt,g=is(p);return g}),r.set(l,c));var f=O(c);if(f===Jt)return!1}return u},set(o,l,c,u){var b;var f=r.get(l),d=l in o;if(i&&l==="length")for(var p=c;p<f.v;p+=1){var g=r.get(p+"");g!==void 0?ce(g,Jt):p in o&&(g=a(()=>is(Jt)),r.set(p+"",g))}if(f===void 0)(!d||(b=cn(o,l))!=null&&b.writable)&&(f=a(()=>is(void 0)),ce(f,ho(c)),r.set(l,f));else{d=f.v!==Jt;var m=a(()=>ho(c));ce(f,m)}var w=Reflect.getOwnPropertyDescriptor(o,l);if(w!=null&&w.set&&w.set.call(u,c),!d){if(i&&typeof l=="string"){var v=r.get("length"),y=Number(l);Number.isInteger(y)&&y>=v.v&&ce(v,y+1)}Bl(n)}return!0},ownKeys(o){O(n);var l=Reflect.ownKeys(o).filter(f=>{var d=r.get(f);return d===void 0||d.v!==Jt});for(var[c,u]of r)u.v!==Jt&&!(c in o)&&l.push(c);return l},setPrototypeOf(){MM()}})}function Ky(t){try{if(t!==null&&typeof t=="object"&&un in t)return t[un]}catch{}return t}function r3(t,e){return Object.is(Ky(t),Ky(e))}var Df,l1,c1,u1;function ig(){if(Df===void 0){Df=window,l1=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;c1=cn(e,"firstChild").get,u1=cn(e,"nextSibling").get,Vy(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Vy(r)&&(r.__t=void 0)}}function di(t=""){return document.createTextNode(t)}function gn(t){return c1.call(t)}function wn(t){return u1.call(t)}function Ue(t,e){if(!ke)return gn(t);var r=gn(Ve);if(r===null)r=Ve.appendChild(di());else if(e&&r.nodeType!==Ph){var i=di();return r==null||r.before(i),er(i),i}return er(r),r}function Ft(t,e=!1){if(!ke){var r=gn(t);return r instanceof Comment&&r.data===""?wn(r):r}if(e&&(Ve==null?void 0:Ve.nodeType)!==Ph){var i=di();return Ve==null||Ve.before(i),er(i),i}return Ve}function We(t,e=1,r=!1){let i=ke?Ve:t;for(var n;e--;)n=i,i=wn(i);if(!ke)return i;if(r&&(i==null?void 0:i.nodeType)!==Ph){var s=di();return i===null?n==null||n.after(s):i.before(s),er(s),s}return er(i),i}function f1(t){t.textContent=""}function h1(){return!1}function i3(t,e){if(e){const r=document.body;t.autofocus=!0,pn(()=>{document.activeElement===r&&t.focus()})}}let Zy=!1;function d1(){Zy||(Zy=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Fh(t){var e=Xe,r=Ze;kr(null),mn(null);try{return t()}finally{kr(e),mn(r)}}function n3(t,e,r,i=r){t.addEventListener(e,()=>Fh(r));const n=t.__on_r;n?t.__on_r=()=>{n(),i(!0)}:t.__on_r=()=>i(!0),d1()}function p1(t){Ze===null&&Xe===null&&kM(),Xe!==null&&Xe.f&fi&&Ze===null&&OM(),Za&&PM()}function s3(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Mi(t,e,r,i=!0){var n=Ze;n!==null&&n.f&Pi&&(t|=Pi);var s={ctx:mt,deps:null,nodes_start:null,nodes_end:null,f:t|Xr,first:null,fn:e,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Xo(s),s.f|=Rm}catch(l){throw tr(s),l}else e!==null&&Na(s);if(i){var a=s;if(r&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&!(a.f&qa)&&(a=a.first),a!==null&&(a.parent=n,n!==null&&s3(a,n),Xe!==null&&Xe.f&Nr&&!(t&Hs))){var o=Xe;(o.effects??(o.effects=[])).push(a)}}return s}function a3(){return Xe!==null&&!Di}function Ih(t){const e=Mi(Ch,null,!1);return vr(e,ar),e.teardown=t,e}function ng(t){p1();var e=Ze.f,r=!Xe&&(e&Vn)!==0&&(e&Rm)===0;if(r){var i=mt;(i.e??(i.e=[])).push(t)}else return g1(t)}function g1(t){return Mi(Am|HS,t,!1)}function o3(t){return p1(),Mi(Ch|HS,t,!0)}function l3(t){sn.ensure();const e=Mi(Hs|qa,t,!0);return()=>{tr(e)}}function c3(t){sn.ensure();const e=Mi(Hs|qa,t,!0);return(r={})=>new Promise(i=>{r.outro?Ea(e,()=>{tr(e),i(void 0)}):(tr(e),i(void 0))})}function Ln(t){return Mi(Am,t,!1)}function lt(t,e){var r=mt,i={effect:null,ran:!1,deps:t};r.l.$.push(i),i.effect=Ya(()=>{t(),!i.ran&&(i.ran=!0,yt(e))})}function u3(){var t=mt;Ya(()=>{for(var e of t.l.$){e.deps();var r=e.effect;r.f&ar&&vr(r,qn),eu(r)&&Xo(r),e.ran=!1}})}function f3(t){return Mi(Dh|qa,t,!0)}function Ya(t,e=0){return Mi(Ch|e,t,!0)}function nr(t,e=[],r=[]){i1(e,r,i=>{Mi(Ch,()=>t(...i.map(O)),!0)})}function Ka(t,e=0){var r=Mi(Ha|e,t,!0);return r}function gr(t,e=!0){return Mi(Vn|qa,t,!0,e)}function m1(t){var e=t.teardown;if(e!==null){const r=Za,i=Xe;Xy(!0),kr(null);try{e.call(null)}finally{Xy(r),kr(i)}}}function v1(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const n=r.ac;n!==null&&Fh(()=>{n.abort(jl)});var i=r.next;r.f&Hs?r.parent=null:tr(r,e),r=i}}function h3(t){for(var e=t.first;e!==null;){var r=e.next;e.f&Vn||tr(e),e=r}}function tr(t,e=!0){var r=!1;(e||t.f&$M)&&t.nodes_start!==null&&t.nodes_end!==null&&(d3(t.nodes_start,t.nodes_end),r=!0),v1(t,e&&!r),Pf(t,0),vr(t,Va);var i=t.transitions;if(i!==null)for(const s of i)s.stop();m1(t);var n=t.parent;n!==null&&n.first!==null&&y1(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function d3(t,e){for(;t!==null;){var r=t===e?null:wn(t);t.remove(),t=r}}function y1(t){var e=t.parent,r=t.prev,i=t.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=r))}function Ea(t,e){var r=[];Pm(t,r,!0),b1(r,()=>{tr(t),e&&e()})}function b1(t,e){var r=t.length;if(r>0){var i=()=>--r||e();for(var n of t)n.out(i)}else e()}function Pm(t,e,r){if(!(t.f&Pi)){if(t.f^=Pi,t.transitions!==null)for(const a of t.transitions)(a.is_global||r)&&e.push(a);for(var i=t.first;i!==null;){var n=i.next,s=(i.f&cl)!==0||(i.f&Vn)!==0;Pm(i,e,s?r:!1),i=n}}}function Lh(t){w1(t,!0)}function w1(t,e){if(t.f&Pi){t.f^=Pi,t.f&ar||(vr(t,Xr),Na(t));for(var r=t.first;r!==null;){var i=r.next,n=(r.f&cl)!==0||(r.f&Vn)!==0;w1(r,n?e:!1),r=i}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let _o=!1;function Qy(t){_o=t}let Za=!1;function Xy(t){Za=t}let Xe=null,Di=!1;function kr(t){Xe=t}let Ze=null;function mn(t){Ze=t}let Dr=null;function _1(t){Xe!==null&&(Dr===null?Dr=[t]:Dr.push(t))}let $r=null,Br=0,ni=null;function p3(t){ni=t}let S1=1,ic=0,xa=ic;function Jy(t){xa=t}let xs=!1;function E1(){return++S1}function eu(t){var f;var e=t.f;if(e&Xr)return!0;if(e&qn){var r=t.deps,i=(e&fi)!==0;if(r!==null){var n,s,a=(e&Rf)!==0,o=i&&Ze!==null&&!xs,l=r.length;if((a||o)&&(Ze===null||!(Ze.f&Va))){var c=t,u=c.parent;for(n=0;n<l;n++)s=r[n],(a||!((f=s==null?void 0:s.reactions)!=null&&f.includes(c)))&&(s.reactions??(s.reactions=[])).push(c);a&&(c.f^=Rf),o&&u!==null&&!(u.f&fi)&&(c.f^=fi)}for(n=0;n<l;n++)if(s=r[n],eu(s)&&a1(s),s.wv>t.wv)return!0}(!i||Ze!==null&&!xs)&&vr(t,ar)}return!1}function x1(t,e,r=!0){var i=t.reactions;if(i!==null&&!(Dr!=null&&Dr.includes(t)))for(var n=0;n<i.length;n++){var s=i[n];s.f&Nr?x1(s,e,!1):e===s&&(r?vr(s,Xr):s.f&ar&&vr(s,qn),Na(s))}}function T1(t){var m;var e=$r,r=Br,i=ni,n=Xe,s=xs,a=Dr,o=mt,l=Di,c=xa,u=t.f;$r=null,Br=0,ni=null,xs=(u&fi)!==0&&(Di||!_o||Xe===null),Xe=u&(Vn|Hs)?null:t,Dr=null,Ko(t.ctx),Di=!1,xa=++ic,t.ac!==null&&(Fh(()=>{t.ac.abort(jl)}),t.ac=null);try{t.f|=Qp;var f=t.fn,d=f(),p=t.deps;if($r!==null){var g;if(Pf(t,Br),p!==null&&Br>0)for(p.length=Br+$r.length,g=0;g<$r.length;g++)p[Br+g]=$r[g];else t.deps=p=$r;if(!xs||u&Nr&&t.reactions!==null)for(g=Br;g<p.length;g++)((m=p[g]).reactions??(m.reactions=[])).push(t)}else p!==null&&Br<p.length&&(Pf(t,Br),p.length=Br);if(Xc()&&ni!==null&&!Di&&p!==null&&!(t.f&(Nr|qn|Xr)))for(g=0;g<ni.length;g++)x1(ni[g],t);return n!==null&&n!==t&&(ic++,ni!==null&&(i===null?i=ni:i.push(...ni))),t.f&Sa&&(t.f^=Sa),d}catch(w){return QS(w)}finally{t.f^=Qp,$r=e,Br=r,ni=i,Xe=n,xs=s,Dr=a,Ko(o),Di=l,xa=c}}function g3(t,e){let r=e.reactions;if(r!==null){var i=SM.call(r,t);if(i!==-1){var n=r.length-1;n===0?r=e.reactions=null:(r[i]=r[n],r.pop())}}r===null&&e.f&Nr&&($r===null||!$r.includes(e))&&(vr(e,qn),e.f&(fi|Rf)||(e.f^=Rf),s1(e),Pf(e,0))}function Pf(t,e){var r=t.deps;if(r!==null)for(var i=e;i<r.length;i++)g3(t,r[i])}function Xo(t){var e=t.f;if(!(e&Va)){vr(t,ar);var r=Ze,i=_o;Ze=t,_o=!0;try{e&Ha?h3(t):v1(t),m1(t);var n=T1(t);t.teardown=typeof n=="function"?n:null,t.wv=S1;var s;US&&lM&&t.f&Xr&&t.deps}finally{_o=i,Ze=r}}}async function m3(){await Promise.resolve(),Ae()}function O(t){var e=t.f,r=(e&Nr)!==0;if(Xe!==null&&!Di){var i=Ze!==null&&(Ze.f&Va)!==0;if(!i&&!(Dr!=null&&Dr.includes(t))){var n=Xe.deps;if(Xe.f&Qp)t.rv<ic&&(t.rv=ic,$r===null&&n!==null&&n[Br]===t?Br++:$r===null?$r=[t]:(!xs||!$r.includes(t))&&$r.push(t));else{(Xe.deps??(Xe.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Xe]:s.includes(Xe)||s.push(Xe)}}}else if(r&&t.deps===null&&t.effects===null){var a=t,o=a.parent;o!==null&&!(o.f&fi)&&(a.f^=fi)}if(Za){if(Ps.has(t))return Ps.get(t);if(r){a=t;var l=a.v;return(!(a.f&ar)&&a.reactions!==null||A1(a))&&(l=Dm(a)),Ps.set(a,l),l}}else r&&(a=t,eu(a)&&a1(a));if(t.f&Sa)throw t.v;return t.v}function A1(t){if(t.v===Jt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Ps.has(e)||e.f&Nr&&A1(e))return!0;return!1}function yt(t){var e=Di;try{return Di=!0,t()}finally{Di=e}}const v3=-7169;function vr(t,e){t.f=t.f&v3|e}function Ee(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(un in t)sg(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&un in r&&sg(r)}}}function sg(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{sg(t[i],e)}catch{}const r=Tm(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const i=zS(r);for(let n in i){const s=i[n].get;if(s)try{s.call(t)}catch{}}}}}const $1=new Set,ag=new Set;function R1(t,e,r,i={}){function n(s){if(i.capture||Fl.call(e,s),!s.cancelBubble)return Fh(()=>r==null?void 0:r.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?pn(()=>{e.addEventListener(t,n,i)}):e.addEventListener(t,n,i),n}function zt(t,e,r,i,n){var s={capture:i,passive:n},a=R1(t,e,r,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Ih(()=>{e.removeEventListener(t,a,s)})}function Om(t){for(var e=0;e<t.length;e++)$1.add(t[e]);for(var r of ag)r(t)}let eb=null;function Fl(t){var y;var e=this,r=e.ownerDocument,i=t.type,n=((y=t.composedPath)==null?void 0:y.call(t))||[],s=n[0]||t.target;eb=t;var a=0,o=eb===t&&t.__root;if(o){var l=n.indexOf(o);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var c=n.indexOf(e);if(c===-1)return;l<=c&&(a=l)}if(s=n[a]||t.target,s!==e){Yo(t,"currentTarget",{configurable:!0,get(){return s||r}});var u=Xe,f=Ze;kr(null),mn(null);try{for(var d,p=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var m=s["__"+i];if(m!=null&&(!s.disabled||t.target===s))if(ll(m)){var[w,...v]=m;w.apply(s,[t,...v])}else m.call(s,t)}catch(b){d?p.push(b):d=b}if(t.cancelBubble||g===e||g===null)break;s=g}if(d){for(let b of p)queueMicrotask(()=>{throw b});throw d}}finally{t.__root=e,delete t.currentTarget,kr(u),mn(f)}}}function C1(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Oi(t,e){var r=Ze;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function ht(t,e){var r=(e&vM)!==0,i=(e&yM)!==0,n,s=!t.startsWith("<!>");return()=>{if(ke)return Oi(Ve,null),Ve;n===void 0&&(n=C1(s?t:"<!>"+t),r||(n=gn(n)));var a=i||l1?document.importNode(n,!0):n.cloneNode(!0);if(r){var o=gn(a),l=a.lastChild;Oi(o,l)}else Oi(a,a);return a}}function y3(t,e,r="svg"){var i=!t.startsWith("<!>"),n=`<${r}>${i?t:"<!>"+t}</${r}>`,s;return()=>{if(ke)return Oi(Ve,null),Ve;if(!s){var a=C1(n),o=gn(a);s=gn(o)}var l=s.cloneNode(!0);return Oi(l,l),l}}function jh(t,e){return y3(t,e,"svg")}function qi(t=""){if(!ke){var e=di(t+"");return Oi(e,e),e}var r=Ve;return r.nodeType!==Ph&&(r.before(r=di()),er(r)),Oi(r,r),r}function jt(){if(ke)return Oi(Ve,null),Ve;var t=document.createDocumentFragment(),e=document.createComment(""),r=di();return t.append(e,r),Oi(e,r),t}function Ce(t,e){if(ke){Ze.nodes_end=Ve,ka();return}t!==null&&t.before(e)}function b3(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const w3=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function _3(t){return w3.includes(t)}const S3={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function E3(t){return t=t.toLowerCase(),S3[t]??t}const x3=["touchstart","touchmove"];function T3(t){return x3.includes(t)}const A3=["textarea","script","style","title"];function $3(t){return A3.includes(t)}function fs(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function km(t,e){return D1(t,e)}function R3(t,e){ig(),e.intro=e.intro??!1;const r=e.target,i=ke,n=Ve;try{for(var s=gn(r);s&&(s.nodeType!==ul||s.data!==WS);)s=wn(s);if(!s)throw qo;Cr(!0),er(s);const a=D1(t,{...e,anchor:s});return Cr(!1),a}catch(a){if(a instanceof Error&&a.message.split(`
`).some(o=>o.startsWith("https://svelte.dev/e/")))throw a;return a!==qo&&console.warn("Failed to hydrate: ",a),e.recover===!1&&FM(),ig(),f1(r),Cr(!1),km(t,e)}finally{Cr(i),er(n)}}const no=new Map;function D1(t,{target:e,anchor:r,props:i={},events:n,context:s,intro:a=!0}){ig();var o=new Set,l=f=>{for(var d=0;d<f.length;d++){var p=f[d];if(!o.has(p)){o.add(p);var g=T3(p);e.addEventListener(p,Fl,{passive:g});var m=no.get(p);m===void 0?(document.addEventListener(p,Fl,{passive:g}),no.set(p,1)):no.set(p,m+1)}}};l(xm($1)),ag.add(l);var c=void 0,u=c3(()=>{var f=r??e.appendChild(di());return KM(f,{pending:()=>{}},d=>{if(s){Ir({});var p=mt;p.c=s}if(n&&(i.$$events=n),ke&&Oi(d,null),c=t(d,i)||{},ke&&(Ze.nodes_end=Ve,Ve===null||Ve.nodeType!==ul||Ve.data!==Em))throw kh(),qo;s&&Lr()}),()=>{var g;for(var d of o){e.removeEventListener(d,Fl);var p=no.get(d);--p===0?(document.removeEventListener(d,Fl),no.delete(d)):no.set(d,p)}ag.delete(l),f!==r&&((g=f.parentNode)==null||g.removeChild(f))}});return og.set(c,u),c}let og=new WeakMap;function C3(t,e){const r=og.get(t);return r?(og.delete(t),r(e)):Promise.resolve()}function Yn(t,e,...r){var i=t,n=mr,s;Ka(()=>{n!==(n=e())&&(s&&(tr(s),s=null),s=gr(()=>n(i,...r)))},cl),ke&&(i=Ve)}function Nm(t){mt===null&&Oh(),ol&&mt.l!==null?P1(mt).m.push(t):ng(()=>{const e=yt(t);if(typeof e=="function")return e})}function Fm(t){mt===null&&Oh(),Nm(()=>()=>yt(t))}function D3(t,e,{bubbles:r=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:i})}function P3(){const t=mt;return t===null&&Oh(),(e,r,i)=>{var s;const n=(s=t.s.$$events)==null?void 0:s[e];if(n){const a=ll(n)?n.slice():[n],o=D3(e,r,i);for(const l of a)l.call(t.x,o);return!o.defaultPrevented}return!0}}function O3(t){mt===null&&Oh(),mt.l===null&&IM(),P1(mt).b.push(t)}function P1(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}function vt(t,e,r=!1){ke&&ka();var i=t,n=null,s=null,a=Jt,o=r?cl:0,l=!1;const c=(p,g=!0)=>{l=!0,d(g,p)};var u=null;function f(){u!==null&&(u.lastChild.remove(),i.before(u),u=null);var p=a?n:s,g=a?s:n;p&&Lh(p),g&&Ea(g,()=>{a?s=null:n=null})}const d=(p,g)=>{if(a===(a=p))return;let m=!1;if(ke){const L=VS(i)===Rh;!!a===L&&(i=Cf(),er(i),Cr(!1),m=!0)}var w=h1(),v=i;if(w&&(u=document.createDocumentFragment(),u.append(v=di())),a?n??(n=g&&gr(()=>g(v))):s??(s=g&&gr(()=>g(v))),w){var y=wt,b=a?n:s,T=a?s:n;b&&y.skipped_effects.delete(b),T&&y.skipped_effects.add(T),y.add_callback(f)}else f();m&&Cr(!0)};Ka(()=>{l=!1,e(c),l||d(null,null)},o),ke&&(i=Ve)}let Ta=null;function tb(t){Ta=t}function Of(t,e){return e}function k3(t,e,r){for(var i=t.items,n=[],s=e.length,a=0;a<s;a++)Pm(e[a].e,n,!0);var o=s>0&&n.length===0&&r!==null;if(o){var l=r.parentNode;f1(l),l.append(r),i.clear(),zi(t,e[0].prev,e[s-1].next)}b1(n,()=>{for(var c=0;c<s;c++){var u=e[c];o||(i.delete(u.k),zi(t,u.prev,u.next)),tr(u.e,!o)}})}function nc(t,e,r,i,n,s=null){var a=t,o={flags:e,items:new Map,first:null},l=(e&BS)!==0;if(l){var c=t;a=ke?er(gn(c)):c.appendChild(di())}ke&&ka();var u=null,f=!1,d=new Map,p=rc(()=>{var v=r();return ll(v)?v:v==null?[]:xm(v)}),g,m;function w(){N3(m,g,o,d,a,n,e,i,r),s!==null&&(g.length===0?u?Lh(u):u=gr(()=>s(a)):u!==null&&Ea(u,()=>{u=null}))}Ka(()=>{m??(m=Ze),g=O(p);var v=g.length;if(f&&v===0)return;f=v===0;let y=!1;if(ke){var b=VS(a)===Rh;b!==(v===0)&&(a=Cf(),er(a),Cr(!1),y=!0)}if(ke){for(var T=null,L,H=0;H<v;H++){if(Ve.nodeType===ul&&Ve.data===Em){a=Ve,y=!0,Cr(!1);break}var B=g[H],S=i(B,H);L=lg(Ve,o,T,null,B,S,H,n,e,r),o.items.set(S,L),T=L}v>0&&er(Cf())}if(ke)v===0&&s&&(u=gr(()=>s(a)));else if(h1()){var G=new Set,q=wt;for(H=0;H<v;H+=1){B=g[H],S=i(B,H);var te=o.items.get(S)??d.get(S);te?e&(Ah|$h)&&O1(te,B,H,e):(L=lg(null,o,null,null,B,S,H,n,e,r,!0),d.set(S,L)),G.add(S)}for(const[X,M]of o.items)G.has(X)||q.skipped_effects.add(M.e);q.add_callback(w)}else w();y&&Cr(!0),O(p)}),ke&&(a=Ve)}function N3(t,e,r,i,n,s,a,o,l){var Y,de,Se,De;var c=(a&uM)!==0,u=(a&(Ah|$h))!==0,f=e.length,d=r.items,p=r.first,g=p,m,w=null,v,y=[],b=[],T,L,H,B;if(c)for(B=0;B<f;B+=1)T=e[B],L=o(T,B),H=d.get(L),H!==void 0&&((Y=H.a)==null||Y.measure(),(v??(v=new Set)).add(H));for(B=0;B<f;B+=1){if(T=e[B],L=o(T,B),H=d.get(L),H===void 0){var S=i.get(L);if(S!==void 0){i.delete(L),d.set(L,S);var G=w?w.next:g;zi(r,w,S),zi(r,S,G),zd(S,G,n),w=S}else{var q=g?g.e.nodes_start:n;w=lg(q,r,w,w===null?r.first:w.next,T,L,B,s,a,l)}d.set(L,w),y=[],b=[],g=w.next;continue}if(u&&O1(H,T,B,a),H.e.f&Pi&&(Lh(H.e),c&&((de=H.a)==null||de.unfix(),(v??(v=new Set)).delete(H))),H!==g){if(m!==void 0&&m.has(H)){if(y.length<b.length){var te=b[0],X;w=te.prev;var M=y[0],ve=y[y.length-1];for(X=0;X<y.length;X+=1)zd(y[X],te,n);for(X=0;X<b.length;X+=1)m.delete(b[X]);zi(r,M.prev,ve.next),zi(r,w,M),zi(r,ve,te),g=te,w=ve,B-=1,y=[],b=[]}else m.delete(H),zd(H,g,n),zi(r,H.prev,H.next),zi(r,H,w===null?r.first:w.next),zi(r,w,H),w=H;continue}for(y=[],b=[];g!==null&&g.k!==L;)g.e.f&Pi||(m??(m=new Set)).add(g),b.push(g),g=g.next;if(g===null)continue;H=g}y.push(H),w=H,g=H.next}if(g!==null||m!==void 0){for(var ue=m===void 0?[]:xm(m);g!==null;)g.e.f&Pi||ue.push(g),g=g.next;var ye=ue.length;if(ye>0){var j=a&BS&&f===0?n:null;if(c){for(B=0;B<ye;B+=1)(Se=ue[B].a)==null||Se.measure();for(B=0;B<ye;B+=1)(De=ue[B].a)==null||De.fix()}k3(r,ue,j)}}c&&pn(()=>{var ge;if(v!==void 0)for(H of v)(ge=H.a)==null||ge.apply()}),t.first=r.first&&r.first.e,t.last=w&&w.e;for(var I of i.values())tr(I.e);i.clear()}function O1(t,e,r,i){i&Ah&&Qo(t.v,e),i&$h?Qo(t.i,r):t.i=r}function lg(t,e,r,i,n,s,a,o,l,c,u){var f=Ta,d=(l&Ah)!==0,p=(l&fM)===0,g=d?p?rt(n,!1,!1):Fa(n):n,m=l&$h?Fa(a):a,w={i:m,v:g,k:s,a:null,e:null,prev:r,next:i};Ta=w;try{if(t===null){var v=document.createDocumentFragment();v.append(t=di())}return w.e=gr(()=>o(t,g,m,c),ke),w.e.prev=r&&r.e,w.e.next=i&&i.e,r===null?u||(e.first=w):(r.next=w,r.e.next=w.e),i!==null&&(i.prev=w,i.e.prev=w.e),w}finally{Ta=f}}function zd(t,e,r){for(var i=t.next?t.next.e.nodes_start:r,n=e?e.e.nodes_start:r,s=t.e.nodes_start;s!==null&&s!==i;){var a=wn(s);n.before(s),s=a}}function zi(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function dr(t,e,r,i,n){var o;ke&&ka();var s=(o=e.$$slots)==null?void 0:o[r],a=!1;s===!0&&(s=e[r==="default"?"children":r],a=!0),s===void 0?n!==null&&n(t):s(t,a?()=>i:i)}function F3(t){const e={};t.children&&(e.default=!0);for(const r in t.$$slots)e[r]=!0;return e}function I3(t,e,r,i,n,s){let a=ke;ke&&ka();var o,l,c=null;ke&&Ve.nodeType===CM&&(c=Ve,ka());var u=ke?Ve:t,f,d=Ta;Ka(()=>{const p=e()||null;var g=wM;if(p!==o){var m=Ta;tb(d),f&&(p===null?Ea(f,()=>{f=null,l=null}):p===l?Lh(f):tr(f)),p&&p!==l&&(f=gr(()=>{if(c=ke?c:document.createElementNS(g,p),Oi(c,c),i){ke&&$3(p)&&c.append(document.createComment(""));var w=ke?gn(c):c.appendChild(di());ke&&(w===null?Cr(!1):er(w)),i(c,w)}Ze.nodes_end=c,u.before(c)})),o=p,o&&(l=o),tb(m)}},cl),a&&(Cr(!0),er(u))}function fl(t,e){Ln(()=>{var r=t.getRootNode(),i=r.host?r:r.head??r.ownerDocument.head;if(!i.querySelector("#"+e.hash)){const n=document.createElement("style");n.id=e.hash,n.textContent=e.code,i.appendChild(n)}})}function Tu(t,e,r){Ln(()=>{var i=yt(()=>e(t,r==null?void 0:r())||{});if(r&&(i!=null&&i.update)){var n=!1,s={};Ya(()=>{var a=r();Ee(a),n&&YS(s,a)&&(s=a,i.update(a))}),n=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function L3(t,e){var r=void 0,i;Ka(()=>{r!==(r=e())&&(i&&(tr(i),i=null),r&&(i=gr(()=>{Ln(()=>r(t))})))})}function k1(t){var e,r,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(r=k1(t[e]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}function j3(){for(var t,e,r=0,i="",n=arguments.length;r<n;r++)(t=arguments[r])&&(e=k1(t))&&(i&&(i+=" "),i+=e);return i}function N1(t){return typeof t=="object"?j3(t):t??""}const rb=[...` 	
\r\f\v\uFEFF`];function M3(t,e,r){var i=t==null?"":""+t;if(e&&(i=i?i+" "+e:e),r){for(var n in r)if(r[n])i=i?i+" "+n:n;else if(i.length)for(var s=n.length,a=0;(a=i.indexOf(n,a))>=0;){var o=a+s;(a===0||rb.includes(i[a-1]))&&(o===i.length||rb.includes(i[o]))?i=(a===0?"":i.substring(0,a))+i.substring(o+1):a=o}}return i===""?null:i}function ib(t,e=!1){var r=e?" !important;":";",i="";for(var n in t){var s=t[n];s!=null&&s!==""&&(i+=" "+n+": "+s+r)}return i}function Gd(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function B3(t,e){if(e){var r="",i,n;if(Array.isArray(e)?(i=e[0],n=e[1]):i=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,a=0,o=!1,l=[];i&&l.push(...Object.keys(i).map(Gd)),n&&l.push(...Object.keys(n).map(Gd));var c=0,u=-1;const m=t.length;for(var f=0;f<m;f++){var d=t[f];if(o?d==="/"&&t[f-1]==="*"&&(o=!1):s?s===d&&(s=!1):d==="/"&&t[f+1]==="*"?o=!0:d==='"'||d==="'"?s=d:d==="("?a++:d===")"&&a--,!o&&s===!1&&a===0){if(d===":"&&u===-1)u=f;else if(d===";"||f===m-1){if(u!==-1){var p=Gd(t.substring(c,u).trim());if(!l.includes(p)){d!==";"&&f++;var g=t.substring(c,f).trim();r+=" "+g+";"}}c=f+1,u=-1}}}}return i&&(r+=ib(i)),n&&(r+=ib(n,!0)),r=r.trim(),r===""?null:r}return t==null?null:String(t)}function tn(t,e,r,i,n,s){var a=t.__className;if(ke||a!==r||a===void 0){var o=M3(r,i,s);(!ke||o!==t.getAttribute("class"))&&(o==null?t.removeAttribute("class"):e?t.className=o:t.setAttribute("class",o)),t.__className=r}else if(s&&n!==s)for(var l in s){var c=!!s[l];(n==null||c!==!!n[l])&&t.classList.toggle(l,c)}return s}function Hd(t,e={},r,i){for(var n in r){var s=r[n];e[n]!==s&&(r[n]==null?t.style.removeProperty(n):t.style.setProperty(n,s,i))}}function Im(t,e,r,i){var n=t.__style;if(ke||n!==e){var s=B3(e,i);(!ke||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}else i&&(Array.isArray(i)?(Hd(t,r==null?void 0:r[0],i[0]),Hd(t,r==null?void 0:r[1],i[1],"important")):Hd(t,r,i));return i}function cg(t,e,r=!1){if(t.multiple){if(e==null)return;if(!ll(e))return UM();for(var i of t.options)i.selected=e.includes(nb(i));return}for(i of t.options){var n=nb(i);if(r3(n,e)){i.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function W3(t){var e=new MutationObserver(()=>{cg(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ih(()=>{e.disconnect()})}function nb(t){return"__value"in t?t.__value:t.value}const Sl=Symbol("class"),El=Symbol("style"),F1=Symbol("is custom element"),I1=Symbol("is html");function kf(t){if(ke){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var i=t.value;Is(t,"value",null),t.value=i}if(t.hasAttribute("checked")){var n=t.checked;Is(t,"checked",null),t.checked=n}}};t.__on_r=r,pn(r),d1()}}function ug(t,e){var r=Lm(t);r.value===(r.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function U3(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function Is(t,e,r,i){var n=Lm(t);ke&&(n[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||n[e]!==(n[e]=r)&&(e==="loading"&&(t[RM]=r),r==null?t.removeAttribute(e):typeof r!="string"&&L1(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function z3(t,e,r,i,n=!1,s=!1){if(ke&&n&&t.tagName==="INPUT"){var a=t,o=a.type==="checkbox"?"defaultChecked":"defaultValue";o in r||kf(a)}var l=Lm(t),c=l[F1],u=!l[I1];let f=ke&&c;f&&Cr(!1);var d=e||{},p=t.tagName==="OPTION";for(var g in e)g in r||(r[g]=null);r.class?r.class=N1(r.class):(i||r[Sl])&&(r.class=null),r[El]&&(r.style??(r.style=null));var m=L1(t);for(const H in r){let B=r[H];if(p&&H==="value"&&B==null){t.value=t.__value="",d[H]=B;continue}if(H==="class"){var w=t.namespaceURI==="http://www.w3.org/1999/xhtml";tn(t,w,B,i,e==null?void 0:e[Sl],r[Sl]),d[H]=B,d[Sl]=r[Sl];continue}if(H==="style"){Im(t,B,e==null?void 0:e[El],r[El]),d[H]=B,d[El]=r[El];continue}var v=d[H];if(!(B===v&&!(B===void 0&&t.hasAttribute(H)))){d[H]=B;var y=H[0]+H[1];if(y!=="$$")if(y==="on"){const S={},G="$$"+H;let q=H.slice(2);var b=_3(q);if(b3(q)&&(q=q.slice(0,-7),S.capture=!0),!b&&v){if(B!=null)continue;t.removeEventListener(q,d[G],S),d[G]=null}if(B!=null)if(b)t[`__${q}`]=B,Om([q]);else{let te=function(X){d[H].call(this,X)};d[G]=R1(q,t,te,S)}else b&&(t[`__${q}`]=void 0)}else if(H==="style")Is(t,H,B);else if(H==="autofocus")i3(t,!!B);else if(!c&&(H==="__value"||H==="value"&&B!=null))t.value=t.__value=B;else if(H==="selected"&&p)U3(t,B);else{var T=H;u||(T=E3(T));var L=T==="defaultValue"||T==="defaultChecked";if(B==null&&!c&&!L)if(l[H]=null,T==="value"||T==="checked"){let S=t;const G=e===void 0;if(T==="value"){let q=S.defaultValue;S.removeAttribute(T),S.defaultValue=q,S.value=S.__value=G?q:null}else{let q=S.defaultChecked;S.removeAttribute(T),S.defaultChecked=q,S.checked=G?q:!1}}else t.removeAttribute(H);else L||m.includes(T)&&(c||typeof B!="string")?(t[T]=B,T in l&&(l[T]=Jt)):typeof B!="function"&&Is(t,T,B)}}}return f&&Cr(!0),d}function fg(t,e,r=[],i=[],n,s=!1,a=!1){i1(r,i,o=>{var l=void 0,c={},u=t.nodeName==="SELECT",f=!1;if(Ka(()=>{var p=e(...o.map(O)),g=z3(t,l,p,n,s,a);f&&u&&"value"in p&&cg(t,p.value);for(let w of Object.getOwnPropertySymbols(c))p[w]||tr(c[w]);for(let w of Object.getOwnPropertySymbols(p)){var m=p[w];w.description===_M&&(!l||m!==l[w])&&(c[w]&&tr(c[w]),c[w]=gr(()=>L3(t,()=>m))),g[w]=m}l=g}),u){var d=t;Ln(()=>{cg(d,l.value,!0),W3(d)})}f=!0})}function Lm(t){return t.__attributes??(t.__attributes={[F1]:t.nodeName.includes("-"),[I1]:t.namespaceURI===bM})}var sb=new Map;function L1(t){var e=t.getAttribute("is")||t.nodeName,r=sb.get(e);if(r)return r;sb.set(e,r=[]);for(var i,n=t,s=Element.prototype;s!==n;){i=zS(n);for(var a in i)i[a].set&&r.push(a);n=Tm(n)}return r}const G3=()=>performance.now(),Fn={tick:t=>requestAnimationFrame(t),now:()=>G3(),tasks:new Set};function j1(){const t=Fn.now();Fn.tasks.forEach(e=>{e.c(t)||(Fn.tasks.delete(e),e.f())}),Fn.tasks.size!==0&&Fn.tick(j1)}function H3(t){let e;return Fn.tasks.size===0&&Fn.tick(j1),{promise:new Promise(r=>{Fn.tasks.add(e={c:t,f:r})}),abort(){Fn.tasks.delete(e)}}}function V3(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function ab(t){const e={},r=t.split(";");for(const i of r){const[n,s]=i.split(":");if(!n||s===void 0)break;const a=V3(n.trim());e[a]=s.trim()}return e}const q3=t=>t;function Y3(t,e,r){var i=Ta,n,s,a,o=null;i.a??(i.a={element:t,measure(){n=this.element.getBoundingClientRect()},apply(){if(a==null||a.abort(),s=this.element.getBoundingClientRect(),n.left!==s.left||n.right!==s.right||n.top!==s.top||n.bottom!==s.bottom){const l=e()(this.element,{from:n,to:s},r==null?void 0:r());a=M1(this.element,l,void 0,1,()=>{a==null||a.abort(),a=void 0})}},fix(){if(!t.getAnimations().length){var{position:l,width:c,height:u}=getComputedStyle(t);if(l!=="absolute"&&l!=="fixed"){var f=t.style;o={position:f.position,width:f.width,height:f.height,transform:f.transform},f.position="absolute",f.width=c,f.height=u;var d=t.getBoundingClientRect();if(n.left!==d.left||n.top!==d.top){var p=`translate(${n.left-d.left}px, ${n.top-d.top}px)`;f.transform=f.transform?`${f.transform} ${p}`:p}}}},unfix(){if(o){var l=t.style;l.position=o.position,l.width=o.width,l.height=o.height,l.transform=o.transform}}}),i.a.element=t}function M1(t,e,r,i,n){if(co(e)){var s,a=!1;return pn(()=>{if(!a){var m=e({direction:"in"});s=M1(t,m,r,i,n)}}),{abort:()=>{a=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(!(e!=null&&e.duration))return n(),{abort:mr,deactivate:mr,reset:mr,t:()=>i};const{delay:o=0,css:l,tick:c,easing:u=q3}=e;var f=[];if(c&&c(0,1),l){var d=ab(l(0,1));f.push(d,d)}var p=()=>1-i,g=t.animate(f,{duration:o,fill:"forwards"});return g.onfinish=()=>{g.cancel();var m=1-i,w=i-m,v=e.duration*Math.abs(w),y=[];if(v>0){var b=!1;if(l)for(var T=Math.ceil(v/16.666666666666668),L=0;L<=T;L+=1){var H=m+w*u(L/T),B=ab(l(H,1-H));y.push(B),b||(b=B.overflow==="hidden")}b&&(t.style.overflow="hidden"),p=()=>{var S=g.currentTime;return m+w*u(S/v)},c&&H3(()=>{if(g.playState!=="running")return!1;var S=p();return c(S,1-S),!0})}g=t.animate(y,{duration:v,fill:"forwards"}),g.onfinish=()=>{p=()=>i,c==null||c(i,1-i),n()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=mr)},deactivate:()=>{n=mr},reset:()=>{},t:()=>p()}}function K3(t,e,r=e){var i=new WeakSet;n3(t,"input",async n=>{var s=n?t.defaultValue:t.value;if(s=Vd(t)?qd(s):s,r(s),wt!==null&&i.add(wt),await m3(),s!==(s=e())){var a=t.selectionStart,o=t.selectionEnd,l=t.value.length;if(t.value=s??"",o!==null){var c=t.value.length;a===o&&o===l&&c>l?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=a,t.selectionEnd=Math.min(o,c))}}}),(ke&&t.defaultValue!==t.value||yt(e)==null&&t.value)&&(r(Vd(t)?qd(t.value):t.value),wt!==null&&i.add(wt)),Ya(()=>{var n=e();if(t===document.activeElement){var s=Gu??wt;if(i.has(s))return}Vd(t)&&n===qd(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function Vd(t){var e=t.type;return e==="number"||e==="range"}function qd(t){return t===""?null:+t}function ob(t,e,r){var i=cn(t,e);i&&i.set&&(t[e]=r,Ih(()=>{t[e]=null}))}function lb(t,e){return t===e||(t==null?void 0:t[un])===e}function Yd(t={},e,r,i){return Ln(()=>{var n,s;return Ya(()=>{n=s,s=[],yt(()=>{t!==r(...s)&&(e(t,...s),n&&lb(r(...n),t)&&e(null,...n))})}),()=>{pn(()=>{s&&lb(r(...s),t)&&e(null,...s)})}}),t}function so(t){return function(...e){var r=e[0];return r.stopPropagation(),t==null?void 0:t.apply(this,e)}}function Qs(t){return function(...e){var r=e[0];return r.preventDefault(),t==null?void 0:t.apply(this,e)}}function B1(t=!1){const e=mt,r=e.l.u;if(!r)return;let i=()=>Ee(e.s);if(t){let n=0,s={};const a=Jc(()=>{let o=!1;const l=e.s;for(const c in l)l[c]!==s[c]&&(s[c]=l[c],o=!0);return o&&n++,n});i=()=>O(a)}r.b.length&&o3(()=>{cb(e,i),Zp(r.b)}),ng(()=>{const n=yt(()=>r.m.map(TM));return()=>{for(const s of n)typeof s=="function"&&s()}}),r.a.length&&ng(()=>{cb(e,i),Zp(r.a)})}function cb(t,e){if(t.l.s)for(const r of t.l.s)O(r);e()}function Au(t,e){var s;var r=(s=t.$$events)==null?void 0:s[e.type],i=ll(r)?r.slice():r==null?[]:[r];for(var n of i)n.call(this,e)}let $u=!1;function Z3(t){var e=$u;try{return $u=!1,[t(),$u]}finally{$u=e}}const Q3={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Kn(t,e,r){return new Proxy({props:t,exclude:e},Q3)}const X3={get(t,e){let r=t.props.length;for(;r--;){let i=t.props[r];if(co(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i)return i[e]}},set(t,e,r){let i=t.props.length;for(;i--;){let n=t.props[i];co(n)&&(n=n());const s=cn(n,e);if(s&&s.set)return s.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let i=t.props[r];if(co(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i){const n=cn(i,e);return n&&!n.configurable&&(n.configurable=!0),n}}},has(t,e){if(e===un||e===Cm)return!1;for(let r of t.props)if(co(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(co(r)&&(r=r()),!!r){for(const i in r)e.includes(i)||e.push(i);for(const i of Object.getOwnPropertySymbols(r))e.includes(i)||e.push(i)}return e}};function Vs(...t){return new Proxy({props:t},X3)}function $e(t,e,r,i){var b;var n=!ol||(r&dM)!==0,s=(r&gM)!==0,a=(r&mM)!==0,o=i,l=!0,c=()=>(l&&(l=!1,o=a?yt(i):i),o),u;if(s){var f=un in t||Cm in t;u=((b=cn(t,e))==null?void 0:b.set)??(f&&e in t?T=>t[e]=T:void 0)}var d,p=!1;s?[d,p]=Z3(()=>t[e]):d=t[e],d===void 0&&i!==void 0&&(d=c(),u&&(n&&LM(),u(d)));var g;if(n?g=()=>{var T=t[e];return T===void 0?c():(l=!0,T)}:g=()=>{var T=t[e];return T!==void 0&&(o=void 0),T===void 0?o:T},n&&!(r&pM))return g;if(u){var m=t.$$legacy;return function(T,L){return arguments.length>0?((!n||!L||m||p)&&u(L?g():T),T):g()}}var w=!1,v=(r&hM?Jc:rc)(()=>(w=!1,g()));s&&O(v);var y=Ze;return function(T,L){if(arguments.length>0){const H=L?O(v):n&&s?ho(T):T;return ce(v,H),w=!0,o!==void 0&&(o=H),T}return Za&&w||y.f&Va?v.v:O(v)}}function J3(t){return new e4(t)}var Nn,ai;class e4{constructor(e){ie(this,Nn);ie(this,ai);var s;var r=new Map,i=(a,o)=>{var l=rt(o,!1,!1);return r.set(a,l),l};const n=new Proxy({...e.props||{},$$events:{}},{get(a,o){return O(r.get(o)??i(o,Reflect.get(a,o)))},has(a,o){return o===Cm?!0:(O(r.get(o)??i(o,Reflect.get(a,o))),Reflect.has(a,o))},set(a,o,l){return ce(r.get(o)??i(o,l),l),Reflect.set(a,o,l)}});W(this,ai,(e.hydrate?R3:km)(e.component,{target:e.target,anchor:e.anchor,props:n,context:e.context,intro:e.intro??!1,recover:e.recover})),(!((s=e==null?void 0:e.props)!=null&&s.$$host)||e.sync===!1)&&Ae(),W(this,Nn,n.$$events);for(const a of Object.keys(h(this,ai)))a==="$set"||a==="$destroy"||a==="$on"||Yo(this,a,{get(){return h(this,ai)[a]},set(o){h(this,ai)[a]=o},enumerable:!0});h(this,ai).$set=a=>{Object.assign(n,a)},h(this,ai).$destroy=()=>{C3(h(this,ai))}}$set(e){h(this,ai).$set(e)}$on(e,r){h(this,Nn)[e]=h(this,Nn)[e]||[];const i=(...n)=>r.call(this,...n);return h(this,Nn)[e].push(i),()=>{h(this,Nn)[e]=h(this,Nn)[e].filter(n=>n!==i)}}$destroy(){h(this,ai).$destroy()}}Nn=new WeakMap,ai=new WeakMap;let W1;typeof HTMLElement=="function"&&(W1=class extends HTMLElement{constructor(e,r,i){super();Q(this,"$$ctor");Q(this,"$$s");Q(this,"$$c");Q(this,"$$cn",!1);Q(this,"$$d",{});Q(this,"$$r",!1);Q(this,"$$p_d",{});Q(this,"$$l",{});Q(this,"$$l_u",new Map);Q(this,"$$me");this.$$ctor=e,this.$$s=r,i&&this.attachShadow({mode:"open"})}addEventListener(e,r,i){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(r),this.$$c){const n=this.$$c.$on(e,r);this.$$l_u.set(r,n)}super.addEventListener(e,r,i)}removeEventListener(e,r,i){if(super.removeEventListener(e,r,i),this.$$c){const n=this.$$l_u.get(r);n&&(n(),this.$$l_u.delete(r))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(n){return s=>{const a=document.createElement("slot");n!=="default"&&(a.name=n),Ce(s,a)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const r={},i=t4(this);for(const n of this.$$s)n in i&&(n==="default"&&!this.$$d.children?(this.$$d.children=e(n),r.default=!0):r[n]=e(n));for(const n of this.attributes){const s=this.$$g_p(n.name);s in this.$$d||(this.$$d[s]=Yu(s,n.value,this.$$p_d,"toProp"))}for(const n in this.$$p_d)!(n in this.$$d)&&this[n]!==void 0&&(this.$$d[n]=this[n],delete this[n]);this.$$c=J3({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:r,$$host:this}}),this.$$me=l3(()=>{Ya(()=>{var n;this.$$r=!0;for(const s of $f(this.$$c)){if(!((n=this.$$p_d[s])!=null&&n.reflect))continue;this.$$d[s]=this.$$c[s];const a=Yu(s,this.$$d[s],this.$$p_d,"toAttribute");a==null?this.removeAttribute(this.$$p_d[s].attribute||s):this.setAttribute(this.$$p_d[s].attribute||s,a)}this.$$r=!1})});for(const n in this.$$l)for(const s of this.$$l[n]){const a=this.$$c.$on(n,s);this.$$l_u.set(s,a)}this.$$l={}}}attributeChangedCallback(e,r,i){var n;this.$$r||(e=this.$$g_p(e),this.$$d[e]=Yu(e,i,this.$$p_d,"toProp"),(n=this.$$c)==null||n.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(e){return $f(this.$$p_d).find(r=>this.$$p_d[r].attribute===e||!this.$$p_d[r].attribute&&r.toLowerCase()===e)||e}});function Yu(t,e,r,i){var s;const n=(s=r[t])==null?void 0:s.type;if(e=n==="Boolean"&&typeof e!="boolean"?e!=null:e,!i||!r[t])return e;if(i==="toAttribute")switch(n){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(n){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}function t4(t){const e={};return t.childNodes.forEach(r=>{e[r.slot||"default"]=!0}),e}function yr(t,e,r,i,n,s){let a=class extends W1{constructor(){super(t,r,n),this.$$p_d=e}static get observedAttributes(){return $f(e).map(o=>(e[o].attribute||o).toLowerCase())}};return $f(e).forEach(o=>{Yo(a.prototype,o,{get(){return this.$$c&&o in this.$$c?this.$$c[o]:this.$$d[o]},set(l){var f;l=Yu(o,l,e),this.$$d[o]=l;var c=this.$$c;if(c){var u=(f=cn(c,o))==null?void 0:f.get;u?c[o]=l:c.$set({[o]:l})}}})}),i.forEach(o=>{Yo(a.prototype,o,{get(){var l;return(l=this.$$c)==null?void 0:l[o]}})}),t.element=a,a}var r4=ht("<button><!></button>");function Ui(t,e){Ir(e,!1);let r=$e(e,"variant",12,"default"),i=$e(e,"disabled",12,!1),n=$e(e,"style",12,""),s=$e(e,"title",12,""),a=$e(e,"onclick",12,void 0);var o={get variant(){return r()},set variant(u){r(u),Ae()},get disabled(){return i()},set disabled(u){i(u),Ae()},get style(){return n()},set style(u){n(u),Ae()},get title(){return s()},set title(u){s(u),Ae()},get onclick(){return a()},set onclick(u){a(u),Ae()}},l=r4();l.__click=function(...u){var f;(f=a())==null||f.apply(this,u)};var c=Ue(l);return dr(c,e,"default",{},null),Me(l),nr(()=>{tn(l,1,`wa-button ${r()==="primary"?"primary":r()==="ghost"?"ghost":""}`),Is(l,"aria-label",s()),l.disabled=i(),Im(l,n())}),Ce(t,l),Lr(o)}Om(["click"]);yr(Ui,{variant:{},disabled:{},style:{},title:{},onclick:{}},["default"],[],!0);var i4=ht("<button><span><!></span></button>");const n4={hash:"svelte-f3n0ii",code:`.spinning.svelte-f3n0ii {
    animation: svelte-f3n0ii-spin 1s linear infinite;}
  @keyframes svelte-f3n0ii-spin {
    100% {
      transform: rotate(360deg);
    }
  }`};function ii(t,e){Ir(e,!1),fl(t,n4);let r=$e(e,"ariaLabel",12,""),i=$e(e,"variant",12,"default"),n=$e(e,"disabled",12,!1),s=$e(e,"title",12),a=$e(e,"onclick",12,void 0),o=$e(e,"spinning",12,!1);var l={get ariaLabel(){return r()},set ariaLabel(d){r(d),Ae()},get variant(){return i()},set variant(d){i(d),Ae()},get disabled(){return n()},set disabled(d){n(d),Ae()},get title(){return s()},set title(d){s(d),Ae()},get onclick(){return a()},set onclick(d){a(d),Ae()},get spinning(){return o()},set spinning(d){o(d),Ae()}},c=i4();c.__click=function(...d){var p;(p=a())==null||p.apply(this,d)};var u=Ue(c),f=Ue(u);return dr(f,e,"default",{},null),Me(u),Me(c),nr(()=>{tn(c,1,`wa-icon-btn clickable-icon ${i()==="ghost"?"ghost":""}`,"svelte-f3n0ii"),Is(c,"aria-label",r()),c.disabled=n(),Is(c,"title",s()),tn(u,1,N1(o()?"spinning":""),"svelte-f3n0ii")}),Ce(t,c),Lr(l)}Om(["click"]);yr(ii,{ariaLabel:{},variant:{},disabled:{},title:{},onclick:{},spinning:{}},["default"],[],!0);class ub extends Z.Modal{constructor(e,r,i,n="draft"){super(e),this.name=r,this.onConfirm=i,this.type=n}onOpen(){const{contentEl:e}=this;e.addClass("wa-centered-modal");const r=this.type==="chapter"?"chapter":"draft";e.createEl("h3",{text:`Delete ${r} '${this.name}'?`}),this.type==="draft"&&e.createEl("p",{text:"This will create a backup copy before deleting."});const i=e.createDiv({cls:"modal-button-row wa-button-group"}),n=i.createEl("button",{text:"Delete",cls:"mod-cta wa-button"}),s=i.createEl("button",{text:"Cancel",cls:"wa-button"});n.onclick=async()=>{this.close(),await this.onConfirm()},s.onclick=()=>{this.close()}}}class s4 extends Z.Modal{constructor(e,r){super(e),this.props=r}onOpen(){const{contentEl:e}=this;e.createEl("h2",{text:`Duplicate Draft: ${this.props.sourceDraftName}`});let r="";new Z.Setting(e).setName("New draft name").addText(i=>i.setPlaceholder(this.props.suggestedName).setValue(this.props.suggestedName).onChange(n=>r=n)),new Z.Setting(e).addButton(i=>i.setButtonText("Duplicate").setCta().onClick(()=>{this.close();const n=r&&r.trim()?r.trim():this.props.suggestedName;this.props.onSubmit(n)}))}onClose(){this.contentEl.empty()}}class a4 extends Z.Modal{constructor(e,r,i){super(e),this.oldName=r,this.onSubmit=i}onOpen(){var s;const{contentEl:e}=this;e.empty(),e.createEl("h3",{text:"Rename Chapter"}),e.createEl("div",{text:`Current name: '${this.oldName}'`,cls:"wa-rename-info"});const r=e.createEl("label",{text:"New chapter name",cls:"wa-rename-label"});this.inputEl=e.createEl("input",{type:"text",value:this.oldName,placeholder:"Enter new chapter name",cls:"wa-rename-input",attr:{"aria-label":"New chapter name"}}),r.appendChild(this.inputEl),this.errorEl=e.createEl("div",{cls:"wa-rename-error"}),this.errorEl.style.color="var(--color-red, #d43c3c)",this.errorEl.style.display="none";const i=e.createEl("div",{cls:"wa-rename-btn-row"}),n=i.createEl("button",{text:"Rename",cls:"mod-cta"});this.cancelBtn=i.createEl("button",{text:"Cancel",cls:"mod-cancel"}),setTimeout(()=>{var a,o;(a=this.inputEl)==null||a.focus(),(o=this.inputEl)==null||o.select()},0),(s=this.inputEl)==null||s.addEventListener("keydown",a=>{a.key==="Enter"?this.submit():a.key==="Escape"&&this.close()}),n.addEventListener("click",()=>this.submit()),this.cancelBtn.addEventListener("click",()=>this.close())}submit(){var r,i,n;const e=(r=this.inputEl)==null?void 0:r.value.trim();if(!e){this.errorEl&&(this.errorEl.textContent="Chapter name cannot be empty.",this.errorEl.style.display=""),(i=this.inputEl)==null||i.focus();return}if(e===this.oldName){this.errorEl&&(this.errorEl.textContent="Please enter a different name.",this.errorEl.style.display=""),(n=this.inputEl)==null||n.focus();return}this.errorEl&&(this.errorEl.style.display="none"),this.onSubmit(e),this.close()}}/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const o4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var l4=jh("<svg><!><!></svg>");function Zn(t,e){Ir(e,!0);const r=$e(e,"name",7),i=$e(e,"color",7,"currentColor"),n=$e(e,"size",7,24),s=$e(e,"strokeWidth",7,2),a=$e(e,"absoluteStrokeWidth",7,!1),o=$e(e,"iconNode",23,()=>[]),l=$e(e,"children",7),c=Kn(e,["$$slots","$$events","$$legacy","$$host","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var u={get name(){return r()},set name(g){r(g),Ae()},get color(){return i()},set color(g="currentColor"){i(g),Ae()},get size(){return n()},set size(g=24){n(g),Ae()},get strokeWidth(){return s()},set strokeWidth(g=2){s(g),Ae()},get absoluteStrokeWidth(){return a()},set absoluteStrokeWidth(g=!1){a(g),Ae()},get iconNode(){return o()},set iconNode(g=[]){o(g),Ae()},get children(){return l()},set children(g){l(g),Ae()}},f=l4();fg(f,g=>({...o4,...c,width:n(),height:n(),stroke:i(),"stroke-width":g,class:["lucide-icon lucide",r()&&`lucide-${r()}`,e.class]}),[()=>a()?Number(s())*24/Number(n()):s()]);var d=Ue(f);nc(d,17,o,Of,(g,m)=>{var w=e3(()=>AM(O(m),2));let v=()=>O(w)[0],y=()=>O(w)[1];var b=jt(),T=Ft(b);I3(T,v,!0,(L,H)=>{fg(L,()=>({...y()}))}),Ce(g,b)});var p=We(d);return Yn(p,()=>l()??mr),Me(f),Ce(t,f),Lr(u)}yr(Zn,{name:{},color:{},size:{},strokeWidth:{},absoluteStrokeWidth:{},iconNode:{},children:{}},[],[],!0);function hg(t,e){Ir(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Kn(e,["$$slots","$$events","$$legacy","$$host"]);const i=[["path",{d:"M12 5v14"}],["path",{d:"m19 12-7 7-7-7"}]];Zn(t,Vs({name:"arrow-down"},()=>r,{get iconNode(){return i},children:(n,s)=>{var a=jt(),o=Ft(a);Yn(o,()=>e.children??mr),Ce(n,a)},$$slots:{default:!0}})),Lr()}yr(hg,{},[],[],!0);function dg(t,e){Ir(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Kn(e,["$$slots","$$events","$$legacy","$$host"]);const i=[["path",{d:"m5 12 7-7 7 7"}],["path",{d:"M12 19V5"}]];Zn(t,Vs({name:"arrow-up"},()=>r,{get iconNode(){return i},children:(n,s)=>{var a=jt(),o=Ft(a);Yn(o,()=>e.children??mr),Ce(n,a)},$$slots:{default:!0}})),Lr()}yr(dg,{},[],[],!0);function U1(t,e){Ir(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Kn(e,["$$slots","$$events","$$legacy","$$host"]);const i=[["path",{d:"M12 21V7"}],["path",{d:"m16 12 2 2 4-4"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3"}]];Zn(t,Vs({name:"book-open-check"},()=>r,{get iconNode(){return i},children:(n,s)=>{var a=jt(),o=Ft(a);Yn(o,()=>e.children??mr),Ce(n,a)},$$slots:{default:!0}})),Lr()}yr(U1,{},[],[],!0);function z1(t,e){Ir(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Kn(e,["$$slots","$$events","$$legacy","$$host"]);const i=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];Zn(t,Vs({name:"copy"},()=>r,{get iconNode(){return i},children:(n,s)=>{var a=jt(),o=Ft(a);Yn(o,()=>e.children??mr),Ce(n,a)},$$slots:{default:!0}})),Lr()}yr(z1,{},[],[],!0);function pg(t,e){Ir(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Kn(e,["$$slots","$$events","$$legacy","$$host"]);const i=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];Zn(t,Vs({name:"eye"},()=>r,{get iconNode(){return i},children:(n,s)=>{var a=jt(),o=Ft(a);Yn(o,()=>e.children??mr),Ce(n,a)},$$slots:{default:!0}})),Lr()}yr(pg,{},[],[],!0);function gg(t,e){Ir(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Kn(e,["$$slots","$$events","$$legacy","$$host"]);const i=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];Zn(t,Vs({name:"pencil"},()=>r,{get iconNode(){return i},children:(n,s)=>{var a=jt(),o=Ft(a);Yn(o,()=>e.children??mr),Ce(n,a)},$$slots:{default:!0}})),Lr()}yr(gg,{},[],[],!0);function mg(t,e){Ir(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Kn(e,["$$slots","$$events","$$legacy","$$host"]);const i=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];Zn(t,Vs({name:"rotate-ccw"},()=>r,{get iconNode(){return i},children:(n,s)=>{var a=jt(),o=Ft(a);Yn(o,()=>e.children??mr),Ce(n,a)},$$slots:{default:!0}})),Lr()}yr(mg,{},[],[],!0);function vg(t,e){Ir(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let r=Kn(e,["$$slots","$$events","$$legacy","$$host"]);const i=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];Zn(t,Vs({name:"trash"},()=>r,{get iconNode(){return i},children:(n,s)=>{var a=jt(),o=Ft(a);Yn(o,()=>e.children??mr),Ce(n,a)},$$slots:{default:!0}})),Lr()}yr(vg,{},[],[],!0);const Nf=Math.min,Aa=Math.max,Ff=Math.round,Ru=Math.floor,fn=t=>({x:t,y:t}),c4={left:"right",right:"left",bottom:"top",top:"bottom"},u4={start:"end",end:"start"};function fb(t,e,r){return Aa(t,Nf(e,r))}function Mh(t,e){return typeof t=="function"?t(e):t}function Ia(t){return t.split("-")[0]}function Bh(t){return t.split("-")[1]}function G1(t){return t==="x"?"y":"x"}function H1(t){return t==="y"?"height":"width"}const f4=new Set(["top","bottom"]);function Ts(t){return f4.has(Ia(t))?"y":"x"}function V1(t){return G1(Ts(t))}function h4(t,e,r){r===void 0&&(r=!1);const i=Bh(t),n=V1(t),s=H1(n);let a=n==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=If(a)),[a,If(a)]}function d4(t){const e=If(t);return[yg(t),e,yg(e)]}function yg(t){return t.replace(/start|end/g,e=>u4[e])}const hb=["left","right"],db=["right","left"],p4=["top","bottom"],g4=["bottom","top"];function m4(t,e,r){switch(t){case"top":case"bottom":return r?e?db:hb:e?hb:db;case"left":case"right":return e?p4:g4;default:return[]}}function v4(t,e,r,i){const n=Bh(t);let s=m4(Ia(t),r==="start",i);return n&&(s=s.map(a=>a+"-"+n),e&&(s=s.concat(s.map(yg)))),s}function If(t){return t.replace(/left|right|bottom|top/g,e=>c4[e])}function y4(t){return{top:0,right:0,bottom:0,left:0,...t}}function b4(t){return typeof t!="number"?y4(t):{top:t,right:t,bottom:t,left:t}}function Lf(t){const{x:e,y:r,width:i,height:n}=t;return{width:i,height:n,top:r,left:e,right:e+i,bottom:r+n,x:e,y:r}}function pb(t,e,r){let{reference:i,floating:n}=t;const s=Ts(e),a=V1(e),o=H1(a),l=Ia(e),c=s==="y",u=i.x+i.width/2-n.width/2,f=i.y+i.height/2-n.height/2,d=i[o]/2-n[o]/2;let p;switch(l){case"top":p={x:u,y:i.y-n.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:f};break;case"left":p={x:i.x-n.width,y:f};break;default:p={x:i.x,y:i.y}}switch(Bh(e)){case"start":p[a]-=d*(r&&c?-1:1);break;case"end":p[a]+=d*(r&&c?-1:1);break}return p}const w4=async(t,e,r)=>{const{placement:i="bottom",strategy:n="absolute",middleware:s=[],platform:a}=r,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:n}),{x:u,y:f}=pb(c,i,l),d=i,p={},g=0;for(let m=0;m<o.length;m++){const{name:w,fn:v}=o[m],{x:y,y:b,data:T,reset:L}=await v({x:u,y:f,initialPlacement:i,placement:d,strategy:n,middlewareData:p,rects:c,platform:a,elements:{reference:t,floating:e}});u=y??u,f=b??f,p={...p,[w]:{...p[w],...T}},L&&g<=50&&(g++,typeof L=="object"&&(L.placement&&(d=L.placement),L.rects&&(c=L.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:n}):L.rects),{x:u,y:f}=pb(c,d,l)),m=-1)}return{x:u,y:f,placement:d,strategy:n,middlewareData:p}};async function q1(t,e){var r;e===void 0&&(e={});const{x:i,y:n,platform:s,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:p=0}=Mh(e,t),g=b4(p),w=o[d?f==="floating"?"reference":"floating":f],v=Lf(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(w)))==null||r?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),y=f==="floating"?{x:i,y:n,width:a.floating.width,height:a.floating.height}:a.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),T=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},L=Lf(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:y,offsetParent:b,strategy:l}):y);return{top:(v.top-L.top+g.top)/T.y,bottom:(L.bottom-v.bottom+g.bottom)/T.y,left:(v.left-L.left+g.left)/T.x,right:(L.right-v.right+g.right)/T.x}}const _4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,i;const{placement:n,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...w}=Mh(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const v=Ia(n),y=Ts(o),b=Ia(o)===o,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),L=d||(b||!m?[If(o)]:d4(o)),H=g!=="none";!d&&H&&L.push(...v4(o,m,g,T));const B=[o,...L],S=await q1(e,w),G=[];let q=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&G.push(S[v]),f){const ve=h4(n,a,T);G.push(S[ve[0]],S[ve[1]])}if(q=[...q,{placement:n,overflows:G}],!G.every(ve=>ve<=0)){var te,X;const ve=(((te=s.flip)==null?void 0:te.index)||0)+1,ue=B[ve];if(ue&&(!(f==="alignment"?y!==Ts(ue):!1)||q.every(I=>Ts(I.placement)===y?I.overflows[0]>0:!0)))return{data:{index:ve,overflows:q},reset:{placement:ue}};let ye=(X=q.filter(j=>j.overflows[0]<=0).sort((j,I)=>j.overflows[1]-I.overflows[1])[0])==null?void 0:X.placement;if(!ye)switch(p){case"bestFit":{var M;const j=(M=q.filter(I=>{if(H){const Y=Ts(I.placement);return Y===y||Y==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(Y=>Y>0).reduce((Y,de)=>Y+de,0)]).sort((I,Y)=>I[1]-Y[1])[0])==null?void 0:M[0];j&&(ye=j);break}case"initialPlacement":ye=o;break}if(n!==ye)return{reset:{placement:ye}}}return{}}}},S4=new Set(["left","top"]);async function E4(t,e){const{placement:r,platform:i,elements:n}=t,s=await(i.isRTL==null?void 0:i.isRTL(n.floating)),a=Ia(r),o=Bh(r),l=Ts(r)==="y",c=S4.has(a)?-1:1,u=s&&l?-1:1,f=Mh(e,t);let{mainAxis:d,crossAxis:p,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof g=="number"&&(p=o==="end"?g*-1:g),l?{x:p*u,y:d*c}:{x:d*c,y:p*u}}const x4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,i;const{x:n,y:s,placement:a,middlewareData:o}=e,l=await E4(e,t);return a===((r=o.offset)==null?void 0:r.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:n+l.x,y:s+l.y,data:{...l,placement:a}}}}},T4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:i,placement:n}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:w=>{let{x:v,y}=w;return{x:v,y}}},...l}=Mh(t,e),c={x:r,y:i},u=await q1(e,l),f=Ts(Ia(n)),d=G1(f);let p=c[d],g=c[f];if(s){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=p+u[w],b=p-u[v];p=fb(y,p,b)}if(a){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=g+u[w],b=g-u[v];g=fb(y,g,b)}const m=o.fn({...e,[d]:p,[f]:g});return{...m,data:{x:m.x-r,y:m.y-i,enabled:{[d]:s,[f]:a}}}}}};function Wh(){return typeof window<"u"}function hl(t){return Y1(t)?(t.nodeName||"").toLowerCase():"#document"}function Yr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _n(t){var e;return(e=(Y1(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Y1(t){return Wh()?t instanceof Node||t instanceof Yr(t).Node:!1}function Fi(t){return Wh()?t instanceof Element||t instanceof Yr(t).Element:!1}function vn(t){return Wh()?t instanceof HTMLElement||t instanceof Yr(t).HTMLElement:!1}function gb(t){return!Wh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Yr(t).ShadowRoot}const A4=new Set(["inline","contents"]);function tu(t){const{overflow:e,overflowX:r,overflowY:i,display:n}=Ii(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+r)&&!A4.has(n)}const $4=new Set(["table","td","th"]);function R4(t){return $4.has(hl(t))}const C4=[":popover-open",":modal"];function Uh(t){return C4.some(e=>{try{return t.matches(e)}catch{return!1}})}const D4=["transform","translate","scale","rotate","perspective"],P4=["transform","translate","scale","rotate","perspective","filter"],O4=["paint","layout","strict","content"];function jm(t){const e=Mm(),r=Fi(t)?Ii(t):t;return D4.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||P4.some(i=>(r.willChange||"").includes(i))||O4.some(i=>(r.contain||"").includes(i))}function k4(t){let e=Ls(t);for(;vn(e)&&!Jo(e);){if(jm(e))return e;if(Uh(e))return null;e=Ls(e)}return null}function Mm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const N4=new Set(["html","body","#document"]);function Jo(t){return N4.has(hl(t))}function Ii(t){return Yr(t).getComputedStyle(t)}function zh(t){return Fi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ls(t){if(hl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||gb(t)&&t.host||_n(t);return gb(e)?e.host:e}function K1(t){const e=Ls(t);return Jo(e)?t.ownerDocument?t.ownerDocument.body:t.body:vn(e)&&tu(e)?e:K1(e)}function sc(t,e,r){var i;e===void 0&&(e=[]),r===void 0&&(r=!0);const n=K1(t),s=n===((i=t.ownerDocument)==null?void 0:i.body),a=Yr(n);if(s){const o=bg(a);return e.concat(a,a.visualViewport||[],tu(n)?n:[],o&&r?sc(o):[])}return e.concat(n,sc(n,[],r))}function bg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Z1(t){const e=Ii(t);let r=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const n=vn(t),s=n?t.offsetWidth:r,a=n?t.offsetHeight:i,o=Ff(r)!==s||Ff(i)!==a;return o&&(r=s,i=a),{width:r,height:i,$:o}}function Bm(t){return Fi(t)?t:t.contextElement}function So(t){const e=Bm(t);if(!vn(e))return fn(1);const r=e.getBoundingClientRect(),{width:i,height:n,$:s}=Z1(e);let a=(s?Ff(r.width):r.width)/i,o=(s?Ff(r.height):r.height)/n;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const F4=fn(0);function Q1(t){const e=Yr(t);return!Mm()||!e.visualViewport?F4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function I4(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Yr(t)?!1:e}function La(t,e,r,i){e===void 0&&(e=!1),r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=Bm(t);let a=fn(1);e&&(i?Fi(i)&&(a=So(i)):a=So(t));const o=I4(s,r,i)?Q1(s):fn(0);let l=(n.left+o.x)/a.x,c=(n.top+o.y)/a.y,u=n.width/a.x,f=n.height/a.y;if(s){const d=Yr(s),p=i&&Fi(i)?Yr(i):i;let g=d,m=bg(g);for(;m&&i&&p!==g;){const w=So(m),v=m.getBoundingClientRect(),y=Ii(m),b=v.left+(m.clientLeft+parseFloat(y.paddingLeft))*w.x,T=v.top+(m.clientTop+parseFloat(y.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,f*=w.y,l+=b,c+=T,g=Yr(m),m=bg(g)}}return Lf({width:u,height:f,x:l,y:c})}function Gh(t,e){const r=zh(t).scrollLeft;return e?e.left+r:La(_n(t)).left+r}function X1(t,e){const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-Gh(t,r),n=r.top+e.scrollTop;return{x:i,y:n}}function L4(t){let{elements:e,rect:r,offsetParent:i,strategy:n}=t;const s=n==="fixed",a=_n(i),o=e?Uh(e.floating):!1;if(i===a||o&&s)return r;let l={scrollLeft:0,scrollTop:0},c=fn(1);const u=fn(0),f=vn(i);if((f||!f&&!s)&&((hl(i)!=="body"||tu(a))&&(l=zh(i)),vn(i))){const p=La(i);c=So(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const d=a&&!f&&!s?X1(a,l):fn(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:r.y*c.y-l.scrollTop*c.y+u.y+d.y}}function j4(t){return Array.from(t.getClientRects())}function M4(t){const e=_n(t),r=zh(t),i=t.ownerDocument.body,n=Aa(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Aa(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let a=-r.scrollLeft+Gh(t);const o=-r.scrollTop;return Ii(i).direction==="rtl"&&(a+=Aa(e.clientWidth,i.clientWidth)-n),{width:n,height:s,x:a,y:o}}const mb=25;function B4(t,e){const r=Yr(t),i=_n(t),n=r.visualViewport;let s=i.clientWidth,a=i.clientHeight,o=0,l=0;if(n){s=n.width,a=n.height;const u=Mm();(!u||u&&e==="fixed")&&(o=n.offsetLeft,l=n.offsetTop)}const c=Gh(i);if(c<=0){const u=i.ownerDocument,f=u.body,d=getComputedStyle(f),p=u.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,g=Math.abs(i.clientWidth-f.clientWidth-p);g<=mb&&(s-=g)}else c<=mb&&(s+=c);return{width:s,height:a,x:o,y:l}}const W4=new Set(["absolute","fixed"]);function U4(t,e){const r=La(t,!0,e==="fixed"),i=r.top+t.clientTop,n=r.left+t.clientLeft,s=vn(t)?So(t):fn(1),a=t.clientWidth*s.x,o=t.clientHeight*s.y,l=n*s.x,c=i*s.y;return{width:a,height:o,x:l,y:c}}function vb(t,e,r){let i;if(e==="viewport")i=B4(t,r);else if(e==="document")i=M4(_n(t));else if(Fi(e))i=U4(e,r);else{const n=Q1(t);i={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return Lf(i)}function J1(t,e){const r=Ls(t);return r===e||!Fi(r)||Jo(r)?!1:Ii(r).position==="fixed"||J1(r,e)}function z4(t,e){const r=e.get(t);if(r)return r;let i=sc(t,[],!1).filter(o=>Fi(o)&&hl(o)!=="body"),n=null;const s=Ii(t).position==="fixed";let a=s?Ls(t):t;for(;Fi(a)&&!Jo(a);){const o=Ii(a),l=jm(a);!l&&o.position==="fixed"&&(n=null),(s?!l&&!n:!l&&o.position==="static"&&!!n&&W4.has(n.position)||tu(a)&&!l&&J1(t,a))?i=i.filter(u=>u!==a):n=o,a=Ls(a)}return e.set(t,i),i}function G4(t){let{element:e,boundary:r,rootBoundary:i,strategy:n}=t;const a=[...r==="clippingAncestors"?Uh(e)?[]:z4(e,this._c):[].concat(r),i],o=a[0],l=a.reduce((c,u)=>{const f=vb(e,u,n);return c.top=Aa(f.top,c.top),c.right=Nf(f.right,c.right),c.bottom=Nf(f.bottom,c.bottom),c.left=Aa(f.left,c.left),c},vb(e,o,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function H4(t){const{width:e,height:r}=Z1(t);return{width:e,height:r}}function V4(t,e,r){const i=vn(e),n=_n(e),s=r==="fixed",a=La(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=fn(0);function c(){l.x=Gh(n)}if(i||!i&&!s)if((hl(e)!=="body"||tu(n))&&(o=zh(e)),i){const p=La(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else n&&c();s&&!i&&n&&c();const u=n&&!i&&!s?X1(n,o):fn(0),f=a.left+o.scrollLeft-l.x-u.x,d=a.top+o.scrollTop-l.y-u.y;return{x:f,y:d,width:a.width,height:a.height}}function Kd(t){return Ii(t).position==="static"}function yb(t,e){if(!vn(t)||Ii(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return _n(t)===r&&(r=r.ownerDocument.body),r}function eE(t,e){const r=Yr(t);if(Uh(t))return r;if(!vn(t)){let n=Ls(t);for(;n&&!Jo(n);){if(Fi(n)&&!Kd(n))return n;n=Ls(n)}return r}let i=yb(t,e);for(;i&&R4(i)&&Kd(i);)i=yb(i,e);return i&&Jo(i)&&Kd(i)&&!jm(i)?r:i||k4(t)||r}const q4=async function(t){const e=this.getOffsetParent||eE,r=this.getDimensions,i=await r(t.floating);return{reference:V4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Y4(t){return Ii(t).direction==="rtl"}const K4={convertOffsetParentRelativeRectToViewportRelativeRect:L4,getDocumentElement:_n,getClippingRect:G4,getOffsetParent:eE,getElementRects:q4,getClientRects:j4,getDimensions:H4,getScale:So,isElement:Fi,isRTL:Y4};function tE(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Z4(t,e){let r=null,i;const n=_n(t);function s(){var o;clearTimeout(i),(o=r)==null||o.disconnect(),r=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:f,width:d,height:p}=c;if(o||e(),!d||!p)return;const g=Ru(f),m=Ru(n.clientWidth-(u+d)),w=Ru(n.clientHeight-(f+p)),v=Ru(u),b={rootMargin:-g+"px "+-m+"px "+-w+"px "+-v+"px",threshold:Aa(0,Nf(1,l))||1};let T=!0;function L(H){const B=H[0].intersectionRatio;if(B!==l){if(!T)return a();B?a(!1,B):i=setTimeout(()=>{a(!1,1e-7)},1e3)}B===1&&!tE(c,t.getBoundingClientRect())&&a(),T=!1}try{r=new IntersectionObserver(L,{...b,root:n.ownerDocument})}catch{r=new IntersectionObserver(L,b)}r.observe(t)}return a(!0),s}function Q4(t,e,r,i){i===void 0&&(i={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=Bm(t),u=n||s?[...c?sc(c):[],...sc(e)]:[];u.forEach(v=>{n&&v.addEventListener("scroll",r,{passive:!0}),s&&v.addEventListener("resize",r)});const f=c&&o?Z4(c,r):null;let d=-1,p=null;a&&(p=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),r()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?La(t):null;l&&w();function w(){const v=La(t);m&&!tE(m,v)&&r(),m=v,g=requestAnimationFrame(w)}return r(),()=>{var v;u.forEach(y=>{n&&y.removeEventListener("scroll",r),s&&y.removeEventListener("resize",r)}),f==null||f(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const X4=x4,J4=T4,eB=_4,tB=(t,e,r)=>{const i=new Map,n={platform:K4,...r},s={...n.platform,_c:i};return w4(t,e,{...n,platform:s})};function rB(t){let e,r;const i={autoUpdate:!0};let n=t;const s=u=>({...i,...t||{},...u||{}}),a=u=>{e&&r&&(n=s(u),tB(e,r,n).then(f=>{Object.assign(r.style,{position:f.strategy,left:`${f.x}px`,top:`${f.y}px`}),n!=null&&n.onComputed&&n.onComputed(f)}))},o=u=>{if("subscribe"in u)return c(u),{};e=u,a()},l=(u,f)=>{let d;r=u,n=s(f),setTimeout(()=>a(f),0),a(f);const p=()=>{d&&(d(),d=void 0)},g=({autoUpdate:m}=n||{})=>{if(p(),m!==!1)return Q4(e,r,()=>a(n),m===!0?{}:m)};return d=g(),{update(m){a(m),d=g(m)},destroy(){p()}}},c=u=>{const f=u.subscribe(d=>{e===void 0?(e=d,a()):(Object.assign(e,d),a())});Fm(f)};return[o,l,a]}function iB({loadOptions:t,filterText:e,items:r,multiple:i,value:n,itemId:s,groupBy:a,filterSelectedItems:o,itemFilter:l,convertStringItemsToObjects:c,filterGroupedItems:u,label:f}){if(r&&t)return r;if(!r)return[];r&&r.length>0&&typeof r[0]!="object"&&(r=c(r));let d=r.filter(p=>{let g=l(p[f],e,p);return g&&i&&(n!=null&&n.length)&&(g=!n.some(m=>o?m[s]===p[s]:!1)),g});return a&&(d=u(d)),d}async function nB({dispatch:t,loadOptions:e,convertStringItemsToObjects:r,filterText:i}){let n=await e(i).catch(s=>{console.warn("svelte-select loadOptions error :>> ",s),t("error",{type:"loadOptions",details:s})});if(n&&!n.cancelled)return n?(n&&n.length>0&&typeof n[0]!="object"&&(n=r(n)),t("loaded",{items:n})):n=[],{filteredItems:n,loading:!1,focused:!0,listOpen:!0}}var sB=jh(`<svg width="100%" height="100%" viewBox="0 0 20 20" focusable="false" aria-hidden="true" class="svelte-1cjxppd"><path fill="currentColor" d="M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"></path></svg>`);const aB={hash:"svelte-1cjxppd",code:"svg.svelte-1cjxppd {width:var(--chevron-icon-width, 20px);height:var(--chevron-icon-width, 20px);color:var(--chevron-icon-colour, currentColor);}"};function rE(t){fl(t,aB);var e=sB();Ce(t,e)}yr(rE,{},[],[],!0);var oB=jh(`<svg width="100%" height="100%" viewBox="-2 -2 50 50" focusable="false" aria-hidden="true" role="presentation" class="svelte-1tqf49v"><path fill="currentColor" d="M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"></path></svg>`);const lB={hash:"svelte-1tqf49v",code:"svg.svelte-1tqf49v {width:var(--clear-icon-width, 20px);height:var(--clear-icon-width, 20px);color:var(--clear-icon-color, currentColor);}"};function Ku(t){fl(t,lB);var e=oB();Ce(t,e)}yr(Ku,{},[],[],!0);var cB=jh('<svg class="loading svelte-5svtgc" viewBox="25 25 50 50"><circle class="circle_path svelte-5svtgc" cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10"></circle></svg>');const uB={hash:"svelte-5svtgc",code:`.loading.svelte-5svtgc {width:var(--spinner-width, 20px);height:var(--spinner-height, 20px);color:var(--spinner-color, var(--icons-color));
        animation: svelte-5svtgc-rotate 0.75s linear infinite;transform-origin:center center;transform:none;}.circle_path.svelte-5svtgc {stroke-dasharray:90;stroke-linecap:round;}

    @keyframes svelte-5svtgc-rotate {
        100% {
            transform: rotate(360deg);
        }
    }`};function iE(t){fl(t,uB);var e=cB();Ce(t,e)}yr(iE,{},[],[],!0);var fB=ht('<div class="list-item svelte-di53br" tabindex="-1" role="none"><div><!></div></div>'),hB=ht('<div class="empty svelte-di53br">No options</div>'),dB=ht("<div><!> <!> <!></div>"),pB=ht('<span id="aria-selection" class="svelte-di53br"> </span> <span id="aria-context" class="svelte-di53br"> </span>',1),gB=ht('<div class="multi-item-clear svelte-di53br"><!></div>'),mB=ht('<div role="none"><span class="multi-item-text svelte-di53br"><!></span> <!></div>'),vB=ht("<div><!></div>"),yB=ht('<div class="icon loading svelte-di53br" aria-hidden="true"><!></div>'),bB=ht('<button type="button" class="icon clear-select svelte-di53br"><!></button>'),wB=ht('<div class="icon chevron svelte-di53br" aria-hidden="true"><!></div>'),_B=ht('<input type="hidden" class="svelte-di53br"/>'),SB=ht('<select class="required svelte-di53br" required tabindex="-1" aria-hidden="true"></select>'),EB=ht('<div role="none"><!> <span aria-live="polite" aria-atomic="false" aria-relevant="additions text" class="a11y-text svelte-di53br"><!></span> <div class="prepend svelte-di53br"><!></div> <div class="value-container svelte-di53br"><!> <input/></div> <div class="indicators svelte-di53br"><!> <!> <!></div> <!> <!></div>');const xB={hash:"svelte-di53br",code:`.svelte-select.svelte-di53br {
        /* deprecating camelCase custom props in favour of kebab-case for v5 */--borderRadius: var(--border-radius);--clearSelectColor: var(--clear-select-color);--clearSelectWidth: var(--clear-select-width);--disabledBackground: var(--disabled-background);--disabledBorderColor: var(--disabled-border-color);--disabledColor: var(--disabled-color);--disabledPlaceholderColor: var(--disabled-placeholder-color);--disabledPlaceholderOpacity: var(--disabled-placeholder-opacity);--errorBackground: var(--error-background);--errorBorder: var(--error-border);--groupItemPaddingLeft: var(--group-item-padding-left);--groupTitleColor: var(--group-title-color);--groupTitleFontSize: var(--group-title-font-size);--groupTitleFontWeight: var(--group-title-font-weight);--groupTitlePadding: var(--group-title-padding);--groupTitleTextTransform: var(--group-title-text-transform);--groupTitleBorderColor: var(--group-title-border-color);--groupTitleBorderWidth: var(--group-title-border-width);--groupTitleBorderStyle: var(--group-title-border-style);--indicatorColor: var(--chevron-color);--indicatorHeight: var(--chevron-height);--indicatorWidth: var(--chevron-width);--inputColor: var(--input-color);--inputLeft: var(--input-left);--inputLetterSpacing: var(--input-letter-spacing);--inputMargin: var(--input-margin);--inputPadding: var(--input-padding);--itemActiveBackground: var(--item-active-background);--itemColor: var(--item-color);--itemFirstBorderRadius: var(--item-first-border-radius);--itemHoverBG: var(--item-hover-bg);--itemHoverColor: var(--item-hover-color);--itemIsActiveBG: var(--item-is-active-bg);--itemIsActiveColor: var(--item-is-active-color);--itemIsNotSelectableColor: var(--item-is-not-selectable-color);--itemPadding: var(--item-padding);--listBackground: var(--list-background);--listBorder: var(--list-border);--listBorderRadius: var(--list-border-radius);--listEmptyColor: var(--list-empty-color);--listEmptyPadding: var(--list-empty-padding);--listEmptyTextAlign: var(--list-empty-text-align);--listMaxHeight: var(--list-max-height);--listPosition: var(--list-position);--listShadow: var(--list-shadow);--listZIndex: var(--list-z-index);--multiItemBG: var(--multi-item-bg);--multiItemBorderRadius: var(--multi-item-border-radius);--multiItemDisabledHoverBg: var(--multi-item-disabled-hover-bg);--multiItemDisabledHoverColor: var(--multi-item-disabled-hover-color);--multiItemHeight: var(--multi-item-height);--multiItemMargin: var(--multi-item-margin);--multiItemPadding: var(--multi-item-padding);--multiSelectInputMargin: var(--multi-select-input-margin);--multiSelectInputPadding: var(--multi-select-input-padding);--multiSelectPadding: var(--multi-select-padding);--placeholderColor: var(--placeholder-color);--placeholderOpacity: var(--placeholder-opacity);--selectedItemPadding: var(--selected-item-padding);--spinnerColor: var(--spinner-color);--spinnerHeight: var(--spinner-height);--spinnerWidth: var(--spinner-width);--internal-padding: 0 0 0 16px;border:var(--border, 1px solid #d8dbdf);border-radius:var(--border-radius, 6px);min-height:var(--height, 42px);position:relative;display:flex;align-items:stretch;padding:var(--padding, var(--internal-padding));background:var(--background, #fff);margin:var(--margin, 0);width:var(--width, 100%);font-size:var(--font-size, 16px);max-height:var(--max-height);}.svelte-di53br {box-sizing:var(--box-sizing, border-box);}.svelte-select.svelte-di53br:hover {border:var(--border-hover, 1px solid #b2b8bf);}.value-container.svelte-di53br {display:flex;flex:1 1 0%;flex-wrap:wrap;align-items:center;gap:5px 10px;padding:var(--value-container-padding, 5px 0);position:relative;overflow:var(--value-container-overflow, hidden);align-self:stretch;}.prepend.svelte-di53br,
    .indicators.svelte-di53br {display:flex;flex-shrink:0;align-items:center;}.indicators.svelte-di53br {position:var(--indicators-position);top:var(--indicators-top);right:var(--indicators-right);bottom:var(--indicators-bottom);}input.svelte-di53br {position:absolute;cursor:default;border:none;color:var(--input-color, var(--item-color));padding:var(--input-padding, 0);letter-spacing:var(--input-letter-spacing, inherit);margin:var(--input-margin, 0);min-width:10px;top:0;right:0;bottom:0;left:0;background:transparent;font-size:var(--font-size, 16px);}.svelte-di53br:not(.multi) > .value-container:where(.svelte-di53br) > input:where(.svelte-di53br) {width:100%;height:100%;}input.svelte-di53br::placeholder {color:var(--placeholder-color, #78848f);opacity:var(--placeholder-opacity, 1);}input.svelte-di53br:focus {outline:none;}.svelte-select.focused.svelte-di53br {border:var(--border-focused, 1px solid #006fe8);border-radius:var(--border-radius-focused, var(--border-radius, 6px));}.disabled.svelte-di53br {background:var(--disabled-background, #ebedef);border-color:var(--disabled-border-color, #ebedef);color:var(--disabled-color, #c1c6cc);}.disabled.svelte-di53br input:where(.svelte-di53br)::placeholder {color:var(--disabled-placeholder-color, #c1c6cc);opacity:var(--disabled-placeholder-opacity, 1);}.selected-item.svelte-di53br {position:relative;overflow:var(--selected-item-overflow, hidden);padding:var(--selected-item-padding, 0 20px 0 0);text-overflow:ellipsis;white-space:nowrap;color:var(--selected-item-color, inherit);font-size:var(--font-size, 16px);}.multi.svelte-di53br .selected-item:where(.svelte-di53br) {position:absolute;line-height:var(--height, 42px);height:var(--height, 42px);}.selected-item.svelte-di53br:focus {outline:none;}.hide-selected-item.svelte-di53br {opacity:0;}.icon.svelte-di53br {display:flex;align-items:center;justify-content:center;}.clear-select.svelte-di53br {all:unset;display:flex;align-items:center;justify-content:center;width:var(--clear-select-width, 40px);height:var(--clear-select-height, 100%);color:var(--clear-select-color, var(--icons-color));margin:var(--clear-select-margin, 0);pointer-events:all;flex-shrink:0;}.clear-select.svelte-di53br:focus {outline:var(--clear-select-focus-outline, 1px solid #006fe8);}.loading.svelte-di53br {width:var(--loading-width, 40px);height:var(--loading-height);color:var(--loading-color, var(--icons-color));margin:var(--loading--margin, 0);flex-shrink:0;}.chevron.svelte-di53br {width:var(--chevron-width, 40px);height:var(--chevron-height, 40px);background:var(--chevron-background, transparent);pointer-events:var(--chevron-pointer-events, none);color:var(--chevron-color, var(--icons-color));border:var(--chevron-border, 0 0 0 1px solid #d8dbdf);flex-shrink:0;}.multi.svelte-di53br {padding:var(--multi-select-padding, var(--internal-padding));}.multi.svelte-di53br input:where(.svelte-di53br) {padding:var(--multi-select-input-padding, 0);position:relative;margin:var(--multi-select-input-margin, 5px 0);flex:1 1 40px;}.svelte-select.error.svelte-di53br {border:var(--error-border, 1px solid #ff2d55);background:var(--error-background, #fff);}.a11y-text.svelte-di53br {z-index:9999;border:0px;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0px;white-space:nowrap;}.multi-item.svelte-di53br {background:var(--multi-item-bg, #ebedef);margin:var(--multi-item-margin, 0);outline:var(--multi-item-outline, 1px solid #ddd);border-radius:var(--multi-item-border-radius, 4px);height:var(--multi-item-height, 25px);line-height:var(--multi-item-height, 25px);display:flex;cursor:default;padding:var(--multi-item-padding, 0 5px);overflow:hidden;gap:var(--multi-item-gap, 4px);outline-offset:-1px;max-width:var(--multi-max-width, none);color:var(--multi-item-color, var(--item-color));}.multi-item.disabled.svelte-di53br:hover {background:var(--multi-item-disabled-hover-bg, #ebedef);color:var(--multi-item-disabled-hover-color, #c1c6cc);}.multi-item-text.svelte-di53br {overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.multi-item-clear.svelte-di53br {display:flex;align-items:center;justify-content:center;--clear-icon-color: var(--multi-item-clear-icon-color, #000);}.multi-item.active.svelte-di53br {outline:var(--multi-item-active-outline, 1px solid #006fe8);}.svelte-select-list.svelte-di53br {box-shadow:var(--list-shadow, 0 2px 3px 0 rgba(44, 62, 80, 0.24));border-radius:var(--list-border-radius, 4px);max-height:var(--list-max-height, 252px);overflow-y:auto;background:var(--list-background, #fff);position:var(--list-position, absolute);z-index:var(--list-z-index, 2);border:var(--list-border);}.prefloat.svelte-di53br {opacity:0;pointer-events:none;}.list-group-title.svelte-di53br {color:var(--group-title-color, #8f8f8f);cursor:default;font-size:var(--group-title-font-size, 16px);font-weight:var(--group-title-font-weight, 600);height:var(--height, 42px);line-height:var(--height, 42px);padding:var(--group-title-padding, 0 20px);text-overflow:ellipsis;overflow-x:hidden;white-space:nowrap;text-transform:var(--group-title-text-transform, uppercase);border-width:var(--group-title-border-width, medium);border-style:var(--group-title-border-style, none);border-color:var(--group-title-border-color, color);}.empty.svelte-di53br {text-align:var(--list-empty-text-align, center);padding:var(--list-empty-padding, 20px 0);color:var(--list-empty-color, #78848f);}.item.svelte-di53br {cursor:default;height:var(--item-height, var(--height, 42px));line-height:var(--item-line-height, var(--height, 42px));padding:var(--item-padding, 0 20px);color:var(--item-color, inherit);text-overflow:ellipsis;overflow:hidden;white-space:nowrap;transition:var(--item-transition, all 0.2s);align-items:center;width:100%;}.item.group-item.svelte-di53br {padding-left:var(--group-item-padding-left, 40px);}.item.svelte-di53br:active {background:var(--item-active-background, #b9daff);}.item.active.svelte-di53br {background:var(--item-is-active-bg, #007aff);color:var(--item-is-active-color, #fff);}.item.first.svelte-di53br {border-radius:var(--item-first-border-radius, 4px 4px 0 0);}.item.hover.svelte-di53br:not(.active) {background:var(--item-hover-bg, #e7f2ff);color:var(--item-hover-color, inherit);}.item.not-selectable.svelte-di53br,
    .item.hover.item.not-selectable.svelte-di53br,
    .item.active.item.not-selectable.svelte-di53br,
    .item.not-selectable.svelte-di53br:active {color:var(--item-is-not-selectable-color, #999);background:transparent;}.required.svelte-di53br {opacity:0;z-index:-1;position:absolute;top:0;left:0;bottom:0;right:0;}`};function nE(t,e){const r=F3(e);Ir(e,!1),fl(t,xB);const i=rt(),n=rt(),s=rt(),a=rt(),o=rt(),l=rt(),c=rt(),u=rt(),f=rt(),d=P3();let p=$e(e,"justValue",12,null),g=$e(e,"filter",12,iB),m=$e(e,"getItems",12,nB),w=$e(e,"id",12,null),v=$e(e,"name",12,null),y=$e(e,"container",12,void 0),b=$e(e,"input",12,void 0),T=$e(e,"multiple",12,!1),L=$e(e,"multiFullItemClearable",12,!1),H=$e(e,"disabled",12,!1),B=$e(e,"focused",12,!1),S=$e(e,"value",12,null),G=$e(e,"filterText",12,""),q=$e(e,"placeholder",12,"Please select"),te=$e(e,"placeholderAlwaysShow",12,!1),X=$e(e,"items",12,null),M=$e(e,"label",12,"label"),ve=$e(e,"itemFilter",12,(D,se,ze)=>`${D}`.toLowerCase().includes(se.toLowerCase())),ue=$e(e,"groupBy",12,void 0),ye=$e(e,"groupFilter",12,D=>D),j=$e(e,"groupHeaderSelectable",12,!1),I=$e(e,"itemId",12,"value"),Y=$e(e,"loadOptions",12,void 0),de=$e(e,"containerStyles",12,""),Se=$e(e,"hasError",12,!1),De=$e(e,"filterSelectedItems",12,!0),ge=$e(e,"required",12,!1),Ie=$e(e,"closeListOnChange",12,!0),nt=$e(e,"clearFilterTextOnBlur",12,!0),st=$e(e,"createGroupHeaderItem",12,(D,se)=>({value:D,[M()]:D}));const R=()=>O(c);let P=$e(e,"searchable",12,!0),ae=$e(e,"inputStyles",12,""),K=$e(e,"clearable",12,!0),k=$e(e,"loading",12,!1),F=$e(e,"listOpen",12,!1),E,$=$e(e,"debounce",12,(D,se=1)=>{clearTimeout(E),E=setTimeout(D,se)}),U=$e(e,"debounceWait",12,300),x=$e(e,"hideEmptyState",12,!1),N=$e(e,"inputAttributes",28,()=>({})),z=$e(e,"listAutoWidth",12,!0),ee=$e(e,"showChevron",12,!1),oe=$e(e,"listOffset",12,5),le=$e(e,"hoverItemIndex",12,0),V=$e(e,"floatingConfig",28,()=>({})),he=$e(e,"class",12,""),me=rt(),Le=rt(),ut=rt(),Ke=rt();function kt(){if(typeof S()=="string"){let D=(X()||[]).find(se=>se[I()]===S());S(D||{[I()]:S(),label:S()})}else T()&&Array.isArray(S())&&S().length>0&&S(S().map(D=>typeof D=="string"?{value:D,label:D}:D))}let at=rt();function je(){ce(at,Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},N())),w()&&xu(at,O(at).id=w()),P()||xu(at,O(at).readonly=!0)}function xt(D){return D.map((se,ze)=>({index:ze,value:se,label:`${se}`}))}function fr(D){const se=[],ze={};D.forEach(wr=>{const Lt=ue()(wr);se.includes(Lt)||(se.push(Lt),ze[Lt]=[],Lt&&ze[Lt].push(Object.assign(st()(Lt,wr),{id:Lt,groupHeader:!0,selectable:j()}))),ze[Lt].push(Object.assign({groupItem:!!Lt},wr))});const At=[];return ye()(se).forEach(wr=>{ze[wr]&&At.push(...ze[wr])}),At}function Te(){if(T()){JSON.stringify(S())!==JSON.stringify(O(Le))&&tt()&&d("input",S());return}(!O(Le)||JSON.stringify(S()[I()])!==JSON.stringify(O(Le)[I()]))&&d("input",S())}function Tt(){S()&&(Array.isArray(S())?S([...S()]):S([S()]))}function J(){S()&&S(null)}function ne(){const D=O(c).findIndex(se=>se[I()]===S()[I()]);Fe(D,!0)}function _e(D){d("hoverItem",D)}function Fe(D=0,se){le(D<0?0:D),!se&&ue()&&O(c)[le()]&&!O(c)[le()].selectable&&ru(1)}function qe(){!Y()&&G().length===0||(Y()?$()(async function(){k(!0);let D=await m()({dispatch:d,loadOptions:Y(),convertStringItemsToObjects:xt,filterText:G()});D?(k(D.loading),F(F()?D.listOpen:G().length>0),B(F()&&D.focused),X(ue()?fr(D.filteredItems):D.filteredItems)):(k(!1),B(!0),F(!0))},U()):(F(!0),T()&&ce(me,void 0)))}function dt(D){F()&&d("filter",D)}O3(async()=>{ce(Le,S()),ce(ut,G()),ce(Ke,T())});function bt(){return T()?S()?S().map(D=>D[I()]):null:S()?S()[I()]:S()}function tt(){let D=!0;if(S()){const se=[],ze=[];S().forEach(At=>{se.includes(At[I()])?D=!1:(se.push(At[I()]),ze.push(At))}),D||S(ze)}return D}function gt(D){let se=D?D[I()]:S()[I()];return X().find(ze=>ze[I()]===se)}function qt(D){!D||D.length===0||D.some(se=>typeof se!="object")||!S()||(T()?S().some(se=>!se||!se[I()]):!S()[I()])||(Array.isArray(S())?S(S().map(se=>gt(se)||se)):S(gt()||S()))}async function ir(D){const se=S()[D];S().length===1?S(void 0):S(S().filter(ze=>ze!==se)),d("clear",se)}function jr(D){if(B())switch(D.stopPropagation(),D.key){case"Escape":D.preventDefault(),He();break;case"Enter":if(D.preventDefault(),F()){if(O(c).length===0)break;const se=O(c)[le()];if(S()&&!T()&&S()[I()]===se[I()]){He();break}else Sn(O(c)[le()])}break;case"ArrowDown":D.preventDefault(),F()?ru(1):(F(!0),ce(me,void 0));break;case"ArrowUp":D.preventDefault(),F()?ru(-1):(F(!0),ce(me,void 0));break;case"Tab":if(F()&&B()){if(O(c).length===0||S()&&S()[I()]===O(c)[le()][I()])return He();D.preventDefault(),Sn(O(c)[le()]),He()}break;case"Backspace":if(!T()||G().length>0)return;if(T()&&S()&&S().length>0){if(ir(O(me)!==void 0?O(me):S().length-1),O(me)===0||O(me)===void 0)break;ce(me,S().length>O(me)?O(me)-1:void 0)}break;case"ArrowLeft":if(!S()||!T()||G().length>0)return;O(me)===void 0?ce(me,S().length-1):S().length>O(me)&&O(me)!==0&&ce(me,O(me)-1);break;case"ArrowRight":if(!S()||!T()||G().length>0||O(me)===void 0)return;O(me)===S().length-1?ce(me,void 0):O(me)<S().length-1&&ce(me,O(me)+1);break}}function A(D){var se;B()&&b()===(document==null?void 0:document.activeElement)||(D&&d("focus",D),(se=b())==null||se.focus(),B(!0))}async function C(D){var se;qs||(F()||B())&&(d("blur",D),He(),B(!1),ce(me,void 0),(se=b())==null||se.blur())}function pe(){if(!H()){if(G().length>0)return F(!0);F(!F())}}function fe(){d("clear",S()),S(void 0),He(),A()}Nm(()=>{F()&&B(!0),B()&&b()&&b().focus()});function Re(D){if(D){G("");const se=Object.assign({},D);if(se.groupHeader&&!se.selectable)return;S(T()?S()?S().concat([se]):[se]:S(se)),setTimeout(()=>{Ie()&&He(),ce(me,void 0),d("change",S()),d("select",D)})}}function He(){nt()&&G(""),F(!1)}let Pe=$e(e,"ariaValues",12,D=>`Option ${D}, selected.`),Nt=$e(e,"ariaListOpen",12,(D,se)=>`You are currently focused on option ${D}. There are ${se} results available.`),hr=$e(e,"ariaFocused",12,()=>"Select is focused, type to refine list, press down to open the menu.");function Qn(D){let se;return D&&S().length>0?se=S().map(ze=>ze[M()]).join(", "):se=S()[M()],Pe()(se)}function Hh(){if(!O(c)||O(c).length===0)return"";let D=O(c)[le()];if(F()&&D){let se=O(c)?O(c).length:0;return Nt()(D[M()],se)}else return hr()()}let br=rt(null),dl;function Qa(){clearTimeout(dl),dl=setTimeout(()=>{qs=!1},100)}function pl(D){var se;!F()&&!B()&&y()&&!y().contains(D.target)&&!((se=O(br))!=null&&se.contains(D.target))&&C()}Fm(()=>{var D;(D=O(br))==null||D.remove()});let qs=!1;function Sn(D){!D||D.selectable===!1||Re(D)}function Bi(D){qs||le(D)}function mi(D){const{item:se,i:ze}=D;if((se==null?void 0:se.selectable)!==!1){if(S()&&!T()&&S()[I()]===se[I()])return He();cE(se)&&(le(ze),Sn(se))}}function ru(D){if(O(c).filter(At=>!Object.hasOwn(At,"selectable")||At.selectable===!0).length===0)return le(0);D>0&&le()===O(c).length-1?le(0):D<0&&le()===0?le(O(c).length-1):le(le()+D);const ze=O(c)[le()];if(ze&&ze.selectable===!1){(D===1||D===-1)&&ru(D);return}}function zm(D,se,ze){if(!T())return se&&se[ze]===D[ze]}function lE(D){return D===0}function cE(D){return D.groupHeader&&D.selectable||D.selectable||!D.hasOwnProperty("selectable")}const Vh=Gm,qh=Gm;function Gm(D){return{update(se){se.scroll&&(Qa(),D.scrollIntoView({behavior:"auto",block:"nearest"}))}}}function uE(){const{width:D}=y().getBoundingClientRect();xu(br,O(br).style.width=z()?D+"px":"auto")}let gl=rt({strategy:"absolute",placement:"bottom-start",middleware:[X4(oe()),eB(),J4()],autoUpdate:!1});const[Yh,Kh,fE]=rB(O(gl));let Zh=rt(!0);function hE(D,se){if(!D||!se)return ce(Zh,!0);setTimeout(()=>{ce(Zh,!1)},0)}lt(()=>(Ee(X()),Ee(S())),()=>{X(),S()&&kt()}),lt(()=>(Ee(N()),Ee(P())),()=>{(N()||!P())&&je()}),lt(()=>Ee(T()),()=>{T()&&Tt()}),lt(()=>(O(Ke),Ee(T())),()=>{O(Ke)&&!T()&&J()}),lt(()=>(Ee(T()),Ee(S())),()=>{T()&&S()&&S().length>1&&tt()}),lt(()=>Ee(S()),()=>{S()&&Te()}),lt(()=>(Ee(S()),Ee(T()),O(Le)),()=>{!S()&&T()&&O(Le)&&d("input",S())}),lt(()=>(Ee(B()),Ee(b())),()=>{!B()&&b()&&He()}),lt(()=>(Ee(G()),O(ut)),()=>{G()!==O(ut)&&qe()}),lt(()=>(Ee(g()),Ee(Y()),Ee(G()),Ee(X()),Ee(T()),Ee(S()),Ee(I()),Ee(ue()),Ee(M()),Ee(De()),Ee(ve())),()=>{ce(c,g()({loadOptions:Y(),filterText:G(),items:X(),multiple:T(),value:S(),itemId:I(),groupBy:ue(),label:M(),filterSelectedItems:De(),itemFilter:ve(),convertStringItemsToObjects:xt,filterGroupedItems:fr}))}),lt(()=>(Ee(T()),Ee(F()),Ee(S()),O(c)),()=>{!T()&&F()&&S()&&O(c)&&ne()}),lt(()=>(Ee(F()),Ee(T())),()=>{F()&&T()&&le(0)}),lt(()=>Ee(G()),()=>{G()&&le(0)}),lt(()=>Ee(le()),()=>{_e(le())}),lt(()=>(Ee(T()),Ee(S())),()=>{ce(i,T()?S()&&S().length>0:S())}),lt(()=>(O(i),Ee(G())),()=>{ce(n,O(i)&&G().length>0)}),lt(()=>(O(i),Ee(K()),Ee(H()),Ee(k())),()=>{ce(s,O(i)&&K()&&!H()&&!k())}),lt(()=>(Ee(te()),Ee(T()),Ee(q()),Ee(S())),()=>{var D;ce(a,te()&&T()||T()&&((D=S())==null?void 0:D.length)===0?q():S()?"":q())}),lt(()=>(Ee(S()),Ee(T())),()=>{ce(o,S()?Qn(T()):"")}),lt(()=>(O(c),Ee(le()),Ee(B()),Ee(F())),()=>{ce(l,Hh({filteredItems:O(c),hoverItemIndex:le(),focused:B(),listOpen:F()}))}),lt(()=>Ee(X()),()=>{qt(X())}),lt(()=>(Ee(T()),Ee(S()),Ee(I())),()=>{p(bt(T(),S(),I()))}),lt(()=>(Ee(T()),O(Le),Ee(S())),()=>{!T()&&O(Le)&&!S()&&d("input",S())}),lt(()=>(Ee(F()),O(c),Ee(T()),Ee(S())),()=>{F()&&O(c)&&!T()&&!S()&&Fe()}),lt(()=>O(c),()=>{dt(O(c))}),lt(()=>(Ee(y()),Ee(V()),O(gl)),()=>{y()&&V()&&fE(Object.assign(O(gl),V()))}),lt(()=>O(br),()=>{ce(u,!!O(br))}),lt(()=>(O(br),Ee(F())),()=>{hE(O(br),F())}),lt(()=>(Ee(F()),Ee(y()),O(br)),()=>{F()&&y()&&O(br)&&uE()}),lt(()=>Ee(le()),()=>{ce(f,le())}),lt(()=>(Ee(b()),Ee(F()),Ee(B())),()=>{b()&&F()&&!B()&&A()}),lt(()=>(Ee(y()),Ee(V())),()=>{var D;y()&&((D=V())==null?void 0:D.autoUpdate)===void 0&&xu(gl,O(gl).autoUpdate=!0)}),u3();var dE={getFilteredItems:R,handleClear:fe,get justValue(){return p()},set justValue(D){p(D),Ae()},get filter(){return g()},set filter(D){g(D),Ae()},get getItems(){return m()},set getItems(D){m(D),Ae()},get id(){return w()},set id(D){w(D),Ae()},get name(){return v()},set name(D){v(D),Ae()},get container(){return y()},set container(D){y(D),Ae()},get input(){return b()},set input(D){b(D),Ae()},get multiple(){return T()},set multiple(D){T(D),Ae()},get multiFullItemClearable(){return L()},set multiFullItemClearable(D){L(D),Ae()},get disabled(){return H()},set disabled(D){H(D),Ae()},get focused(){return B()},set focused(D){B(D),Ae()},get value(){return S()},set value(D){S(D),Ae()},get filterText(){return G()},set filterText(D){G(D),Ae()},get placeholder(){return q()},set placeholder(D){q(D),Ae()},get placeholderAlwaysShow(){return te()},set placeholderAlwaysShow(D){te(D),Ae()},get items(){return X()},set items(D){X(D),Ae()},get label(){return M()},set label(D){M(D),Ae()},get itemFilter(){return ve()},set itemFilter(D){ve(D),Ae()},get groupBy(){return ue()},set groupBy(D){ue(D),Ae()},get groupFilter(){return ye()},set groupFilter(D){ye(D),Ae()},get groupHeaderSelectable(){return j()},set groupHeaderSelectable(D){j(D),Ae()},get itemId(){return I()},set itemId(D){I(D),Ae()},get loadOptions(){return Y()},set loadOptions(D){Y(D),Ae()},get containerStyles(){return de()},set containerStyles(D){de(D),Ae()},get hasError(){return Se()},set hasError(D){Se(D),Ae()},get filterSelectedItems(){return De()},set filterSelectedItems(D){De(D),Ae()},get required(){return ge()},set required(D){ge(D),Ae()},get closeListOnChange(){return Ie()},set closeListOnChange(D){Ie(D),Ae()},get clearFilterTextOnBlur(){return nt()},set clearFilterTextOnBlur(D){nt(D),Ae()},get createGroupHeaderItem(){return st()},set createGroupHeaderItem(D){st(D),Ae()},get searchable(){return P()},set searchable(D){P(D),Ae()},get inputStyles(){return ae()},set inputStyles(D){ae(D),Ae()},get clearable(){return K()},set clearable(D){K(D),Ae()},get loading(){return k()},set loading(D){k(D),Ae()},get listOpen(){return F()},set listOpen(D){F(D),Ae()},get debounce(){return $()},set debounce(D){$(D),Ae()},get debounceWait(){return U()},set debounceWait(D){U(D),Ae()},get hideEmptyState(){return x()},set hideEmptyState(D){x(D),Ae()},get inputAttributes(){return N()},set inputAttributes(D){N(D),Ae()},get listAutoWidth(){return z()},set listAutoWidth(D){z(D),Ae()},get showChevron(){return ee()},set showChevron(D){ee(D),Ae()},get listOffset(){return oe()},set listOffset(D){oe(D),Ae()},get hoverItemIndex(){return le()},set hoverItemIndex(D){le(D),Ae()},get floatingConfig(){return V()},set floatingConfig(D){V(D),Ae()},get class(){return he()},set class(D){he(D),Ae()},get ariaValues(){return Pe()},set ariaValues(D){Pe(D),Ae()},get ariaListOpen(){return Nt()},set ariaListOpen(D){Nt(D),Ae()},get ariaFocused(){return hr()},set ariaFocused(D){hr(D),Ae()}};B1();var Xn=EB();zt("click",Df,pl),zt("keydown",Df,jr);let Hm;var Vm=Ue(Xn);{var pE=D=>{var se=dB();let ze;var At=Ue(se);{var wr=ot=>{var Yt=jt(),Wi=Ft(Yt);dr(Wi,e,"list-prepend",{},null),Ce(ot,Yt)};vt(At,ot=>{yt(()=>r["list-prepend"])&&ot(wr)})}var Lt=We(At,2);{var En=ot=>{var Yt=jt(),Wi=Ft(Yt);dr(Wi,e,"list",{get filteredItems(){return O(c)}},null),Ce(ot,Yt)},Ja=ot=>{var Yt=jt(),Wi=Ft(Yt);{var vl=Jn=>{var Ys=jt(),Mr=Ft(Ys);nc(Mr,1,()=>O(c),Of,(vi,_r,ei)=>{var Tn=fB(),Ks=Ue(Tn);let iu;var TE=Ue(Ks);dr(TE,e,"item",{get item(){return O(_r)},index:ei},ti=>{var nu=qi();nr(()=>fs(nu,(O(_r),Ee(M()),yt(()=>{var Qm;return(Qm=O(_r))==null?void 0:Qm[M()]})))),Ce(ti,nu)}),Me(Ks),Tu(Ks,(ti,nu)=>Vh==null?void 0:Vh(ti),()=>({scroll:zm(O(_r),S(),I()),listDom:O(u)})),Tu(Ks,(ti,nu)=>qh==null?void 0:qh(ti),()=>({scroll:O(f)===ei,listDom:O(u)})),Me(Tn),nr(ti=>iu=tn(Ks,1,"item svelte-di53br",null,iu,ti),[()=>{var ti;return{"list-group-title":O(_r).groupHeader,active:zm(O(_r),S(),I()),first:lE(ei),hover:le()===ei,"group-item":O(_r).groupItem,"not-selectable":((ti=O(_r))==null?void 0:ti.selectable)===!1}}]),zt("mouseover",Tn,()=>Bi(ei)),zt("focus",Tn,()=>Bi(ei)),zt("click",Tn,so(()=>mi({item:O(_r),i:ei}))),zt("keydown",Tn,Qs(so(function(ti){Au.call(this,e,ti)}))),Ce(vi,Tn)}),Ce(Jn,Ys)},td=Jn=>{var Ys=jt(),Mr=Ft(Ys);{var vi=_r=>{var ei=jt(),Tn=Ft(ei);dr(Tn,e,"empty",{},Ks=>{var iu=hB();Ce(Ks,iu)}),Ce(_r,ei)};vt(Mr,_r=>{x()||_r(vi)},!0)}Ce(Jn,Ys)};vt(Wi,Jn=>{O(c),yt(()=>O(c).length>0)?Jn(vl):Jn(td,!1)},!0)}Ce(ot,Yt)};vt(Lt,ot=>{yt(()=>r.list)?ot(En):ot(Ja,!1)})}var ml=We(Lt,2);{var xn=ot=>{var Yt=jt(),Wi=Ft(Yt);dr(Wi,e,"list-append",{},null),Ce(ot,Yt)};vt(ml,ot=>{yt(()=>r["list-append"])&&ot(xn)})}Me(se),Tu(se,ot=>Kh==null?void 0:Kh(ot)),Yd(se,ot=>ce(br,ot),()=>O(br)),Ln(()=>zt("scroll",se,Qa)),Ln(()=>zt("pointerup",se,Qs(so(function(ot){Au.call(this,e,ot)})))),Ln(()=>zt("mousedown",se,Qs(so(function(ot){Au.call(this,e,ot)})))),nr(ot=>ze=tn(se,1,"svelte-select-list svelte-di53br",null,ze,ot),[()=>({prefloat:O(Zh)})]),Ce(D,se)};vt(Vm,D=>{F()&&D(pE)})}var Qh=We(Vm,2),gE=Ue(Qh);{var mE=D=>{var se=pB(),ze=Ft(se),At=Ue(ze,!0);Me(ze);var wr=We(ze,2),Lt=Ue(wr,!0);Me(wr),nr(()=>{fs(At,O(o)),fs(Lt,O(l))}),Ce(D,se)};vt(gE,D=>{B()&&D(mE)})}Me(Qh);var Xh=We(Qh,2),vE=Ue(Xh);dr(vE,e,"prepend",{},null),Me(Xh);var Jh=We(Xh,2),qm=Ue(Jh);{var yE=D=>{var se=jt(),ze=Ft(se);{var At=Lt=>{var En=jt(),Ja=Ft(En);nc(Ja,1,S,Of,(ml,xn,ot)=>{var Yt=mB();let Wi;var vl=Ue(Yt),td=Ue(vl);dr(td,e,"selection",{get selection(){return O(xn)},index:ot},Mr=>{var vi=qi();nr(()=>fs(vi,(O(xn),Ee(M()),yt(()=>O(xn)[M()])))),Ce(Mr,vi)}),Me(vl);var Jn=We(vl,2);{var Ys=Mr=>{var vi=gB(),_r=Ue(vi);dr(_r,e,"multi-clear-icon",{},ei=>{Ku(ei)}),Me(vi),zt("pointerup",vi,Qs(so(()=>ir(ot)))),Ce(Mr,vi)};vt(Jn,Mr=>{!H()&&!L()&&Ku&&Mr(Ys)})}Me(Yt),nr(Mr=>Wi=tn(Yt,1,"multi-item svelte-di53br",null,Wi,Mr),[()=>({active:O(me)===ot,disabled:H()})]),zt("click",Yt,Qs(()=>L()?ir(ot):{})),zt("keydown",Yt,Qs(so(function(Mr){Au.call(this,e,Mr)}))),Ce(ml,Yt)}),Ce(Lt,En)},wr=Lt=>{var En=vB();let Ja;var ml=Ue(En);dr(ml,e,"selection",{get selection(){return S()}},xn=>{var ot=qi();nr(()=>fs(ot,(Ee(S()),Ee(M()),yt(()=>S()[M()])))),Ce(xn,ot)}),Me(En),nr(xn=>Ja=tn(En,1,"selected-item svelte-di53br",null,Ja,xn),[()=>({"hide-selected-item":O(n)})]),Ce(Lt,En)};vt(ze,Lt=>{T()?Lt(At):Lt(wr,!1)})}Ce(D,se)};vt(qm,D=>{O(i)&&D(yE)})}var Xa=We(qm,2);fg(Xa,()=>({readOnly:!P(),...O(at),placeholder:O(a),style:ae(),disabled:H()}),void 0,void 0,"svelte-di53br",!0),Yd(Xa,D=>b(D),()=>b()),Me(Jh);var ed=We(Jh,2),Ym=Ue(ed);{var bE=D=>{var se=yB(),ze=Ue(se);dr(ze,e,"loading-icon",{},At=>{iE(At)}),Me(se),Ce(D,se)};vt(Ym,D=>{k()&&D(bE)})}var Km=We(Ym,2);{var wE=D=>{var se=bB(),ze=Ue(se);dr(ze,e,"clear-icon",{},At=>{Ku(At)}),Me(se),zt("click",se,fe),Ce(D,se)};vt(Km,D=>{O(s)&&D(wE)})}var _E=We(Km,2);{var SE=D=>{var se=wB(),ze=Ue(se);dr(ze,e,"chevron-icon",{get listOpen(){return F()}},At=>{rE(At)}),Me(se),Ce(D,se)};vt(_E,D=>{ee()&&D(SE)})}Me(ed);var Zm=We(ed,2);dr(Zm,e,"input-hidden",{get value(){return S()}},D=>{var se=_B();kf(se),nr(ze=>{Is(se,"name",v()),ug(se,ze)},[()=>(Ee(S()),yt(()=>S()?JSON.stringify(S()):null))]),Ce(D,se)});var EE=We(Zm,2);{var xE=D=>{var se=jt(),ze=Ft(se);dr(ze,e,"required",{get value(){return S()}},At=>{var wr=SB();Ce(At,wr)}),Ce(D,se)};vt(EE,D=>{Ee(ge()),Ee(S()),yt(()=>ge()&&(!S()||S().length===0))&&D(xE)})}return Me(Xn),Ln(()=>zt("pointerup",Xn,Qs(pe))),Yd(Xn,D=>y(D),()=>y()),Tu(Xn,D=>Yh==null?void 0:Yh(D)),nr(D=>{Hm=tn(Xn,1,`svelte-select ${he()??""}`,"svelte-di53br",Hm,D),Im(Xn,de())},[()=>({multi:T(),disabled:H(),focused:B(),"list-open":F(),"show-chevron":ee(),error:Se()})]),zt("keydown",Xa,jr),zt("blur",Xa,C),zt("focus",Xa,A),K3(Xa,G),Ce(t,Xn),ob(e,"getFilteredItems",R),ob(e,"handleClear",fe),Lr(dE)}yr(nE,{justValue:{},filter:{},getItems:{},id:{},name:{},container:{},input:{},multiple:{},multiFullItemClearable:{},disabled:{},focused:{},value:{},filterText:{},placeholder:{},placeholderAlwaysShow:{},items:{},label:{},itemFilter:{},groupBy:{},groupFilter:{},groupHeaderSelectable:{},itemId:{},loadOptions:{},containerStyles:{},hasError:{},filterSelectedItems:{},required:{},closeListOnChange:{},clearFilterTextOnBlur:{},createGroupHeaderItem:{},searchable:{},inputStyles:{},clearable:{},loading:{},listOpen:{},debounce:{},debounceWait:{},hideEmptyState:{},inputAttributes:{},listAutoWidth:{},showChevron:{},listOffset:{},hoverItemIndex:{},floatingConfig:{},class:{},ariaValues:{},ariaListOpen:{},ariaFocused:{}},["list-prepend","list","item","empty","list-append","prepend","selection","multi-clear-icon","loading-icon","clear-icon","chevron-icon","input-hidden","required"],["getFilteredItems","handleClear"],!0);function sE(t){const e=t-1;return e*e*e+1}function TB(t,{from:e,to:r},i={}){var{delay:n=0,duration:s=H=>Math.sqrt(H)*120,easing:a=sE}=i,o=getComputedStyle(t),l=o.transform==="none"?"":o.transform,[c,u]=o.transformOrigin.split(" ").map(parseFloat);c/=t.clientWidth,u/=t.clientHeight;var f=AB(t),d=t.clientWidth/r.width/f,p=t.clientHeight/r.height/f,g=e.left+e.width*c,m=e.top+e.height*u,w=r.left+r.width*c,v=r.top+r.height*u,y=(g-w)*d,b=(m-v)*p,T=e.width/r.width,L=e.height/r.height;return{delay:n,duration:typeof s=="function"?s(Math.sqrt(y*y+b*b)):s,easing:a,css:(H,B)=>{var S=B*y,G=B*b,q=H+B*T,te=H+B*L;return`transform: ${l} translate(${S}px, ${G}px) scale(${q}, ${te});`}}}function AB(t){if("currentCSSZoom"in t)return t.currentCSSZoom;for(var e=t,r=1;e!==null;)r*=+getComputedStyle(e).zoom,e=e.parentElement;return r}var $B=ht('<div class="wa-muted svelte-1yd9ia5" style="margin: 4rem auto 0; font-size: 18px; width: fit-content;">No projects found.</div>'),RB=ht('<div style="margin:20px 0;" class="svelte-1yd9ia5"><label for="wa-project-select" class="svelte-1yd9ia5">Select project</label> <div class="project-select-row svelte-1yd9ia5"><!></div></div>'),CB=ht('<div class="create-inline wa-row svelte-1yd9ia5"><input class="wa-create-draft-input svelte-1yd9ia5" type="text" placeholder="Draft name"/> <!> <!></div>'),DB=ht('<div class="svelte-1yd9ia5">No drafts found.</div>'),PB=ht('<span class="wa-draft-active-indicator svelte-1yd9ia5" title="Active draft"></span>'),OB=ht('<div><div class="wa-draft-name wa-row svelte-1yd9ia5"><!> </div> <div class="wa-draft-actions svelte-1yd9ia5"><!> <!> <!> <!> <!></div></div>'),kB=ht('<div class="wa-draft-list svelte-1yd9ia5"></div>'),NB=ht('<div class="draft-controls svelte-1yd9ia5" style="margin-top:16px;"><div class="wa-panel-header svelte-1yd9ia5"><div class="wa-row justify-between svelte-1yd9ia5"><div class="wa-button-group svelte-1yd9ia5"><div class="wa-title svelte-1yd9ia5">Drafts</div> <!></div> <div class="wa-button-group svelte-1yd9ia5"><!> <!></div></div></div> <!> <!> <!></div>'),FB=ht('<div class="create-inline wa-row svelte-1yd9ia5"><input class="wa-create-draft-input svelte-1yd9ia5" type="text" placeholder="Chapter name"/> <!> <!></div>'),IB=ht('<div class="svelte-1yd9ia5">Loading chapters...</div>'),LB=ht('<div style="margin-top: 1em;" class="svelte-1yd9ia5">No chapters found.</div>'),jB=ht('<div class="wa-draft-item svelte-1yd9ia5"><div class="wa-draft-name svelte-1yd9ia5"> </div> <div class="wa-draft-actions svelte-1yd9ia5"><!> <!> <!> <!> <!></div></div>'),MB=ht('<div class="wa-draft-list svelte-1yd9ia5"></div>'),BB=ht('<div class="chapter-controls svelte-1yd9ia5" style="margin-top:18px;"><div class="wa-panel-header svelte-1yd9ia5"><div class="wa-row justify-between svelte-1yd9ia5"><div class="wa-title svelte-1yd9ia5">Chapters</div> <div class="wa-button-group svelte-1yd9ia5"><!></div></div></div> <!> <!></div>'),WB=ht('<div class="project-list wa-panel svelte-1yd9ia5"><div class="wa-row justify-between svelte-1yd9ia5"><div class="wa-title svelte-1yd9ia5"> </div> <div class="svelte-1yd9ia5"><!></div></div> <div class="wa-row svelte-1yd9ia5" style="margin: 18px 0 10px 0;"><!></div> <!> <!> <!> <!></div>');const UB={hash:"svelte-1yd9ia5",code:`.project-list.svelte-1yd9ia5 {padding:8px;}.project-select-row.svelte-1yd9ia5 {display:flex;gap:8px;align-items:center;}.create-inline.svelte-1yd9ia5 {margin-top:8px;justify-content:center;}.wa-panel.svelte-1yd9ia5 {padding:8px;height:100%;border-radius:0;}.wa-panel-header.svelte-1yd9ia5 {display:flex;flex-direction:column;}.wa-draft-item.active.svelte-1yd9ia5 .wa-draft-name:where(.svelte-1yd9ia5) {font-weight:bold;color:var(--color-accent, #3b82f6);}.wa-draft-active-indicator.svelte-1yd9ia5 {color:var(--color-accent, #3b82f6);font-size:1em;vertical-align:middle;}
  @keyframes svelte-1yd9ia5-spin {
    100% {
      transform: rotate(360deg);
    }
  }`};function Il(t,e){var le;Ir(e,!1),fl(t,UB);let r=$e(e,"projectFileService",12),i=$e(e,"projectService",12),n=$e(e,"manager",12),s=$e(e,"activeProject",12,null),a=rt([]),o=rt(void 0),l=rt(null),c=rt([]),u=rt(!1),f=rt([]),d=!1,p=rt(!1),g=rt(!1),m=rt(""),w="",v=rt(!0),y=rt(((le=n())==null?void 0:le.activeDraft)??null),b=null;const T=20;let L=rt([]),H=rt(!1),B=rt(!1),S=rt(""),G=rt(""),q=rt(!1);async function te(V=!1){ce(u,!0);const he=new Promise(je=>setTimeout(je,400)),me=[...O(a)],Le=s();let ut=[],Ke=[];try{ut=i().listAllFolders(),Ke=[];for(const je of ut)await i().isProjectFolder(je)&&Ke.push(je)}catch{Ke=[]}const kt=Ke.filter(je=>!me.includes(je)),at=me.filter(je=>!Ke.includes(je));if(V&&kt.length>0&&new Z.Notice(`${kt.length} new project${kt.length>1?"s":""} discovered.`),V&&at.length>0&&new Z.Notice(`${at.length} project${at.length>1?"s":""} removed.`),ce(a,Ke),ce(f,Ke.map(je=>({value:je,label:je}))),Ke.length===0)s(null),ce(o,void 0),ce(l,null);else if(Ke.length===1){s(Ke[0]),ce(o,O(f)[0]),ce(l,Ke[0]);try{we(`${be} panel refresh selected single project '${O(l)}'`)}catch{}}else if(Le&&!Ke.includes(Le)){s(Ke[0]),ce(o,O(f)[0]),ce(l,Ke[0]);try{we(`${be} panel refresh selected fallback project '${O(l)}'`)}catch{}}else{const je=O(f).find(xt=>xt.value===Le);if(je){s(Le),ce(o,je),ce(l,je.value);try{we(`${be} panel refresh kept project '${O(l)}'`)}catch{}}else s(null),ce(o,void 0),ce(l,null)}return await he,ce(u,!1),O(l)&&await X(),Ke}async function X(){ce(p,!0);const V=new Promise(he=>setTimeout(he,400));try{if(!O(l)){ce(c,[]);return}ce(c,r().drafts.listDrafts(O(l))||[]),ce(c,Array.from(O(c))),O(c).sort((he,me)=>he>me?1:he<me?-1:0),O(v)||O(c).reverse()}catch{ce(c,[])}finally{await V,ce(p,!1)}}async function M(){var he;ce(H,!0);const V=new Promise(me=>setTimeout(me,400));try{if(!O(l)){ce(L,[]),ce(q,!1);return}const me=`${O(l)}/meta.md`,Le=await Ma(n().app,me);if(ce(q,(Le==null?void 0:Le.project_type)==="multi-file"),!O(q)){ce(L,[]);return}if(!((he=n())!=null&&he.activeDraft)){ce(L,[]);return}let ut=[];ut=await r().chapters.listChapters(O(l),n().activeDraft),ce(L,Array.isArray(ut)?ut:[])}catch{ce(L,[]),ce(q,!1)}finally{await V,ce(H,!1)}}async function ve(){if(!(!O(l)||!O(m).trim())){try{await r().drafts.createDraft(O(m).trim(),w||void 0,O(l))}catch{}ce(m,""),ce(g,!1),await X()}}async function ue(){ce(g,!0)}async function ye(V){var me;if(!O(l))return;let he=!1;he=await r().drafts.openDraft(O(l),V),he||(me=n())!=null&&me.setActiveDraft&&await n().setActiveDraft(V,O(l)),await X(),await M()}async function j(V){if(!O(l))return;const he=`${V} Copy`;new s4(n().app,{sourceDraftName:V,suggestedName:he,onSubmit:async me=>{try{await n().createNewDraft(me,V,O(l)||void 0),await X(),new Z.Notice(`Draft '${me}' created as duplicate of '${V}'.`)}catch(Le){console.error("Failed to duplicate draft:",Le),new Z.Notice("Failed to duplicate draft.")}}}).open()}async function I(V){const he=window!=null&&window.prompt?window.prompt(`Rename draft '${V}' to:`,V):null;if(!(!he||!O(l)))try{await n().renameDraft(V,he,O(l),!1),await X()}catch{}}async function Y(V){if(!O(l))return;new ub(n().app,V,async()=>{await n().deleteDraft(V,O(l)||void 0),await X()},"draft").open()}async function de(V){var he,me;V&&((he=n())!=null&&he.setActiveProject&&await n().setActiveProject(V),s(V),ce(l,V),ce(y,((me=n())==null?void 0:me.activeDraft)??null),await X(),await M())}async function Se(V){var he;if(!(!V||!n()))try{n().activeProject!==V&&typeof n().setActiveProject=="function"&&await n().setActiveProject(V),s(V),ce(l,V),ce(y,((he=n())==null?void 0:he.activeDraft)??null),await X(),await M()}catch{}}async function De(V){var he,me;O(l)&&((he=n())!=null&&he.setActiveDraft&&await n().setActiveDraft(V,O(l)),ce(y,((me=n())==null?void 0:me.activeDraft)??null),await X(),await M())}let ge=null;Nm(async()=>{await te(!1),O(l)&&await de(O(l)),setTimeout(async()=>{try{O(l)&&n()&&n().activeProject!==O(l)&&await Se(O(l))}catch{}},200);try{n()&&typeof n().addActiveDraftListener=="function"&&(ge=V=>{ce(y,V),X().catch(()=>{}),M().catch(()=>{})},n().addActiveDraftListener(ge),ce(y,n().activeDraft??null))}catch{}try{n()&&typeof n().addActiveProjectListener=="function"&&(b=V=>{s(V),ce(l,V),te().catch(()=>{}),X().catch(()=>{}),ce(o,O(f).find(he=>he.value===V)||void 0)},n().addActiveProjectListener(b),s(n().activeProject??null),ce(l,s()),X().catch(()=>{}),ce(o,O(f).find(V=>V.value===s())||void 0),M().catch(()=>{}))}catch{}}),Fm(()=>{try{n()&&typeof n().removeActiveDraftListener=="function"&&ge&&n().removeActiveDraftListener(ge)}catch{}try{n()&&typeof n().removeActiveProjectListener=="function"&&b&&n().removeActiveProjectListener(b)}catch{}});var Ie={get projectFileService(){return r()},set projectFileService(V){r(V),Ae()},get projectService(){return i()},set projectService(V){i(V),Ae()},get manager(){return n()},set manager(V){n(V),Ae()},get activeProject(){return s()},set activeProject(V){s(V),Ae()}};B1();var nt=WB(),st=Ue(nt),R=Ue(st),P=Ue(R);Me(R);var ae=We(R,2),K=Ue(ae);ii(K,{ariaLabel:"Refresh projects",onclick:()=>te(!0),title:void 0,get spinning(){return O(u)},children:(V,he)=>{mg(V,{})},$$slots:{default:!0}}),Me(ae),Me(st);var k=We(st,2),F=Ue(k);Ui(F,{onclick:async()=>{const V=n().app,{CreateProjectModal:he}=await Promise.resolve().then(()=>YB);let me=null;new he(V,async(ut,Ke,kt)=>{if(!ut||(me=await i().createProject(ut,Ke,kt,void 0,n().settings),!me))return;let at=[],je=null;for(let xt=0;xt<20;xt++){await new Promise(Te=>setTimeout(Te,100)),at=await te();const fr=at.find(Te=>Te===me);if(je=typeof fr=="string"?fr:null,je)break}typeof je=="string"&&je&&(s(je),ce(o,{value:je,label:je}),ce(l,je),n().setActiveDraft?await n().setActiveDraft(je,kt):n(n().activeDraft=kt??null,!0),await X(),await M())}).open()},variant:"primary",style:"width: 40%; margin: 0 auto;",children:(V,he)=>{cs();var me=qi("New Project");Ce(V,me)},$$slots:{default:!0}}),Me(k);var E=We(k,2);{var $=V=>{var he=$B();Ce(V,he)};vt(E,V=>{O(a),yt(()=>O(a).length===0)&&V($)})}var U=We(E,2);{var x=V=>{var he=RB(),me=We(Ue(he),2),Le=Ue(me);nE(Le,{name:"wa-project-select",class:"wa-select",get items(){return O(f)},showChevron:!0,disabled:d,clearable:!1,searchable:!1,placeholder:"Choose a project...",containerStyles:"background: var(--select-bg); color: var(--select-text); border: 1px solid var(--select-border); border-radius: none; min-height: 38px; box-shadow: none; font-size: 1em; transition: border 0.2s;",get value(){return O(o)},set value(ut){ce(o,ut)},$$events:{select:ut=>{const Ke=ut.detail;ce(o,Ke),ce(l,typeof Ke=="string"?Ke:Ke?Ke.value:void 0),s(O(l)??null),de(O(l)??null)}},$$legacy:!0}),Me(me),Me(he),Ce(V,he)};vt(U,V=>{O(a),yt(()=>O(a).length>0)&&V(x)})}var N=We(U,2);{var z=V=>{var he=NB(),me=Ue(he),Le=Ue(me),ut=Ue(Le),Ke=We(Ue(ut),2);ii(Ke,{ariaLabel:"Toggle draft sort order",title:void 0,onclick:()=>{ce(v,!O(v)),X()},children:(_e,Fe)=>{var qe=jt(),dt=Ft(qe);{var bt=gt=>{dg(gt,{})},tt=gt=>{hg(gt,{})};vt(dt,gt=>{O(v)?gt(bt):gt(tt,!1)})}Ce(_e,qe)},$$slots:{default:!0}}),Me(ut);var kt=We(ut,2),at=Ue(kt);Ui(at,{onclick:ue,variant:"primary",children:(_e,Fe)=>{cs();var qe=qi("New Draft");Ce(_e,qe)},$$slots:{default:!0}});var je=We(at,2);ii(je,{ariaLabel:"Refresh drafts",title:void 0,onclick:X,get disabled(){return O(p)},get spinning(){return O(p)},children:(_e,Fe)=>{mg(_e,{})},$$slots:{default:!0}}),Me(kt),Me(Le),Me(me);var xt=We(me,2);{var fr=_e=>{var Fe=CB(),qe=Ue(Fe);kf(qe);var dt=We(qe,2);Ui(dt,{onclick:ve,variant:"primary",children:(tt,gt)=>{cs();var qt=qi("Create");Ce(tt,qt)},$$slots:{default:!0}});var bt=We(dt,2);Ui(bt,{onclick:()=>{ce(g,!1),ce(m,"")},children:(tt,gt)=>{cs();var qt=qi("Cancel");Ce(tt,qt)},$$slots:{default:!0}}),Me(Fe),nr(()=>ug(qe,O(m))),zt("input",qe,tt=>{const gt=tt.target;gt&&ce(m,gt.value)}),Ce(_e,Fe)};vt(xt,_e=>{O(g)&&_e(fr)})}var Te=We(xt,2);{var Tt=_e=>{var Fe=DB();Ce(_e,Fe)};vt(Te,_e=>{O(c),yt(()=>O(c).length===0)&&_e(Tt)})}var J=We(Te,2);{var ne=_e=>{var Fe=kB();nc(Fe,5,()=>O(c),Of,(qe,dt)=>{var bt=OB(),tt=Ue(bt),gt=Ue(tt);{var qt=Pe=>{var Nt=PB();Ce(Pe,Nt)};vt(gt,Pe=>{O(y)===O(dt)&&Pe(qt)})}var ir=We(gt);Me(tt);var jr=We(tt,2),A=Ue(jr);ii(A,{ariaLabel:"Open draft",title:void 0,onclick:()=>ye(O(dt)),children:(Pe,Nt)=>{pg(Pe,{size:T})},$$slots:{default:!0}});var C=We(A,2);{var pe=Pe=>{ii(Pe,{ariaLabel:"Set active draft",title:void 0,onclick:()=>De(O(dt)),children:(Nt,hr)=>{U1(Nt,{size:T})},$$slots:{default:!0}})};vt(C,Pe=>{O(y)!==O(dt)&&Pe(pe)})}var fe=We(C,2);ii(fe,{ariaLabel:"Rename draft",title:void 0,onclick:()=>I(O(dt)),children:(Pe,Nt)=>{gg(Pe,{size:T})},$$slots:{default:!0}});var Re=We(fe,2);ii(Re,{ariaLabel:"Duplicate draft",title:void 0,onclick:()=>j(O(dt)),children:(Pe,Nt)=>{z1(Pe,{size:T})},$$slots:{default:!0}});var He=We(Re,2);ii(He,{ariaLabel:"Delete draft",title:void 0,onclick:()=>Y(O(dt)),children:(Pe,Nt)=>{vg(Pe,{size:T})},$$slots:{default:!0}}),Me(jr),Me(bt),nr(()=>{tn(bt,1,`wa-draft-item ${O(y)===O(dt)?"active":""}`,"svelte-1yd9ia5"),fs(ir,` ${O(dt)??""}`)}),Ce(qe,bt)}),Me(Fe),Ce(_e,Fe)};vt(J,_e=>{O(c),yt(()=>O(c).length>0)&&_e(ne)})}Me(he),Ce(V,he)};vt(N,V=>{O(l)&&V(z)})}var ee=We(N,2);{var oe=V=>{var he=BB(),me=Ue(he),Le=Ue(me),ut=We(Ue(Le),2),Ke=Ue(ut);Ui(Ke,{onclick:()=>ce(B,!O(B)),variant:"primary",children:(Te,Tt)=>{cs();var J=qi("New Chapter");Ce(Te,J)},$$slots:{default:!0}}),Me(ut),Me(Le),Me(me);var kt=We(me,2);{var at=Te=>{var Tt=FB(),J=Ue(Tt);kf(J);var ne=We(J,2);Ui(ne,{onclick:async()=>{var Fe;!O(l)||!((Fe=n())!=null&&Fe.activeDraft)||!O(S).trim()||(await n().createChapter(O(l),n().activeDraft,O(S).trim()),ce(S,""),ce(G,""),ce(B,!1),await M())},variant:"primary",children:(Fe,qe)=>{cs();var dt=qi("Create");Ce(Fe,dt)},$$slots:{default:!0}});var _e=We(ne,2);Ui(_e,{onclick:()=>{ce(B,!1),ce(S,""),ce(G,"")},children:(Fe,qe)=>{cs();var dt=qi("Cancel");Ce(Fe,dt)},$$slots:{default:!0}}),Me(Tt),nr(()=>ug(J,O(S))),zt("input",J,Fe=>{const qe=Fe.target;qe&&ce(S,qe.value)}),Ce(Te,Tt)};vt(kt,Te=>{O(B)&&Te(at)})}var je=We(kt,2);{var xt=Te=>{var Tt=IB();Ce(Te,Tt)},fr=Te=>{var Tt=jt(),J=Ft(Tt);{var ne=Fe=>{var qe=LB();Ce(Fe,qe)},_e=Fe=>{var qe=MB();nc(qe,15,()=>O(L),dt=>dt.chapterName,(dt,bt,tt)=>{var gt=jB(),qt=Ue(gt),ir=Ue(qt,!0);Me(qt);var jr=We(qt,2),A=Ue(jr);{let He=rc(()=>O(tt)===0);Ui(A,{title:"Move chapter up",onclick:async()=>{if(O(tt)===0)return;const Pe=O(L).slice();[Pe[O(tt)-1],Pe[O(tt)]]=[Pe[O(tt)],Pe[O(tt)-1]];const Nt=Pe.map((hr,Qn)=>({chapterName:hr.chapterName,order:Qn+1}));await n().reorderChapters(O(l),n().activeDraft,Nt),await M()},get disabled(){return O(He)},children:(Pe,Nt)=>{dg(Pe,{})},$$slots:{default:!0}})}var C=We(A,2);{let He=rc(()=>(Ee(O(tt)),O(L),yt(()=>O(tt)===O(L).length-1)));Ui(C,{title:"Move chapter down",onclick:async()=>{if(O(tt)===O(L).length-1)return;const Pe=O(L).slice();[Pe[O(tt)],Pe[O(tt)+1]]=[Pe[O(tt)+1],Pe[O(tt)]];const Nt=Pe.map((hr,Qn)=>({chapterName:hr.chapterName,order:Qn+1}));await n().reorderChapters(O(l),n().activeDraft,Nt),await M()},get disabled(){return O(He)},children:(Pe,Nt)=>{hg(Pe,{})},$$slots:{default:!0}})}var pe=We(C,2);ii(pe,{ariaLabel:"Open chapter",title:"Open chapter",onclick:async()=>{var He;!O(l)||!((He=n())!=null&&He.activeDraft)||await n().openChapter(O(l),n().activeDraft,O(bt).chapterName)},children:(He,Pe)=>{pg(He,{size:T})},$$slots:{default:!0}});var fe=We(pe,2);ii(fe,{ariaLabel:"Rename chapter",title:"Rename chapter",onclick:()=>{var Pe;if(!O(l)||!((Pe=n())!=null&&Pe.activeDraft))return;new a4(n().app,O(bt).chapterName,async Nt=>{await n().renameChapter(O(l),n().activeDraft,O(bt).chapterName,Nt),await M()}).open()},children:(He,Pe)=>{gg(He,{size:T})},$$slots:{default:!0}});var Re=We(fe,2);ii(Re,{ariaLabel:"Delete chapter",title:"Delete chapter",onclick:async()=>{var Pe;if(!O(l)||!((Pe=n())!=null&&Pe.activeDraft))return;new ub(n().app,O(bt).chapterName,async()=>{await n().deleteChapter(O(l),n().activeDraft,O(bt).chapterName),await M()},"chapter").open()},children:(He,Pe)=>{vg(He,{size:T})},$$slots:{default:!0}}),Me(jr),Me(gt),nr(()=>fs(ir,(O(bt),yt(()=>O(bt).chapterName)))),Y3(gt,()=>TB,()=>({duration:500,easing:sE})),Ce(dt,gt)}),Me(qe),Ce(Fe,qe)};vt(J,Fe=>{O(L),yt(()=>O(L).length===0)?Fe(ne):Fe(_e,!1)},!0)}Ce(Te,Tt)};vt(je,Te=>{O(H)?Te(xt):Te(fr,!1)})}Me(he),Ce(V,he)};vt(ee,V=>{O(l),Ee(n()),O(q),yt(()=>{var he;return O(l)&&((he=n())==null?void 0:he.activeDraft)&&O(q)})&&V(oe)})}return Me(nt),nr(()=>fs(P,`${ft} Projects`)),Ce(t,nt),Lr(Ie)}yr(Il,{projectFileService:{},projectService:{},manager:{},activeProject:{}},[],[],!0);const hs="writeaid-project-panel";class zB extends Z.ItemView{constructor(e,r){super(e),this.containerElInner=null,this.selectedProject=null,this.svelteComponent=null,this.app=r,this.projectService=new Sm(r),this.projectFileService=new _m(r,this.projectService)}getViewType(){return hs}getDisplayText(){return`${ft} Projects`}getIcon(){return MS}async onOpen(){var e,r,i,n,s,a,o,l;this.containerElInner=this.containerEl.createDiv({cls:"writeaid-project-panel"});try{const c=(Il==null?void 0:Il.default)??Il;if(!c){new Z.Notice(`${ft}: failed to load project panel component.`);return}const u=(i=(r=(e=this.app.plugins).getPlugin)==null?void 0:r.call(e,"obsidian-writeaid-plugin"))==null?void 0:i.manager;if(!u){new Z.Notice(`${ft}: manager not available, cannot mount project panel.`);return}const f={app:this.app,manager:u,projectService:this.projectService,projectFileService:this.projectFileService};let d=!1;if(typeof c=="function"&&c.prototype instanceof HTMLElement)try{const g=new c;pt(()=>{g.projectService=this.projectService}),pt(()=>{var m,w,v;g.manager=(v=(w=(m=this.app.plugins).getPlugin)==null?void 0:w.call(m,"obsidian-writeaid-plugin"))==null?void 0:v.manager}),pt(()=>{g.draftService=this.projectFileService.drafts}),pt(()=>{var m,w,v,y;g.activeProject=((y=(v=(w=(m=this.app.plugins).getPlugin)==null?void 0:w.call(m,"obsidian-writeaid-plugin"))==null?void 0:v.manager)==null?void 0:y.activeProject)??null}),this.svelteComponent=g,d=!0}catch(g){console.warn(`${ft}: creating custom element instance failed:`,g)}if(!d&&typeof customElements<"u")try{const g="wa-project-panel";if(customElements.get(g)){const m=document.createElement(g);pt(()=>{m.projectService=this.projectService}),pt(()=>{var w,v,y;m.manager=(y=(v=(w=this.app.plugins).getPlugin)==null?void 0:v.call(w,"obsidian-writeaid-plugin"))==null?void 0:y.manager}),pt(()=>{m.draftService=this.projectFileService.drafts}),pt(()=>{var w,v,y,b;m.activeProject=((b=(y=(v=(w=this.app.plugins).getPlugin)==null?void 0:v.call(w,"obsidian-writeaid-plugin"))==null?void 0:y.manager)==null?void 0:b.activeProject)??null}),this.svelteComponent=m,d=!0}}catch(g){console.warn(`${ft}: attempting to create by tag failed:`,g)}if(!d)try{this.svelteComponent=km(c,{target:this.containerElInner,props:f}),d=!0}catch(g){console.warn(`${ft}: svelte.mount failed; trying constructor:`,g);try{this.svelteComponent=new c({target:this.containerElInner,props:f}),d=!0}catch(m){console.error(`${ft}: failed to mount ProjectPanel (mount + constructor failed)`,m),pt(()=>{console.error(`${ft}: component snapshot:`,c)}),new Z.Notice(`${ft}: error mounting project panel component. See console.`);return}}this.svelteComponent&&(typeof this.svelteComponent.destroy=="function"&&(this.svelteComponent.$destroy=(n=this.svelteComponent.destroy)==null?void 0:n.bind(this.svelteComponent)),typeof this.svelteComponent.set=="function"&&(this.svelteComponent.$set=(s=this.svelteComponent.set)==null?void 0:s.bind(this.svelteComponent)));try{const g=(o=(a=this.app.plugins)==null?void 0:a.getPlugin)==null?void 0:o.call(a,"obsidian-writeaid-plugin"),m=((l=g==null?void 0:g.manager)==null?void 0:l.activeProject)??null;m!==null&&this.svelteComponent&&(typeof this.svelteComponent.$set=="function"?pt(()=>{this.svelteComponent.$set({activeProject:m})}):this.svelteComponent instanceof HTMLElement?pt(()=>{this.svelteComponent.activeProject=m}):typeof this.svelteComponent.set=="function"&&pt(()=>{this.svelteComponent.set({activeProject:m})}),typeof this.svelteComponent.setActiveProject=="function"&&pt(()=>{this.svelteComponent.setActiveProject(m)}))}catch{}pt(()=>{this.svelteComponent&&typeof this.svelteComponent.refreshPanel=="function"&&this.svelteComponent.refreshPanel()}),setTimeout(()=>{pt(()=>{var w,v,y;const g=(v=(w=this.app.plugins)==null?void 0:w.getPlugin)==null?void 0:v.call(w,"obsidian-writeaid-plugin"),m=((y=g==null?void 0:g.manager)==null?void 0:y.activeProject)??null;m&&this.svelteComponent&&(typeof this.svelteComponent.$set=="function"?this.svelteComponent.$set({activeProject:m}):this.svelteComponent instanceof HTMLElement?this.svelteComponent.activeProject=m:typeof this.svelteComponent.set=="function"&&this.svelteComponent.set({activeProject:m}),typeof this.svelteComponent.setActiveProject=="function"&&this.svelteComponent.setActiveProject(m))})},0),pt(()=>{var m,w;const g=(w=(m=this.app.plugins)==null?void 0:m.getPlugin)==null?void 0:w.call(m,"obsidian-writeaid-plugin");g&&g.manager&&typeof g.manager.addActiveProjectListener=="function"&&g.manager.addActiveProjectListener(this.onActiveProjectChanged.bind(this))})}catch{}}onActiveProjectChanged(){}}function GB(t,e){return()=>{const r={type:hs,active:!0},i=e.workspace.getLeavesOfType(hs);if(i.length>0){const n=i[0];e.workspace.revealLeaf(n)}else{let n=e.workspace.getRightLeaf(!1);n||(n=e.workspace.getRightLeaf(!0)),n.setViewState(r),e.workspace.revealLeaf(n)}}}function HB(t){return()=>t.updateProjectMetadataPrompt()}class VB extends Z.Modal{constructor(e,r,i,n){super(e),this.path=r,this.onCreateAnyway=i,this.onOpenExisting=n}onOpen(){const{contentEl:e}=this;e.createEl("h2",{text:"Project already exists"}),e.createEl("p",{text:`A folder named '${this.path}' already exists in the vault.`}),new Z.Setting(e).addButton(r=>r.setButtonText("Open Existing").onClick(()=>{this.close(),this.onOpenExisting()})),new Z.Setting(e).addButton(r=>r.setButtonText("Create Anyway").setCta().onClick(()=>{this.close(),this.onCreateAnyway(!0)})),new Z.Setting(e).addButton(r=>r.setButtonText("Cancel").onClick(()=>{this.close()}))}onClose(){this.contentEl.empty()}}class qB extends Z.Modal{constructor(e,r){super(e),this.props=r}onOpen(){const{contentEl:e}=this;e.createEl("h2",{text:"Create New Draft"});const r=this.props.suggestedName;let i="",n="";new Z.Setting(e).setName("Draft name").addText(a=>a.setPlaceholder(r).onChange(o=>i=o));const s=this.props.drafts;s.length>0&&new Z.Setting(e).setName("Copy from existing draft").addDropdown(a=>{a.addOption("","Start blank");for(const o of s)a.addOption(o,o);a.onChange(o=>n=o)}),new Z.Setting(e).addButton(a=>a.setButtonText("Create").setCta().onClick(()=>{this.close();const o=i&&i.trim()?i.trim():r;this.props.onSubmit(o,n||void 0)}))}onClose(){this.contentEl.empty()}}class aE extends Z.Modal{constructor(e,r){super(e),this.onSubmit=r}onOpen(){const{contentEl:e}=this;e.createEl("h2",{text:"Create New Project"});let r="",i=!0,n="Draft 1";new Z.Setting(e).setName("Project folder name").addText(s=>s.onChange(a=>r=a)),new Z.Setting(e).setName("Project type").addDropdown(s=>{s.addOption("single","Single-file project"),s.addOption("multi","Multi-file project (chapters)"),s.onChange(a=>i=a==="single")}),new Z.Setting(e).setName("Initial draft name (optional)").addText(s=>s.setPlaceholder("Draft 1").onChange(a=>n=a||"Draft 1")),new Z.Setting(e).addButton(s=>s.setButtonText("Create Project").setCta().onClick(()=>{this.close(),this.onSubmit(r,i,n||void 0)}))}onClose(){this.contentEl.empty()}}const YB=Object.freeze(Object.defineProperty({__proto__:null,CreateProjectModal:aE},Symbol.toStringTag,{value:"Module"}));class bb extends Z.Modal{constructor(e,r,i){super(e),this.projectPath=r,this.onOpenProject=i}onOpen(){const{contentEl:e}=this;e.createEl("h2",{text:"Project created"}),e.createEl("p",{text:`Project '${this.projectPath}' was created.`}),new Z.Setting(e).addButton(r=>r.setButtonText("Open Project").setCta().onClick(async()=>{this.close(),this.onOpenProject&&await this.onOpenProject()})),new Z.Setting(e).addButton(r=>r.setButtonText("Close").onClick(()=>this.close()))}onClose(){this.contentEl.empty()}}class Zd extends Z.Modal{constructor(e,r){super(e),this.props=r}onOpen(){const{contentEl:e}=this;e.createEl("h2",{text:"Select Project for Draft"});let r="";const i=this.props.folders||[];new Z.Setting(e).setName("Project folder").addDropdown(n=>{n.addOption("","(Vault root)");for(const s of i)n.addOption(s,s||"(Vault root)");n.onChange(s=>r=s)}),new Z.Setting(e).addButton(n=>n.setButtonText("Select").setCta().onClick(()=>{this.close(),this.props.onSubmit(r||"")}))}onClose(){this.contentEl.empty()}}class KB extends Z.Modal{constructor(e,r,i){super(e),this.drafts=r,this.onSubmit=i}onOpen(){const{contentEl:e}=this;e.createEl("h2",{text:"Switch Active Draft"});for(const r of this.drafts)new Z.Setting(e).setName(r).addButton(i=>i.setButtonText("Select").onClick(()=>{this.close(),this.onSubmit(r)}))}onClose(){this.contentEl.empty()}}class ZB{constructor(e,r,i){var n;this.activeDraft=null,this.activeProject=null,this.activeProjectListeners=[],this.activeDraftListeners=[],this.panelRefreshListeners=[],this._panelRefreshTimer=null,this._panelRefreshDebounceMs=250,this.app=e,this.plugin=r,this.settings=r==null?void 0:r.settings,typeof i=="number"&&Number.isFinite(i)&&(this._panelRefreshDebounceMs=Math.max(0,Math.floor(i))),this.activeProject=((n=this.settings)==null?void 0:n.activeProject)||null,this.projectService=new Sm(e),this.projectFileService=new _m(e,this.projectService)}async reorderChapters(e,r,i){return await this.projectFileService.chapters.reorderChapters(e,r,i)}async listChapters(e,r){return await this.projectFileService.chapters.listChapters(e,r)}async createChapter(e,r,i){return await this.projectFileService.chapters.createChapter(e,r,i,this.settings)}async deleteChapter(e,r,i){return await this.projectFileService.chapters.deleteChapter(e,r,i)}async renameChapter(e,r,i,n){return await this.projectFileService.chapters.renameChapter(e,r,i,n)}async openChapter(e,r,i){return await this.projectFileService.chapters.openChapter(e,r,i)}get panelRefreshDebounceMs(){return this._panelRefreshDebounceMs}set panelRefreshDebounceMs(e){typeof e=="number"&&Number.isFinite(e)&&(this._panelRefreshDebounceMs=Math.max(0,Math.floor(e)))}addActiveProjectListener(e){this.activeProjectListeners.push(e)}addActiveDraftListener(e){this.activeDraftListeners.push(e)}removeActiveDraftListener(e){this.activeDraftListeners=this.activeDraftListeners.filter(r=>r!==e)}notifyActiveDraftListeners(e){for(const r of this.activeDraftListeners)pt(()=>r(e))}addPanelRefreshListener(e){this.panelRefreshListeners.push(e)}removePanelRefreshListener(e){this.panelRefreshListeners=this.panelRefreshListeners.filter(r=>r!==e)}notifyPanelRefresh(){try{this._panelRefreshTimer&&clearTimeout(this._panelRefreshTimer),this._panelRefreshTimer=setTimeout(()=>{for(const e of this.panelRefreshListeners)pt(()=>e());this._panelRefreshTimer=null},this._panelRefreshDebounceMs)}catch{for(const e of this.panelRefreshListeners)pt(()=>e())}}removeActiveProjectListener(e){this.activeProjectListeners=this.activeProjectListeners.filter(r=>r!==e)}async setActiveProject(e){e&&(e=e.trim().replace(/^\/+/,"").replace(/\/+$/,"")),we(`${be} setActiveProject called with '${e}'`),this.activeProject=e,await sr(async()=>{if(this.plugin){const r=this.plugin;r.settings||(r.settings={}),r.settings.activeProject=e??void 0,typeof r.saveSettings=="function"&&await r.saveSettings()}});for(const r of this.activeProjectListeners)pt(()=>r(e));try{if(!e){this.activeDraft=null,this.notifyActiveDraftListeners(null);return}const r=this.listDrafts(e);if(!r||r.length===0){this.activeDraft=null;return}if(r.length===1){await this.setActiveDraft(r[0],e,!1),we(`${be} auto-selected single draft '${r[0]}' for project '${e}'`);return}await sr(async()=>{const o=await Ma(this.app,`${e}/meta.md`);if(o&&o.current_active_draft&&r.includes(o.current_active_draft)){await this.setActiveDraft(o.current_active_draft,e,!1),we(`${be} auto-selected meta draft '${o.current_active_draft}' for project '${e}'`);return}});let i=null,n=0;const s=this.app.vault.getFiles(),a=rn(this.settings);for(const o of r){const l=`${e}/${a}/${o}/`;let c=0;for(const u of s)if(u.path.startsWith(l)){const f=u.stat&&typeof u.stat.mtime=="number"?u.stat.mtime:0;f>c&&(c=f)}c>n&&(n=c,i=o)}i||(i=r[0]),we(`${be} auto-selected draft '${i}' for project '${e}'`),await this.setActiveDraft(i,e,!1)}catch{}}async createNewProjectPrompt(){new aE(this.app,async(e,r,i,n)=>{if(!e){new Z.Notice("Project name is required.");return}const s=n&&n!==""?`${n}/${e}`:e;this.app.vault.getAbstractFileByPath(s)?new VB(this.app,s,async o=>{o&&(await this.createNewProject(e,r,i,n),new bb(this.app,s,async()=>await this.openProject(s)).open())},async()=>{await this.openProject(s)}).open():(await this.createNewProject(e,r,i,n),new bb(this.app,s,async()=>await this.openProject(s)).open())}).open()}async openProject(e){return await this.projectService.openProject(e)}async createNewProject(e,r,i,n){const s=await this.projectService.createProject(e,r,i,n,this.settings);if(s){await this.setActiveProject(s);const a=i||"Draft 1";await this.setActiveDraft(a,s),pt(()=>this.notifyPanelRefresh())}return s}listAllFolders(){return this.projectService.listAllFolders()}async createNewDraftPrompt(){const e=this.listAllFolders(),r=await go(e,i=>this.projectService.isProjectFolder(i));new Zd(this.app,{folders:r,onSubmit:async i=>{const n=await this.suggestNextDraftName(i);new qB(this.app,{suggestedName:n,drafts:this.listDrafts(i),projectPath:i,onSubmit:async(s,a)=>{await this.projectFileService.drafts.createDraft(s,a,i,this.settings),new Z.Notice(`Draft "${s}" created in ${i}.`)}}).open()}}).open()}async switchDraftPrompt(){const e=this.listDrafts();if(e.length===0){new Z.Notice("No drafts found in the current project.");return}new KB(this.app,e,async r=>{this.activeDraft=r,new Z.Notice(`Switched to draft: ${r}`);const i=this.getCurrentProjectPath();i&&await uo(this.app,i,r,void 0,this.settings)}).open()}async updateProjectMetadataPrompt(){if(this.activeProject){await uo(this.app,this.activeProject,void 0,void 0,this.settings),new Z.Notice(`Metadata updated for ${this.activeProject}`);return}(async()=>{const e=this.listAllFolders(),r=await go(e,i=>this.projectService.isProjectFolder(i));new Zd(this.app,{folders:r,onSubmit:async i=>{await uo(this.app,i,void 0,void 0,this.settings),new Z.Notice(`Metadata updated for ${i}`)}}).open()})()}async selectActiveProjectPrompt(){const e=this.listAllFolders(),r=await go(e,i=>this.projectService.isProjectFolder(i));if(r.length===0){new Z.Notice(`No ${ft} projects found in the vault.`);return}new Zd(this.app,{folders:r,onSubmit:async i=>{await this.setActiveProject(i),new Z.Notice(`Active project set to ${i}`)}}).open()}async createNewDraft(e,r,i){const n=await this.projectFileService.drafts.createDraft(e,r,i,this.settings);return pt(()=>this.notifyPanelRefresh()),n}listDrafts(e){return this.projectFileService.drafts.listDrafts(e)}async setActiveDraft(e,r,i=!0){const n=r||this.activeProject||this.getCurrentProjectPath();return n?(this.activeDraft=e,await sr(async()=>{await uo(this.app,n,e,void 0,this.settings)}),this.notifyActiveDraftListeners(this.activeDraft),i&&new Z.Notice(`Active draft set to ${e}`),!0):(i&&new Z.Notice("No project selected to set active draft on."),!1)}async renameDraft(e,r,i,n=!1){const s=i||this.activeProject||this.getCurrentProjectPath();if(!s)return new Z.Notice("No project selected to rename draft."),!1;const a=this.activeDraft===e;return await this.projectFileService.drafts.renameDraft(s,e,r,n,this.settings)?(a&&(this.activeDraft=r),new Z.Notice(`Renamed draft ${e}  ${r}`),!0):(new Z.Notice("Failed to rename draft."),!1)}async deleteDraft(e,r,i=!0){const n=r||this.activeProject||this.getCurrentProjectPath();if(!n)return new Z.Notice("No project selected to delete draft."),!1;if(await this.projectFileService.drafts.deleteDraft(n,e,i)){new Z.Notice(`Deleted draft ${e}`);const a=this.listDrafts(n);if(a.length>0){if(this.activeDraft===e||!this.activeDraft){let o;if(a.length===1)o=a[0];else{const l=[...a].sort((c,u)=>c.localeCompare(u));if(this.activeDraft===e){const c=l.findIndex(u=>u===e);if(c!==-1){const u=c<l.length-1?c:0;o=l[u]}else o=l[0]}else o=this.activeDraft}await this.setActiveDraft(o,n,!1)}}else this.activeDraft=null,this.notifyActiveDraftListeners(null);return!0}return new Z.Notice("Failed to delete draft."),!1}async suggestNextDraftName(e){return await this.projectFileService.drafts.suggestNextDraftName(e)}getCurrentProjectPath(){const e=this.app.workspace.getActiveFile();if(!e)return null;const r=e.parent;return r?r.path:null}}const ao=0,Cu=5e3,Du=250;class QB extends Z.PluginSettingTab{constructor(e,r){super(e,r),this.plugin=r,we(`${be} Settings tab created`),typeof r.registerSettingsChangedCallback=="function"&&r.registerSettingsChangedCallback(()=>{we(`${be} Settings changed externally, refreshing UI`),this.containerEl&&this.containerEl.parentElement&&this.display()})}display(){const{containerEl:e}=this;e.empty(),e.createEl("h2",{text:`${ft} Settings`}),we(`${be} Displaying settings UI`);const r=this.plugin;e.createEl("h3",{text:"Templates"}),new Z.Setting(e).setName("Include outline file on draft creation").setDesc("If enabled, each new draft will include an outline.md file using the outline template.").addToggle(o=>o.setValue(!!r.settings.includeDraftOutline).onChange(l=>{we(`${be} Include draft outline changed: ${l}`),r.settings.includeDraftOutline=l,r.saveSettings()})),new Z.Setting(e).setName("Draft outline template").setDesc("Template for new draft outline files. Use {{draftName}}").addTextArea(o=>{o.setValue(r.settings.draftOutlineTemplate||""),o.inputEl.setAttribute("data-setting","draft-outline")}).addButton(o=>o.setButtonText("Pick file...").onClick(()=>{we(`${be} Opening file picker for draft outline template`),new Qd(this.app,l=>{we(`${be} Draft outline template selected: ${l}`),r.settings.draftOutlineTemplate=l,this.display()}).open()})),new Z.Setting(e).setName("Planning template").setDesc("Template for planning documents. Use {{projectName}}").addTextArea(o=>{o.setValue(r.settings.planningTemplate||""),o.inputEl.setAttribute("data-setting","planning")}).addButton(o=>o.setButtonText("Pick file...").onClick(()=>{we(`${be} Opening file picker for planning template`),new Qd(this.app,l=>{we(`${be} Planning template selected: ${l}`),r.settings.planningTemplate=l,this.display()}).open()})),new Z.Setting(e).setName("Chapter template").setDesc("Template for newly created chapter files. Use {{chapterTitle}}").addTextArea(o=>{o.setValue(r.settings.chapterTemplate||""),o.inputEl.setAttribute("data-setting","chapter")}).addButton(o=>o.setButtonText("Pick file...").onClick(()=>{we(`${be} Opening file picker for chapter template`),new Qd(this.app,l=>{we(`${be} Chapter template selected: ${l}`),r.settings.chapterTemplate=l,this.display()}).open()})),new Z.Setting(e).setName("Manuscript name template").setDesc("Template for manuscript filenames. Use {{draftName}}, {{projectName}}, and moment.js date qualifiers like {{YYYY-MM-DD}}").addText(o=>{o.setValue(r.settings.manuscriptNameTemplate||"{{draftName}}"),o.inputEl.setAttribute("data-setting","manuscript")}),new Z.Setting(e).addButton(o=>o.setButtonText("Save Templates").setCta().onClick(async()=>{var d,p,g;we(`${be} Save Templates button clicked`);const l=e.querySelector('textarea[data-setting="draft-outline"]'),c=e.querySelector('textarea[data-setting="planning"]'),u=e.querySelector('textarea[data-setting="chapter"]'),f=e.querySelector('input[data-setting="manuscript"]');we(`${be} Found inputs - draft: ${!!l}, planning: ${!!c}, chapter: ${!!u}, manuscript: ${!!f}`),we(`${be} Manuscript input value: "${f==null?void 0:f.value}"`),l&&(r.settings.draftOutlineTemplate=l.value),c&&(r.settings.planningTemplate=c.value),u&&(r.settings.chapterTemplate=u.value),f&&(r.settings.manuscriptNameTemplate=f.value),we(`${be} Saving templates: draft=${(d=r.settings.draftOutlineTemplate)==null?void 0:d.substring(0,50)}..., planning=${(p=r.settings.planningTemplate)==null?void 0:p.substring(0,50)}..., chapter=${(g=r.settings.chapterTemplate)==null?void 0:g.substring(0,50)}..., manuscript=${r.settings.manuscriptNameTemplate}`),await r.saveSettings(),new Z.Notice("Templates saved successfully!")})),e.createEl("h3",{text:"Filenames"}),new Z.Setting(e).setName("Draft filename slug style").setDesc("How per-draft main filenames are generated").addDropdown(o=>{o.addOption("compact","compact (draft1)"),o.addOption("kebab","kebab (draft-1)"),o.setValue(r.settings.slugStyle||"compact"),o.onChange(l=>{we(`${be} Slug style changed: ${l}`),r.settings.slugStyle=l,r.saveSettings();const c=e.querySelector(".wat-slug-preview");c&&(c.textContent=`Example: Draft 1  ${li("Draft 1",l)}.md`)})});let i="Draft 1";new Z.Setting(e).setName("Sample draft name").setDesc("Type a sample draft name to preview the generated filename").addText(o=>o.setPlaceholder("Draft 1").setValue(i).onChange(l=>{i=l||"Draft 1";const c=e.querySelector(".wat-slug-preview");if(c){const u=li(i,r.settings.slugStyle);c.textContent=`Example: ${i}  ${u}.md`}}));const n=e.createDiv({cls:"wat-slug-preview"}),s=li(i,r.settings.slugStyle);n.setText(`Example: ${i}  ${s}.md`),e.createEl("h3",{text:"Folders & Files"}),new Z.Setting(e).setName("Drafts folder name").setDesc("Name of the folder containing draft subfolders (default: drafts)").addText(o=>o.setValue(r.settings.draftsFolderName||"drafts").onChange(l=>{we(`${be} Drafts folder name changed: ${l}`),r.settings.draftsFolderName=l||"drafts",r.saveSettings()})),new Z.Setting(e).setName("Manuscripts folder name").setDesc("Name of the folder containing generated manuscripts (default: manuscripts)").addText(o=>o.setValue(r.settings.manuscriptsFolderName||"manuscripts").onChange(l=>{we(`${be} Manuscripts folder name changed: ${l}`),r.settings.manuscriptsFolderName=l||"manuscripts",r.saveSettings()})),new Z.Setting(e).setName("Backups folder name").setDesc("Name of the folder containing draft backups (default: .writeaid-backups)").addText(o=>o.setValue(r.settings.backupsFolderName||".writeaid-backups").onChange(l=>{we(`${be} Backups folder name changed: ${l}`),r.settings.backupsFolderName=l||".writeaid-backups",r.saveSettings()})),new Z.Setting(e).setName("Meta file name").setDesc("Name of the project metadata file (default: meta.md)").addText(o=>o.setValue(r.settings.metaFileName||"meta.md").onChange(l=>{we(`${be} Meta file name changed: ${l}`),r.settings.metaFileName=l||"meta.md",r.saveSettings()})),new Z.Setting(e).setName("Outline file name").setDesc("Name of the draft outline file (default: outline.md)").addText(o=>o.setValue(r.settings.outlineFileName||"outline.md").onChange(l=>{we(`${be} Outline file name changed: ${l}`),r.settings.outlineFileName=l||"outline.md",r.saveSettings()})),e.createEl("h3",{text:"Word Count Targets"}),new Z.Setting(e).setName("Default target word count for multi-file projects").setDesc("Target word count automatically set for new multi-file projects (chapters)").addText(o=>o.setValue(String(r.settings.defaultMultiTargetWordCount??5e4)).setPlaceholder("50000").onChange(l=>{const c=parseInt(l,10);!isNaN(c)&&c>0&&(we(`${be} Default multi-file target word count changed: ${c}`),r.settings.defaultMultiTargetWordCount=c,r.saveSettings())})),new Z.Setting(e).setName("Default target word count for single-file projects").setDesc("Target word count automatically set for new single-file projects").addText(o=>o.setValue(String(r.settings.defaultSingleTargetWordCount??2e4)).setPlaceholder("20000").onChange(l=>{const c=parseInt(l,10);!isNaN(c)&&c>0&&(we(`${be} Default single-file target word count changed: ${c}`),r.settings.defaultSingleTargetWordCount=c,r.saveSettings())})),e.createEl("h3",{text:"UI & Startup"}),e.createEl("p",{text:"Most settings take effect immediately. Settings marked with  require a plugin reload to take effect.",cls:"setting-item-description"}),new Z.Setting(e).setName("Ribbon placement").setDesc(`Place the ${ft} icon on the left or right ribbon`).addDropdown(o=>{o.addOption("left","Left"),o.addOption("right","Right"),o.setValue(r.settings.ribbonPlacement||"left"),o.onChange(l=>{we(`${be} Ribbon placement changed: ${l}`),r.settings.ribbonPlacement=l,r.saveSettings(),typeof this.plugin.moveRibbon=="function"&&(l==="left"||l==="right")&&this.plugin.moveRibbon(l),this.display()})}),new Z.Setting(e).setName("Always show ribbon").setDesc(`If enabled, the ${ft} ribbon icon will always be visible regardless of whether projects are detected`).addToggle(o=>o.setValue(!!r.settings.ribbonAlwaysShow).onChange(l=>{we(`${be} Always show ribbon changed: ${l}`),r.settings.ribbonAlwaysShow=l,r.saveSettings(),typeof this.plugin.refreshRibbonVisibility=="function"&&this.plugin.refreshRibbonVisibility()})),new Z.Setting(e).setName("Auto-open project panel on startup").setDesc(`If enabled, the ${ft} project panel will open on plugin load when an active project is saved.  Requires plugin reload to take effect.`).addToggle(o=>o.setValue(!!r.settings.autoOpenPanelOnStartup).onChange(l=>{we(`${be} Auto-open panel on startup changed: ${l}`),r.settings.autoOpenPanelOnStartup=l,r.saveSettings()})),new Z.Setting(e).setName("Auto-select persisted project on startup").setDesc("If enabled, the persisted active project will be selected as the plugin's active project on load without opening the panel.  Requires plugin reload to take effect.").addToggle(o=>o.setValue(!!r.settings.autoSelectProjectOnStartup).onChange(l=>{we(`${be} Auto-select project on startup changed: ${l}`),r.settings.autoSelectProjectOnStartup=l,r.saveSettings()})),new Z.Setting(e).setName(`Enable ${ft} debug logs`).setDesc(`When enabled, ${ft} will set window.__${ft.toUpperCase()}__ to true to show verbose runtime logs useful during development.`).addToggle(o=>o.setValue(!!r.settings.debug).onChange(l=>{we(`${be} Debug logs setting changed: ${l}`),r.settings.debug=l,window.__WRITEAID_DEBUG__=!!l,r.saveSettings(),l?new Z.Notice(`${ft}: debug logs enabled  verbose logs will appear in the DevTools console.`):new Z.Notice(`${ft}: debug logs disabled.`)})),e.createEl("h3",{text:"Panel performance"}),new Z.Setting(e).setName("Panel refresh debounce (ms)").setDesc("Debounce timeout (milliseconds) for side-panel refresh notifications. Lower values mean more frequent refreshes; 0 disables debouncing.").addText(o=>{const l=r.settings.panelRefreshDebounceMs,c=Number(l??Du);o.setPlaceholder(String(Du)),o.setValue(String(c));let u=null;const f=d=>{const p=Number(d);if(!Number.isFinite(p)||p<ao){new Z.Notice(`Please enter a valid number  ${ao}.`);return}const g=Math.min(Math.floor(p),Cu);we(`${be} Panel refresh debounce changed: ${g}ms`),r.settings.panelRefreshDebounceMs=g;try{const m=r.saveSettings();m&&typeof m.catch=="function"&&m.catch(()=>{})}catch{}this.plugin.manager&&typeof this.plugin.manager=="object"&&"panelRefreshDebounceMs"in this.plugin.manager&&(this.plugin.manager.panelRefreshDebounceMs=g),o.inputEl.value=String(g),u&&(u.value=String(g))};try{const d=o.inputEl;d.setAttribute("type","number"),d.setAttribute("min",String(ao)),d.setAttribute("max",String(Cu)),d.setAttribute("step","50"),d.setAttribute("aria-label","Panel refresh debounce in milliseconds"),pt(()=>{d.insertAdjacentHTML("afterend",'<span class="wa-unit">ms</span>')}),u=document.createElement("input"),u.type="range",u.min=String(ao),u.max=String(Cu),u.step="50",u.value=String(c),u.className="wa-debounce-range",pt(()=>{const p=d.nextSibling;p&&p.parentElement?p.insertAdjacentElement("afterend",u):d.insertAdjacentElement("afterend",u)}),o.onChange(p=>{const g=Number(p);f(g)}),u.addEventListener("input",p=>{const g=Number(p.target.value);o.inputEl.value=String(g),f(g)})}catch{o.onChange(d=>{const p=Number(d);if(!Number.isFinite(p)||p<ao){new Z.Notice(`Please enter a valid number  ${ao}.`);return}const g=Math.min(Math.floor(p),Cu);r.settings.panelRefreshDebounceMs=g,r.saveSettings(),this.plugin.manager&&typeof this.plugin.manager=="object"&&"panelRefreshDebounceMs"in this.plugin.manager&&(this.plugin.manager.panelRefreshDebounceMs=g)})}}).addButton(o=>o.setButtonText("Reset").setTooltip(`Reset to default (${Du} ms)`).onClick(()=>{const l=Du;r.settings.panelRefreshDebounceMs=l,r.saveSettings(),this.plugin.manager&&typeof this.plugin.manager=="object"&&"panelRefreshDebounceMs"in this.plugin.manager&&(this.plugin.manager.panelRefreshDebounceMs=l),this.display()}))}}class Qd extends Z.Modal{constructor(e,r){super(e),this.currentFolder=null,this.expanded={},this.onPick=r,we(`${be} FilePickerModal created`)}onOpen(){we(`${be} FilePickerModal opened`);const e=this.app.vault.getRoot();this.currentFolder=e,this.expanded={},this.render()}render(){const{contentEl:e}=this;if(e.empty(),e.createEl("h2",{text:"Select template file"}),!this.currentFolder)return;const r=this.currentFolder.path?this.currentFolder.path.split("/"):[],i=e.createDiv({cls:"wat-breadcrumbs"}),n=i.createEl("a",{text:"(Vault root)",href:"#"});n.onclick=c=>{c.preventDefault(),this.currentFolder=this.app.vault.getRoot(),this.render()};let s="";for(const c of r){s=s?`${s}/${c}`:c,i.createDiv({text:" / "});const u=i.createEl("a",{text:c,href:"#"}),f=s;u.onclick=d=>{d.preventDefault();const p=this.app.vault.getAbstractFileByPath(f);p&&p instanceof Z.TFolder&&(this.currentFolder=p,this.render())}}const o=e.createDiv({cls:"wat-controls"}).createEl("button",{text:"Up"});o.onclick=c=>{var d;if(c.preventDefault(),!this.currentFolder)return;const u=((d=this.currentFolder.parent)==null?void 0:d.path)||"",f=u?this.app.vault.getAbstractFileByPath(u):this.app.vault.getRoot();f&&f instanceof Z.TFolder&&(this.currentFolder=f,this.render())};const l=e.createDiv({cls:"wat-list"});for(const c of this.currentFolder.children)if(c instanceof Z.TFolder){const u=l.createDiv({cls:"wat-row folder-row"}),f=u.createEl("button",{text:this.expanded[c.path]?"":""});f.onclick=p=>{p.preventDefault(),this.expanded[c.path]=!this.expanded[c.path],this.render()};const d=u.createEl("a",{text:c.name,href:"#"});if(d.onclick=p=>{p.preventDefault(),this.currentFolder=c,this.render()},this.expanded[c.path]){const p=l.createDiv({cls:"wat-sub"});for(const g of c.children)if(g instanceof Z.TFolder){const w=p.createDiv({cls:"wat-row sub-folder"}).createEl("a",{text:g.name,href:"#"});w.onclick=v=>{v.preventDefault(),this.currentFolder=g,this.render()}}else if(g instanceof Z.TFile&&g.path.toLowerCase().endsWith(".md")){const w=p.createDiv({cls:"wat-row sub-file"}).createEl("a",{text:g.name,href:"#"});w.onclick=v=>{v.preventDefault(),we(`${be} File selected from file picker: ${g.path}`),this.close(),this.onPick(g.path)}}}}else if(c instanceof Z.TFile&&c.path.toLowerCase().endsWith(".md")){const f=l.createDiv({cls:"wat-row file-row"}).createEl("a",{text:c.name,href:"#"});f.onclick=d=>{d.preventDefault(),we(`${be} File selected from file picker: ${c.path}`),this.close(),this.onPick(c.path)}}}onClose(){this.contentEl.empty()}}const XB=":root{--background: var(--background-primary, #fff);--border: var(--background-modifier-border, #ccc);--border-focused: var(--interactive-accent, #7c5cff);--border-hover: var(--interactive-accent, #7c5cff);--border-radius: 6px;--border-radius-focused: 6px;--box-sizing: border-box;--font-size: 1.5em;--height: 38px;--padding: 0 10px;--margin: 0;--width: 100%;--list-background: var(--background-secondary, #f6f6f6);--list-border: var(--background-modifier-border, #e0e0e0);--list-border-radius: 6px;--list-shadow: 0 2px 8px rgba(30, 30, 30, .06);--list-z-index: 1000;--list-max-height: 260px;--item-color: var(--text-normal, #222);--item-hover-bg: var(--background-modifier-hover, #f0f0ff);--item-hover-color: var(--text-normal, #222);--item-active-background: var(--background-modifier-active, #eaeaff);--item-is-active-bg: var(--background-modifier-active, #eaeaff);--item-is-active-color: var(--text-normal, #222);--item-padding: 8px 14px;--item-height: 36px;--item-line-height: 1.4;--item-transition: background .15s;--placeholder-color: var(--text-muted, #888);--placeholder-opacity: 1;--chevron-color: var(--text-muted, #888);--chevron-icon-colour: var(--text-muted, #888);--chevron-background: transparent;--chevron-border: none;--chevron-width: 22px;--chevron-height: 22px;--chevron-pointer-events: auto;--icons-color: var(--text-muted, #888);--disabled-background: var(--background-modifier-disabled, #f3f3f3);--disabled-border-color: var(--background-modifier-border, #eee);--disabled-color: var(--text-muted, #bbb);--disabled-placeholder-color: var(--text-muted, #bbb);--disabled-placeholder-opacity: .7;--error-background: #fff0f0;--error-border: #d43c3c}.theme-dark{--background: var(--background-primary, #23232b);--border: var(--background-modifier-border, #333);--border-focused: var(--interactive-accent, #7c5cff);--border-hover: var(--interactive-accent, #7c5cff);--font-size: 1em;--list-background: var(--background-secondary, #23233a);--list-border: var(--background-modifier-border, #333);--item-color: var(--text-normal, #e0e0e0);--item-hover-bg: var(--background-modifier-hover, #2a2a4a);--item-hover-color: var(--text-normal, #e0e0e0);--item-active-background: var(--background-modifier-active, #2a2a4a);--item-is-active-bg: var(--background-modifier-active, #2a2a4a);--item-is-active-color: var(--text-normal, #e0e0e0);--placeholder-color: var(--text-muted, #aaa);--chevron-color: var(--text-muted, #aaa);--chevron-icon-colour: var(--text-muted, #aaa);--icons-color: var(--text-muted, #aaa);--disabled-background: var(--background-modifier-disabled, #23232b);--disabled-border-color: var(--background-modifier-border, #333);--disabled-color: var(--text-muted, #444);--disabled-placeholder-color: var(--text-muted, #444);--error-background: #2a1a1a;--error-border: #d43c3c}.writeaid-ribbon{padding-left:6px}.writeaid-ribbon .wa-icon{display:inline-block;vertical-align:middle}.writeaid-ribbon .wa-icon svg{width:16px;height:16px;fill:currentColor;display:block}:root{--wa-slider-track-height: 6px;--wa-slider-thumb-size: 12px;--wa-slider-accent: var(--interactive-accent, #7c5cff);--wa-slider-background: var(--background-modifier-host, #eee);--wa-slider-gap: 12px}.wa-debounce-range{margin-left:var(--wa-slider-gap);vertical-align:middle;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:var(--wa-slider-track-height);background:linear-gradient(90deg,var(--wa-slider-accent) 0%,var(--wa-slider-accent) 50%,var(--wa-slider-background) 50%,var(--wa-slider-background) 100%);border-radius:999px;outline:none}.wa-debounce-range::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:var(--wa-slider-thumb-size);height:var(--wa-slider-thumb-size);border-radius:50%;background:var(--wa-slider-accent);box-shadow:0 0 0 4px #0000000d;cursor:pointer}.wa-debounce-range::-moz-range-thumb{width:var(--wa-slider-thumb-size);height:var(--wa-slider-thumb-size);border-radius:50%;background:var(--wa-slider-accent);cursor:pointer}.wa-unit{color:var(--text-muted, #666);margin-left:6px}.justify-between{justify-content:space-between}.wa-rename-info{margin-bottom:8px;color:var(--text-muted, #888);font-size:.95em}.wa-rename-label{display:block;font-weight:500;margin-bottom:4px;color:var(--text-normal, #222)}.wa-rename-input{width:100%;padding:7px 10px;font-size:1em;border:1px solid var(--background-modifier-border, #ccc);border-radius:5px;margin-bottom:10px;box-sizing:border-box;background:var(--background-primary, #fff);color:var(--text-normal, #222);transition:border .2s}.wa-rename-input:focus{border-color:var(--interactive-accent, #7c5cff);outline:none}.wa-rename-checkbox-label{display:flex;align-items:center;gap:6px;margin-bottom:10px;font-size:.97em;color:var(--text-muted, #666)}.wa-rename-btn-row{display:flex;gap:10px;margin-top:8px;justify-content:flex-end}.wa-rename-btn-row button{min-width:80px;padding:6px 14px;font-size:1em;border-radius:4px;border:none;cursor:pointer;transition:background .2s}.wa-rename-btn-row .mod-cta{background:var(--interactive-accent, #7c5cff);color:#fff;font-weight:600}.wa-rename-btn-row .mod-cta:hover{background:#5a3fd6}.wa-rename-btn-row .mod-cancel{background:var(--background-modifier-border, #eee);color:var(--text-muted, #666)}.wa-rename-btn-row .mod-cancel:hover{background:#e0e0e0}.wa-rename-error{min-height:18px;margin-bottom:4px;font-size:.97em;color:var(--color-red, #d43c3c);transition:opacity .2s}.wa-create-draft-input{width:100%;padding:8px 12px;font-size:1.05em;border:1.5px solid var(--background-modifier-border, #bbb);border-radius:6px;box-sizing:border-box;background:var(--background-primary, #fff);color:var(--text-normal, #222);transition:border .2s,box-shadow .2s;outline:none;box-shadow:0 1px 2px #3c3c3c0a}.wa-create-draft-input:focus{border-color:var(--interactive-accent, #7c5cff);box-shadow:0 2px 8px #7c5cff14;background:var(--background-secondary, #fafaff)}.wa-panel{background:var(--background-primary, #fff);color:var(--text-normal, #222);border-radius:8px}.wa-title{font-size:1.2em;font-weight:600;color:var(--text-title, var(--text-normal, #222))}.wa-muted{color:var(--text-faint, var(--text-muted, #888))}.wa-row{display:flex;flex-direction:row;align-items:center}.wa-button-group{display:flex;gap:8px}.wa-draft-list{background:var(--background-secondary, #f6f6f6);border-radius:6px;padding:8px 0;margin-top:8px}.wa-draft-item{display:flex;align-items:center;justify-content:space-between;padding:6px 14px;border-bottom:1px solid var(--background-modifier-border, #e0e0e0);background:transparent;color:var(--text-normal, #222);transition:background .15s}.wa-draft-item:last-child{border-bottom:none}.wa-draft-item.active{background:var(--background-modifier-active, #eaeaff)}.wa-draft-name{font-size:1em;font-weight:500;color:var(--text-normal, #222)}.wa-draft-actions{display:flex;gap:6px}.wa-panel .wa-select{--select-bg: var(--background-primary, #fff);--select-border: var(--background-modifier-border, #ccc);--select-border-focus: var(--interactive-accent, #7c5cff);--select-text: var(--text-normal, #222);--select-placeholder: var(--text-muted, #888);--select-dropdown-bg: var(--background-secondary, #f6f6f6);--select-dropdown-border: var(--background-modifier-border, #e0e0e0);--select-option-hover: var(--background-modifier-hover, #f0f0ff);--select-option-active: var(--background-modifier-active, #eaeaff);--select-chevron: var(--text-muted, #888)}.theme-dark .wa-panel .wa-select{--select-bg: var(--background-primary, #23232b);--select-border: var(--background-modifier-border, #333);--select-border-focus: var(--interactive-accent, #7c5cff);--select-text: var(--text-normal, #e0e0e0);--select-placeholder: var(--text-muted, #aaa);--select-dropdown-bg: var(--background-secondary, #23233a);--select-dropdown-border: var(--background-modifier-border, #333);--select-option-hover: var(--background-modifier-hover, #2a2a4a);--select-option-active: var(--background-modifier-active, #2a2a4a);--select-chevron: var(--text-muted, #aaa)}.wa-select{background:var(--select-bg);color:var(--select-text)}.wa-select:focus,.wa-select:focus-within{border-color:var(--select-border-focus)}.wa-select .select-placeholder{color:var(--select-placeholder)}.wa-select .select-dropdown{background:var(--select-dropdown-bg)}.wa-select .select-option{color:var(--select-text)}.wa-select .select-option:hover{background:var(--select-option-hover)}.wa-select .select-option[aria-selected=true],.wa-select .select-option.selected{background:var(--select-option-active)}.wa-select .select-chevron{color:var(--select-chevron)}.wa-select input[type=text]:focus{border-radius:0}.theme-dark .wa-panel{background:var(--background-primary, #23232b);color:var(--text-normal, #e0e0e0);border:1px solid var(--background-modifier-border, #333)}.theme-dark .wa-title{color:var(--text-title, var(--text-normal, #e0e0e0))}.theme-dark .wa-muted{color:var(--text-faint, var(--text-muted, #aaa))}.theme-dark .wa-draft-list{background:var(--background-secondary, #23233a)}.theme-dark .wa-draft-item{color:var(--text-normal, #e0e0e0);border-bottom:1px solid var(--background-modifier-border, #333)}.theme-dark .wa-draft-item.active{background:var(--background-modifier-active, #2a2a4a)}.theme-dark .wa-draft-name{color:var(--text-normal, #e0e0e0)}";function wb(t,e=20){return t.length<=e?t:t.substring(0,e-3)+"..."}const oE={draftOutlineTemplate:"# Outline for {{draftName}}",planningTemplate:`# Planning: {{projectName}}

- [ ] ...`,chapterTemplate:`# {{chapterTitle}}

`,manuscriptNameTemplate:"{{draftName}}",slugStyle:"compact",ribbonPlacement:"left",ribbonAlwaysShow:!1,autoOpenPanelOnStartup:!0,autoSelectProjectOnStartup:!0,activeProject:void 0,panelRefreshDebounceMs:250,debug:!1,includeDraftOutline:!1,draftsFolderName:"drafts",manuscriptsFolderName:"manuscripts",backupsFolderName:".writeaid-backups",metaFileName:"meta.md",outlineFileName:"outline.md"};function _b(t){return Object.assign({},oE,t??{})}class JB extends Z.Plugin{constructor(){super(...arguments),this.settings=oE,this.settingsChangedCallbacks=[]}async loadSettings(){const e=await this.loadData();this.settings=_b(e),e&&e.activeProject!==void 0&&(this.settings.activeProject=e.activeProject),this.manager&&(this.manager.settings=this.settings),this.settingsChangedCallbacks.forEach(r=>{try{r()}catch(i){console.error("Error in settings changed callback:",i)}})}async saveSettings(){await sr(async()=>{const r=_b(this.settings);await this.saveData(r),this.settings=r})===void 0&&await this.saveData(this.settings),this.manager&&(this.manager.settings=this.settings,we(`${be} Updated manager settings reference, manuscript template: ${this.settings.manuscriptNameTemplate}`)),this.settingsChangedCallbacks.forEach(r=>{try{r()}catch(i){console.error("Error in settings changed callback:",i)}})}registerSettingsChangedCallback(e){this.settingsChangedCallbacks.push(e)}async onload(){await this.loadSettings(),this.manager=new ZB(this.app,this,typeof this.settings.panelRefreshDebounceMs=="number"?this.settings.panelRefreshDebounceMs:void 0);const e=new Sm(this.app);this.app.workspace.onLayoutReady(async()=>{const n=await e.listProjects();let s=null;if(n.length===1)s=n[0];else if(n.length>1){const a=this.settings.activeProject,o=a==null?void 0:a.trim().replace(/^\/+/,"").replace(/\/+$/,"");we(`${be} lastActiveRaw='${a}', normalized='${o}', includes=${o&&n.includes(o)}`),o&&n.includes(o)?s=o:s=n[0]}else if(n.length===0){const a=this.settings.activeProject,o=a==null?void 0:a.trim().replace(/^\/+/,"").replace(/\/+$/,"");await e.isProjectFolder(a||"")&&(we(`${be} activating saved project '${o}' as it exists and has valid meta.md`),s=o??null)}if(we(`${be} toActivate='${s}'`),s){if(await this.manager.setActiveProject(s),this.settings.activeProject=s,await this.saveSettings(),this.settings.autoOpenPanelOnStartup){const a=this.app.workspace.getLeavesOfType(hs);if(a.length>0)this.app.workspace.revealLeaf(a[0]);else{let o=null;this.settings.ribbonPlacement==="right"?o=this.app.workspace.getRightLeaf(!0):o=this.app.workspace.getLeftLeaf(!0);const l={type:hs,active:!0};o.setViewState(l),this.app.workspace.revealLeaf(o)}}}else await this.manager.setActiveProject(null),this.settings.activeProject=void 0,await this.saveSettings()}),this.statusBarEl=this.addStatusBarItem(),this.statusBarEl.setText(`${ft}: No active project`),pt(()=>{this.waStyleEl||(this.waStyleEl=document.createElement("style"),this.waStyleEl.setAttribute("data-writeaid-style",""),this.waStyleEl.textContent=XB,this.waStyleEl.classList.add("writeaid-plugin-style"),document.head.appendChild(this.waStyleEl))}),await this.loadSettings(),pt(()=>{window.__WRITEAID_DEBUG__=!!this.settings.debug}),we(`${be} Loading ${ft} Novel Multi-Draft Plugin`),this.manager.addActiveProjectListener(n=>{this.statusBarEl&&(n?(this.statusBarEl.setText(`${ft}: ${wb(n)}`),we(`${be} active project updated -> ${n}`)):this.statusBarEl.setText(`${ft}: No active project`))}),this.manager.activeProject&&this.statusBarEl.setText(`${ft}: ${wb(this.manager.activeProject)}`),this.registerView(hs,n=>new zB(n,this.app));const r=this.addRibbonIcon(MS,`${ft} Projects`,()=>{});r.classList.add("writeaid-ribbon"),this.ribbonEl=r,r.setAttr("aria-label",`${ft} Projects`),r.onclick=()=>{const n=this.app.workspace.getLeavesOfType(hs);if(n.length>0){const s=n[0];this.app.workspace.revealLeaf(s)}else{let s=this.app.workspace.getLeftLeaf(!1);s||(s=this.app.workspace.getLeftLeaf(!0));const a={type:hs,active:!0};s.setViewState(a),this.app.workspace.revealLeaf(s)}};const i=async()=>{await sr(async()=>{if(this.settings.ribbonAlwaysShow){r.style.display="";return}const s=e.listAllFolders();(await go(s,o=>e.isProjectFolder(o))).length>0?r.style.display="":r.style.display="none"})===void 0&&(r.style.display="")};this.refreshRibbonVisibility=i,i().catch(()=>{}),this.settings.ribbonPlacement==="right"&&this.moveRibbon("right"),this.registerEvent(this.app.vault.on("create",()=>{i().catch(()=>{})})),this.registerEvent(this.app.vault.on("delete",()=>{i().catch(()=>{})})),this.registerEvent(this.app.vault.on("modify",()=>{i().catch(()=>{})})),this.addCommand({id:"create-new-draft",name:"Create New Draft",callback:UE(this.manager)}),this.addCommand({id:"create-new-project",name:"Create New Project",callback:zE(this.manager)}),this.addCommand({id:"switch-draft",name:"Switch Active Draft",callback:YE(this.manager)}),this.addCommand({id:"update-project-metadata",name:"Update Project Metadata",callback:HB(this.manager)}),this.addCommand({id:"select-active-project",name:"Select Active Project",callback:qE(this.manager)}),this.addCommand({id:"generate-manuscript",name:"Generate Manuscript",callback:GE(this.manager)}),this.addCommand({id:"toggle-project-panel",name:`Toggle ${ft} Project Panel`,callback:GB(this.manager,this.app)}),this.addCommand({id:"convert-single-to-multi-file-project",name:"Convert Single-File Project to Multi-File",callback:()=>{var n,s;return WE(this.app,this.manager.activeProject||((s=(n=this.manager).getCurrentProjectPath)==null?void 0:s.call(n))||void 0,this.manager.settings)}}),this.addCommand({id:"navigate-to-next-chapter",name:"Navigate to Next Chapter",callback:HE(this.manager)}),this.addCommand({id:"navigate-to-previous-chapter",name:"Navigate to Previous Chapter",callback:VE(this.manager)}),this.addSettingTab(new QB(this.app,this))}moveRibbon(e){pt(()=>{if(!this.ribbonEl)return;const r=this.app.workspace.containerEl.querySelector(".workspace-ribbon.mod-right"),i=this.app.workspace.containerEl.querySelector(".workspace-ribbon.mod-left");e==="right"&&r?r.appendChild(this.ribbonEl):e==="left"&&i&&i.appendChild(this.ribbonEl)})}onunload(){this.statusBarEl&&this.statusBarEl.parentElement&&this.statusBarEl.parentElement.removeChild(this.statusBarEl),we(`${be} Unloading ${ft} Novel Multi-Draft Plugin`),this.waStyleEl&&this.waStyleEl.parentElement&&this.waStyleEl.parentElement.removeChild(this.waStyleEl)}}module.exports=JB;
